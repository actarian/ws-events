{"version":3,"sources":["src/js/main.js","../../src/js/app.component.js","../../src/js/environment/environment.js","../../src/js/http/http.service.js","../../src/js/api/api.service.js","../../src/js/local-storage/local-storage.service.js","../../src/js/favourite/favourite.service.js","../../src/js/user/user.service.js","../../src/js/question/question.service.js","../../src/js/event/fake-filters.js","../../src/js/event/event.service.js","../../src/js/channel/channel.service.js","../../src/js/location/location.service.js","../../src/js/page/page.component.js","../../src/js/aside/aside.component.js","../../src/js/filter/filter-item.js","../../src/js/filter/filter.service.js","../../src/js/channel/channel-page.component.js","../../src/js/channel/channel.component.js","../../src/js/click-outside/click-outside.directive.js","../../src/js/count/count.pipe.js","../../src/js/locale/locale.service.js","../../src/js/date/date-time.service.js","../../src/js/date/date.pipe.js","../../src/js/dropdown/dropdown.directive.js","../../src/js/dropdown/dropdown-item.directive.js","../../src/js/event/event-date.component.js","../../src/js/event/event-page.component.js","../../src/js/event/event.component.js","../../src/js/favourite/favourite-page.component.js","../../src/js/forms/control.component.js","../../src/js/forms/errors.component.js","../../src/js/css/css.service.js","../../src/js/notification/notification.service.js","../../src/js/header/header.component.js","../../src/js/html/html.pipe.js","../../src/js/index/index-page.component.js","../../src/js/image/image.service.js","../../src/js/intersection/intersection.service.js","../../src/js/lazy/lazy.cache.js","../../src/js/lazy/lazy.directive.js","../../src/js/modal/modal.service.js","../../src/js/modal/modal-outlet.component.js","../../src/js/modal/modal.component.js","../../src/js/notification/notification.component.js","../../src/js/register-or-login/register-or-login.component.js","../../node_modules/tiny-relative-date/src/factory.js","../../node_modules/tiny-relative-date/translations/en.js","../../node_modules/tiny-relative-date/src/index.js","../../node_modules/tiny-relative-date/lib/factory.js","../../src/js/relative-date/relative-date.pipe.js","../../src/js/relative-date/relative-date.component.js","../../src/js/scroll-to/scroll-to.directive.js","../../src/js/download/download.service.js","../../src/js/secure/secure.directive.js","../../src/js/slug/slug.pipe.js","../../src/js/swiper/swiper.directive.js","../../src/js/swiper/swiper-events.directive.js","../../src/js/swiper/swiper-related.directive.js","../../src/js/swiper/swiper-slides.directive.js","../../src/js/swiper/swiper-top-events.directive.js","../../src/js/thron/thron.component.js","../../src/js/gtm/gtm.service.js","../../src/js/video/video.component.js","../../src/js/virtual/virtual.item.js","../../src/js/virtual/virtual.structure.js","../../src/js/youtube/youtube.component.js","../../src/js/app.module.js","../../src/js/main.js"],"names":["global","factory","exports","module","require","define","amd","self","rxcomp","form","rxjs","operators","Swiper","this","rxcompForm","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_inheritsLoose","subClass","superClass","create","constructor","__proto__","hasOwnProperty","call","AppComponent","_Component","apply","arguments","_proto","onInit","getContext","node","classList","remove","asideActive","onAsideToggle","$event","add","onNotificationToggle","Component","meta","selector","STATIC","window","location","port","host","DEVELOPMENT","indexOf","split","ENV","NAME","PRODUCTION","RESOURCE","STATIC_RESOURCE","API","STATIC_API","getApiUrl","url","useStatic","HttpResponse","response","data","status","statusText","ok","redirected","get","ApiService","_HttpService","get$","format","delete$","post$","put$","patch$","staticGet$","staticDelete$","staticPost$","staticPut$","staticPatch$","HttpService","http$","method","_this","response_","from","fetch","headers","Accept","Content-Type","body","JSON","stringify","undefined","then","json","Promise","resolve","reject","pipe","catchError","error","throwError","getError","query","object","statusCode","statusMessage","console","log","LocalStorageService","delete","name","isLocalStorageSupported","localStorage","removeItem","exist","value","parse","e","set","cache","push","setItem","supported","subscriptions$_","BehaviorSubject","likes$_","favourites$_","FavouriteService","getCurrentSubscriptions","getValue","getCurrentLikes","getCurrentFavourites","subscriptions$","map","static","subscriptions","EventService","fakeSaved","switchMap","next","likes$","likes","favourites$","favourites","subscriptionAdd$","id","find","x","unshift","subscriptionRemove$","item","index","splice","likeAdd$","likeRemove$","favouriteAdd$","favouriteRemove$","shareReplay","User","assign","firstName","substr","toUpperCase","lastName","UserService","getCurrentUser","user$_","setUser","user","me$","mapUser","of","register$","payload","_this2","mapStatic__","login$","_this3","logout$","_this4","retrieve$","_this5","update$","_this6","isStatic","action","fake","mapUsers","users","Question","creationDate","Date","QuestionService","mapQuestion","question","mapQuestions","questions","now","setSeconds","getSeconds","setMinutes","getMinutes","setHours","getHours","setDate","getDate","Math","floor","random","FAKE_FILTERS","label","options","Event","info","startDate","started","endDate","ended","related","mapEvents","diff","hoursDiff","detail$","eventId","tap","parseInt","mapEvent","listing$","mapListing","filter$","top$","upcoming$","subscribe$","unsubscribe$","like$","unlike$","postQuestion$","event","events","items","fakeListing","letters","channelId","channel","channelIndex","subscribers","media","src","type","getTime","subscription","subscribed","like","liked","favourite","saved","features","forEach","filter","live","incoming","past","channel_","info_","image_","width","height","category_","event_","title","abstract","picture","picture_","category","product_","magazine_","Array","fill","categoryId","Channel","ChannelService","channels$","mapChannels","mapChannel","channels","LocationService","URLSearchParams","search","keyOrValue","params","replace","history","pushState","document","href","toString","deserialize","encoded","decode","serialize","encode","decoded","atob","btoa","PageComponent","AsideComponent","_PageComponent","load$","first","subscribe","pushChanges","combineLatest","FilterMode","FilterItem","change$","mode","placeholder","values","match","getSelectedOption","has","getLabel","selectedOption","toggle","toggleActive","active","FilterService","initialParams","callback","filters","keys","getParamsCount","reduce","p","c","locationParams","any","items$","changes","updateFilterStates","merge","auditTime","filterItems","skipFilter","initialCount","filteredItems","option","count","disabled","sort","a","b","ChannelPageComponent","grid","gutter","listing","secondaryFiltersVisible","secondaryFilters","activeFilters","setFilters","startFilter","filterObject","filterService","tags","takeUntil","setTimeout","f","o","toggleGrid","toggleFilters","ChannelComponent","toggleSubscribe","flag","toggleLike","inputs","ClickOutsideDirective","_Directive","initialFocus","_getContext","parentInstance","event$","fromEvent","contains","expression","getAttribute","outputFunction","makeFunction","clickOutside$","Directive","CountPipe","_Pipe","isNumber","isFinite","transform","Pipe","LocaleType","LocaleStyle","LocaleLength","LocaleDay","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","LocaleMonth","January","February","March","April","May","June","July","August","September","October","November","December","LocaleDayPeriod","LocaleEra","LocaleNumberSymbol","LocaleService","getLocale","locale","defaultLocale","slice","join","getObjectLocale","toLocaleString","out","_len","args","_key","concat","toLocaleObject","dateFormats","short","medium","long","full","timeFormats","dayPeriods","narrow","am","pm","abbreviated","wide","days","sunday","monday","tuesday","wednesday","thursday","friday","saturday","months","january","february","march","april","may","june","july","august","september","october","november","december","eras","bc","ad","numberSymbols","decimal","group","list","percentSign","plusSign","minusSign","exponential","superscriptingExponent","perMille","infinite","nan","timeSeparator","TimezoneLength","DatePart","padNumber","num","digits","trim","negWrap","neg","strNum","String","FORMAT_SPLITTER_REGEX","DateTimeService","getDatePart","part","date","getFullYear","getMonth","getDay","getMilliseconds","Error","formatMilliseconds","milliseconds","getDateFormatter","offset","localeMinus","getDateTranslation","extended","currentHours","getDateLocaleFormatter","getWeekFirstThursdayOfYear","year","firstDayOfYear","THURSDAY","getWeekThursday","datetime","getWeekFormatter","monthBased","result","nbDaysBefore1stDayOfMonth","today","firstThurs","round","getTimezoneFormatter","zone","hours","ceil","abs","getFormatter","formatter","FormStyle","Standalone","Format","setTimezoneOffset","timezone","fallback","requestedTimezoneOffset","isNaN","dateTimezoneToLocal","reverse","reverseValue","dateTimezoneOffset","getTimezoneOffset","minutes","parseDate","getNamedFormat","formatValue","formatDate","formats","exec","pop","text","DatePipe","DROPDOWN_ID","DropdownDirective","trigger","querySelector","opened","onClick","bind","onDocumentClick","openDropdown","closeDropdown","addListeners","dropdown$","addDocumentListeners","dropped","removeDocumentListeners","addEventListener","removeListeners","removeEventListener","onDestroy","nextId","dropdown","id_","outputs","DropdownItemDirective","EventDateMode","to10","EventDateComponent","getMode","mode_","eventDate","countdown","live$","Subject","interval","startWith","hh","MINUTE","mm","SECOND","ss","change","EventPageComponent","inputActive","FormGroup","FormControl","Validators","RequiredValidator","checkRequest","antiforgery","checkField","changes$","onChange","toggleSave","onInputFocus","inputFocus","onInputBlur","postQuestion","_this7","valid","submitted","controls","touched","EventComponent","ViewModes","FavouritePageComponent","savedItems","likedItems","viewMode_","viewMode","ControlComponent","onChanges","flags","control","ErrorsComponent","_ControlComponent","labels","template","CssService","height$","style","documentElement","innerHeight","vh","setProperty","notifications$_","NotificationService","getCurrentNotifications","notifications$","HeaderComponent","notifications","toggleAside","aside_","aside","dismissAside","toggleNotification","notification_","notification","dismissNotification","onDropped","submenu","HtmlPipe","m","n","fromCharCode","unescapes","rx","RegExp","IndexPageComponent","topEvents","topChannels","upcomingEvents","UID","ImageService","worker","worker_","Worker","isBlob","postMessage","URL","createObjectURL","blob","finalize","revokeObjectURL","isCors","IntersectionService","observer","observer_","readySubject_","observerSubject_","IntersectionObserver","entries","intersection$","observe","entry","unobserve","isIntersecting","firstIntersection$","LazyCache","cache_","LazyDirective","input$","distinctUntilChanged","input","lazy$","lazy","setAttribute","ModalEvent","ModalResolveEvent","_ModalEvent","ModalRejectEvent","_ModalEvent2","ModalService","open$","modal","getTemplate$","getNode","modal$","events$","div","createElement","innerHTML","firstElementChild","ModalOutletComponent","modalNode","onRegister","onLogin","modal_","removeChild","appendChild","compile","ModalComponent","close","NotificationComponent","RegisterOrLoginComponent","preventDefault","view","calculateDelta","translations","relativeDate","justNow","secondsAgo","aMinuteAgo","minutesAgo","anHourAgo","hoursAgo","aDayAgo","daysAgo","aWeekAgo","weeksAgo","aMonthAgo","monthsAgo","aYearAgo","yearsAgo","overAYearAgo","secondsFromNow","aMinuteFromNow","minutesFromNow","anHourFromNow","hoursFromNow","aDayFromNow","daysFromNow","aWeekFromNow","weeksFromNow","aMonthFromNow","monthsFromNow","aYearFromNow","yearsFromNow","overAYearFromNow","delta","day","hour","translate","translatePhrase","timeValue","translation","minute","fn","createCommonjsModule","default","week","month","relativeDateFactory$1","__esModule","RELATIVE_DATE_KEYS","RelativeDatePipe","setLocale","relativeDateFactory","RelativeDateDirective","text_","innerText","ScrollToDirective","scrollTo$","_getContext2","currentTop","to","getBoundingClientRect","top","pow","html","gsap","scroll-behavior","ease","Quad","easeOut","overwrite","onUpdate","scrollTo","onComplete","pageYOffset","scrollTop","DownloadService","download","fileName","click","a_","SecureDirective","tryDownloadHref","SlugPipe","SwiperDirective","rxcompId","slidesPerView","spaceBetween","centeredSlides","speed","autoplay","delay","keyboardControl","mousewheelControl","pagination","el","clickable","navigation","nextEl","prevEl","keyboard","enabled","onlyInViewport","init_","onView","swiperInitOrUpdate_","removeListeners_","swiperDestroy_","onBeforePrint","slideToIndex","swiper","slideTo","opacity","on","slideChange","activeIndex","addListeners_","update","init","swiperDirectiveInit","Power2","element","scope","_opening","destroy","openMore","more","matchMedia","matches","SwiperEventsDirective","_SwiperDirective","breakpoints","1024","1440","loopAdditionalSlides","SwiperRelatedDirective","loop","SwiperSlidesDirective","SwiperTopEventsDirective","768","1920","2440","ThronComponent","THRON","THRONContentExperience","THRONPlayer","registerSkin","thron","splitted","hasAttribute","player","muted","displayLinked","noSkin","preloadColor","waveColor","waveProgressColor","onBeforeInit","onReady","onCanPlay","onPlaying","playerInstance","removedElements","schema","THRONSchemaHelper","getSchema","existsElements","removeElementsById","getElementsById","coordinates","bars","mediaContainer","ready","canPlay","off","qualities","qualityLevels","highestQuality","currentQuality","complete","play","playing","pause","wseThronPlugin","dom","otherparams","jquery","$","plugin","GtmService","dataLayer","push_","VideoComponent","video","progress","onPlay","onPause","onEnded","onTimeUpdate","togglePlay","paused","video_name","strokeDashoffset","currentTime","duration","playing_","VirtualItem","$key","$value","_Context","even","Context","VirtualMode","VirtualStructure","_Structure","removeAttribute","tokens","getExpressionTokens","virtualFunction","iterable","container","containerWidth","containerHeight","cols","strategy","cachedRects","cachedInstances","cacheNodes","visibleItems","context","updateView","scroll$","resize$","datas","total","position","highestHeight","getWidth","getGutter","col","left","bottom","rect","getCol","getHeight","intersect","getLeft","cachedNode","offsetHeight","max","removeNode","removeIndex","getCols","updateNode","createNode","clonedNode","cloneNode","instance","makeInstance","forItemContext","parentNode","top1","bottom1","top2","bottom2","reset","expressions","virtualExpressions","keyValueMatches","indexExpressions","Structure","YoutubeComponent","MOBILE","onPlayerReady","onPlayerStateChange","onPlayerError","id$","youtubeId","initPlayer","player$","interval$","once$","youtube","destroyPlayer","Player","offsetWidth","videoId","playerVars","disablekb","enablejsapi","fs","modestbranding","playsinline","rel","showinfo","iv_load_policy","listType","onStateChange","mute","playVideo","getCurrentTime","getDuration","stopVideo","youtube$","onYouTubeIframeAPIReady","onYouTubeIframeAPIReady_","script","scripts","querySelectorAll","last","insertBefore","YT","mobilecheck","check","navigator","userAgent","vendor","opera","test","mobileAndTabletcheck","AppModule","_Module","Module","imports","CoreModule","FormModule","declarations","bootstrap","Browser"],"mappings":"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","file":"docs\\js\\main.min.js","sourcesContent":[null,"import { Component, getContext } from 'rxcomp';\r\n\r\nexport default class AppComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('wse__hidden');\r\n\t\tthis.asideActive = false;\r\n\t}\r\n\r\n\t// onView() { const context = getContext(this); }\r\n\r\n\t// onChanges() {}\r\n\r\n\t// onDestroy() {}\r\n\r\n\tonAsideToggle($event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tif ($event) {\r\n\t\t\tnode.classList.add('wse__aside--active');\r\n\t\t\tnode.classList.remove('wse__notification--active');\r\n\t\t} else {\r\n\t\t\tnode.classList.remove('wse__aside--active');\r\n\t\t}\r\n\t\t/*\r\n\t\tthis.asideActive = $event;\r\n\t\tthis.pushChanges();\r\n\t\t*/\r\n\t}\r\n\r\n\tonNotificationToggle($event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tif ($event) {\r\n\t\t\tnode.classList.add('wse__notification--active');\r\n\t\t\tnode.classList.remove('wse__aside--active');\r\n\t\t} else {\r\n\t\t\tnode.classList.remove('wse__notification--active');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nAppComponent.meta = {\r\n\tselector: '[app-component]',\r\n};\r\n","export const STATIC = window.location.port === '40333' || window.location.host === 'actarian.github.io';\r\nexport const DEVELOPMENT = ['localhost', '127.0.0.1', '0.0.0.0'].indexOf(window.location.host.split(':')[0]) !== -1;\r\nexport const PRODUCTION = !DEVELOPMENT;\r\nexport const ENV = {\r\n\tNAME: 'ws-events',\r\n\tSTATIC,\r\n\tDEVELOPMENT,\r\n\tPRODUCTION,\r\n\tRESOURCE: '/Modules/Events/Client/docs/',\r\n\tSTATIC_RESOURCE: './',\r\n\tAPI: '/api',\r\n\tSTATIC_API: (DEVELOPMENT && !STATIC) ? '/Modules/Events/Client/docs/api' : './api',\r\n};\r\nexport function getApiUrl(url, useStatic) {\r\n\tconst base = (useStatic || STATIC) ? ENV.STATIC_API : ENV.API;\r\n\tconst json = (useStatic || STATIC) ? '.json' : '';\r\n\treturn `${base}${url}${json}`;\r\n}\r\nexport function getResourceRoot() {\r\n\treturn STATIC ? ENV.STATIC_RESOURCE : ENV.RESOURCE;\r\n}\r\nexport function getSlug(url) {\r\n\tif (!url) {\r\n\t\treturn url;\r\n\t}\r\n\tif (url.indexOf(`/${ENV.NAME}`) !== 0) {\r\n\t\treturn url;\r\n\t}\r\n\tif (STATIC) {\r\n\t\tconsole.log(url);\r\n\t\treturn url;\r\n\t}\r\n\turl = url.replace(`/${ENV.NAME}`, '');\r\n\turl = url.replace('.html', '');\r\n\treturn `/it/it${url}`;\r\n}\r\n","import { from, throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\n\r\nexport class HttpResponse {\r\n\r\n\tget static() {\r\n\t\treturn this.url.indexOf('.json') === this.url.length - 5;\r\n\t}\r\n\r\n\tconstructor(response) {\r\n\t\tthis.data = null;\r\n\t\tif (response) {\r\n\t\t\tthis.url = response.url;\r\n\t\t\tthis.status = response.status;\r\n\t\t\tthis.statusText = response.statusText;\r\n\t\t\tthis.ok = response.ok;\r\n\t\t\tthis.redirected = response.redirected;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default class HttpService {\r\n\r\n\tstatic http$(method, url, data, format = 'json') {\r\n\t\tmethod = url.indexOf('.json') ? 'GET' : method;\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tlet response_ = null;\r\n\t\treturn from(fetch(url, {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: methods.indexOf(method) !== -1 ? JSON.stringify(data) : undefined\r\n\t\t}).then((response) => {\r\n\t\t\tresponse_ = new HttpResponse(response);\r\n\t\t\treturn response[format]().then(json => {\r\n\t\t\t\tresponse_.data = json;\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\treturn Promise.resolve(response_);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(response_);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t/*\r\n\t\t\tif (response.ok) {\r\n\t\t\t\treturn response[format]();\r\n\t\t\t} else {\r\n\t\t\t\treturn response.json().then(json => {\r\n\t\t\t\t\treturn Promise.reject(json);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\tconst query = this.query(data);\r\n\t\treturn this.http$('GET', `${url}${query}`, undefined, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn this.http$('DELETE', url);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn this.http$('POST', url, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn this.http$('PUT', url, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn this.http$('PATCH', url, data);\r\n\t}\r\n\r\n\tstatic query(data) {\r\n\t\treturn ''; // todo\r\n\t}\r\n\r\n\tstatic getError(object, response) {\r\n\t\tlet error = typeof object === 'object' ? object : {};\r\n\t\tif (!error.statusCode) {\r\n\t\t\terror.statusCode = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusMessage) {\r\n\t\t\terror.statusMessage = response ? response.statusText : object;\r\n\t\t}\r\n\t\tconsole.log('HttpService.getError', error, object);\r\n\t\treturn error;\r\n\t}\r\n\r\n}\r\n","import { getApiUrl } from '../environment/environment';\r\nimport HttpService from '../http/http.service';\r\n\r\nexport default class ApiService extends HttpService {\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\treturn super.get$(getApiUrl(url), data, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn super.delete$(getApiUrl(url));\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn super.post$(getApiUrl(url), data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn super.put$(getApiUrl(url), data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn super.patch$(getApiUrl(url), data);\r\n\t}\r\n\r\n\tstatic staticGet$(url, data, format) {\r\n\t\treturn super.get$(getApiUrl(url, true), data, format);\r\n\t}\r\n\r\n\tstatic staticDelete$(url) {\r\n\t\treturn super.delete$(getApiUrl(url, true));\r\n\t}\r\n\r\n\tstatic staticPost$(url, data) {\r\n\t\treturn super.post$(getApiUrl(url, true), data);\r\n\t}\r\n\r\n\tstatic staticPut$(url, data) {\r\n\t\treturn super.put$(getApiUrl(url, true), data);\r\n\t}\r\n\r\n\tstatic staticPatch$(url, data) {\r\n\t\treturn super.patch$(getApiUrl(url, true), data);\r\n\t}\r\n\r\n}\r\n","export default class LocalStorageService {\r\n\r\n\tstatic delete(name) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\twindow.localStorage.removeItem(name);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic exist(name) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\treturn window.localStorage[name] !== undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic get(name) {\r\n\t\tlet value = null;\r\n\t\tif (this.isLocalStorageSupported() && window.localStorage[name] !== undefined) {\r\n\t\t\ttry {\r\n\t\t\t\tvalue = JSON.parse(window.localStorage[name]);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('LocalStorageService.get.error parsing', name, e);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tstatic set(name, value) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\ttry {\r\n\t\t\t\tconst cache = [];\r\n\t\t\t\tconst json = JSON.stringify(value, function(key, value) {\r\n\t\t\t\t\tif (typeof value === 'object' && value !== null) {\r\n\t\t\t\t\t\tif (cache.indexOf(value) !== -1) {\r\n\t\t\t\t\t\t\t// Circular reference found, discard key\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcache.push(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t});\r\n\t\t\t\twindow.localStorage.setItem(name, json);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('LocalStorageService.set.error serializing', name, value, e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic isLocalStorageSupported() {\r\n\t\tif (this.supported) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tlet supported = false;\r\n\t\ttry {\r\n\t\t\tsupported = 'localStorage' in window && window.localStorage !== null;\r\n\t\t\tif (supported) {\r\n\t\t\t\twindow.localStorage.setItem('test', '1');\r\n\t\t\t\twindow.localStorage.removeItem('test');\r\n\t\t\t} else {\r\n\t\t\t\tsupported = false;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tsupported = false;\r\n\t\t}\r\n\t\tthis.supported = supported;\r\n\t\treturn supported;\r\n\t}\r\n\r\n}\r\n","import { BehaviorSubject } from 'rxjs';\nimport { map, shareReplay, switchMap } from 'rxjs/operators';\nimport ApiService from '../api/api.service';\nimport EventService from '../event/event.service';\nimport LocalStorageService from '../local-storage/local-storage.service';\n\nconst subscriptions$_ = new BehaviorSubject([]);\nconst likes$_ = new BehaviorSubject([]);\nconst favourites$_ = new BehaviorSubject([]);\n\nexport default class FavouriteService {\n\n\tstatic getCurrentSubscriptions() {\n\t\treturn subscriptions$_.getValue();\n\t}\n\n\tstatic getCurrentLikes() {\n\t\treturn likes$_.getValue();\n\t}\n\n\tstatic getCurrentFavourites() {\n\t\treturn favourites$_.getValue();\n\t}\n\n\tstatic subscriptions$() {\n\t\treturn ApiService.staticGet$(`/user/subscription`).pipe(\n\t\t\tmap(response => {\n\t\t\t\tif (response.static) {\n\t\t\t\t\tconst subscriptions = LocalStorageService.get('subscriptions') || [];\n\t\t\t\t\treturn EventService.fakeSaved(subscriptions);\n\t\t\t\t} else {\n\t\t\t\t\treturn response.data;\n\t\t\t\t}\n\t\t\t}),\n\t\t\tswitchMap(subscriptions => {\n\t\t\t\tsubscriptions$_.next(subscriptions);\n\t\t\t\treturn subscriptions$_;\n\t\t\t})\n\t\t);\n\t}\n\n\tstatic likes$() {\n\t\treturn ApiService.staticGet$(`/user/like`).pipe(\n\t\t\tmap(response => {\n\t\t\t\tif (response.static) {\n\t\t\t\t\tconst likes = LocalStorageService.get('likes') || [];\n\t\t\t\t\treturn EventService.fakeSaved(likes);\n\t\t\t\t} else {\n\t\t\t\t\treturn response.data;\n\t\t\t\t}\n\t\t\t}),\n\t\t\tswitchMap(likes => {\n\t\t\t\tlikes$_.next(likes);\n\t\t\t\treturn likes$_;\n\t\t\t})\n\t\t);\n\t}\n\n\tstatic favourites$() {\n\t\treturn ApiService.staticGet$(`/user/favourite`).pipe(\n\t\t\tmap(response => {\n\t\t\t\tif (response.static) {\n\t\t\t\t\tconst favourites = LocalStorageService.get('favourites') || [];\n\t\t\t\t\treturn EventService.fakeSaved(favourites);\n\t\t\t\t} else {\n\t\t\t\t\treturn response.data;\n\t\t\t\t}\n\t\t\t}),\n\t\t\tswitchMap(favourites => {\n\t\t\t\tfavourites$_.next(favourites);\n\t\t\t\treturn favourites$_;\n\t\t\t})\n\t\t);\n\t}\n\n\tstatic subscriptionAdd$(id) {\n\t\treturn ApiService.staticPost$(`/user/subscription/add`, { id }).pipe(\n\t\t\tmap(response => {\n\t\t\t\tif (response.static) {\n\t\t\t\t\tconst subscriptions = LocalStorageService.get('subscriptions') || [];\n\t\t\t\t\tconst item = subscriptions.find(x => x.id === id);\n\t\t\t\t\tif (!item) {\n\t\t\t\t\t\tsubscriptions.unshift({ id });\n\t\t\t\t\t}\n\t\t\t\t\tsubscriptions$_.next(subscriptions);\n\t\t\t\t\tLocalStorageService.set('subscriptions', subscriptions);\n\t\t\t\t}\n\t\t\t\treturn response.data;\n\t\t\t}),\n\t\t);\n\t}\n\n\tstatic subscriptionRemove$(id) {\n\t\treturn ApiService.staticPost$(`/user/subscription/remove`, { id }).pipe(\n\t\t\tmap(response => {\n\t\t\t\tif (response.static) {\n\t\t\t\t\tconst subscriptions = LocalStorageService.get('subscriptions') || [];\n\t\t\t\t\tconst item = subscriptions.find(x => x.id === id);\n\t\t\t\t\tconst index = item ? subscriptions.indexOf(item) : -1;\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\tsubscriptions.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t\tsubscriptions$_.next(subscriptions);\n\t\t\t\t\tLocalStorageService.set('subscriptions', subscriptions);\n\t\t\t\t}\n\t\t\t\treturn response.data;\n\t\t\t}),\n\t\t);\n\t}\n\n\tstatic likeAdd$(id) {\n\t\treturn ApiService.staticPost$(`/user/like/add`, { id }).pipe(\n\t\t\tmap(response => {\n\t\t\t\tif (response.static) {\n\t\t\t\t\tconst likes = LocalStorageService.get('likes') || [];\n\t\t\t\t\tconst item = likes.find(x => x.id === id);\n\t\t\t\t\tif (!item) {\n\t\t\t\t\t\tlikes.unshift({ id });\n\t\t\t\t\t}\n\t\t\t\t\tlikes$_.next(likes);\n\t\t\t\t\tLocalStorageService.set('likes', likes);\n\t\t\t\t}\n\t\t\t\treturn response.data;\n\t\t\t}),\n\t\t);\n\t}\n\n\tstatic likeRemove$(id) {\n\t\treturn ApiService.staticPost$(`/user/like/remove`, { id }).pipe(\n\t\t\tmap(response => {\n\t\t\t\tif (response.static) {\n\t\t\t\t\tconst likes = LocalStorageService.get('likes') || [];\n\t\t\t\t\tconst item = likes.find(x => x.id === id);\n\t\t\t\t\tconst index = item ? likes.indexOf(item) : -1;\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\tlikes.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t\tlikes$_.next(likes);\n\t\t\t\t\tLocalStorageService.set('likes', likes);\n\t\t\t\t}\n\t\t\t\treturn response.data;\n\t\t\t}),\n\t\t);\n\t}\n\n\tstatic favouriteAdd$(id) {\n\t\treturn ApiService.staticPost$(`/user/favourite/add`, { id }).pipe(\n\t\t\tmap(response => {\n\t\t\t\tif (response.static) {\n\t\t\t\t\tconst favourites = LocalStorageService.get('favourites') || [];\n\t\t\t\t\tconst item = favourites.find(x => x.id === id);\n\t\t\t\t\tif (!item) {\n\t\t\t\t\t\tfavourites.unshift({ id });\n\t\t\t\t\t}\n\t\t\t\t\tfavourites$_.next(favourites);\n\t\t\t\t\tLocalStorageService.set('favourites', favourites);\n\t\t\t\t}\n\t\t\t\treturn response.data;\n\t\t\t}),\n\t\t);\n\t}\n\n\tstatic favouriteRemove$(id) {\n\t\treturn ApiService.staticPost$(`/user/favourite/remove`, { id }).pipe(\n\t\t\tmap(response => {\n\t\t\t\tif (response.static) {\n\t\t\t\t\tconst favourites = LocalStorageService.get('favourites') || [];\n\t\t\t\t\tconst item = favourites.find(x => x.id === id);\n\t\t\t\t\tconst index = item ? favourites.indexOf(item) : -1;\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\tfavourites.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t\tfavourites$_.next(favourites);\n\t\t\t\t\tLocalStorageService.set('favourites', favourites);\n\t\t\t\t}\n\t\t\t\treturn response.data;\n\t\t\t}),\n\t\t);\n\t}\n\n}\n\nFavouriteService.subscriptions$ = FavouriteService.subscriptions$().pipe(shareReplay(1));\nFavouriteService.likes$ = FavouriteService.likes$().pipe(shareReplay(1));\nFavouriteService.favourites$ = FavouriteService.favourites$().pipe(shareReplay(1));\n","import { BehaviorSubject, of } from 'rxjs';\r\nimport { catchError, map, switchMap } from 'rxjs/operators';\r\nimport ApiService from '../api/api.service';\r\nimport LocalStorageService from '../local-storage/local-storage.service';\r\n\r\nexport class User {\r\n\r\n\tget avatar() {\r\n\t\treturn (this.firstName || '?').substr(0, 1).toUpperCase() + (this.lastName || '?').substr(0, 1).toUpperCase();\r\n\t}\r\n\r\n\tget fullName() {\r\n\t\treturn this.firstName + ' ' + this.lastName;\r\n\t}\r\n\r\n\tconstructor(data) {\r\n\t\tif (data) {\r\n\t\t\tObject.assign(this, data);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport default class UserService {\r\n\r\n\tstatic getCurrentUser() {\r\n\t\treturn this.user$_.getValue();\r\n\t}\r\n\r\n\tstatic setUser(user) {\r\n\t\tthis.user$_.next(user);\r\n\t}\r\n\r\n\tstatic me$() {\r\n\t\treturn ApiService.staticGet$(`/user/me`).pipe(\r\n\t\t\t// map((user) => this.mapStatic__(user, 'me')),\r\n\t\t\tmap((response) => this.mapUser(response.data, response.static)),\r\n\t\t\tcatchError(error => of (null)),\r\n\t\t\tswitchMap(user => {\r\n\t\t\t\tthis.setUser(user);\r\n\t\t\t\treturn this.user$_;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic register$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/register`, payload).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'register')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic login$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/login`, payload).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'login')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic logout$() {\r\n\t\treturn ApiService.staticPost$(`/user/logout`).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'logout')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic retrieve$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/retrievepassword`, payload).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'retrieve')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic update$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/updateprofile`, payload).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'register')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic mapStatic__(user, isStatic, action = 'me') {\r\n\t\tif (!isStatic) {\r\n\t\t\treturn user;\r\n\t\t};\r\n\t\tswitch (action) {\r\n\t\t\tcase 'me':\r\n\t\t\t\tif (!LocalStorageService.exist('user')) {\r\n\t\t\t\t\tuser = null;\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'register':\r\n\t\t\t\tLocalStorageService.set('user', user);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'login':\r\n\t\t\t\tLocalStorageService.set('user', user);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'logout':\r\n\t\t\t\tLocalStorageService.delete('user');\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn user;\r\n\t}\r\n\r\n\tstatic fake(user) {\r\n\t\tuser.firstName = user.firstName || 'Jhon';\r\n\t\tuser.lastName = user.lastName || 'Appleseed';\r\n\t\treturn user;\r\n\t}\r\n\r\n\tstatic mapUser(user, isStatic) {\r\n\t\treturn isStatic ? UserService.fake(new User(user)) : new User(user);\r\n\t}\r\n\r\n\tstatic mapUsers(users, isStatic) {\r\n\t\treturn users ? users.map(x => UserService.mapUser(x, isStatic)) : [];\r\n\t}\r\n\r\n}\r\n\r\nUserService.user$_ = new BehaviorSubject(null);\r\n","import UserService from '../user/user.service';\n\nexport class Question {\n\n\tconstructor(data) {\n\t\tif (data) {\n\t\t\tObject.assign(this, data);\n\t\t\tif (this.creationDate) {\n\t\t\t\tthis.creationDate = new Date(this.creationDate);\n\t\t\t}\n\t\t\tif (this.user) {\n\t\t\t\tthis.user = UserService.mapUser(this.user);\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nexport default class QuestionService {\n\n\tstatic mapQuestion(question, isStatic) {\n\t\treturn isStatic ? QuestionService.fake(new Question(question)) : new Question(question);\n\t}\n\n\tstatic mapQuestions(questions, isStatic) {\n\t\treturn questions ? questions.map(x => QuestionService.mapQuestion(x, isStatic)) : [];\n\t}\n\n\tstatic fake(item) {\n\t\tconst now = new Date();\n\t\tconst index = item.id % 1000000;\n\t\tswitch (index) {\n\t\t\tcase 4:\n\t\t\t\titem.creationDate = new Date(new Date().setSeconds(now.getSeconds() - 30));\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\titem.creationDate = new Date(new Date().setMinutes(now.getMinutes() - 10));\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\titem.creationDate = new Date(new Date().setMinutes(now.getMinutes() - 45));\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\titem.creationDate = new Date(new Date().setHours(now.getHours() - 1));\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\titem.creationDate = new Date(new Date().setDate(now.getDate() - 1 - Math.floor(Math.random() * 20)));\n\t\t}\n\t\treturn item;\n\t}\n\n}\n","export const FAKE_FILTERS = [\n\t{\n\t\t\"key\": \"collection\",\n\t\t\"label\": \"Collection\",\n\t\t\"options\": [\n\t\t\t{\n\t\t\t\t\"value\": 10000001,\n\t\t\t\t\"label\": \"Lims\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000002,\n\t\t\t\t\"label\": \"Boost Pro\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000003,\n\t\t\t\t\"label\": \"Canone Inverso\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000004,\n\t\t\t\t\"label\": \"3D wall design\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000005,\n\t\t\t\t\"label\": \"Brick Atelier\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000006,\n\t\t\t\t\"label\": \"Blaze\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000007,\n\t\t\t\t\"label\": \"Echo\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000008,\n\t\t\t\t\"label\": \"GreenColors\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000009,\n\t\t\t\t\"label\": \"Granigliati\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000010,\n\t\t\t\t\"label\": \"Ground Track\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000011,\n\t\t\t\t\"label\": \"Boost\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000012,\n\t\t\t\t\"label\": \"Raw\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000013,\n\t\t\t\t\"label\": \"Dolmen Pro\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000014,\n\t\t\t\t\"label\": \"Dwell\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000015,\n\t\t\t\t\"label\": \"Kone\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000016,\n\t\t\t\t\"label\": \"Arkshade\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000017,\n\t\t\t\t\"label\": \"Mek\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000018,\n\t\t\t\t\"label\": \"Mark\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000019,\n\t\t\t\t\"label\": \"Evolve\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000020,\n\t\t\t\t\"label\": \"EWall\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000021,\n\t\t\t\t\"label\": \"Arty\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000022,\n\t\t\t\t\"label\": \"Aix\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000023,\n\t\t\t\t\"label\": \"Brave\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000024,\n\t\t\t\t\"label\": \"Exence\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000025,\n\t\t\t\t\"label\": \"Heartwood\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000026,\n\t\t\t\t\"label\": \"Nid\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000027,\n\t\t\t\t\"label\": \"Arbor\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000028,\n\t\t\t\t\"label\": \"Klif\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000029,\n\t\t\t\t\"label\": \"Axi\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000030,\n\t\t\t\t\"label\": \"Nash\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000031,\n\t\t\t\t\"label\": \"Etic\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000032,\n\t\t\t\t\"label\": \"Etic Pro\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000033,\n\t\t\t\t\"label\": \"Trust\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000034,\n\t\t\t\t\"label\": \"Marvel\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000035,\n\t\t\t\t\"label\": \"Marvel Pro\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000036,\n\t\t\t\t\"label\": \"Marvel Stone\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000037,\n\t\t\t\t\"label\": \"Marvel Dream\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000038,\n\t\t\t\t\"label\": \"Marvel Edge\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000039,\n\t\t\t\t\"label\": \"Marvel Gems\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000040,\n\t\t\t\t\"label\": \"Room\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000041,\n\t\t\t\t\"label\": \"Seastone\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000042,\n\t\t\t\t\"label\": \"Sunrock\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t\"key\": \"placement\",\n\t\t\"label\": \"Placement\",\n\t\t\"options\": [\n\t\t\t{\n\t\t\t\t\"value\": 10000043,\n\t\t\t\t\"label\": \"Indoor\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000044,\n\t\t\t\t\"label\": \"Outdoor\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t\"key\": \"material\",\n\t\t\"label\": \"Material\",\n\t\t\"options\": [\n\t\t\t{\n\t\t\t\t\"value\": 10000045,\n\t\t\t\t\"label\": \"Marble\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000046,\n\t\t\t\t\"label\": \"Stone\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000047,\n\t\t\t\t\"label\": \"Cement\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000048,\n\t\t\t\t\"label\": \"Wood\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000049,\n\t\t\t\t\"label\": \"Metal\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000050,\n\t\t\t\t\"label\": \"Fabric\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t\"key\": \"finish\",\n\t\t\"label\": \"Finish\",\n\t\t\"options\": [\n\t\t\t{\n\t\t\t\t\"value\": 10000051,\n\t\t\t\t\"label\": \"Lucid\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000052,\n\t\t\t\t\"label\": \"Matt\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t\"key\": \"color\",\n\t\t\"label\": \"Color\",\n\t\t\"options\": [\n\t\t\t{\n\t\t\t\t\"value\": 10000053,\n\t\t\t\t\"label\": \"White\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000054,\n\t\t\t\t\"label\": \"Black\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000055,\n\t\t\t\t\"label\": \"Gray\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000056,\n\t\t\t\t\"label\": \"Ivory\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000057,\n\t\t\t\t\"label\": \"Cream\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000058,\n\t\t\t\t\"label\": \"Beige\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000059,\n\t\t\t\t\"label\": \"Brown\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000060,\n\t\t\t\t\"label\": \"Gold\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000061,\n\t\t\t\t\"label\": \"Cream\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000062,\n\t\t\t\t\"label\": \"Yellow\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000063,\n\t\t\t\t\"label\": \"Pink\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000064,\n\t\t\t\t\"label\": \"Orange\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000065,\n\t\t\t\t\"label\": \"Red\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000066,\n\t\t\t\t\"label\": \"Blue\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000067,\n\t\t\t\t\"label\": \"Green\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000068,\n\t\t\t\t\"label\": \"Purple\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t\"key\": \"size\",\n\t\t\"label\": \"Size\",\n\t\t\"options\": [\n\t\t\t{\n\t\t\t\t\"value\": 10000069,\n\t\t\t\t\"label\": \"Small\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000070,\n\t\t\t\t\"label\": \"Medium\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000071,\n\t\t\t\t\"label\": \"Large\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000072,\n\t\t\t\t\"label\": \"Extra Large\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t\"key\": \"class\",\n\t\t\"label\": \"Class\",\n\t\t\"options\": [\n\t\t\t{\n\t\t\t\t\"value\": 10000073,\n\t\t\t\t\"label\": \"Class A\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000074,\n\t\t\t\t\"label\": \"Class B\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000075,\n\t\t\t\t\"label\": \"Class C\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000076,\n\t\t\t\t\"label\": \"Class D\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t\"key\": \"category\",\n\t\t\"label\": \"Category\",\n\t\t\"options\": [\n\t\t\t{\n\t\t\t\t\"value\": 10000077,\n\t\t\t\t\"label\": \"Professional\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000078,\n\t\t\t\t\"label\": \"Heritage\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"value\": 10000079,\n\t\t\t\t\"label\": \"Premium\"\n\t\t\t}\n\t\t]\n\t}\n];\n","import { of } from 'rxjs';\nimport { map, switchMap, tap } from 'rxjs/operators';\nimport ApiService from '../api/api.service';\nimport FavouriteService from '../favourite/favourite.service';\nimport QuestionService from '../question/question.service';\nimport UserService from '../user/user.service';\nimport { FAKE_FILTERS } from './fake-filters';\n\nexport class Event {\n\n\tget live() {\n\t\treturn this.info.started && !this.info.ended;\n\t}\n\n\tget incoming() {\n\t\tconst now = new Date();\n\t\tconst diff = this.startDate - now;\n\t\tconst hoursDiff = Math.floor(diff / 1000 / 60 / 60);\n\t\treturn !this.info.started && this.startDate > now && hoursDiff < 24;\n\t}\n\n\tget future() {\n\t\tconst now = new Date();\n\t\treturn !this.info.started && this.startDate > now;\n\t}\n\n\tget past() {\n\t\treturn this.info.ended;\n\t}\n\n\tget hasRelated() {\n\t\treturn this.related && this.related.length;\n\t}\n\n\tconstructor(data, isStatic) {\n\t\tif (data) {\n\t\t\tObject.assign(this, data);\n\t\t\tthis.info = this.info || {};\n\t\t\tif (this.creationDate) {\n\t\t\t\tthis.creationDate = new Date(this.creationDate);\n\t\t\t}\n\t\t\tif (this.startDate) {\n\t\t\t\tthis.startDate = new Date(this.startDate);\n\t\t\t\tthis.info.started = this.startDate < Date.now();\n\t\t\t}\n\t\t\tif (this.endDate) {\n\t\t\t\tthis.endDate = new Date(this.endDate);\n\t\t\t\tthis.info.ended = this.endDate < Date.now();\n\t\t\t}\n\t\t\tif (this.related) {\n\t\t\t\tthis.related = EventService.mapEvents(this.related, isStatic);\n\t\t\t}\n\t\t\tif (this.questions) {\n\t\t\t\tthis.questions = QuestionService.mapQuestions(this.questions, isStatic);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default class EventService {\n\n\tstatic detail$(eventId) {\n\t\t// return ApiService.get$(`/event/${eventId}/detail`)\n\t\treturn ApiService.staticGet$(`/event/${1001}/detail`).pipe(\n\t\t\ttap(response => response.data.id = parseInt(eventId)), // !!!\n\t\t\tmap(response => EventService.mapEvent(response.data, response.static))\n\t\t);\n\t}\n\n\tstatic listing$(eventId) {\n\t\t// return ApiService.get$(`/event/${eventId}/listing`)\n\t\treturn ApiService.staticGet$(`/event/${1001}/listing`).pipe(\n\t\t\tswitchMap(response => EventService.mapListing(response.data, response.static, eventId))\n\t\t);\n\t}\n\n\tstatic filter$(eventId) {\n\t\t// return ApiService.get$(`/event/${eventId}/filter`)\n\t\treturn ApiService.staticGet$(`/event/${1001}/filter`).pipe(map(response => response.data));\n\t}\n\n\tstatic top$() {\n\t\treturn ApiService.staticGet$(`/event/evidence`).pipe(\n\t\t\tmap(response => EventService.mapEvents(response.data, response.static))\n\t\t);\n\t}\n\n\tstatic upcoming$() {\n\t\treturn ApiService.staticGet$(`/event/upcoming`).pipe(\n\t\t\tmap(response => EventService.mapEvents(response.data, response.static))\n\t\t);\n\t}\n\n\tstatic subscribe$(eventId) {\n\t\treturn of(null);\n\t}\n\n\tstatic unsubscribe$(eventId) {\n\t\treturn of(null);\n\t}\n\n\tstatic like$(eventId) {\n\t\treturn of(null);\n\t}\n\n\tstatic unlike$(eventId) {\n\t\treturn of(null);\n\t}\n\n\tstatic postQuestion$(event, body) {\n\t\tconst eventId = 1001; // event.id !!!\n\t\treturn ApiService.staticPost$(`/event/${eventId}/question`, body).pipe(\n\t\t\tmap(response => {\n\t\t\t\tconst question = QuestionService.mapQuestion(response.data, response.static);\n\t\t\t\tif (response.static) {\n\t\t\t\t\tquestion.id = event.questions[0].id + 1;\n\t\t\t\t\tquestion.creationDate = new Date();\n\t\t\t\t\tquestion.user = UserService.getCurrentUser();\n\t\t\t\t\tquestion.body = body;\n\t\t\t\t}\n\t\t\t\treturn question;\n\t\t\t}),\n\t\t);\n\t}\n\n\tstatic mapEvent(event, isStatic) {\n\t\treturn isStatic ? EventService.fake(new Event(event, true)) : new Event(event);\n\t}\n\n\tstatic mapEvents(events, isStatic) {\n\t\treturn events ? events.map(x => EventService.mapEvent(x, isStatic)) : [];\n\t}\n\n\tstatic mapListing(items, isStatic, eventId) {\n\t\treturn isStatic ? EventService.fakeListing(eventId) : of (items);\n\t}\n\n\tstatic fake(item) {\n\t\t// !!! todo, wrap static api response { static: true, data: ... }\n\t\t// console.log('EventService.fake', item);\n\t\tconst letters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'L', 'M'];\n\t\tconst index = item.id % 1000;\n\t\tconst channelId = 100 + (item.id - index) / 1000;\n\t\titem.url = `${item.url}?eventId=${item.id}`;\n\t\tif (item.channel) {\n\t\t\titem.channel.id = channelId;\n\t\t\titem.channel.url = `${item.channel.url}?channelId=${item.channel.id}`;\n\t\t\tconst channelIndex = item.channel.id % 100;\n\t\t\titem.channel.name = `Channel ${letters[channelIndex - 1]}`;\n\t\t\titem.name = `Event ${letters[channelIndex - 1]}${index}`;\n\t\t}\n\t\tif (item.info) {\n\t\t\titem.info.subscribers = 50 + Math.floor(Math.random() * 200);\n\t\t\titem.info.likes = 50 + Math.floor(Math.random() * 200);\n\t\t\titem.media = {\n\t\t\t\tsrc: 'https://gruppoconcorde-view.thron.com/api/xcontents/resources/delivery/getContentDetail?clientId=gruppoconcorde&xcontentId=16ef3c0a-ba0c-4e3a-a10a-32bc7f9a4297&pkey=yz1hpd',\n\t\t\t\ttype: 'thron'\n\t\t\t};\n\t\t\tconst now = new Date();\n\t\t\tswitch (index) {\n\t\t\t\tcase 1:\n\t\t\t\t\titem.startDate = new Date(new Date().setMinutes(now.getMinutes() - 10));\n\t\t\t\t\titem.endDate = null;\n\t\t\t\t\titem.info.started = true;\n\t\t\t\t\titem.info.ended = false;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\titem.startDate = new Date(new Date().setMinutes(now.getMinutes() + 2));\n\t\t\t\t\titem.endDate = null;\n\t\t\t\t\titem.info.started = false;\n\t\t\t\t\titem.info.ended = false;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\titem.startDate = new Date(new Date().setHours(now.getHours() + 2));\n\t\t\t\t\titem.endDate = null;\n\t\t\t\t\titem.info.started = false;\n\t\t\t\t\titem.info.ended = false;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\titem.startDate = new Date(new Date().setHours(now.getHours() - 7));\n\t\t\t\t\titem.endDate = new Date(new Date().setHours(now.getHours() - 6));\n\t\t\t\t\titem.info.started = true;\n\t\t\t\t\titem.info.ended = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 5:\n\t\t\t\t\titem.startDate = new Date(new Date().setDate(now.getDate() + 7));\n\t\t\t\t\titem.endDate = null;\n\t\t\t\t\titem.info.started = false;\n\t\t\t\t\titem.info.ended = false;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 6:\n\t\t\t\t\titem.startDate = new Date(new Date().setDate(now.getDate() + 14));\n\t\t\t\t\titem.endDate = null;\n\t\t\t\t\titem.info.started = false;\n\t\t\t\t\titem.info.ended = false;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\titem.startDate = new Date(new Date().setDate(now.getDate() - 14 - Math.floor(Math.random() * 150)));\n\t\t\t\t\titem.endDate = new Date(new Date(item.startDate.getTime()).setHours(item.startDate.getHours() + 1));\n\t\t\t\t\titem.info.started = true;\n\t\t\t\t\titem.info.ended = true;\n\t\t\t}\n\t\t\tconst subscriptions = FavouriteService.getCurrentSubscriptions();\n\t\t\tconst subscription = subscriptions.find(x => x.id === item.id);\n\t\t\titem.info.subscribed = subscription !== undefined;\n\n\t\t\tconst likes = FavouriteService.getCurrentLikes();\n\t\t\tconst like = likes.find(x => x.id === item.id);\n\t\t\titem.info.liked = like !== undefined;\n\n\t\t\tconst favourites = FavouriteService.getCurrentFavourites();\n\t\t\tconst favourite = favourites.find(x => x.id === item.id);\n\t\t\titem.info.saved = favourite !== undefined;\n\t\t}\n\t\titem.features = [];\n\t\tconst filters = FAKE_FILTERS;\n\t\tfilters.forEach(filter => {\n\t\t\tconst index = Math.floor(Math.random() * filter.options.length);\n\t\t\titem.features.push(filter.options[index].value);\n\t\t});\n\t\tif (item.related) {\n\t\t\titem.related = item.related.filter(x => (x.id !== item.id) && (x.live || x.incoming || x.past));\n\t\t}\n\t\treturn item;\n\t}\n\n\tstatic fakeListing(eventId) {\n\t\tconst index = eventId % 1000;\n\t\tconst channelId = 100 + (eventId - index) / 1000;\n\t\teventId = 1001;\n\t\treturn ApiService.staticGet$(`/event/${eventId}/detail`).pipe(\n\t\t\tmap(response => {\n\t\t\t\tconst channel_ = new Event(response.data, true).channel;\n\t\t\t\tchannel_.id = channelId;\n\t\t\t\tconst info_ = {\n\t\t\t\t\tstarted: false,\n\t\t\t\t\tended: false,\n\t\t\t\t\tsubscribers: 100,\n\t\t\t\t\tsubscribed: false,\n\t\t\t\t\tlikes: 100,\n\t\t\t\t\tliked: false\n\t\t\t\t};\n\t\t\t\tconst image_ = {\n\t\t\t\t\tid: 100000,\n\t\t\t\t\twidth: 700,\n\t\t\t\t\theight: 700,\n\t\t\t\t\tsrc: 'https://source.unsplash.com/random/',\n\t\t\t\t};\n\t\t\t\tconst category_ = {\n\t\t\t\t\tid: 10000,\n\t\t\t\t\tname: 'Category',\n\t\t\t\t\turl: '/ws-events/events-category.html',\n\t\t\t\t};\n\t\t\t\tconst event_ = {\n\t\t\t\t\tid: 1000,\n\t\t\t\t\ttype: 'event',\n\t\t\t\t\tname: 'Evento',\n\t\t\t\t\ttitle: 'Evento',\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\n\t\t\t\t\turl: '/ws-events/events-event.html',\n\t\t\t\t\tcreationDate: '2020-05-20T08:11:17.827Z',\n\t\t\t\t\tstartDate: '2020-05-20T08:11:17.827Z',\n\t\t\t\t\tpicture: image_,\n\t\t\t\t\tinfo: info_,\n\t\t\t\t\tchannel: channel_,\n\t\t\t\t};\n\t\t\t\tconst picture_ = {\n\t\t\t\t\tid: 1000,\n\t\t\t\t\ttype: 'picture',\n\t\t\t\t\tname: 'Picture',\n\t\t\t\t\ttitle: 'Picture',\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\n\t\t\t\t\turl: '/ws-events/events-document.html',\n\t\t\t\t\tpicture: image_,\n\t\t\t\t\tcategory: category_,\n\t\t\t\t};\n\t\t\t\tconst product_ = {\n\t\t\t\t\tid: 1000,\n\t\t\t\t\ttype: 'product',\n\t\t\t\t\tname: 'Product',\n\t\t\t\t\ttitle: 'Product',\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\n\t\t\t\t\turl: '/ws-events/events-product.html',\n\t\t\t\t\tpicture: image_,\n\t\t\t\t\tcategory: category_,\n\t\t\t\t};\n\t\t\t\tconst magazine_ = {\n\t\t\t\t\tid: 1000,\n\t\t\t\t\ttype: 'magazine',\n\t\t\t\t\tname: 'Magazine',\n\t\t\t\t\ttitle: 'Magazine',\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\n\t\t\t\t\turl: '/ws-events/events-product.html',\n\t\t\t\t\tpicture: image_,\n\t\t\t\t\tcategory: category_,\n\t\t\t\t};\n\t\t\t\tconst letters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'L', 'M'];\n\t\t\t\treturn new Array(30).fill(true).map((x, i) => {\n\t\t\t\t\tlet type = 'event';\n\t\t\t\t\tif (i > 3) {\n\t\t\t\t\t\tif (i % 5 === 0) {\n\t\t\t\t\t\t\ttype = 'picture';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (i % 7 === 0) {\n\t\t\t\t\t\t\ttype = 'product';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (i % 11 === 0) {\n\t\t\t\t\t\t\ttype = 'magazine';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet item;\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase 'picture':\n\t\t\t\t\t\t\titem = Object.assign({}, picture_);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'product':\n\t\t\t\t\t\t\titem = Object.assign({}, product_);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'magazine':\n\t\t\t\t\t\t\titem = Object.assign({}, magazine_);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'event':\n\t\t\t\t\t\t\titem = Object.assign({}, event_);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\titem.id = (channel_.id - 100) * 1000 + 1 + i;\n\t\t\t\t\titem.name = item.title = `${item.name} ${letters[(item.id - 1) % 10]}`;\n\t\t\t\t\titem.type = type;\n\t\t\t\t\tif (item.picture) {\n\t\t\t\t\t\titem.picture = Object.assign({}, image_, {\n\t\t\t\t\t\t\tid: (100001 + i),\n\t\t\t\t\t\t\twidth: 700,\n\t\t\t\t\t\t\theight: [700, 900, 1100][i % 3],\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (item.info) {\n\t\t\t\t\t\titem.info = Object.assign({}, info_);\n\t\t\t\t\t}\n\t\t\t\t\tif (item.channel) {\n\t\t\t\t\t\titem.channel = Object.assign({}, channel_);\n\t\t\t\t\t}\n\t\t\t\t\tif (item.category) {\n\t\t\t\t\t\tconst categoryId = (10001 + (i % 10));\n\t\t\t\t\t\titem.category = Object.assign({}, category_, {\n\t\t\t\t\t\t\tid: categoryId,\n\t\t\t\t\t\t\tname: 'Category ' + letters[categoryId % 10],\n\t\t\t\t\t\t\turl: `${category_.url}?categoryId=${categoryId}`,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase 'event':\n\t\t\t\t\t\t\titem = EventService.fake(new Event(item, true));\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\titem.features = [];\n\t\t\t\t\t\t\tconst filters = FAKE_FILTERS;\n\t\t\t\t\t\t\tfilters.forEach(filter => {\n\t\t\t\t\t\t\t\tconst index = Math.floor(Math.random() * filter.options.length);\n\t\t\t\t\t\t\t\titem.features.push(filter.options[index].value);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn item;\n\t\t\t\t});\n\t\t\t})\n\t\t);\n\t}\n\n\tstatic fakeSaved(items) {\n\t\tconst info_ = {\n\t\t\tstarted: false,\n\t\t\tended: false,\n\t\t\tsubscribers: 100,\n\t\t\tsubscribed: false,\n\t\t\tlikes: 100,\n\t\t\tliked: false\n\t\t};\n\t\tconst image_ = {\n\t\t\tid: 100000,\n\t\t\twidth: 700,\n\t\t\theight: 700,\n\t\t\tsrc: 'https://source.unsplash.com/random/',\n\t\t};\n\t\tconst event_ = {\n\t\t\tid: 1000,\n\t\t\ttype: 'event',\n\t\t\tname: 'Evento',\n\t\t\ttitle: 'Evento',\n\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\n\t\t\turl: '/ws-events/events-event.html',\n\t\t\tcreationDate: '2020-05-20T08:11:17.827Z',\n\t\t\tstartDate: '2020-05-20T08:11:17.827Z',\n\t\t\tpicture: image_,\n\t\t\tinfo: info_,\n\t\t};\n\t\tconst letters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'L', 'M'];\n\t\treturn items.map((x, i) => {\n\t\t\tlet type = 'event';\n\t\t\tlet item = Object.assign({}, event_);\n\t\t\titem.id = x.id;\n\t\t\titem.name = item.title = `${item.name} ${letters[(item.id - 1) % 10]}`;\n\t\t\tconst index = x.id % 1000;\n\t\t\titem.channel = { id: (x.id - index) / 1000 + 1000 };\n\t\t\titem.type = type;\n\t\t\titem.picture = Object.assign({}, image_, {\n\t\t\t\tid: (100001 + i),\n\t\t\t\twidth: 700,\n\t\t\t\theight: [700, 900, 1100][i % 3],\n\t\t\t});\n\t\t\titem.info = Object.assign({}, info_);\n\t\t\titem = EventService.fake(new Event(item, true));\n\t\t\treturn item;\n\t\t});\n\t}\n\n}\n","import { of } from 'rxjs';\nimport { map, shareReplay, switchMap } from 'rxjs/operators';\nimport ApiService from '../api/api.service';\nimport EventService, { Event } from '../event/event.service';\nimport { FAKE_FILTERS } from '../event/fake-filters';\n\nexport class Channel {\n\tconstructor(data, isStatic) {\n\t\tif (data) {\n\t\t\tObject.assign(this, data);\n\t\t\tthis.events = EventService.mapEvents(this.events, isStatic);\n\t\t}\n\t}\n}\n\nexport default class ChannelService {\n\n\tstatic channels$() {\n\t\treturn ApiService.staticGet$(`/channel/channels`).pipe(\n\t\t\tmap(response => ChannelService.mapChannels(response.data, response.static))\n\t\t);\n\t}\n\n\tstatic detail$(channelId) {\n\t\treturn ApiService.staticGet$(`/channel/${channelId}/detail`).pipe(\n\t\t\tmap(response => ChannelService.mapChannel(response.data, response.static))\n\t\t);\n\t}\n\n\tstatic listing$(channelId) {\n\t\treturn ApiService.staticGet$(`/channel/${channelId}/listing`).pipe(\n\t\t\tswitchMap(response => ChannelService.mapListing(response.data, response.static, channelId))\n\t\t);\n\t}\n\n\tstatic filter$(channelId) {\n\t\treturn ApiService.staticGet$(`/channel/${channelId}/filter`).pipe(\n\t\t\tmap(response => response.data)\n\t\t);\n\t}\n\n\tstatic top$() {\n\t\treturn ApiService.staticGet$(`/channel/evidence`).pipe(\n\t\t\tmap(response => ChannelService.mapChannels(response.data, response.static))\n\t\t);\n\t}\n\n\tstatic subscribe$(channelId) {\n\t\treturn of(null);\n\t}\n\n\tstatic unsubscribe$(channelId) {\n\t\treturn of(null);\n\t}\n\n\tstatic like$(channelId) {\n\t\treturn of(null);\n\t}\n\n\tstatic unlike$(channelId) {\n\t\treturn of(null);\n\t}\n\n\tstatic mapChannel(channel, isStatic) {\n\t\treturn isStatic ? ChannelService.fake(new Channel(channel, true)) : new Channel(channel);\n\t}\n\n\tstatic mapChannels(channels, isStatic) {\n\t\treturn channels ? channels.map(x => ChannelService.mapChannel(x, isStatic)) : [];\n\t}\n\n\tstatic mapListing(items, isStatic, channelId) {\n\t\treturn isStatic ? ChannelService.fakeListing(channelId) : of (items);\n\t}\n\n\tstatic fake(item) {\n\t\t// console.log('ChannelService.fake', item);\n\t\titem.url = `${item.url}?channelId=${item.id}`;\n\t\titem.info.subscribers = 1500 + Math.floor(Math.random() * 200);\n\t\titem.info.likes = 500 + Math.floor(Math.random() * 200);\n\t\treturn item;\n\t}\n\n\tstatic fakeListing(channelId) {\n\t\treturn ApiService.staticGet$(`/channel/${channelId}/detail`).pipe(\n\t\t\tmap(response => {\n\t\t\t\tconst channel_ = ChannelService.fake(new Channel(response.data, true));\n\t\t\t\tconst info_ = {\n\t\t\t\t\tstarted: false,\n\t\t\t\t\tended: false,\n\t\t\t\t\tsubscribers: 100,\n\t\t\t\t\tsubscribed: false,\n\t\t\t\t\tlikes: 100,\n\t\t\t\t\tliked: false\n\t\t\t\t};\n\t\t\t\tconst image_ = {\n\t\t\t\t\tid: 100000,\n\t\t\t\t\twidth: 700,\n\t\t\t\t\theight: 700,\n\t\t\t\t\tsrc: 'https://source.unsplash.com/random/',\n\t\t\t\t};\n\t\t\t\tconst category_ = {\n\t\t\t\t\tid: 10000,\n\t\t\t\t\tname: 'Category',\n\t\t\t\t\turl: '/ws-events/category.html',\n\t\t\t\t};\n\t\t\t\tconst event_ = {\n\t\t\t\t\tid: 1000,\n\t\t\t\t\ttype: 'event',\n\t\t\t\t\tname: 'Evento',\n\t\t\t\t\ttitle: 'Evento',\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\n\t\t\t\t\turl: '/event',\n\t\t\t\t\tcreationDate: '2020-05-20T08:11:17.827Z',\n\t\t\t\t\tstartDate: '2020-05-20T08:11:17.827Z',\n\t\t\t\t\tpicture: image_,\n\t\t\t\t\tinfo: info_,\n\t\t\t\t\tchannel: channel_,\n\t\t\t\t};\n\t\t\t\tconst picture_ = {\n\t\t\t\t\tid: 1000,\n\t\t\t\t\ttype: 'picture',\n\t\t\t\t\tname: 'Picture',\n\t\t\t\t\ttitle: 'Picture',\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\n\t\t\t\t\turl: '/ws-events/document.html',\n\t\t\t\t\tpicture: image_,\n\t\t\t\t\tcategory: category_,\n\t\t\t\t};\n\t\t\t\tconst product_ = {\n\t\t\t\t\tid: 1000,\n\t\t\t\t\ttype: 'product',\n\t\t\t\t\tname: 'Product',\n\t\t\t\t\ttitle: 'Product',\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\n\t\t\t\t\turl: '/ws-events/product.html',\n\t\t\t\t\tpicture: image_,\n\t\t\t\t\tcategory: category_,\n\t\t\t\t};\n\t\t\t\tconst magazine_ = {\n\t\t\t\t\tid: 1000,\n\t\t\t\t\ttype: 'magazine',\n\t\t\t\t\tname: 'Magazine',\n\t\t\t\t\ttitle: 'Magazine',\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\n\t\t\t\t\turl: '/ws-events/product.html',\n\t\t\t\t\tpicture: image_,\n\t\t\t\t\tcategory: category_,\n\t\t\t\t};\n\t\t\t\tconst letters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'L', 'M'];\n\t\t\t\treturn new Array(250).fill(true).map((x, i) => {\n\t\t\t\t\tlet type = 'event';\n\t\t\t\t\tif (i > 3) {\n\t\t\t\t\t\tif (i % 5 === 0) {\n\t\t\t\t\t\t\ttype = 'picture';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (i % 7 === 0) {\n\t\t\t\t\t\t\ttype = 'product';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (i % 11 === 0) {\n\t\t\t\t\t\t\ttype = 'magazine';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet item;\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase 'picture':\n\t\t\t\t\t\t\titem = Object.assign({}, picture_);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'product':\n\t\t\t\t\t\t\titem = Object.assign({}, product_);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'magazine':\n\t\t\t\t\t\t\titem = Object.assign({}, magazine_);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'event':\n\t\t\t\t\t\t\titem = Object.assign({}, event_);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\titem.id = (channelId - 100) * 1000 + 1 + i;\n\t\t\t\t\titem.name = item.title = `${item.name} ${letters[(item.id - 1) % 10]}`;\n\t\t\t\t\titem.type = type;\n\t\t\t\t\tif (item.picture) {\n\t\t\t\t\t\titem.picture = Object.assign({}, image_, {\n\t\t\t\t\t\t\tid: (100001 + i),\n\t\t\t\t\t\t\twidth: 700,\n\t\t\t\t\t\t\theight: [700, 900, 1100][i % 3],\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (item.info) {\n\t\t\t\t\t\titem.info = Object.assign({}, info_);\n\t\t\t\t\t}\n\t\t\t\t\tif (item.channel) {\n\t\t\t\t\t\titem.channel = Object.assign({}, channel_);\n\t\t\t\t\t}\n\t\t\t\t\tif (item.category) {\n\t\t\t\t\t\tconst categoryId = (10001 + (i % 10));\n\t\t\t\t\t\titem.category = Object.assign({}, category_, {\n\t\t\t\t\t\t\tid: categoryId,\n\t\t\t\t\t\t\tname: 'Category ' + letters[categoryId % 10],\n\t\t\t\t\t\t\turl: `${category_.url}?categoryId=${categoryId}`,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase 'event':\n\t\t\t\t\t\t\titem = EventService.fake(new Event(item, true));\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\titem.features = [];\n\t\t\t\t\t\t\tconst filters = FAKE_FILTERS;\n\t\t\t\t\t\t\tfilters.forEach(filter => {\n\t\t\t\t\t\t\t\tconst index = Math.floor(Math.random() * filter.options.length);\n\t\t\t\t\t\t\t\titem.features.push(filter.options[index].value);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn item;\n\t\t\t\t});\n\t\t\t})\n\t\t\t// map(x => new Channel(x))\n\t\t);\n\t}\n\n}\n\nChannelService.channels$ = ChannelService.channels$().pipe(shareReplay(1));\n","export default class LocationService {\r\n\r\n\tstatic get(key) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\t// console.log('LocationService.get', params);\r\n\t\treturn params.get(key);\r\n\t}\r\n\r\n\tstatic set(keyOrValue, value) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams.set(keyOrValue, value);\r\n\t\t} else {\r\n\t\t\tparams.set(keyOrValue, '');\r\n\t\t}\r\n\t\tthis.replace(params);\r\n\t\t// console.log('LocationService.set', params, keyOrValue, value);\r\n\t}\r\n\r\n\tstatic replace(params) {\r\n\t\tif (window.history && window.history.pushState) {\r\n\t\t\tconst title = document.title;\r\n\t\t\tconst url = `${window.location.href.split('?')[0]}?${params.toString()}`;\r\n\t\t\twindow.history.pushState(params.toString(), title, url);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic deserialize(key) {\r\n\t\tconst encoded = this.get('params');\r\n\t\treturn this.decode(key, encoded);\r\n\t}\r\n\r\n\tstatic serialize(keyOrValue, value) {\r\n\t\tconst params = this.deserialize();\r\n\t\tconst encoded = this.encode(keyOrValue, value, params);\r\n\t\tthis.set('params', encoded);\r\n\t}\r\n\r\n\tstatic decode(key, encoded) {\r\n\t\tlet decoded = null;\r\n\t\tif (encoded) {\r\n\t\t\tconst json = window.atob(encoded);\r\n\t\t\tdecoded = JSON.parse(json);\r\n\t\t}\r\n\t\tif (key && decoded) {\r\n\t\t\tdecoded = decoded[key];\r\n\t\t}\r\n\t\treturn decoded || null;\r\n\t}\r\n\r\n\tstatic encode(keyOrValue, value, params) {\r\n\t\tparams = params || {};\r\n\t\tlet encoded = null;\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams[keyOrValue] = value;\r\n\t\t} else {\r\n\t\t\tparams = keyOrValue;\r\n\t\t}\r\n\t\tconst json = JSON.stringify(params);\r\n\t\tencoded = window.btoa(json);\r\n\t\treturn encoded;\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\n\nexport default class PageComponent extends Component {\n\n\tonInit() {\n\n\t}\n\n}\n\nPageComponent.meta = {\n\tselector: '[page]',\n};\n","import { combineLatest } from 'rxjs';\nimport { first } from 'rxjs/operators';\nimport ChannelService from '../channel/channel.service';\nimport LocationService from '../location/location.service';\nimport PageComponent from '../page/page.component';\n\nexport default class AsideComponent extends PageComponent {\n\n\tonInit() {\n\t\tlet channelId = LocationService.get('channelId');\n\t\tchannelId = channelId ? parseInt(channelId) : null;\n\t\tthis.channelId = channelId;\n\t\tthis.channels = [];\n\t\tthis.load$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe(data => {\n\t\t\tthis.channels = data[0];\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tload$() {\n\t\treturn combineLatest(\n\t\t\tChannelService.channels$,\n\t\t);\n\t}\n\n}\n\nAsideComponent.meta = {\n\tselector: '[aside]',\n};\n","import { BehaviorSubject } from 'rxjs';\r\n\r\nexport const FilterMode = {\r\n\tSELECT: 'select',\r\n\tAND: 'and',\r\n\tOR: 'or',\r\n};\r\n\r\nexport default class FilterItem {\r\n\r\n\tconstructor(filter) {\r\n\t\tthis.change$ = new BehaviorSubject();\r\n\t\tthis.mode = FilterMode.SELECT;\r\n\t\tthis.placeholder = 'Select';\r\n\t\tthis.values = [];\r\n\t\tthis.options = [];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.SELECT) {\r\n\t\t\t\tfilter.options.unshift({\r\n\t\t\t\t\tlabel: filter.placeholder,\r\n\t\t\t\t\tvalues: [],\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tObject.assign(this, filter);\r\n\t\t}\r\n\t}\r\n\r\n\tfilter(item, value) {\r\n\t\treturn true; // item.options.indexOf(value) !== -1;\r\n\t}\r\n\r\n\tmatch(item) {\r\n\t\tlet match;\r\n\t\tif (this.mode === FilterMode.OR) {\r\n\t\t\tmatch = this.values.length ? false : true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match || this.filter(item, value);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tmatch = true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match && this.filter(item, value);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetSelectedOption() {\r\n\t\treturn this.options.find(x => this.has(x));\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst selectedOption = this.getSelectedOption();\r\n\t\t\treturn selectedOption ? selectedOption.label : this.placeholder;\r\n\t\t} else {\r\n\t\t\treturn this.label;\r\n\t\t}\r\n\t}\r\n\r\n\thas(item) {\r\n\t\treturn this.values.indexOf(item.value) !== -1;\r\n\t}\r\n\r\n\tset(item) {\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tthis.values = [];\r\n\t\t}\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index === -1) {\r\n\t\t\tif (item.value !== undefined) {\r\n\t\t\t\tthis.values.push(item.value);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tthis.placeholder = item.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.set', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\tremove(item) {\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index !== -1) {\r\n\t\t\tthis.values.splice(index, 1);\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.remove', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\ttoggle(item) {\r\n\t\tif (this.has(item)) {\r\n\t\t\tthis.remove(item);\r\n\t\t} else {\r\n\t\t\tthis.set(item);\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleActive() {\r\n\t\tthis.active = !this.active;\r\n\t}\r\n\r\n}\r\n","import { merge } from 'rxjs';\r\nimport { auditTime, map, tap } from 'rxjs/operators';\r\nimport LocationService from '../location/location.service';\r\nimport FilterItem from './filter-item';\r\n\r\nexport default class FilterService {\r\n\r\n\tconstructor(options, initialParams, callback) {\r\n\t\tconst filters = {};\r\n\t\tthis.filters = filters;\r\n\t\tif (options) {\r\n\t\t\tObject.keys(options).forEach(key => {\r\n\t\t\t\tconst filter = new FilterItem(options[key]);\r\n\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\tcallback(key, filter);\r\n\t\t\t\t}\r\n\t\t\t\tfilters[key] = filter;\r\n\t\t\t});\r\n\t\t\tthis.deserialize(this.filters, initialParams);\r\n\t\t}\r\n\t}\r\n\r\n\tgetParamsCount(params) {\r\n\t\tif (params) {\r\n\t\t\tconst paramsCount = Object.keys(params).reduce((p, c, i) => {\r\n\t\t\t\tconst values = params[c];\r\n\t\t\t\treturn p + (values ? values.length : 0);\r\n\t\t\t}, 0);\r\n\t\t\treturn paramsCount;\r\n\t\t} else {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\tdeserialize(filters, initialParams) {\r\n\t\tlet params;\r\n\t\tif (initialParams && this.getParamsCount(initialParams)) {\r\n\t\t\tparams = initialParams;\r\n\t\t}\r\n\t\tconst locationParams = LocationService.deserialize('filters');\r\n\t\tif (locationParams && this.getParamsCount(locationParams)) {\r\n\t\t\tparams = locationParams;\r\n\t\t}\r\n\t\tif (params) {\r\n\t\t\tObject.keys(filters).forEach(key => {\r\n\t\t\t\tfilters[key].values = params[key] || [];\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn filters;\r\n\t}\r\n\r\n\tserialize(filters) {\r\n\t\tlet params = {};\r\n\t\tlet any = false;\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tif (filter.values && filter.values.length > 0) {\r\n\t\t\t\tparams[x] = filter.values;\r\n\t\t\t\tany = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (!any) {\r\n\t\t\tparams = null;\r\n\t\t}\r\n\t\t// console.log('FilterService.serialize', params);\r\n\t\tLocationService.serialize('filters', params);\r\n\t\treturn params;\r\n\t}\r\n\r\n\titems$(items) {\r\n\t\tconst filters = this.filters;\r\n\t\tconst changes = Object.keys(filters).map(key => filters[key].change$);\r\n\t\tthis.updateFilterStates(filters, items, true);\r\n\t\treturn merge(...changes).pipe(\r\n\t\t\tauditTime(1),\r\n\t\t\t// tap(() => console.log(filters)),\r\n\t\t\ttap(() => this.serialize(filters)),\r\n\t\t\tmap(() => this.filterItems(items)),\r\n\t\t\ttap(() => this.updateFilterStates(filters, items))\r\n\t\t);\r\n\t}\r\n\r\n\tfilterItems(items, skipFilter) {\r\n\t\tconst filters = Object.keys(this.filters).map((x) => this.filters[x]).filter(x => x.values && x.values.length > 0);\r\n\t\titems = items.filter(item => {\r\n\t\t\tlet has = true;\r\n\t\t\tfilters.forEach(filter => {\r\n\t\t\t\tif (filter !== skipFilter) {\r\n\t\t\t\t\thas = has && filter.match(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn has;\r\n\t\t});\r\n\t\treturn items;\r\n\t}\r\n\r\n\tupdateFilterStates(filters, items, initialCount) {\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tconst filteredItems = initialCount ? items : this.filterItems(items, filter);\r\n\t\t\tfilter.options.forEach(option => {\r\n\t\t\t\tlet count = 0;\r\n\t\t\t\tif (option.value) {\r\n\t\t\t\t\tlet i = 0;\r\n\t\t\t\t\twhile (i < filteredItems.length) {\r\n\t\t\t\t\t\tconst item = filteredItems[i];\r\n\t\t\t\t\t\tif (filter.filter(item, option.value)) {\r\n\t\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcount = filteredItems.length;\r\n\t\t\t\t}\r\n\t\t\t\tinitialCount ? option.initialCount = count : option.count = count;\r\n\t\t\t\toption.disabled = count === 0;\r\n\t\t\t});\r\n\t\t\tif (initialCount) {\r\n\t\t\t\tfilter.options.sort((a, b) => b.initialCount - a.initialCount);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n","import { combineLatest } from 'rxjs';\nimport { first, takeUntil } from 'rxjs/operators';\nimport FilterItem from '../filter/filter-item';\nimport FilterService from '../filter/filter.service';\nimport LocationService from '../location/location.service';\nimport PageComponent from '../page/page.component';\nimport ChannelService from './channel.service';\n\nexport default class ChannelPageComponent extends PageComponent {\n\n\tonInit() {\n\t\tthis.grid = {\n\t\t\tmode: 1,\n\t\t\twidth: 350,\n\t\t\tgutter: 2,\n\t\t};\n\t\tthis.channels = null;\n\t\tthis.channel = null;\n\t\tthis.listing = null;\n\t\tthis.filters = null;\n\t\tthis.secondaryFiltersVisible = false;\n\t\tthis.secondaryFilters = null;\n\t\tthis.activeFilters = null;\n\t\tthis.filteredItems = [];\n\t\tthis.load$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe(data => {\n\t\t\tthis.channels = data[0];\n\t\t\tthis.channel = data[1];\n\t\t\tthis.listing = data[2];\n\t\t\tthis.setFilters(data[3]);\n\t\t\tthis.startFilter(this.listing);\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tload$() {\n\t\tconst channelId = LocationService.get('channelId');\n\t\treturn combineLatest(\n\t\t\tChannelService.channels$,\n\t\t\tChannelService.detail$(channelId),\n\t\t\tChannelService.listing$(channelId),\n\t\t\tChannelService.filter$(channelId),\n\t\t);\n\t}\n\n\tsetFilters(filters) {\n\t\tconst filterObject = {\n\t\t\ttype: {\n\t\t\t\tlabel: 'Type',\n\t\t\t\tmode: 'select',\n\t\t\t\toptions: [{\n\t\t\t\t\tvalue: 'event',\n\t\t\t\t\tlabel: 'Event',\n\t\t\t\t}, {\n\t\t\t\t\tvalue: 'picture',\n\t\t\t\t\tlabel: 'Picture',\n\t\t\t\t}, {\n\t\t\t\t\tvalue: 'product',\n\t\t\t\t\tlabel: 'Product',\n\t\t\t\t}, {\n\t\t\t\t\tvalue: 'magazine',\n\t\t\t\t\tlabel: 'Magazine',\n\t\t\t\t}]\n\t\t\t},\n\t\t};\n\t\tfilters.forEach(filter => {\n\t\t\tfilter.mode = 'or';\n\t\t\tfilterObject[filter.key] = filter;\n\t\t});\n\t\tconst filterService = this.filterService = new FilterService(filterObject, {}, (key, filter) => {\n\t\t\tswitch (key) {\n\t\t\t\tcase 'type':\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\treturn item.type === value;\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'tag':\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\treturn item.tags.indexOf(value) !== -1;\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\treturn item.features.indexOf(value) !== -1;\n\t\t\t\t\t};\n\t\t\t}\n\t\t});\n\t\tthis.filters = filterService.filters;\n\t\tthis.secondaryFilters = Object.keys(this.filters).filter(key => key !== 'type').map(key => {\n\t\t\treturn this.filters[key];\n\t\t});\n\t}\n\n\tstartFilter(items) {\n\t\tthis.filterService.items$(items).pipe(\n\t\t\ttakeUntil(this.unsubscribe$),\n\t\t).subscribe(filteredItems => {\n\t\t\tthis.filteredItems = [];\n\t\t\tthis.activeFilters = [];\n\t\t\tthis.pushChanges();\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.filteredItems = filteredItems;\n\t\t\t\tthis.activeFilters = this.secondaryFilters.map(f => {\n\t\t\t\t\tf = new FilterItem(f);\n\t\t\t\t\tf.options = f.options.filter(o => f.has(o));\n\t\t\t\t\treturn f;\n\t\t\t\t}).filter(f => f.options.length);\n\t\t\t\tthis.pushChanges();\n\t\t\t}, 1);\n\t\t\t// console.log('ChannelPageComponent.filteredItems', filteredItems.length);\n\t\t});\n\t}\n\n\ttoggleGrid() {\n\t\tthis.grid.width = this.grid.width === 350 ? 525 : 350;\n\t\tthis.pushChanges();\n\t}\n\n\ttoggleFilters() {\n\t\tthis.secondaryFiltersVisible = !this.secondaryFiltersVisible;\n\t\tthis.pushChanges();\n\t}\n\n}\n\nChannelPageComponent.meta = {\n\tselector: '[channel-page]',\n};\n","import { Component } from 'rxcomp';\nimport { first } from 'rxjs/operators';\nimport ChannelService from './channel.service';\n\nexport default class ChannelComponent extends Component {\n\n\ttoggleSubscribe() {\n\t\tlet flag = this.channel.info.subscribed;\n\t\tChannelService[flag ? 'unsubscribe$' : 'subscribe$'](this.channel.id).pipe(\n\t\t\tfirst()\n\t\t).subscribe(() => {\n\t\t\tflag = !flag;\n\t\t\tthis.channel.info.subscribed = flag;\n\t\t\tif (flag) {\n\t\t\t\tthis.channel.info.subscribers++;\n\t\t\t} else {\n\t\t\t\tthis.channel.info.subscribers--;\n\t\t\t}\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\ttoggleLike() {\n\t\tlet flag = this.channel.info.liked;\n\t\tChannelService[flag ? 'unlike$' : 'like$'](this.channel.id).pipe(\n\t\t\tfirst()\n\t\t).subscribe(() => {\n\t\t\tflag = !flag;\n\t\t\tthis.channel.info.liked = flag;\n\t\t\tif (flag) {\n\t\t\t\tthis.channel.info.likes++;\n\t\t\t} else {\n\t\t\t\tthis.channel.info.likes--;\n\t\t\t}\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n}\n\nChannelComponent.meta = {\n\tselector: '[channel]',\n\tinputs: ['channel']\n};\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { filter, shareReplay, takeUntil } from 'rxjs/operators';\r\n\r\nexport default class ClickOutsideDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tthis.initialFocus = false;\r\n\t\tconst { module, node, parentInstance, selector } = getContext(this);\r\n\t\tconst event$ = this.event$ = fromEvent(document, 'click').pipe(\r\n\t\t\tfilter(event => {\r\n\t\t\t\tconst target = event.target;\r\n\t\t\t\t// console.log('ClickOutsideDirective.onClick', this.element.nativeElement, target, this.element.nativeElement.contains(target));\r\n\t\t\t\t// const documentContained: boolean = Boolean(document.compareDocumentPosition(target) & Node.DOCUMENT_POSITION_CONTAINED_BY);\r\n\t\t\t\t// console.log(target, documentContained);\r\n\t\t\t\tconst clickedInside = node.contains(target) || !document.contains(target);\r\n\t\t\t\tif (!clickedInside) {\r\n\t\t\t\t\tif (this.initialFocus) {\r\n\t\t\t\t\t\tthis.initialFocus = false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.initialFocus = true;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t\tconst expression = node.getAttribute(`(clickOutside)`);\r\n\t\tif (expression) {\r\n\t\t\tconst outputFunction = module.makeFunction(expression, ['$event']);\r\n\t\t\tevent$.pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\tmodule.resolve(outputFunction, parentInstance, event);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tparentInstance.clickOutside$ = event$;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nClickOutsideDirective.meta = {\r\n\tselector: `[(clickOutside)]`,\r\n};\r\n","import { Pipe } from \"rxcomp\";\n\nexport default class CountPipe extends Pipe {\n\n\tstatic isNumber(value) {\n\t\treturn typeof value === 'number' && isFinite(value);\n\t}\n\n\tstatic transform(value) {\n\t\tif (!CountPipe.isNumber(value)) {\n\t\t\treturn value;\n\t\t}\n\t\tvalue = parseInt(value);\n\t\tlet count = '';\n\t\tif (value > 1000000) {\n\t\t\tvalue = Math.floor(value / 100000) / 10;\n\t\t\tcount = value + 'M';\n\t\t} else if (value > 1000) {\n\t\t\tvalue = Math.floor(value / 100) / 10;\n\t\t\tcount = value + 'k';\n\t\t} else {\n\t\t\treturn value;\n\t\t}\n\t\treturn count;\n\t}\n\n}\n\nCountPipe.meta = {\n\tname: 'count',\n};\n","export const LocaleType = {\n\tDateFormats: 'dateFormats',\n\tTimeFormats: 'timeFormats',\n\tDayPeriods: 'dayPeriods',\n\tDays: 'days',\n\tMonths: 'months',\n\tEras: 'eras',\n\tNumberSymbols: 'numberSymbols',\n};\n\nexport const LocaleStyle = {\n\t// For `en-US`, 'M/d/yy, h:mm a'` (Example: `6/15/15, 9:03 AM`)\n\tShort: 'short',\n\t// For `en-US`, `'MMM d, y, h:mm:ss a'` (Example: `Jun 15, 2015, 9:03:01 AM`)\n\tMedium: 'medium',\n\t// For `en-US`, `'MMMM d, y, h:mm:ss a z'` (Example: `June 15, 2015 at 9:03:01 AM GMT+1`)\n\tLong: 'long',\n\t// For `en-US`, `'EEEE, MMMM d, y, h:mm:ss a zzzz'` (Example: `Monday, June 15, 2015 at 9:03:01 AM GMT+01:00`)\n\tFull: 'full',\n};\n\nexport const LocaleLength = {\n\t// 1 character for `en-US`. For example: 'S'\n\tNarrow: 'narrow',\n\t// 2 characters for `en-US`, For example: 'Su'\n\tShort: 'short',\n\t// 3 characters for `en-US`. For example: 'Sun'\n\tAbbreviated: 'abbreviated',\n\t// Full length for `en-US`. For example: 'Sunday'\n\tWide: 'wide',\n};\n\nexport const LocaleDay = {\n\tSunday: 'sunday',\n\tMonday: 'monday',\n\tTuesday: 'tuesday',\n\tWednesday: 'wednesday',\n\tThursday: 'thursday',\n\tFriday: 'friday',\n\tSaturday: 'saturday',\n};\n\nexport const LocaleMonth = {\n\tJanuary: 'january',\n\tFebruary: 'february',\n\tMarch: 'march',\n\tApril: 'april',\n\tMay: 'may',\n\tJune: 'june',\n\tJuly: 'july',\n\tAugust: 'august',\n\tSeptember: 'september',\n\tOctober: 'october',\n\tNovember: 'november',\n\tDecember: 'december',\n};\n\nexport const LocaleDayPeriod = {\n\tAM: 'am',\n\tPM: 'pm',\n};\n\nexport const LocaleEra = {\n\tBC: 'bc',\n\tAD: 'ad',\n};\n\nexport const LocaleNumberSymbol = {\n\t// Decimal separator. For `en-US`, the dot character. Example : 2,345`.`67\n\tDecimal: 'decimal',\n\t// Grouping separator, typically for thousands. For `en-US`, the comma character. Example: 2`,`345.67\n\tGroup: 'group',\n\t// List-item separator. Example: 'one, two, and three'\n\tList: 'list',\n\t// Sign for percentage (out of 100). Example: 23.4%\n\tPercentSign: 'percentSign',\n\t// Sign for positive numbers. Example: +23\n\tPlusSign: 'plusSign',\n\t// Sign for negative numbers. Example: -23\n\tMinusSign: 'minusSign',\n\t// Computer notation for exponential value (n times a power of 10). Example: 1.2E3\n\tExponential: 'exponential',\n\t// Human-readable format of exponential. Example: 1.2x103\n\tSuperscriptingExponent: 'superscriptingExponent',\n\t// Sign for permille (out of 1000). Example: 23.4‰\n\tPerMille: 'perMille',\n\t// Infinity, can be used with plus and minus. Example: ∞, +∞, -∞\n\tInfinity: 'infinity',\n\t// Not a number. Example: NaN\n\tNaN: 'nan',\n\t// Symbol used between time units. Example: 10:52\n\tTimeSeparator: 'timeSeparator',\n\t// Decimal separator for currency values (fallback to `Decimal`). Example: $2,345.67\n\tCurrencyDecimal: 'currencyDecimal',\n\t// Group separator for currency values (fallback to `Group`). Example: $2,345.67\n\tCurrencyGroup: 'currencyGroup',\n};\n\nconst locale_en = {\n\tid: 'en',\n\tdateFormats: {\n\t\tshort: 'M/d/yy',\n\t\tmedium: 'MMM d, y',\n\t\tlong: 'MMMM d, y',\n\t\tfull: 'EEEE, MMMM d, y',\n\t},\n\ttimeFormats: {\n\t\tshort: 'h:mm a',\n\t\tmedium: 'h:mm:ss a',\n\t\tlong: 'h:mm:ss a z',\n\t\tfull: 'h:mm:ss a zzzz',\n\t},\n\tdayPeriods: {\n\t\tnarrow: {\n\t\t\tam: 'a',\n\t\t\tpm: 'p',\n\t\t},\n\t\tabbreviated: {\n\t\t\tam: 'AM',\n\t\t\tpm: 'PM',\n\t\t},\n\t\twide: {\n\t\t\tam: 'AM',\n\t\t\tpm: 'PM',\n\t\t},\n\t},\n\tdays: {\n\t\tnarrow: { sunday: 'S', monday: 'M', tuesday: 'T', wednesday: 'W', thursday: 'T', friday: 'F', saturday: 'S' },\n\t\tshort: { sunday: 'Su', monday: 'Mo', tuesday: 'Tu', wednesday: 'We', thursday: 'Th', friday: 'Fr', saturday: 'Sa' },\n\t\tabbreviated: { sunday: 'Sun', monday: 'Mon', tuesday: 'Tue', wednesday: 'Wed', thursday: 'Thu', friday: 'Fri', saturday: 'Sat' },\n\t\twide: { sunday: 'Sunday', monday: 'Monday', tuesday: 'Tuesday', wednesday: 'Wednesday', thursday: 'Thursday', friday: 'Friday', saturday: 'Saturday' },\n\t},\n\tmonths: {\n\t\tnarrow: { january: 'J', february: 'F', march: 'M', april: 'A', may: 'M', june: 'J', july: 'J', august: 'A', september: 'S', october: 'O', november: 'N', december: 'D' },\n\t\tabbreviated: { january: 'Jan', february: 'Feb', march: 'Mar', april: 'Apr', may: 'May', june: 'Jun', july: 'Jul', august: 'Aug', september: 'Sep', october: 'Oct', november: 'Nov', december: 'Dec' },\n\t\twide: { january: 'January', february: 'February', march: 'March', april: 'April', may: 'May', june: 'June', july: 'July', august: 'August', september: 'September', october: 'October', november: 'November', december: 'December' },\n\t},\n\teras: {\n\t\tnarrow: { bc: 'B', ad: 'A' },\n\t\tabbreviated: { bc: 'BC', ad: 'AD' },\n\t\twide: { bc: 'Before Christ', ad: 'Anno Domini' },\n\t},\n\tnumberSymbols: {\n\t\tdecimal: '.',\n\t\tgroup: ',',\n\t\tlist: ';',\n\t\tpercentSign: '%',\n\t\tplusSign: '+',\n\t\tminusSign: '-',\n\t\texponential: 'E',\n\t\tsuperscriptingExponent: '×',\n\t\tperMille: '‰',\n\t\tinfinite: '∞',\n\t\tnan: 'NaN',\n\t\ttimeSeparator: ':',\n\t\t// currencyDecimal: undefined, // fallback to decimal\n\t\t// currencyGroup: undefined, // fallback to group\n\t},\n};\n\nconst locale_it = {\n\tid: 'it',\n\tdateFormats: {\n\t\tshort: 'dd/MM/yy',\n\t\tmedium: 'd MMM y',\n\t\tlong: 'd MMMM y',\n\t\tfull: 'EEEE d MMMM y',\n\t},\n\ttimeFormats: {\n\t\tshort: 'HH:mm',\n\t\tmedium: 'HH:mm:ss',\n\t\tlong: 'HH:mm:ss z',\n\t\tfull: 'HH:mm:ss zzzz'\n\t},\n\tdayPeriods: {\n\t\tnarrow: {\n\t\t\tam: 'm',\n\t\t\tpm: 'p',\n\t\t},\n\t\tabbreviated: {\n\t\t\tam: 'AM',\n\t\t\tpm: 'PM',\n\t\t},\n\t\twide: {\n\t\t\tam: 'AM',\n\t\t\tpm: 'PM',\n\t\t},\n\t},\n\tdays: {\n\t\tnarrow: { sunday: 'D', monday: 'L', tuesday: 'M', wednesday: 'M', thursday: 'G', friday: 'V', saturday: 'S' },\n\t\tshort: { sunday: 'Do', monday: 'Lu', tuesday: 'Ma', wednesday: 'Me', thursday: 'Gi', friday: 'Ve', saturday: 'Sa' },\n\t\tabbreviated: { sunday: 'Dom', monday: 'Lun', tuesday: 'Mar', wednesday: 'Mer', thursday: 'Gio', friday: 'Ven', saturday: 'Sab' },\n\t\twide: { sunday: 'Domenica', monday: 'Lunedì', tuesday: 'Martedì', wednesday: 'Mercoledì', thursday: 'Giovedì', friday: 'Venerdì', saturday: 'Sabato' },\n\t},\n\tmonths: {\n\t\tnarrow: { january: 'G', february: 'F', march: 'M', april: 'A', may: 'M', june: 'G', july: 'L', august: 'A', september: 'S', october: 'O', november: 'N', december: 'D' },\n\t\tabbreviated: { january: 'Gen', february: 'Feb', march: 'Mar', april: 'Apr', may: 'Mag', june: 'Giu', july: 'Lug', august: 'Ago', september: 'Set', october: 'Ott', november: 'Nov', december: 'Dic' },\n\t\twide: { january: 'Gennaio', february: 'Febbraio', march: 'Marzo', april: 'Aprile', may: 'Maggio', june: 'Giugno', july: 'Luglio', august: 'Agosto', september: 'Settembre', october: 'Ottobre', november: 'Novembre', december: 'Dicembre' },\n\t},\n\teras: {\n\t\tnarrow: { bc: 'aC', ad: 'dC' },\n\t\tabbreviated: { bc: 'a.C.', ad: 'd.C.' },\n\t\twide: { bc: 'avanti Cristo', ad: 'dopo Cristo' },\n\t},\n\tnumberSymbols: {\n\t\tdecimal: ',',\n\t\tgroup: '.',\n\t\tlist: ';',\n\t\tpercentSign: '%',\n\t\tplusSign: '+',\n\t\tminusSign: '-',\n\t\texponential: 'E',\n\t\tsuperscriptingExponent: '×',\n\t\tperMille: '‰',\n\t\tinfinite: '∞',\n\t\tnan: 'NaN',\n\t\ttimeSeparator: ':',\n\t\t// currencyDecimal: undefined, // fallback to decimal\n\t\t// currencyGroup: undefined, // fallback to group\n\t},\n};\n\nexport default class LocaleService {\n\n\tstatic getLocale() {\n\t\tconst locale = window.locale || LocaleService.defaultLocale;\n\t\tconst key = [...arguments].join('.');\n\t\t// console.log(key, locale[key]);\n\t\treturn locale[key] || `{${key}}`;\n\t}\n\n\tstatic getObjectLocale() {\n\t\t// console.log([...arguments].join(','));\n\t\tlet value;\n\t\tfor (let i = 0; i < arguments.length; i++) {\n\t\t\tconst key = arguments[i];\n\t\t\tvalue = value ? value[key] : locale[key];\n\t\t}\n\t\treturn value;\n\t}\n\n\tstatic toLocaleString(locale, out = {}, ...args) {\n\t\tif (typeof locale === 'string') {\n\t\t\tout[args.join('.')] = locale;\n\t\t} else {\n\t\t\tObject.keys(locale).forEach(key => {\n\t\t\t\tconst keys = args.slice();\n\t\t\t\tkeys.push(key);\n\t\t\t\tout = this.toLocaleString(locale[key], out, ...keys);\n\t\t\t});\n\t\t}\n\t\treturn out;\n\t}\n\n\tstatic toLocaleObject(locale, key, out = {}) {\n\t\tif (typeof locale === 'string') {\n\t\t\tout[key] = locale;\n\t\t} else {\n\t\t\tif (key) {\n\t\t\t\tout = out[key] = {};\n\t\t\t}\n\t\t\tObject.keys(locale).forEach(key => {\n\t\t\t\tout = this.toLocaleObject(locale[key], key, out);\n\t\t\t});\n\t\t}\n\t\treturn out;\n\t}\n\n}\n\nLocaleService.defaultLocale = LocaleService.toLocaleString(locale_it);\n","import LocaleService, { LocaleDay, LocaleDayPeriod, LocaleEra, LocaleLength, LocaleMonth, LocaleNumberSymbol, LocaleStyle, LocaleType } from '../locale/locale.service';\r\n\r\nexport const NumberFormatStyle_ = {\r\n\tDecimal: 'decimal',\r\n\tPercent: 'percent',\r\n\tCurrency: 'currency',\r\n\tScientific: 'scientific',\r\n};\r\n\r\nexport const Plural_ = {\r\n\tZero: 0,\r\n\tOne: 1,\r\n\tTwo: 2,\r\n\tFew: 3,\r\n\tMany: 4,\r\n\tOther: 5,\r\n};\r\n\r\nexport const TimezoneLength = {\r\n\tShort: 'short',\r\n\tShortGMT: 'shortGmt',\r\n\tLong: 'long',\r\n\tExtended: 'extended',\r\n};\r\n\r\nexport const DatePart = {\r\n\tFullYear: 'fullYear',\r\n\tMonth: 'month',\r\n\tDate: 'date',\r\n\tHours: 'hours',\r\n\tMinutes: 'minutes',\r\n\tSeconds: 'seconds',\r\n\tMilliseconds: 'milliseconds',\r\n\tDay: 'day',\r\n};\r\n\r\n/*\r\n// Converts a value to date. Throws if unable to convert to a date.\r\nexport const ISO8601_DATE_REGEX = /^(\\d{4})-?(\\d\\d)-?(\\d\\d)(?:T(\\d\\d)(?::?(\\d\\d)(?::?(\\d\\d)(?:\\.(\\d+))?)?)?(Z|([+-])(\\d\\d):?(\\d\\d))?)?$/;\r\nexport function parseDate(value) {\r\n\tif (isDate(value)) {\r\n\t\treturn value;\r\n\t}\r\n\tif (typeof value === 'number' && !isNaN(value)) {\r\n\t\treturn new Date(value);\r\n\t}\r\n\tif (typeof value === 'string') {\r\n\t\tvalue = value.trim();\r\n\t\tconst parsedNb = parseFloat(value);\r\n\t\t// any string that only contains numbers, like '1234' but not like '1234hello'\r\n\t\tif (!isNaN(value - parsedNb)) {\r\n\t\t\treturn new Date(parsedNb);\r\n\t\t}\r\n\t\tif (/^(\\d{4}-\\d{1,2}-\\d{1,2})$/.test(value)) {\r\n\t\t\t// For ISO Strings without time the day, month and year must be extracted from the ISO String\r\n      // before Date creation to avoid time offset and errors in the new Date.\r\n      // If we only replace '-' with ',' in the ISO String ('2015,01,01'), and try to create a new\r\n      // date, some browsers (e.g. IE 9) will throw an invalid Date error.\r\n      // If we leave the '-' ('2015-01-01') and try to create a new Date('2015-01-01') the timeoffset\r\n      // is applied.\r\n      // Note: ISO months are 0 for January, 1 for February, ...\r\n\t\t\tconst [y, m, d] = value.split('-').map(val => +val);\r\n\t\t\treturn new Date(y, m - 1, d);\r\n\t\t}\r\n\t\tconst match = value.match(ISO8601_DATE_REGEX);\r\n\t\tif (match) {\r\n\t\t\treturn isoStringToDate(match);\r\n\t\t}\r\n\t}\r\n\tconst date = new Date(value);\r\n\tif (!isDate(date)) {\r\n\t\tthrow new Error(`Unable to convert \"${value}\" into a date`);\r\n\t}\r\n\treturn date;\r\n}\r\n\r\n// Converts a date in ISO8601 to a Date. Used instead of `Date.parse` because of browser discrepancies.\r\nexport function isoStringToDate(match) {\r\n\tconst date = new Date(0);\r\n\tlet tzHour = 0;\r\n\tlet tzMin = 0;\r\n\t// match[8] means that the string contains 'Z' (UTC) or a timezone like '+01:00' or '+0100'\r\n\tconst dateSetter = match[8] ? date.setUTCFullYear : date.setFullYear;\r\n\tconst timeSetter = match[8] ? date.setUTCHours : date.setHours;\r\n\t// if there is a timezone defined like '+01:00' or '+0100'\r\n\tif (match[9]) {\r\n\t\ttzHour = Number(match[9] + match[10]);\r\n\t\ttzMin = Number(match[9] + match[11]);\r\n\t}\r\n\tdateSetter.call(date, Number(match[1]), Number(match[2]) - 1, Number(match[3]));\r\n\tconst h = Number(match[4] || 0) - tzHour;\r\n\tconst m = Number(match[5] || 0) - tzMin;\r\n\tconst s = Number(match[6] || 0);\r\n\tconst ms = Math.round(parseFloat('0.' + (match[7] || 0)) * 1000);\r\n\ttimeSetter.call(date, h, m, s, ms);\r\n\treturn date;\r\n}\r\n\r\nexport function isDate(value) {\r\n\treturn value instanceof Date && !isNaN(value.valueOf());\r\n}\r\n*/\r\n\r\nfunction padNumber(num, digits, minusSign = '-', trim, negWrap) {\r\n\tlet neg = '';\r\n\tif (negWrap && num <= 0) {\r\n\t\tnum = -num + 1;\r\n\t} else if (num < 0) {\r\n\t\tnum = -num;\r\n\t\tneg = minusSign;\r\n\t}\r\n\tlet strNum = String(num);\r\n\twhile (strNum.length < digits) {\r\n\t\tstrNum = '0' + strNum;\r\n\t}\r\n\tif (trim) {\r\n\t\tstrNum = strNum.substr(strNum.length - digits);\r\n\t}\r\n\treturn neg + strNum;\r\n}\r\n\r\nconst FORMAT_SPLITTER_REGEX = /((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\\s\\S]*)/;\r\nconst JANUARY = 0;\r\nconst THURSDAY = 4;\r\n\r\nexport default class DateTimeService {\r\n\tstatic getDatePart(part, date) {\r\n\t\tswitch (part) {\r\n\t\t\tcase DatePart.FullYear:\r\n\t\t\t\treturn date.getFullYear();\r\n\t\t\tcase DatePart.Month:\r\n\t\t\t\treturn date.getMonth();\r\n\t\t\tcase DatePart.Date:\r\n\t\t\t\treturn date.getDate();\r\n\t\t\tcase DatePart.Day:\r\n\t\t\t\treturn date.getDay();\r\n\t\t\tcase DatePart.Hours:\r\n\t\t\t\treturn date.getHours();\r\n\t\t\tcase DatePart.Minutes:\r\n\t\t\t\treturn date.getMinutes();\r\n\t\t\tcase DatePart.Seconds:\r\n\t\t\t\treturn date.getSeconds();\r\n\t\t\tcase DatePart.Milliseconds:\r\n\t\t\t\treturn date.getMilliseconds();\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(`Unknown DatePart value \"${part}\".`);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic formatMilliseconds(milliseconds, digits) {\r\n\t\tconst strMs = padNumber(milliseconds, 3);\r\n\t\treturn strMs.substr(0, digits);\r\n\t}\r\n\r\n\tstatic getDateFormatter(name, digits, offset = 0, trim = false, negWrap = false) {\r\n\t\treturn function(date, locale) {\r\n\t\t\tlet part = DateTimeService.getDatePart(name, date);\r\n\t\t\tif (offset > 0 || part > -offset) {\r\n\t\t\t\tpart += offset;\r\n\t\t\t}\r\n\t\t\tif (name === DatePart.Hours) {\r\n\t\t\t\tif (part === 0 && offset === -12) {\r\n\t\t\t\t\tpart = 12;\r\n\t\t\t\t}\r\n\t\t\t} else if (name === DatePart.Milliseconds) {\r\n\t\t\t\treturn DateTimeService.formatMilliseconds(part, digits);\r\n\t\t\t}\r\n\t\t\tconst localeMinus = LocaleService.getLocale(LocaleType.NumberSymbols, LocaleNumberSymbol.MinusSign);\r\n\t\t\treturn padNumber(part, digits, localeMinus, trim, negWrap);\r\n\t\t};\r\n\t}\r\n\r\n\tstatic getDateTranslation(date, name, width, extended) {\r\n\t\tlet locale;\r\n\t\tswitch (name) {\r\n\t\t\tcase LocaleType.Days:\r\n\t\t\t\treturn LocaleService.getLocale(LocaleType.Days, width, Object.values(LocaleDay)[date.getDay()]);\r\n\t\t\t\t// return getLocaleDayNames(width)[Object.values(LocaleDay)[date.getDay()]];\r\n\t\t\tcase LocaleType.Months:\r\n\t\t\t\treturn LocaleService.getLocale(LocaleType.Months, width, Object.values(LocaleMonth)[date.getMonth()]);\r\n\t\t\tcase LocaleType.DayPeriods:\r\n\t\t\t\tconst currentHours = date.getHours();\r\n\t\t\t\t/*\r\n\t\t\t\tconst currentMinutes = date.getMinutes();\r\n\t\t\t\tif (extended) {\r\n\t\t\t\t\tconst rules = getLocaleExtraDayPeriodRules();\r\n\t\t\t\t\tconst dayPeriods = getLocaleExtraDayPeriods(width);\r\n\t\t\t\t\tconst index = rules.findIndex(rule => {\r\n\t\t\t\t\t\tif (Array.isArray(rule)) {\r\n\t\t\t\t\t\t\t// morning, afternoon, evening, night\r\n\t\t\t\t\t\t\tconst [from, to] = rule;\r\n\t\t\t\t\t\t\tconst afterFrom = currentHours >= from.hours && currentMinutes >= from.minutes;\r\n\t\t\t\t\t\t\tconst beforeTo = currentHours < to.hours || (currentHours === to.hours && currentMinutes < to.minutes);\r\n\t\t\t\t\t\t\t// We must account for normal rules that span a period during the day (e.g. 6am-9am)\r\n\t\t\t\t\t\t\t// where `from` is less (earlier) than `to`. But also rules that span midnight (e.g.\r\n\t\t\t\t\t\t\t// 10pm - 5am) where `from` is greater (later!) than `to`.\r\n\t\t\t\t\t\t\t//\r\n\t\t\t\t\t\t\t// In the first case the current time must be BOTH after `from` AND before `to`\r\n\t\t\t\t\t\t\t// (e.g. 8am is after 6am AND before 10am).\r\n\t\t\t\t\t\t\t//\r\n\t\t\t\t\t\t\t// In the second case the current time must be EITHER after `from` OR before `to`\r\n\t\t\t\t\t\t\t// (e.g. 4am is before 5am but not after 10pm; and 11pm is not before 5am but it is\r\n\t\t\t\t\t\t\t// after 10pm).\r\n\t\t\t\t\t\t\tif (from.hours < to.hours) {\r\n\t\t\t\t\t\t\t\tif (afterFrom && beforeTo) {\r\n\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (afterFrom || beforeTo) {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// noon or midnight\r\n\t\t\t\t\t\t\tif (rule.hours === currentHours && rule.minutes === currentMinutes) {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\treturn dayPeriods[index];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t*/\r\n\t\t\t\t// if no rules for the day periods, we use am/pm by default\r\n\t\t\t\treturn LocaleService.getLocale(LocaleType.DayPeriods, width, currentHours < 12 ? LocaleDayPeriod.AM : LocaleDayPeriod.PM);\r\n\t\t\tcase LocaleType.Eras:\r\n\t\t\t\treturn LocaleService.getLocale(LocaleType.Eras, width, date.getFullYear() <= 0 ? LocaleEra.BC : LocaleEra.AD);\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(`unknown translation type ${name}`);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getDateLocaleFormatter(name, width, extended = false) {\r\n\t\treturn function(date) {\r\n\t\t\treturn DateTimeService.getDateTranslation(date, name, width, extended);\r\n\t\t};\r\n\t}\r\n\r\n\tstatic getWeekFirstThursdayOfYear(year) {\r\n\t\tconst firstDayOfYear = new Date(year, JANUARY, 1).getDay();\r\n\t\treturn new Date(year, 0, 1 + (firstDayOfYear <= THURSDAY ? THURSDAY : THURSDAY + 7) - firstDayOfYear);\r\n\t}\r\n\r\n\tstatic getWeekThursday(datetime) {\r\n\t\treturn new Date(datetime.getFullYear(), datetime.getMonth(), datetime.getDate() + (THURSDAY - datetime.getDay()));\r\n\t}\r\n\r\n\tstatic getWeekFormatter(digits, monthBased = false) {\r\n\t\treturn function(date, locale) {\r\n\t\t\tlet result;\r\n\t\t\tif (monthBased) {\r\n\t\t\t\tconst nbDaysBefore1stDayOfMonth = new Date(date.getFullYear(), date.getMonth(), 1).getDay() - 1;\r\n\t\t\t\tconst today = date.getDate();\r\n\t\t\t\tresult = 1 + Math.floor((today + nbDaysBefore1stDayOfMonth) / 7);\r\n\t\t\t} else {\r\n\t\t\t\tconst firstThurs = DateTimeService.getWeekFirstThursdayOfYear(date.getFullYear());\r\n\t\t\t\tconst thisThurs = DateTimeService.getWeekThursday(date);\r\n\t\t\t\tconst diff = thisThurs.getTime() - firstThurs.getTime();\r\n\t\t\t\tresult = 1 + Math.round(diff / 6.048e8); // 6.048e8 ms per week\r\n\t\t\t}\r\n\t\t\treturn padNumber(result, digits, LocaleService.getLocale(LocaleType.NumberSymbols, LocaleNumberSymbol.MinusSign));\r\n\t\t};\r\n\t}\r\n\r\n\tstatic getTimezoneFormatter(width) {\r\n\t\treturn function(date, offset) {\r\n\t\t\tconst zone = -1 * offset;\r\n\t\t\tconst minusSign = LocaleService.getLocale(LocaleType.NumberSymbols, LocaleNumberSymbol.MinusSign);\r\n\t\t\tconst hours = zone > 0 ? Math.floor(zone / 60) : Math.ceil(zone / 60);\r\n\t\t\tswitch (width) {\r\n\t\t\t\tcase TimezoneLength.Short:\r\n\t\t\t\t\treturn (zone >= 0 ? '+' : '') + padNumber(hours, 2, minusSign) + padNumber(Math.abs(zone % 60), 2, minusSign);\r\n\t\t\t\tcase TimezoneLength.ShortGMT:\r\n\t\t\t\t\treturn 'GMT' + (zone >= 0 ? '+' : '') + padNumber(hours, 1, minusSign);\r\n\t\t\t\tcase TimezoneLength.Long:\r\n\t\t\t\t\treturn 'GMT' + (zone >= 0 ? '+' : '') + padNumber(hours, 2, minusSign) + ':' + padNumber(Math.abs(zone % 60), 2, minusSign);\r\n\t\t\t\tcase TimezoneLength.Extended:\r\n\t\t\t\t\tif (offset === 0) {\r\n\t\t\t\t\t\treturn 'Z';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn (zone >= 0 ? '+' : '') + padNumber(hours, 2, minusSign) + ':' + padNumber(Math.abs(zone % 60), 2, minusSign);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tthrow new Error(`Unknown zone width \"${width}\"`);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\t// Based on CLDR formats:\r\n\t// See complete list: http://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table\r\n\t// See also explanations: http://cldr.unicode.org/translation/date-time\r\n\t// TODO(ocombe): support all missing cldr formats: Y, U, Q, D, F, e, c, j, J, C, A, v, V, X, x\r\n\t// const CACHED_FORMATTERS = {};\r\n\tstatic getFormatter(format) {\r\n\t\t/*\r\n\t// cache\r\n\tif (CACHED_FORMATTERS[format]) {\r\n\t\treturn CACHED_FORMATTERS[format];\r\n\t}\r\n\t*/\r\n\t\tlet formatter;\r\n\t\tswitch (format) {\r\n\t\t\t// 1 digit representation of the year, e.g. (AD 1 => 1, AD 199 => 199)\r\n\t\t\tcase 'y':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.FullYear, 1, 0, false, true);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// 2 digit representation of the year, padded (00-99). (e.g. AD 2001 => 01, AD 2010 => 10)\r\n\t\t\tcase 'yy':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.FullYear, 2, 0, true, true);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// 3 digit representation of the year, padded (000-999). (e.g. AD 2001 => 01, AD 2010 => 10)\r\n\t\t\tcase 'yyy':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.FullYear, 3, 0, false, true);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// 4 digit representation of the year (e.g. AD 1 => 0001, AD 2010 => 2010)\r\n\t\t\tcase 'yyyy':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.FullYear, 4, 0, false, true);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Month of the year (1-12), numeric\r\n\t\t\tcase 'M':\r\n\t\t\tcase 'L':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Month, 1, 1);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'MM':\r\n\t\t\tcase 'LL':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Month, 2, 1);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Day of the month (1-31)\r\n\t\t\tcase 'd':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Date, 1);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'dd':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Date, 2);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Hour in AM/PM, (1-12)\r\n\t\t\tcase 'h':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Hours, 1, -12);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'hh':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Hours, 2, -12);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Hour of the day (0-23)\r\n\t\t\tcase 'H':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Hours, 1);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Hour in day, padded (00-23)\r\n\t\t\tcase 'HH':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Hours, 2);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Minute of the hour (0-59)\r\n\t\t\tcase 'm':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Minutes, 1);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'mm':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Minutes, 2);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Second of the minute (0-59)\r\n\t\t\tcase 's':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Seconds, 1);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'ss':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Seconds, 2);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Fractional second\r\n\t\t\tcase 'S':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Milliseconds, 1);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'SS':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Milliseconds, 2);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'SSS':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Milliseconds, 3);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Month of the year (January, ...), string, format\r\n\t\t\tcase 'MMM':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.Months, LocaleLength.Abbreviated);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'MMMM':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.Months, LocaleLength.Wide);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'MMMMM':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.Months, LocaleLength.Narrow);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Month of the year (January, ...), string, standalone\r\n\t\t\tcase 'LLL':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.Months, LocaleLength.Abbreviated, FormStyle.Standalone);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'LLLL':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.Months, LocaleLength.Wide, FormStyle.Standalone);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'LLLLL':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.Months, LocaleLength.Narrow, FormStyle.Standalone);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Day of the Week\r\n\t\t\tcase 'E':\r\n\t\t\tcase 'EE':\r\n\t\t\tcase 'EEE':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.Days, LocaleLength.Abbreviated);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'EEEE':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.Days, LocaleLength.Wide);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'EEEEE':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.Days, LocaleLength.Narrow);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'EEEEEE':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.Days, LocaleLength.Short);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Generic period of the day (am-pm)\r\n\t\t\tcase 'a':\r\n\t\t\tcase 'aa':\r\n\t\t\tcase 'aaa':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.DayPeriods, LocaleLength.Abbreviated);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'aaaa':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.DayPeriods, LocaleLength.Wide);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'aaaaa':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.DayPeriods, LocaleLength.Narrow);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Extended period of the day (midnight, at night, ...), standalone\r\n\t\t\tcase 'b':\r\n\t\t\tcase 'bb':\r\n\t\t\tcase 'bbb':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.DayPeriods, LocaleLength.Abbreviated, FormStyle.Standalone, true);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'bbbb':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.DayPeriods, LocaleLength.Wide, FormStyle.Standalone, true);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'bbbbb':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.DayPeriods, LocaleLength.Narrow, FormStyle.Standalone, true);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Extended period of the day (midnight, night, ...), standalone\r\n\t\t\tcase 'B':\r\n\t\t\tcase 'BB':\r\n\t\t\tcase 'BBB':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.DayPeriods, LocaleLength.Abbreviated, FormStyle.Format, true);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'BBBB':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.DayPeriods, LocaleLength.Wide, FormStyle.Format, true);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'BBBBB':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.DayPeriods, LocaleLength.Narrow, FormStyle.Format, true);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Era name (AD/BC)\r\n\t\t\tcase 'GGGGG':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.Eras, LocaleLength.Narrow);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'G':\r\n\t\t\tcase 'GG':\r\n\t\t\tcase 'GGG':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.Eras, LocaleLength.Abbreviated);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'GGGG':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.Eras, LocaleLength.Wide);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Week of the year (1, ... 52)\r\n\t\t\tcase 'w':\r\n\t\t\t\tformatter = DateTimeService.getWeekFormatter(1);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'ww':\r\n\t\t\t\tformatter = DateTimeService.getWeekFormatter(2);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Week of the month (1, ...)\r\n\t\t\tcase 'W':\r\n\t\t\t\tformatter = DateTimeService.getWeekFormatter(1, true);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Timezone ISO8601 short format (-0430)\r\n\t\t\tcase 'Z':\r\n\t\t\tcase 'ZZ':\r\n\t\t\tcase 'ZZZ':\r\n\t\t\t\tformatter = DateTimeService.getTimezoneFormatter(TimezoneLength.Short);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Timezone ISO8601 extended format (-04:30)\r\n\t\t\tcase 'ZZZZZ':\r\n\t\t\t\tformatter = DateTimeService.getTimezoneFormatter(TimezoneLength.Extended);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Timezone GMT short format (GMT+4)\r\n\t\t\tcase 'O':\r\n\t\t\tcase 'OO':\r\n\t\t\tcase 'OOO':\r\n\t\t\t\tformatter = DateTimeService.getTimezoneFormatter(TimezoneLength.ShortGMT);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Should be location, but fallback to format O instead because we don't have the data yet\r\n\t\t\tcase 'z':\r\n\t\t\tcase 'zz':\r\n\t\t\tcase 'zzz':\r\n\t\t\t\tformatter = DateTimeService.getTimezoneFormatter(TimezoneLength.ShortGMT);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Timezone GMT long format (GMT+0430)\r\n\t\t\tcase 'OOOO':\r\n\t\t\tcase 'ZZZZ':\r\n\t\t\t\tformatter = DateTimeService.getTimezoneFormatter(TimezoneLength.Long);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Should be location, but fallback to format O instead because we don't have the data yet\r\n\t\t\tcase 'zzzz':\r\n\t\t\t\tformatter = DateTimeService.getTimezoneFormatter(TimezoneLength.Long);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\treturn null;\r\n\t\t}\r\n\t\t/*\r\n\t// cache\r\n\tCACHED_FORMATTERS[format] = formatter;\r\n\t*/\r\n\t\treturn formatter;\r\n\t}\r\n\r\n\tstatic setTimezoneOffset(timezone, fallback) {\r\n\t\t// Support: IE 9-11 only, Edge 13-15+\r\n\t\t// IE/Edge do not \"understand\" colon (`:`) in timezone\r\n\t\ttimezone = timezone.replace(/:/g, '');\r\n\t\tconst requestedTimezoneOffset = Date.parse('Jan 01, 1970 00:00:00 ' + timezone) / 60000;\r\n\t\treturn isNaN(requestedTimezoneOffset) ? fallback : requestedTimezoneOffset;\r\n\t}\r\n\r\n\tstatic dateTimezoneToLocal(date, timezone, reverse) {\r\n\t\tconst reverseValue = reverse ? -1 : 1;\r\n\t\tconst dateTimezoneOffset = date.getTimezoneOffset();\r\n\t\tconst timezoneOffset = DateTimeService.setTimezoneOffset(timezone, dateTimezoneOffset);\r\n\t\tconst minutes = reverseValue * (timezoneOffset - dateTimezoneOffset);\r\n\t\tdate = new Date(date.getTime());\r\n\t\tdate.setMinutes(date.getMinutes() + minutes);\r\n\t\treturn date;\r\n\t}\r\n\r\n\tstatic parseDate(value) {\r\n\t\tif (value instanceof Date) {\r\n\t\t\treturn value;\r\n\t\t}\r\n\t\treturn Date.parse(value);\r\n\t}\r\n\r\n\t// const CACHED_FORMATS = {};\r\n\tstatic getNamedFormat(format) {\r\n\t\t/*\r\n\t// cache\r\n\tconst localeId = locale.id;\r\n\tCACHED_FORMATS[localeId] = CACHED_FORMATS[localeId] || {};\r\n\tif (CACHED_FORMATS[localeId][format]) {\r\n\t\treturn CACHED_FORMATS[localeId][format];\r\n\t}\r\n\t*/\r\n\t\tlet formatValue = '';\r\n\t\tswitch (format) {\r\n\t\t\tcase 'shortDate':\r\n\t\t\t\tformatValue = LocaleService.getLocale(LocaleType.DateFormats, LocaleStyle.Short);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'mediumDate':\r\n\t\t\t\tformatValue = LocaleService.getLocale(LocaleType.DateFormats, LocaleStyle.Medium);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'longDate':\r\n\t\t\t\tformatValue = LocaleService.getLocale(LocaleType.DateFormats, LocaleStyle.Long);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'fullDate':\r\n\t\t\t\tformatValue = LocaleService.getLocale(LocaleType.DateFormats, LocaleStyle.Full);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'shortTime':\r\n\t\t\t\tformatValue = LocaleService.getLocale(LocaleType.TimeFormats, LocaleStyle.Short);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'mediumTime':\r\n\t\t\t\tformatValue = LocaleService.getLocale(LocaleType.TimeFormats, LocaleStyle.Medium);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'longTime':\r\n\t\t\t\tformatValue = LocaleService.getLocale(LocaleType.TimeFormats, LocaleStyle.Long);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'fullTime':\r\n\t\t\t\tformatValue = LocaleService.getLocale(LocaleType.TimeFormats, LocaleStyle.Full);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'short':\r\n\t\t\t\tconst shortTime = DateTimeService.getNamedFormat('shortTime');\r\n\t\t\t\tconst shortDate = DateTimeService.getNamedFormat('shortDate');\r\n\t\t\t\tformatValue = `${shortTime} ${shortDate}`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'medium':\r\n\t\t\t\tconst mediumTime = DateTimeService.getNamedFormat('mediumTime');\r\n\t\t\t\tconst mediumDate = DateTimeService.getNamedFormat('mediumDate');\r\n\t\t\t\tformatValue = `${mediumTime} ${mediumDate}`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'long':\r\n\t\t\t\tconst longTime = DateTimeService.getNamedFormat('longTime');\r\n\t\t\t\tconst longDate = DateTimeService.getNamedFormat('longDate');\r\n\t\t\t\tformatValue = `${longTime} ${longDate}`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'full':\r\n\t\t\t\tconst fullTime = DateTimeService.getNamedFormat('fullTime');\r\n\t\t\t\tconst fullDate = DateTimeService.getNamedFormat('fullDate');\r\n\t\t\t\tformatValue = `${fullTime} ${fullDate}`;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t}\r\n\t\t/*\r\n\t// cache\r\n\tif (formatValue) {\r\n\t\tCACHED_FORMATS[localeId][format] = formatValue;\r\n\t}\r\n\t*/\r\n\t\treturn formatValue;\r\n\t}\r\n\r\n\tstatic formatDate(value, format, timezone) {\r\n\t\tlet date = DateTimeService.parseDate(value);\r\n\t\t// console.log(date);\r\n\t\t// named formats\r\n\t\tconst namedFormat = DateTimeService.getNamedFormat(format);\r\n\t\tformat = namedFormat || format;\r\n\t\tlet formats = [];\r\n\t\tlet match;\r\n\t\twhile (format) {\r\n\t\t\tmatch = FORMAT_SPLITTER_REGEX.exec(format);\r\n\t\t\tif (match) {\r\n\t\t\t\tformats = formats.concat(match.slice(1));\r\n\t\t\t\tconst part = formats.pop();\r\n\t\t\t\tif (!part) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tformat = part;\r\n\t\t\t} else {\r\n\t\t\t\tformats.push(format);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// console.log(formats);\r\n\t\tlet dateTimezoneOffset = date.getTimezoneOffset();\r\n\t\tif (timezone) {\r\n\t\t\tdateTimezoneOffset = DateTimeService.setTimezoneOffset(timezone, dateTimezoneOffset);\r\n\t\t\tdate = DateTimeService.dateTimezoneToLocal(date, timezone, true);\r\n\t\t}\r\n\t\t// console.log(dateTimezoneOffset);\r\n\t\tlet text = '';\r\n\t\tformats.forEach(format => {\r\n\t\t\tconst formatter = DateTimeService.getFormatter(format);\r\n\t\t\tif (formatter) {\r\n\t\t\t\ttext += formatter(date, dateTimezoneOffset);\r\n\t\t\t} else {\r\n\t\t\t\ttext += format === \"''\" ? \"'\" : format.replace(/(^'|'$)/g, '').replace(/''/g, \"'\");\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn text;\r\n\t}\r\n}\r\n","import { Pipe } from 'rxcomp';\r\nimport DateTimeService from './date-time.service';\r\n\r\nexport default class DatePipe extends Pipe {\r\n\tstatic transform(value, format = 'short') {\r\n\t\treturn DateTimeService.formatDate(value, format);\r\n\t}\r\n}\r\n\r\nDatePipe.meta = {\r\n\tname: 'date',\r\n};\r\n\r\n/**\r\n *\r\n * * The result of this pipe is not reevaluated when the input is mutated. To avoid the need to\r\n * reformat the date on every change-detection cycle, treat the date as an immutable object\r\n * and change the reference when the pipe needs to run again.\r\n *\r\n * ### Pre-defined format options\r\n *\r\n * Examples are given in `en-US` locale.\r\n *\r\n * - `'short'`: equivalent to `'M/d/yy, h:mm a'` (`6/15/15, 9:03 AM`).\r\n * - `'medium'`: equivalent to `'MMM d, y, h:mm:ss a'` (`Jun 15, 2015, 9:03:01 AM`).\r\n * - `'long'`: equivalent to `'MMMM d, y, h:mm:ss a z'` (`June 15, 2015 at 9:03:01 AM\r\n * GMT+1`).\r\n * - `'full'`: equivalent to `'EEEE, MMMM d, y, h:mm:ss a zzzz'` (`Monday, June 15, 2015 at\r\n * 9:03:01 AM GMT+01:00`).\r\n * - `'shortDate'`: equivalent to `'M/d/yy'` (`6/15/15`).\r\n * - `'mediumDate'`: equivalent to `'MMM d, y'` (`Jun 15, 2015`).\r\n * - `'longDate'`: equivalent to `'MMMM d, y'` (`June 15, 2015`).\r\n * - `'fullDate'`: equivalent to `'EEEE, MMMM d, y'` (`Monday, June 15, 2015`).\r\n * - `'shortTime'`: equivalent to `'h:mm a'` (`9:03 AM`).\r\n * - `'mediumTime'`: equivalent to `'h:mm:ss a'` (`9:03:01 AM`).\r\n * - `'longTime'`: equivalent to `'h:mm:ss a z'` (`9:03:01 AM GMT+1`).\r\n * - `'fullTime'`: equivalent to `'h:mm:ss a zzzz'` (`9:03:01 AM GMT+01:00`).\r\n *\r\n * ### Custom format options\r\n *\r\n * You can construct a format string using symbols to specify the components\r\n * of a date-time value, as described in the following table.\r\n * Format details depend on the locale.\r\n * Fields marked with (*) are only available in the extra data set for the given locale.\r\n *\r\n *  | Field type         | Format      | Description                                                   | Example Value                                              |\r\n *  |--------------------|-------------|---------------------------------------------------------------|------------------------------------------------------------|\r\n *  | Era                | G, GG & GGG | Abbreviated                                                   | AD                                                         |\r\n *  |                    | GGGG        | Wide                                                          | Anno Domini                                                |\r\n *  |                    | GGGGG       | Narrow                                                        | A                                                          |\r\n *  | Year               | y           | Numeric: minimum digits                                       | 2, 20, 201, 2017, 20173                                    |\r\n *  |                    | yy          | Numeric: 2 digits + zero padded                               | 02, 20, 01, 17, 73                                         |\r\n *  |                    | yyy         | Numeric: 3 digits + zero padded                               | 002, 020, 201, 2017, 20173                                 |\r\n *  |                    | yyyy        | Numeric: 4 digits or more + zero padded                       | 0002, 0020, 0201, 2017, 20173                              |\r\n *  | Month              | M           | Numeric: 1 digit                                              | 9, 12                                                      |\r\n *  |                    | MM          | Numeric: 2 digits + zero padded                               | 09, 12                                                     |\r\n *  |                    | MMM         | Abbreviated                                                   | Sep                                                        |\r\n *  |                    | MMMM        | Wide                                                          | September                                                  |\r\n *  |                    | MMMMM       | Narrow                                                        | S                                                          |\r\n *  | Month standalone   | L           | Numeric: 1 digit                                              | 9, 12                                                      |\r\n *  |                    | LL          | Numeric: 2 digits + zero padded                               | 09, 12                                                     |\r\n *  |                    | LLL         | Abbreviated                                                   | Sep                                                        |\r\n *  |                    | LLLL        | Wide                                                          | September                                                  |\r\n *  |                    | LLLLL       | Narrow                                                        | S                                                          |\r\n *  | Week of year       | w           | Numeric: minimum digits                                       | 1... 53                                                    |\r\n *  |                    | ww          | Numeric: 2 digits + zero padded                               | 01... 53                                                   |\r\n *  | Week of month      | W           | Numeric: 1 digit                                              | 1... 5                                                     |\r\n *  | Day of month       | d           | Numeric: minimum digits                                       | 1                                                          |\r\n *  |                    | dd          | Numeric: 2 digits + zero padded                               | 01                                                          |\r\n *  | Week day           | E, EE & EEE | Abbreviated                                                   | Tue                                                        |\r\n *  |                    | EEEE        | Wide                                                          | Tuesday                                                    |\r\n *  |                    | EEEEE       | Narrow                                                        | T                                                          |\r\n *  |                    | EEEEEE      | Short                                                         | Tu                                                         |\r\n *  | Period             | a, aa & aaa | Abbreviated                                                   | am/pm or AM/PM                                             |\r\n *  |                    | aaaa        | Wide (fallback to `a` when missing)                           | ante meridiem/post meridiem                                |\r\n *  |                    | aaaaa       | Narrow                                                        | a/p                                                        |\r\n *  | Period*            | B, BB & BBB | Abbreviated                                                   | mid.                                                       |\r\n *  |                    | BBBB        | Wide                                                          | am, pm, midnight, noon, morning, afternoon, evening, night |\r\n *  |                    | BBBBB       | Narrow                                                        | md                                                         |\r\n *  | Period standalone* | b, bb & bbb | Abbreviated                                                   | mid.                                                       |\r\n *  |                    | bbbb        | Wide                                                          | am, pm, midnight, noon, morning, afternoon, evening, night |\r\n *  |                    | bbbbb       | Narrow                                                        | md                                                         |\r\n *  | Hour 1-12          | h           | Numeric: minimum digits                                       | 1, 12                                                      |\r\n *  |                    | hh          | Numeric: 2 digits + zero padded                               | 01, 12                                                     |\r\n *  | Hour 0-23          | H           | Numeric: minimum digits                                       | 0, 23                                                      |\r\n *  |                    | HH          | Numeric: 2 digits + zero padded                               | 00, 23                                                     |\r\n *  | Minute             | m           | Numeric: minimum digits                                       | 8, 59                                                      |\r\n *  |                    | mm          | Numeric: 2 digits + zero padded                               | 08, 59                                                     |\r\n *  | Second             | s           | Numeric: minimum digits                                       | 0... 59                                                    |\r\n *  |                    | ss          | Numeric: 2 digits + zero padded                               | 00... 59                                                   |\r\n *  | Fractional seconds | S           | Numeric: 1 digit                                              | 0... 9                                                     |\r\n *  |                    | SS          | Numeric: 2 digits + zero padded                               | 00... 99                                                   |\r\n *  |                    | SSS         | Numeric: 3 digits + zero padded (= milliseconds)              | 000... 999                                                 |\r\n *  | Zone               | z, zz & zzz | Short specific non location format (fallback to O)            | GMT-8                                                      |\r\n *  |                    | zzzz        | Long specific non location format (fallback to OOOO)          | GMT-08:00                                                  |\r\n *  |                    | Z, ZZ & ZZZ | ISO8601 basic format                                          | -0800                                                      |\r\n *  |                    | ZZZZ        | Long localized GMT format                                     | GMT-8:00                                                   |\r\n *  |                    | ZZZZZ       | ISO8601 extended format + Z indicator for offset 0 (= XXXXX)  | -08:00                                                     |\r\n *  |                    | O, OO & OOO | Short localized GMT format                                    | GMT-8                                                      |\r\n *  |                    | OOOO        | Long localized GMT format                                     | GMT-08:00                                                  |\r\n *\r\n * Note that timezone correction is not applied to an ISO string that has no time component, such as \"2016-09-19\"\r\n *\r\n * ### Format examples\r\n *\r\n * These examples transform a date into various formats,\r\n * assuming that `dateObj` is a JavaScript `Date` object for\r\n * year: 2015, month: 6, day: 15, hour: 21, minute: 43, second: 11,\r\n * given in the local time for the `en-US` locale.\r\n *\r\n * ```\r\n * {{ dateObj | date }}               // output is 'Jun 15, 2015'\r\n * {{ dateObj | date:'medium' }}      // output is 'Jun 15, 2015, 9:43:11 PM'\r\n * {{ dateObj | date:'shortTime' }}   // output is '9:43 PM'\r\n * {{ dateObj | date:'mm:ss' }}       // output is '43:11'\r\n * ```\r\n *\r\n */\r\n","import { Directive, getContext } from \"rxcomp\";\r\nimport { BehaviorSubject } from \"rxjs\";\r\nimport { takeUntil } from \"rxjs/operators\";\r\n\r\nlet DROPDOWN_ID = 1000000;\r\n\r\nexport default class DropdownDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this.dropdown || this.id_ || (this.id_ = DropdownDirective.nextId());\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst trigger = node.getAttribute('dropdown-trigger');\r\n\t\tthis.trigger = trigger ? node.querySelector(trigger) : node;\r\n\t\tthis.opened = null;\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t\tthis.onDocumentClick = this.onDocumentClick.bind(this);\r\n\t\tthis.openDropdown = this.openDropdown.bind(this);\r\n\t\tthis.closeDropdown = this.closeDropdown.bind(this);\r\n\t\tthis.addListeners();\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.openDropdown();\r\n\t\t} else {\r\n\t\t\tconst dropdownItemNode = node.querySelector('[dropdown-item]');\r\n\t\t\t// console.log('dropdownItemNode', dropdownItemNode);\r\n\t\t\tif (!dropdownItemNode) { // if (this.trigger !== node) {\r\n\t\t\t\tthis.closeDropdown();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDocumentClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst clickedInside = node === event.target || node.contains(event.target);\r\n\t\tif (!clickedInside) {\r\n\t\t\tthis.closeDropdown();\r\n\t\t}\r\n\t}\r\n\r\n\topenDropdown() {\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.opened = true;\r\n\t\t\tthis.addDocumentListeners();\r\n\t\t\tDropdownDirective.dropdown$.next(this.id);\r\n\t\t\tthis.dropped.next(this.id);\r\n\t\t}\r\n\t}\r\n\r\n\tcloseDropdown() {\r\n\t\tif (this.opened !== null) {\r\n\t\t\tthis.removeDocumentListeners();\r\n\t\t\tthis.opened = null;\r\n\t\t\tif (DropdownDirective.dropdown$.getValue() === this.id) {\r\n\t\t\t\tDropdownDirective.dropdown$.next(null);\r\n\t\t\t\tthis.dropped.next(null);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tthis.trigger.addEventListener('click', this.onClick);\r\n\t}\r\n\r\n\taddDocumentListeners() {\r\n\t\tdocument.addEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tthis.trigger.removeEventListener('click', this.onClick);\r\n\t}\r\n\r\n\tremoveDocumentListeners() {\r\n\t\tdocument.removeEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t\tthis.removeDocumentListeners();\r\n\t}\r\n\r\n\tstatic nextId() {\r\n\t\treturn DROPDOWN_ID++;\r\n\t}\r\n\r\n}\r\n\r\nDropdownDirective.meta = {\r\n\tselector: '[dropdown]',\r\n\tinputs: ['dropdown', 'dropdown-trigger'],\r\n\toutputs: ['dropped']\r\n};\r\n\r\nDropdownDirective.dropdown$ = new BehaviorSubject(null);\r\n","import { Directive, getContext } from \"rxcomp\";\r\nimport { takeUntil } from \"rxjs/operators\";\r\nimport DropdownDirective from \"./dropdown.directive\";\r\n\r\nexport default class DropdownItemDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this['dropdown-item'];\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('dropdown-item');\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownItemDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nDropdownItemDirective.meta = {\r\n\tselector: '[dropdown-item], [[dropdown-item]]',\r\n\tinputs: ['dropdown-item']\r\n};\r\n","import { Component } from 'rxcomp';\nimport { interval, Subject } from 'rxjs';\nimport { startWith, takeUntil, tap } from 'rxjs/operators';\n\nexport const EventDateMode = {\n\tLive: 'live',\n\tCountdown: 'countdown',\n\tWatchRelative: 'watchRelative',\n\tRelative: 'relative',\n\tDate: 'date',\n};\n\nconst SECOND = 1000;\nconst MINUTE = SECOND * 60;\nconst HOUR = MINUTE * 60;\n\nconst to10 = (value) => {\n\treturn (value < 10) ? '0' + value : value;\n};\n\nexport default class EventDateComponent extends Component {\n\n\tget mode() {\n\t\treturn this.mode_;\n\t}\n\n\tset mode(mode) {\n\t\tif (this.mode_ !== mode) {\n\t\t\tthis.mode_ = mode;\n\t\t\tthis.change.next(this.eventDate);\n\t\t}\n\t}\n\n\tstatic hoursDiff(date) {\n\t\tconst now = new Date();\n\t\tconst diff = date - now;\n\t\tconst hoursDiff = Math.abs(Math.floor(diff / 1000 / 60 / 60));\n\t\treturn hoursDiff;\n\t}\n\n\tstatic getMode(item) {\n\t\tif (!item.past && !item.info.started) {\n\t\t\tconst now = new Date();\n\t\t\tif (now > item.startDate) {\n\t\t\t\titem.info.started = true;\n\t\t\t}\n\t\t}\n\t\tif (item.live) {\n\t\t\treturn EventDateMode.Live;\n\t\t} else if (item.incoming) {\n\t\t\treturn EventDateMode.Countdown;\n\t\t}\n\t\tconst hoursDiff = EventDateComponent.hoursDiff(item.startDate);\n\t\tif (item.past && hoursDiff < 24) {\n\t\t\treturn EventDateMode.WatchRelative;\n\t\t} else if (hoursDiff < 24 * 14) {\n\t\t\treturn EventDateMode.Relative;\n\t\t} else {\n\t\t\treturn EventDateMode.Date;\n\t\t}\n\t}\n\n\tonInit() {\n\t\tthis.mode_ = EventDateComponent.getMode(this.eventDate);\n\t\tthis.countdown = '';\n\t\tthis.live$ = new Subject();\n\t\tthis.change$().pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe(() => {\n\t\t\tthis.mode = EventDateComponent.getMode(this.eventDate);\n\t\t\tif (this.mode === EventDateMode.Countdown || this.mode === EventDateMode.WatchRelative) {\n\t\t\t\tthis.pushChanges();\n\t\t\t}\n\t\t});\n\t}\n\n\t/*\n\tonChange() {\n\t\tthis.mode = EventDateComponent.getMode(this.eventDate);\n\t}\n\t*/\n\n\tchange$() {\n\t\treturn interval(1000).pipe(\n\t\t\ttakeUntil(this.live$),\n\t\t\tstartWith(0),\n\t\t\ttap(() => {\n\t\t\t\tif (this.mode === EventDateMode.Countdown) {\n\t\t\t\t\tlet diff = this.eventDate.startDate - new Date();\n\t\t\t\t\tconst hh = Math.floor(diff / HOUR);\n\t\t\t\t\tdiff -= hh * HOUR;\n\t\t\t\t\tconst mm = Math.floor(diff / MINUTE);\n\t\t\t\t\tdiff -= mm * MINUTE;\n\t\t\t\t\tconst ss = Math.floor(diff / SECOND);\n\t\t\t\t\tdiff -= ss * SECOND;\n\t\t\t\t\tthis.countdown = `-${to10(hh)}:${to10(mm)}:${to10(ss)}`;\n\t\t\t\t\tif (diff < 0) {\n\t\t\t\t\t\tthis.eventDate.info.started = true;\n\t\t\t\t\t\t// this.live$.next();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n\n}\n\nEventDateComponent.meta = {\n\tselector: '[eventDate]',\n\toutputs: ['change'],\n\tinputs: ['eventDate']\n};\n","import { FormControl, FormGroup, Validators } from 'rxcomp-form';\nimport { combineLatest } from 'rxjs';\nimport { first, takeUntil } from 'rxjs/operators';\nimport FavouriteService from '../favourite/favourite.service';\nimport FilterItem from '../filter/filter-item';\nimport FilterService from '../filter/filter.service';\nimport LocationService from '../location/location.service';\nimport PageComponent from '../page/page.component';\nimport UserService from '../user/user.service';\nimport EventService from './event.service';\n\nexport default class EventPageComponent extends PageComponent {\n\n\tonInit() {\n\t\tthis.grid = {\n\t\t\tmode: 1,\n\t\t\twidth: 350,\n\t\t\tgutter: 2,\n\t\t};\n\t\tthis.user = null;\n\t\tthis.event = null;\n\t\tthis.listing = null;\n\t\tthis.filters = null;\n\t\tthis.secondaryFiltersVisible = false;\n\t\tthis.secondaryFilters = null;\n\t\tthis.activeFilters = null;\n\t\tthis.filteredItems = [];\n\t\tthis.load$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe(data => {\n\t\t\tthis.event = data[0];\n\t\t\tthis.listing = data[1];\n\t\t\tthis.setFilters(data[2]);\n\t\t\tthis.startFilter(this.listing);\n\t\t\tthis.user = data[3];\n\t\t\tthis.pushChanges();\n\t\t});\n\t\tthis.error = null;\n\t\tthis.inputActive = false;\n\t\tconst form = this.form = new FormGroup({\n\t\t\tquestion: new FormControl(null, [Validators.RequiredValidator()]),\n\t\t\tcheckRequest: window.antiforgery,\n\t\t\tcheckField: ''\n\t\t});\n\t\tform.changes$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe(changes => {\n\t\t\tthis.inputActive = (changes.question && changes.question.length > 0);\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tload$() {\n\t\tconst eventId = LocationService.get('eventId');\n\t\treturn combineLatest(\n\t\t\tEventService.detail$(eventId),\n\t\t\tEventService.listing$(eventId),\n\t\t\tEventService.filter$(eventId),\n\t\t\tUserService.me$(),\n\t\t);\n\t}\n\n\tsetFilters(filters) {\n\t\tconst filterObject = {\n\t\t\ttype: {\n\t\t\t\tlabel: 'Type',\n\t\t\t\tmode: 'select',\n\t\t\t\toptions: [{\n\t\t\t\t\tlabel: 'Event',\n\t\t\t\t\tvalue: 'event',\n\t\t\t\t}, {\n\t\t\t\t\tlabel: 'Picture',\n\t\t\t\t\tvalue: 'picture',\n\t\t\t\t}, {\n\t\t\t\t\tlabel: 'Product',\n\t\t\t\t\tvalue: 'product',\n\t\t\t\t}, {\n\t\t\t\t\tlabel: 'Magazine',\n\t\t\t\t\tvalue: 'magazine',\n\t\t\t\t}]\n\t\t\t},\n\t\t};\n\t\tfilters.forEach(filter => {\n\t\t\tfilter.mode = 'or';\n\t\t\tfilterObject[filter.key] = filter;\n\t\t});\n\t\tconst filterService = this.filterService = new FilterService(filterObject, {}, (key, filter) => {\n\t\t\tswitch (key) {\n\t\t\t\tcase 'type':\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\treturn item.type === value;\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'tag':\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\treturn item.tags.indexOf(value) !== -1;\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\treturn item.features.indexOf(value) !== -1;\n\t\t\t\t\t};\n\t\t\t}\n\t\t});\n\t\tthis.filters = filterService.filters;\n\t\tthis.secondaryFilters = Object.keys(this.filters).filter(key => key !== 'type').map(key => {\n\t\t\treturn this.filters[key];\n\t\t});\n\t}\n\n\tstartFilter(items) {\n\t\tthis.filterService.items$(items).pipe(\n\t\t\ttakeUntil(this.unsubscribe$),\n\t\t).subscribe(filteredItems => {\n\t\t\tthis.filteredItems = [];\n\t\t\tthis.activeFilters = [];\n\t\t\tthis.pushChanges();\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.filteredItems = filteredItems;\n\t\t\t\tthis.activeFilters = this.secondaryFilters.map(f => {\n\t\t\t\t\tf = new FilterItem(f);\n\t\t\t\t\tf.options = f.options.filter(o => f.has(o));\n\t\t\t\t\treturn f;\n\t\t\t\t}).filter(f => f.options.length);\n\t\t\t\tthis.pushChanges();\n\t\t\t}, 1);\n\t\t\t// console.log('EventPageComponent.filteredItems', filteredItems.length);\n\t\t});\n\t}\n\n\tonChange($event) {\n\t\tthis.pushChanges();\n\t}\n\n\ttoggleGrid() {\n\t\tthis.grid.width = this.grid.width === 350 ? 525 : 350;\n\t\tthis.pushChanges();\n\t}\n\n\ttoggleFilters() {\n\t\tthis.secondaryFiltersVisible = !this.secondaryFiltersVisible;\n\t\tthis.pushChanges();\n\t}\n\n\ttoggleSubscribe() {\n\t\tlet flag = this.event.info.subscribed;\n\t\tFavouriteService[flag ? 'subscriptionRemove$' : 'subscriptionAdd$'](this.event.id).pipe(\n\t\t\tfirst()\n\t\t).subscribe(() => {\n\t\t\tflag = !flag;\n\t\t\tthis.event.info.subscribed = flag;\n\t\t\tif (flag) {\n\t\t\t\tthis.event.info.subscribers++;\n\t\t\t} else {\n\t\t\t\tthis.event.info.subscribers--;\n\t\t\t}\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\ttoggleLike() {\n\t\tlet flag = this.event.info.liked;\n\t\tFavouriteService[flag ? 'likeRemove$' : 'likeAdd$'](this.event.id).pipe(\n\t\t\tfirst()\n\t\t).subscribe(() => {\n\t\t\tflag = !flag;\n\t\t\tthis.event.info.liked = flag;\n\t\t\tif (flag) {\n\t\t\t\tthis.event.info.likes++;\n\t\t\t} else {\n\t\t\t\tthis.event.info.likes--;\n\t\t\t}\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\ttoggleSave() {\n\t\tlet flag = this.event.info.saved;\n\t\tFavouriteService[flag ? 'favouriteRemove$' : 'favouriteAdd$'](this.event.id).pipe(\n\t\t\tfirst()\n\t\t).subscribe(() => {\n\t\t\tflag = !flag;\n\t\t\tthis.event.info.saved = flag;\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tonInputFocus(event) {\n\t\tthis.inputFocus = true;\n\t\tthis.pushChanges();\n\t}\n\n\tonInputBlur(event) {\n\t\tthis.inputFocus = false;\n\t\tthis.pushChanges();\n\t}\n\n\tpostQuestion(event) {\n\t\tif (this.form.valid) {\n\t\t\t// console.log('EventPageComponent.postQuestion.onSubmit', this.form.value);\n\t\t\tthis.form.submitted = true;\n\t\t\tEventService.postQuestion$(this.event, this.form.value.question).pipe(\n\t\t\t\tfirst(),\n\t\t\t).subscribe(question => {\n\t\t\t\tthis.event.questions.unshift(question);\n\t\t\t\tthis.form.controls.question.value = null;\n\t\t\t\t// this.pushChanges();\n\t\t\t}, error => {\n\t\t\t\tconsole.log('EventPageComponent.postQuestion.error', error);\n\t\t\t\tthis.error = error;\n\t\t\t\tthis.pushChanges();\n\t\t\t});\n\t\t} else {\n\t\t\tthis.form.touched = true;\n\t\t}\n\t}\n}\n\nEventPageComponent.meta = {\n\tselector: '[event-page]',\n};\n","import { Component } from 'rxcomp';\nimport { first } from 'rxjs/operators';\nimport FavouriteService from '../favourite/favourite.service';\n\nexport default class EventComponent extends Component {\n\n\tonChange($event) {\n\t\tthis.pushChanges();\n\t}\n\n\ttoggleSubscribe() {\n\t\tlet flag = this.event.info.subscribed;\n\t\tFavouriteService[flag ? 'subscriptionRemove$' : 'subscriptionAdd$'](this.event.id).pipe(\n\t\t\tfirst()\n\t\t).subscribe(() => {\n\t\t\tflag = !flag;\n\t\t\tthis.event.info.subscribed = flag;\n\t\t\tif (flag) {\n\t\t\t\tthis.event.info.subscribers++;\n\t\t\t} else {\n\t\t\t\tthis.event.info.subscribers--;\n\t\t\t}\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\ttoggleLike() {\n\t\tlet flag = this.event.info.liked;\n\t\tFavouriteService[flag ? 'likeRemove$' : 'likeAdd$'](this.event.id).pipe(\n\t\t\tfirst()\n\t\t).subscribe(() => {\n\t\t\tflag = !flag;\n\t\t\tthis.event.info.liked = flag;\n\t\t\tif (flag) {\n\t\t\t\tthis.event.info.likes++;\n\t\t\t} else {\n\t\t\t\tthis.event.info.likes--;\n\t\t\t}\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\ttoggleSave() {\n\t\tlet flag = this.event.info.saved;\n\t\tFavouriteService[flag ? 'favouriteRemove$' : 'favouriteAdd$'](this.event.id).pipe(\n\t\t\tfirst()\n\t\t).subscribe(() => {\n\t\t\tflag = !flag;\n\t\t\tthis.event.info.saved = flag;\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n}\n\nEventComponent.meta = {\n\tselector: '[event]',\n\tinputs: ['event']\n};\n","import { combineLatest } from 'rxjs';\nimport { first } from 'rxjs/operators';\nimport ChannelService from '../channel/channel.service';\nimport PageComponent from '../page/page.component';\nimport FavouriteService from './favourite.service';\n\nexport const ViewModes = {\n\tSaved: 'saved',\n\tLiked: 'liked',\n};\n\nexport default class FavouritePageComponent extends PageComponent {\n\n\tget viewMode() {\n\t\treturn this.viewMode_;\n\t}\n\n\tset viewMode(viewMode) {\n\t\tif (this.viewMode_ !== viewMode) {\n\t\t\tthis.viewMode_ = viewMode;\n\t\t\tthis.pushChanges();\n\t\t}\n\t}\n\n\tonInit() {\n\t\tthis.channels = null;\n\t\tthis.savedItems = [];\n\t\tthis.likedItems = [];\n\t\tthis.viewMode_ = ViewModes.Saved;\n\t\tthis.grid = {\n\t\t\tmode: 1,\n\t\t\twidth: 350,\n\t\t\tgutter: 2,\n\t\t};\n\t\tthis.load$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe(data => {\n\t\t\tthis.channels = data[0];\n\t\t\tthis.savedItems = data[1];\n\t\t\tthis.likedItems = data[2];\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tload$() {\n\t\treturn combineLatest(\n\t\t\tChannelService.channels$,\n\t\t\tFavouriteService.favourites$,\n\t\t\tFavouriteService.likes$,\n\t\t);\n\t}\n\n\ttoggleGrid() {\n\t\tthis.grid.width = this.grid.width === 350 ? 525 : 350;\n\t\tthis.pushChanges();\n\t}\n\n}\n\nFavouritePageComponent.meta = {\n\tselector: '[favourite-page]',\n};\n","import { Component, getContext } from 'rxcomp';\r\n\r\nexport default class ControlComponent extends Component {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst control = this.control;\r\n\t\tconst flags = control.flags;\r\n\t\tObject.keys(flags).forEach((key) => {\r\n\t\t\tflags[key] ? node.classList.add(key) : node.classList.remove(key);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nControlComponent.meta = {\r\n\tselector: '[control]',\r\n\tinputs: ['control']\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ErrorsComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.labels = window.labels || {};\r\n\t}\r\n\r\n\tgetLabel(key, value) {\r\n\t\tconst label = this.labels[`error_${key}`];\r\n\t\treturn label;\r\n\t}\r\n\r\n}\r\n\r\nErrorsComponent.meta = {\r\n\tselector: 'errors-component',\r\n\tinputs: ['control'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"inner\" [style]=\"{ display: control.invalid && control.touched ? 'block' : 'none' }\">\r\n\t\t<div class=\"error\" *for=\"let [key, value] of control.errors\">\r\n\t\t\t<span [innerHTML]=\"getLabel(key, value)\"></span>\r\n\t\t\t<!-- <span class=\"key\" [innerHTML]=\"key\"></span> <span class=\"value\" [innerHTML]=\"value | json\"></span> -->\r\n\t\t</div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { fromEvent } from \"rxjs\";\r\nimport { map, startWith, tap } from \"rxjs/operators\";\r\n\r\nexport default class CssService {\r\n\r\n\tstatic height$() {\r\n\t\tconst style = document.documentElement.style;\r\n\t\treturn fromEvent(window, 'resize').pipe(\r\n\t\t\tmap(event => window.innerHeight),\r\n\t\t\tstartWith(window.innerHeight),\r\n\t\t\ttap(height => {\r\n\t\t\t\t// First we get the viewport height and we multiple it by 1% to get a value for a vh unit\r\n\t\t\t\tlet vh = height * 0.01;\r\n\t\t\t\t// Then we set the value in the --vh custom property to the root of the document\r\n\t\t\t\tstyle.setProperty('--vh', `${vh}px`);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import { BehaviorSubject } from 'rxjs';\r\nimport { map, shareReplay, switchMap } from 'rxjs/operators';\r\nimport ApiService from '../api/api.service';\r\nimport EventService from '../event/event.service';\r\n\r\nconst notifications$_ = new BehaviorSubject(null);\r\nexport default class NotificationService {\r\n\r\n\tstatic getCurrentNotifications() {\r\n\t\treturn notifications$_.getValue();\r\n\t}\r\n\r\n\tstatic notifications$() {\r\n\t\treturn ApiService.staticGet$(`/user/notification`).pipe(\r\n\t\t\tmap((response) => EventService.mapEvents(response.data, response.static)),\r\n\t\t\tswitchMap(items => {\r\n\t\t\t\tnotifications$_.next(items);\r\n\t\t\t\treturn notifications$_;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nNotificationService.notifications$ = NotificationService.notifications$().pipe(shareReplay(1));\r\n","import { Component } from 'rxcomp';\r\nimport { of } from 'rxjs';\r\nimport { catchError, takeUntil } from 'rxjs/operators';\r\nimport CssService from '../css/css.service';\r\nimport FavouriteService from '../favourite/favourite.service';\r\nimport NotificationService from '../notification/notification.service';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class HeaderComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.user = null;\r\n\t\tthis.favourites = [];\r\n\t\tUserService.me$().pipe(\r\n\t\t\tcatchError(() => of (null)),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(user => {\r\n\t\t\tconsole.log('HeaderComponent.me$', user);\r\n\t\t\tthis.user = user;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tFavouriteService.subscriptions$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(subscriptions => {\r\n\t\t\tthis.subscriptions = subscriptions;\r\n\t\t\t// console.log('HeaderComponent.subscriptions', subscriptions);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tFavouriteService.likes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(likes => {\r\n\t\t\tthis.likes = likes;\r\n\t\t\t// console.log('HeaderComponent.likes', likes);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tFavouriteService.favourites$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(favourites => {\r\n\t\t\tthis.favourites = favourites;\r\n\t\t\t// console.log('HeaderComponent.favourites', favourites);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tNotificationService.notifications$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(notifications => {\r\n\t\t\tthis.notifications = notifications;\r\n\t\t\t// console.log('HeaderComponent.notifications', notifications);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tCssService.height$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(height => {\r\n\t\t\t// console.log('HeaderComponent.height$', height);\r\n\t\t});\r\n\t\t// console.log(JSON.stringify(LocaleService.defaultLocale));\r\n\t}\r\n\r\n\ttoggleAside($event) {\r\n\t\tthis.aside_ = !this.aside_;\r\n\t\tthis.aside.next(this.aside_);\r\n\t}\r\n\r\n\tdismissAside($event) {\r\n\t\tif (this.aside_) {\r\n\t\t\tthis.aside_ = false;\r\n\t\t\tthis.aside.next(this.aside_);\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleNotification($event) {\r\n\t\tthis.notification_ = !this.notification_;\r\n\t\tthis.notification.next(this.notification_);\r\n\t}\r\n\r\n\tdismissNotification($event) {\r\n\t\tif (this.notification_) {\r\n\t\t\tthis.notification_ = false;\r\n\t\t\tthis.notification.next(this.notification_);\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped(id) {\r\n\t\t// console.log('HeaderComponent.onDropped', id);\r\n\t\tthis.submenu = id;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n}\r\n\r\nHeaderComponent.meta = {\r\n\tselector: 'header',\r\n\toutputs: ['aside', 'notification']\r\n};\r\n","import { Pipe } from \"rxcomp\";\r\n\r\n/*\r\n['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n['\"', '&', ''', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n*/\r\n\r\nexport default class HtmlPipe extends Pipe {\r\n\r\n\tstatic transform(value) {\r\n\t\tif (value) {\r\n\t\t\tvalue = value.replace(/&#(\\d+);/g, function(m, n) {\r\n\t\t\t\treturn String.fromCharCode(parseInt(n));\r\n\t\t\t});\r\n\t\t\tconst escapes = ['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n\t\t\tconst unescapes = ['\"', '&', '\\'', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n\t\t\tconst rx = new RegExp(`(&${escapes.join(';)|(&')};)`, 'g');\r\n\t\t\tvalue = value.replace(rx, function() {\r\n\t\t\t\tfor (let i = 1; i < arguments.length; i++) {\r\n\t\t\t\t\tif (arguments[i]) {\r\n\t\t\t\t\t\t// console.log(arguments[i], unescapes[i - 1]);\r\n\t\t\t\t\t\treturn unescapes[i - 1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// console.log(value);\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nHtmlPipe.meta = {\r\n\tname: 'html',\r\n};\r\n","import { combineLatest } from 'rxjs';\nimport { first } from 'rxjs/operators';\nimport ChannelService from '../channel/channel.service';\nimport EventService from '../event/event.service';\nimport PageComponent from '../page/page.component';\n\nexport default class IndexPageComponent extends PageComponent {\n\n\tonInit() {\n\t\tthis.topEvents = this.topChannels = this.upcomingEvents = [];\n\t\tthis.load$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe(data => {\n\t\t\tthis.topEvents = data[0];\n\t\t\tthis.topChannels = data[1];\n\t\t\tthis.upcomingEvents = data[2];\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tload$() {\n\t\treturn combineLatest(\n\t\t\tEventService.top$(),\n\t\t\tChannelService.top$(),\n\t\t\tEventService.upcoming$(),\n\t\t);\n\t}\n\n}\n\nIndexPageComponent.meta = {\n\tselector: '[index-page]',\n};\n","import { fromEvent, of } from 'rxjs';\r\nimport { filter, finalize, first, map } from 'rxjs/operators';\r\nimport { getResourceRoot } from '../environment/environment';\r\n\r\nlet UID = 0;\r\n\r\nexport default class ImageService {\r\n\r\n\tstatic worker() {\r\n\t\tif (!this.worker_) {\r\n\t\t\tthis.worker_ = new Worker(`${getResourceRoot()}js/workers/image.service.worker.js`);\r\n\t\t}\r\n\t\treturn this.worker_;\r\n\t}\r\n\r\n\tstatic load$(src) {\r\n\t\t// if (!('Worker' in window) || this.isBlob(src) || this.isCors(src)) {\r\n\t\tif (!('Worker' in window) || this.isBlob(src)) {\r\n\t\t\treturn of(src);\r\n\t\t}\r\n\t\tconst id = ++UID;\r\n\t\tconst worker = this.worker();\r\n\t\tworker.postMessage({ src, id });\r\n\t\treturn fromEvent(worker, 'message').pipe(\r\n\t\t\tfilter(event => event.data.src === src),\r\n\t\t\tmap(event => {\r\n\t\t\t\tconst url = URL.createObjectURL(event.data.blob);\r\n\t\t\t\treturn url;\r\n\t\t\t}),\r\n\t\t\tfirst(),\r\n\t\t\tfinalize(url => {\r\n\t\t\t\tworker.postMessage({ id });\r\n\t\t\t\tif (url) {\r\n\t\t\t\t\tURL.revokeObjectURL(url);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic isCors(src) {\r\n\t\treturn src.indexOf('//') !== -1 && src.indexOf(window.location.host) === -1;\r\n\t}\r\n\r\n\tstatic isBlob(src) {\r\n\t\treturn src.indexOf('blob:') === 0;\r\n\t}\r\n\r\n}\r\n","import { BehaviorSubject, of , Subject } from 'rxjs';\r\nimport { filter, finalize, first, map } from 'rxjs/operators';\r\n\r\nexport default class IntersectionService {\r\n\r\n\tstatic observer() {\r\n\t\tif (!this.observer_) {\r\n\t\t\tthis.readySubject_ = new BehaviorSubject(false);\r\n\t\t\tthis.observerSubject_ = new Subject();\r\n\t\t\tthis.observer_ = new IntersectionObserver(entries => {\r\n\t\t\t\tthis.observerSubject_.next(entries);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this.observer_;\r\n\t}\r\n\r\n\tstatic intersection$(node) {\r\n\t\tif ('IntersectionObserver' in window) {\r\n\t\t\tconst observer = this.observer();\r\n\t\t\tobserver.observe(node);\r\n\t\t\treturn this.observerSubject_.pipe(\r\n\t\t\t\t// tap(entries => console.log(entries.length)),\r\n\t\t\t\tmap(entries => entries.find(entry => entry.target === node)),\r\n\t\t\t\tfilter(entry => entry !== undefined),\r\n\t\t\t\t// tap(entry => console.log('IntersectionService.intersection$', entry)),\r\n\t\t\t\tfinalize(() => observer.unobserve(node)),\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn of({ target: node, isIntersecting: true });\r\n\t\t}\r\n\t}\r\n\r\n\tstatic firstIntersection$(node) {\r\n\t\treturn this.intersection$(node).pipe(\r\n\t\t\tfilter(entry => entry.isIntersecting), // entry.intersectionRatio > 0\r\n\t\t\tfirst(),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","export default class LazyCache {\r\n\tstatic get cache() {\r\n\t\tif (!this.cache_) {\r\n\t\t\tthis.cache_ = {};\r\n\t\t}\r\n\t\treturn this.cache_;\r\n\t}\r\n\r\n\tstatic get(src) {\r\n\t\treturn this.cache[src];\r\n\t}\r\n\r\n\tstatic set(src, blob) {\r\n\t\tthis.cache[src] = blob;\r\n\t\tconst keys = Object.keys(this.cache);\r\n\t\tif (keys.length > 100) {\r\n\t\t\tthis.remove(keys[0]);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic remove(src) {\r\n\t\tdelete this.cache[src];\r\n\t}\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { of , Subject } from 'rxjs';\r\nimport { distinctUntilChanged, switchMap, takeUntil } from 'rxjs/operators';\r\nimport ImageService from '../image/image.service';\r\nimport IntersectionService from '../intersection/intersection.service';\r\nimport LazyCache from './lazy.cache';\r\n\r\nexport default class LazyDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('lazy');\r\n\t\tthis.input$ = new Subject().pipe(\r\n\t\t\tdistinctUntilChanged(),\r\n\t\t\tswitchMap(input => {\r\n\t\t\t\tconst src = LazyCache.get(input);\r\n\t\t\t\tif (src) {\r\n\t\t\t\t\treturn of(src);\r\n\t\t\t\t}\r\n\t\t\t\tnode.classList.remove('lazyed');\r\n\t\t\t\treturn this.lazy$(input);\r\n\t\t\t}),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t);\r\n\t\tthis.input$.subscribe(src => {\r\n\t\t\tLazyCache.set(this.lazy, src);\r\n\t\t\tnode.setAttribute('src', src);\r\n\t\t\tnode.classList.add('lazyed');\r\n\t\t});\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tthis.input$.next(this.lazy);\r\n\t}\r\n\r\n\tlazy$(input) {\r\n\t\tconst { node } = getContext(this);\r\n\t\treturn IntersectionService.firstIntersection$(node).pipe(\r\n\t\t\t// tap(entry => console.log(entry)),\r\n\t\t\tswitchMap(() => ImageService.load$(input)),\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nLazyDirective.meta = {\r\n\tselector: '[lazy],[[lazy]]',\r\n\tinputs: ['lazy']\r\n};\r\n","import { from, Subject } from 'rxjs';\r\nimport { map, switchMap, tap } from 'rxjs/operators';\r\n\r\nexport class ModalEvent {\r\n\r\n\tconstructor(data) {\r\n\t\tthis.data = data;\r\n\t}\r\n\r\n}\r\n\r\nexport class ModalResolveEvent extends ModalEvent {}\r\nexport class ModalRejectEvent extends ModalEvent {}\r\n\r\nexport default class ModalService {\r\n\r\n\tstatic open$(modal) {\r\n\t\treturn this.getTemplate$(modal.src).pipe(\r\n\t\t\tmap(template => {\r\n\t\t\t\treturn { node: this.getNode(template), data: modal.data, modal: modal };\r\n\t\t\t}),\r\n\t\t\ttap(node => this.modal$.next(node)),\r\n\t\t\tswitchMap(node => this.events$),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic load$(modal) {\r\n\r\n\t}\r\n\r\n\tstatic getTemplate$(url) {\r\n\t\treturn from(fetch(url).then(response => {\r\n\t\t\treturn response.text();\r\n\t\t}));\r\n\t}\r\n\r\n\tstatic getNode(template) {\r\n\t\tconst div = document.createElement(\"div\");\r\n\t\tdiv.innerHTML = template;\r\n\t\tconst node = div.firstElementChild;\r\n\t\treturn node;\r\n\t}\r\n\r\n\tstatic reject(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalRejectEvent(data));\r\n\t}\r\n\r\n\tstatic resolve(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalResolveEvent(data));\r\n\t}\r\n\r\n}\r\n\r\nModalService.modal$ = new Subject();\r\nModalService.events$ = new Subject();\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport ModalService from './modal.service';\r\n\r\nexport default class ModalOutletComponent extends Component {\r\n\r\n\tget modal() {\r\n\t\treturn this.modal_;\r\n\t}\r\n\r\n\tset modal(modal) {\r\n\t\t// console.log('ModalOutletComponent set modal', modal, this);\r\n\t\tconst { module } = getContext(this);\r\n\t\tif (this.modal_ && this.modal_.node) {\r\n\t\t\tmodule.remove(this.modal_.node, this);\r\n\t\t\tthis.modalNode.removeChild(this.modal_.node);\r\n\t\t}\r\n\t\tif (modal && modal.node) {\r\n\t\t\tthis.modal_ = modal;\r\n\t\t\tthis.modalNode.appendChild(modal.node);\r\n\t\t\tconst instances = module.compile(modal.node);\r\n\t\t}\r\n\t\tthis.modal_ = modal;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.modalNode = node.querySelector('.modal-outlet__modal');\r\n\t\tModalService.modal$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(modal => {\r\n\t\t\tthis.modal = modal;\r\n\t\t});\r\n\t}\r\n\r\n\tonRegister(event) {\r\n\t\t// console.log('ModalComponent.onRegister');\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('ModalComponent.onLogin');\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\treject(event) {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nModalOutletComponent.meta = {\r\n\tselector: '[modal-outlet]',\r\n\ttemplate: /* html */ `\r\n\t<div class=\"modal-outlet__container\" [class]=\"{ active: modal }\">\r\n\t\t<div class=\"modal-outlet__background\" (click)=\"reject($event)\"></div>\r\n\t\t<div class=\"modal-outlet__modal\"></div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport ModalOutletComponent from '../modal/modal-outlet.component';\r\nimport ModalService from './modal.service';\r\n\r\nexport default class ModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tthis.data = parentInstance.modal.data;\r\n\t\t}\r\n\t}\r\n\r\n\tclose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nModalComponent.meta = {\r\n\tselector: '[modal]'\r\n};\r\n","import { takeUntil } from 'rxjs/operators';\nimport PageComponent from '../page/page.component';\nimport NotificationService from './notification.service';\n\nexport default class NotificationComponent extends PageComponent {\n\n\tonInit() {\n\t\tthis.grid = {\n\t\t\tmode: 4,\n\t\t\twidth: 320,\n\t\t\tgutter: 0,\n\t\t};\n\t\tthis.notifications = [];\n\t\tNotificationService.notifications$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe((notifications) => {\n\t\t\tthis.notifications = notifications;\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n}\n\nNotificationComponent.meta = {\n\tselector: '[notification]',\n};\n","import { Component } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { STATIC } from '../environment/environment';\r\nimport ModalService, { ModalResolveEvent } from '../modal/modal.service';\r\nimport UserService from '../user/user.service';\r\n\r\nconst src = STATIC ? '/tiemme-com/club-modal.html' : '/Viewdoc.cshtml?co_id=23649';\r\n\r\nexport default class RegisterOrLoginComponent extends Component {\r\n\r\n\tonRegister(event) {\r\n\t\t// console.log('RegisterOrLoginComponent.onRegister');\r\n\t\tevent.preventDefault();\r\n\t\tModalService.open$({ src: src, data: { view: 2 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('RegisterOrLoginComponent.onRegister', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t}\r\n\t\t});\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('RegisterOrLoginComponent.onLogin');\r\n\t\tevent.preventDefault();\r\n\t\tModalService.open$({ src: src, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('RegisterOrLoginComponent.onLogin', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t}\r\n\t\t});\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n}\r\n\r\nRegisterOrLoginComponent.meta = {\r\n\tselector: '[register-or-login]',\r\n};\r\n","const calculateDelta = (now, date) => Math.round(Math.abs(now - date) / 1000)\n\nexport default function relativeDateFactory (translations) {\n  return function relativeDate (date, now = new Date()) {\n    if (!(date instanceof Date)) {\n      date = new Date(date)\n    }\n\n    let delta = null\n\n    const minute = 60\n    const hour = minute * 60\n    const day = hour * 24\n    const week = day * 7\n    const month = day * 30\n    const year = day * 365\n\n    delta = calculateDelta(now, date)\n\n    if (delta > day && delta < week) {\n      date = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0)\n      delta = calculateDelta(now, date)\n    }\n\n    const translate = (translatePhrase, timeValue) => {\n      let key\n\n      if (translatePhrase === 'justNow') {\n        key = translatePhrase\n      } else if (now >= date) {\n        key = `${translatePhrase}Ago`\n      } else {\n        key = `${translatePhrase}FromNow`\n      }\n\n      const translation = translations[key]\n\n      if (typeof translation === 'function') {\n        return translation(timeValue)\n      }\n\n      return translation.replace('{{time}}', timeValue)\n    }\n\n    switch (false) {\n      case !(delta < 30):\n        return translate('justNow')\n\n      case !(delta < minute):\n        return translate('seconds', delta)\n\n      case !(delta < 2 * minute):\n        return translate('aMinute')\n\n      case !(delta < hour):\n        return translate('minutes', Math.floor(delta / minute))\n\n      case Math.floor(delta / hour) !== 1:\n        return translate('anHour')\n\n      case !(delta < day):\n        return translate('hours', Math.floor(delta / hour))\n\n      case !(delta < day * 2):\n        return translate('aDay')\n\n      case !(delta < week):\n        return translate('days', Math.floor(delta / day))\n\n      case Math.floor(delta / week) !== 1:\n        return translate('aWeek')\n\n      case !(delta < month):\n        return translate('weeks', Math.floor(delta / week))\n\n      case Math.floor(delta / month) !== 1:\n        return translate('aMonth')\n\n      case !(delta < year):\n        return translate('months', Math.floor(delta / month))\n\n      case Math.floor(delta / year) !== 1:\n        return translate('aYear')\n\n      default:\n        return translate('overAYear')\n    }\n  }\n}\n","module.exports = {\n  justNow: \"just now\",\n  secondsAgo: \"{{time}} seconds ago\",\n  aMinuteAgo: \"a minute ago\",\n  minutesAgo: \"{{time}} minutes ago\",\n  anHourAgo: \"an hour ago\",\n  hoursAgo: \"{{time}} hours ago\",\n  aDayAgo: \"yesterday\",\n  daysAgo: \"{{time}} days ago\",\n  aWeekAgo: \"a week ago\",\n  weeksAgo: \"{{time}} weeks ago\",\n  aMonthAgo: \"a month ago\",\n  monthsAgo: \"{{time}} months ago\",\n  aYearAgo: \"a year ago\",\n  yearsAgo: \"{{time}} years ago\",\n  overAYearAgo: \"over a year ago\",\n  secondsFromNow: \"{{time}} seconds from now\",\n  aMinuteFromNow: \"a minute from now\",\n  minutesFromNow: \"{{time}} minutes from now\",\n  anHourFromNow: \"an hour from now\",\n  hoursFromNow: \"{{time}} hours from now\",\n  aDayFromNow: \"tomorrow\",\n  daysFromNow: \"{{time}} days from now\",\n  aWeekFromNow: \"a week from now\",\n  weeksFromNow: \"{{time}} weeks from now\",\n  aMonthFromNow: \"a month from now\",\n  monthsFromNow: \"{{time}} months from now\",\n  aYearFromNow: \"a year from now\",\n  yearsFromNow: \"{{time}} years from now\",\n  overAYearFromNow: \"over a year from now\"\n}\n","import relativeDateFactory from './factory'\nimport enTranslations from '../translations/en'\n\nexport default relativeDateFactory(enTranslations)\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = relativeDateFactory;\nvar calculateDelta = function calculateDelta(now, date) {\n  return Math.round(Math.abs(now - date) / 1000);\n};\n\nfunction relativeDateFactory(translations) {\n  return function relativeDate(date) {\n    var now = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Date();\n\n    if (!(date instanceof Date)) {\n      date = new Date(date);\n    }\n\n    var delta = null;\n\n    var minute = 60;\n    var hour = minute * 60;\n    var day = hour * 24;\n    var week = day * 7;\n    var month = day * 30;\n    var year = day * 365;\n\n    delta = calculateDelta(now, date);\n\n    if (delta > day && delta < week) {\n      date = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0);\n      delta = calculateDelta(now, date);\n    }\n\n    var translate = function translate(translatePhrase, timeValue) {\n      var key = void 0;\n\n      if (translatePhrase === 'justNow') {\n        key = translatePhrase;\n      } else if (now >= date) {\n        key = translatePhrase + 'Ago';\n      } else {\n        key = translatePhrase + 'FromNow';\n      }\n\n      var translation = translations[key];\n\n      if (typeof translation === 'function') {\n        return translation(timeValue);\n      }\n\n      return translation.replace('{{time}}', timeValue);\n    };\n\n    switch (false) {\n      case !(delta < 30):\n        return translate('justNow');\n\n      case !(delta < minute):\n        return translate('seconds', delta);\n\n      case !(delta < 2 * minute):\n        return translate('aMinute');\n\n      case !(delta < hour):\n        return translate('minutes', Math.floor(delta / minute));\n\n      case Math.floor(delta / hour) !== 1:\n        return translate('anHour');\n\n      case !(delta < day):\n        return translate('hours', Math.floor(delta / hour));\n\n      case !(delta < day * 2):\n        return translate('aDay');\n\n      case !(delta < week):\n        return translate('days', Math.floor(delta / day));\n\n      case Math.floor(delta / week) !== 1:\n        return translate('aWeek');\n\n      case !(delta < month):\n        return translate('weeks', Math.floor(delta / week));\n\n      case Math.floor(delta / month) !== 1:\n        return translate('aMonth');\n\n      case !(delta < year):\n        return translate('months', Math.floor(delta / month));\n\n      case Math.floor(delta / year) !== 1:\n        return translate('aYear');\n\n      default:\n        return translate('overAYear');\n    }\n  };\n}\nmodule.exports = exports['default'];","import { Pipe } from \"rxcomp\";\nimport relativeDate from 'tiny-relative-date';\nimport relativeDateFactory from 'tiny-relative-date/lib/factory';\n\nexport const RELATIVE_DATE_KEYS = [\"justNow\", \"secondsAgo\", \"aMinuteAgo\", \"minutesAgo\", \"anHourAgo\", \"hoursAgo\", \"aDayAgo\", \"daysAgo\", \"aWeekAgo\", \"weeksAgo\", \"aMonthAgo\", \"monthsAgo\", \"aYearAgo\", \"yearsAgo\", \"overAYearAgo\", \"secondsFromNow\", \"aMinuteFromNow\", \"minutesFromNow\", \"anHourFromNow\", \"hoursFromNow\", \"aDayFromNow\", \"daysFromNow\", \"aWeekFromNow\", \"weeksFromNow\", \"aMonthFromNow\", \"monthsFromNow\", \"aYearFromNow\", \"yearsFromNow\", \"overAYearFromNow\"];\n\nexport default class RelativeDatePipe extends Pipe {\n\n\tstatic transform(value) {\n\t\tif (value) {\n\t\t\treturn this.relativeDate(value);\n\t\t}\n\t}\n\n\tstatic setLocale(locale) {\n\t\tif (!locale) return;\n\t\tconst values = {};\n\t\tconst keys = Object.keys(locale).filter(key => RELATIVE_DATE_KEYS.indexOf(key) !== -1);\n\t\tif (keys.length) {\n\t\t\tkeys.forEach(key => values[key] = locale[key]);\n\t\t\tthis.relativeDate = relativeDateFactory(values);\n\t\t}\n\t}\n\n}\n\nRelativeDatePipe.meta = {\n\tname: 'relativeDate',\n};\n\nRelativeDatePipe.relativeDate = relativeDate;\n\nif (window.locale) {\n\tRelativeDatePipe.setLocale(window.locale);\n}\n","import { Directive, getContext } from 'rxcomp';\nimport { interval } from 'rxjs';\nimport { startWith, takeUntil } from 'rxjs/operators';\nimport RelativeDatePipe from './relative-date.pipe';\n\nexport default class RelativeDateDirective extends Directive {\n\n\tset text(text) {\n\t\tif (this.text_ !== text) {\n\t\t\tthis.text_ = text;\n\t\t\tconst { node } = getContext(this);\n\t\t\tnode.innerText = text;\n\t\t}\n\t}\n\n\tonInit() {\n\t\tthis.change$().pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe(() => {\n\t\t\tthis.text = RelativeDatePipe.transform(this.relativeDate);\n\t\t});\n\t}\n\n\tchange$() {\n\t\treturn interval(1000).pipe(\n\t\t\tstartWith(0),\n\t\t);\n\t}\n\n}\n\nRelativeDateDirective.meta = {\n\tselector: '[relativeDate]',\n\tinputs: ['relativeDate']\n};\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { shareReplay, takeUntil, tap } from 'rxjs/operators';\r\n\r\nexport default class ScrollToDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tthis.initialFocus = false;\r\n\t\tconst { module, node } = getContext(this);\r\n\t\tconst expression = this.expression = node.getAttribute(`(scrollTo)`);\r\n\t\tthis.outputFunction = module.makeFunction(expression, ['$event']);\r\n\t\tthis.scrollTo$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(() => {});\r\n\t}\r\n\r\n\tscrollTo$() {\r\n\t\tconst { module, node, parentInstance } = getContext(this);\r\n\t\treturn fromEvent(node, 'click').pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tconst result = module.resolve(this.outputFunction, parentInstance, event);\r\n\t\t\t\tif (typeof result === 'string') {\r\n\t\t\t\t\tconst target = document.querySelector(result);\r\n\t\t\t\t\tif (target) {\r\n\t\t\t\t\t\tconst from = this.currentTop();\r\n\t\t\t\t\t\tconst to = from + target.getBoundingClientRect().top - 50;\r\n\t\t\t\t\t\tconst o = { pow: 0 };\r\n\t\t\t\t\t\tconst html = document.querySelector('html');\r\n\t\t\t\t\t\tgsap.set(html, {\r\n\t\t\t\t\t\t\t'scroll-behavior': 'auto'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tgsap.to(o, Math.abs((to - from)) / 2000, {\r\n\t\t\t\t\t\t\tpow: 1,\r\n\t\t\t\t\t\t\tease: Quad.easeOut,\r\n\t\t\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\t\t\tonUpdate: () => {\r\n\t\t\t\t\t\t\t\twindow.scrollTo(0, from + (to - from) * o.pow);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\t\t\tgsap.set(html, {\r\n\t\t\t\t\t\t\t\t\t'scroll-behavior': 'smooth'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t}\r\n\r\n\tcurrentTop() {\r\n\t\t// Firefox, Chrome, Opera, Safari\r\n\t\tif (self.pageYOffset) return self.pageYOffset;\r\n\t\t// Internet Explorer 6 - standards mode\r\n\t\tif (document.documentElement && document.documentElement.scrollTop)\r\n\t\t\treturn document.documentElement.scrollTop;\r\n\t\t// Internet Explorer 6, 7 and 8\r\n\t\tif (document.body.scrollTop) return document.body.scrollTop;\r\n\t\treturn 0;\r\n\t}\r\n\r\n}\r\n\r\nScrollToDirective.meta = {\r\n\tselector: `[(scrollTo)]`\r\n};\r\n","export default class DownloadService {\r\n\r\n\tstatic get a() {\r\n\t\tlet a = this.a_;\r\n\t\tif (!a) {\r\n\t\t\ta = document.createElement(\"a\");\r\n\t\t\ta.style = \"display: none\";\r\n\t\t\tdocument.body.appendChild(a);\r\n\t\t\tthis.a_ = a;\r\n\t\t}\r\n\t\treturn a;\r\n\t}\r\n\r\n\tstatic download(blob, fileName = 'download.txt') {\r\n\t\t// var json = JSON.stringify(data),\r\n\t\t// blob = new Blob([json], {type: \"octet/stream\"}),\r\n\t\tconst url = window.URL.createObjectURL(blob);\r\n\t\tconst a = this.a;\r\n\t\ta.href = url;\r\n\t\ta.download = fileName;\r\n\t\ta.click();\r\n\t\twindow.URL.revokeObjectURL(url);\r\n\t}\r\n\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { first, map, takeUntil } from 'rxjs/operators';\r\nimport ApiService from '../api/api.service';\r\nimport DownloadService from '../download/download.service';\r\nimport { STATIC } from '../environment/environment';\r\nimport ModalService, { ModalResolveEvent } from '../modal/modal.service';\r\nimport UserService from '../user/user.service';\r\n\r\nconst src = STATIC ? '/tiemme-com/club-modal.html' : '/Viewdoc.cshtml?co_id=23649';\r\n\r\nexport default class SecureDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.href = node.getAttribute('href');\r\n\t\tfromEvent(node, 'click').pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.tryDownloadHref();\r\n\t\t});\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.href = node.getAttribute('href');\r\n\t}\r\n\r\n\ttryDownloadHref() {\r\n\t\tApiService.staticGet$(this.href, undefined, 'blob').pipe(\r\n\t\t\tfirst(),\r\n\t\t\tmap(response => response.data),\r\n\t\t).subscribe(blob => {\r\n\t\t\tDownloadService.download(blob, this.href.split('/').pop());\r\n\t\t}, error => {\r\n\t\t\tconsole.log(error);\r\n\t\t\tthis.onLogin(event);\r\n\t\t});\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('SecureDirective.onLogin');\r\n\t\t// event.preventDefault();\r\n\t\tModalService.open$({ src: src, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('SecureDirective.onLogin', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t\tthis.tryDownloadHref();\r\n\t\t\t}\r\n\t\t});\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n\t/*\r\n\tonRegister(event) {\r\n\t\t// console.log('SecureDirective.onRegister');\r\n\t\t// event.preventDefault();\r\n\t\tModalService.open$({ src: src, data: { view: 2 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('SecureDirective.onRegister', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t}\r\n\t\t});\r\n\t\t// this.pushChanges();\r\n\t}\r\n\t*/\r\n\r\n}\r\n\r\nSecureDirective.meta = {\r\n\tselector: '[secure]',\r\n};\r\n","import { Pipe } from \"rxcomp\";\nimport { getSlug } from \"../environment/environment\";\n\nexport default class SlugPipe extends Pipe {\n\n\tstatic transform(value) {\n\t\treturn getSlug(value);\n\t}\n\n}\n\nSlugPipe.meta = {\n\tname: 'slug',\n};\n","import { Directive, getContext } from 'rxcomp';\r\nimport { Subject } from 'rxjs';\r\nimport Swiper from 'swiper';\r\n\r\nexport default class SwiperDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', `swiper-${this.rxcompId}`);\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tspeed: 600,\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: `#swiper-${this.rxcompId} .swiper-pagination`,\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tnavigation: {\r\n\t\t\t\tnextEl: `#swiper-${this.rxcompId} .swiper-button-next`,\r\n\t\t\t\tprevEl: `#swiper-${this.rxcompId} .swiper-button-prev`,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t}\r\n\r\n\tget enabled() {\r\n\t\treturn !window.matchMedia('print').matches;\r\n\t}\r\n\r\n\tonView() {\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.swiperInitOrUpdate_();\r\n\t\t}, 1);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners_();\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tonBeforePrint() {\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tslideToIndex(index) {\r\n\t\t// console.log('SwiperDirective.slideToIndex', index);\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.slideTo(index);\r\n\t\t}\r\n\t}\r\n\r\n\tinit_() {\r\n\t\tthis.events$ = new Subject();\r\n\t\tif (this.enabled) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tgsap.set(node, { opacity: 0 });\r\n\t\t\tthis.index = 0;\r\n\t\t\tconst on = this.options.on || {};\r\n\t\t\tconst self = this;\r\n\t\t\ton.slideChange = function() {\r\n\t\t\t\tconst swiper = this;\r\n\t\t\t\tself.index = swiper.activeIndex;\r\n\t\t\t\tself.events$.next(self.index);\r\n\t\t\t\tself.pushChanges();\r\n\t\t\t};\r\n\t\t\tthis.options.on = on;\r\n\t\t\tthis.addListeners_();\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners_() {\r\n\t\tthis.onBeforePrint = this.onBeforePrint.bind(this);\r\n\t\twindow.addEventListener('beforeprint', this.onBeforePrint);\r\n\t\t/*\r\n\t\tscope.$on('onResize', ($scope) => {\r\n\t\t\tthis.onResize(scope, element, attributes);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\tremoveListeners_() {\r\n\t\twindow.removeEventListener('beforeprint', this.onBeforePrint);\r\n\t}\r\n\r\n\tswiperInitOrUpdate_() {\r\n\t\tif (this.enabled) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tif (this.swiper) {\r\n\t\t\t\tthis.swiper.update();\r\n\t\t\t} else {\r\n\t\t\t\tlet swiper;\r\n\t\t\t\tconst on = this.options.on || (this.options.on = {});\r\n\t\t\t\tconst callback = on.init;\r\n\t\t\t\tif (!on.init || !on.init.swiperDirectiveInit) {\r\n\t\t\t\t\ton.init = function() {\r\n\t\t\t\t\t\tgsap.to(node, 0.4, {\r\n\t\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\t\tease: Power2.easeOut,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\t\t\t\tcallback.apply(this, [swiper, element, scope]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, 1);\r\n\t\t\t\t\t};\r\n\t\t\t\t\ton.init.swiperDirectiveInit = true;\r\n\t\t\t\t}\r\n\t\t\t\tgsap.set(node, { opacity: 1 });\r\n\t\t\t\tswiper = new Swiper(node, this.options);\r\n\t\t\t\tthis.swiper = swiper;\r\n\t\t\t\tthis.swiper._opening = true;\r\n\t\t\t\tnode.classList.add('swiper-init');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tswiperDestroy_() {\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.destroy();\r\n\t\t}\r\n\t}\r\n\r\n\topenMore(event) {\r\n\t\tthis.more.next(event);\r\n\t}\r\n}\r\n\r\nSwiperDirective.meta = {\r\n\tselector: '[swiper]',\r\n\tinputs: ['consumer'],\r\n\toutputs: ['more']\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport SwiperDirective from './swiper.directive';\r\n\r\nexport default class SwiperEventsDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', `swiper-${this.rxcompId}`);\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1,\r\n\t\t\tspaceBetween: 15,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t1024: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 1,\r\n\t\t\t\t},\r\n\t\t\t\t1440: {\r\n\t\t\t\t\tslidesPerView: 2.5,\r\n\t\t\t\t\tspaceBetween: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tcenteredSlides: false,\r\n\t\t\t// loop: true,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tspeed: 600,\r\n\t\t\t/*\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\t*/\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: `#swiper-${this.rxcompId} .swiper-pagination`,\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tnavigation: {\r\n\t\t\t\tnextEl: `#swiper-${this.rxcompId} .swiper-button-next`,\r\n\t\t\t\tprevEl: `#swiper-${this.rxcompId} .swiper-button-prev`,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t\t// console.log('SwiperEventsDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperEventsDirective.meta = {\r\n\tselector: '[swiper-events]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport SwiperDirective from './swiper.directive';\r\n\r\nexport default class SwiperRelatedDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', `swiper-${this.rxcompId}`);\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tspaceBetween: 1,\r\n\t\t\tcenteredSlides: false,\r\n\t\t\tloop: false,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tspeed: 600,\r\n\t\t\t/*\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\t*/\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: `#swiper-${this.rxcompId} .swiper-pagination`,\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tnavigation: {\r\n\t\t\t\tnextEl: `#swiper-${this.rxcompId} .swiper-button-next`,\r\n\t\t\t\tprevEl: `#swiper-${this.rxcompId} .swiper-button-prev`,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t}\r\n\r\n}\r\n\r\nSwiperRelatedDirective.meta = {\r\n\tselector: '[swiper-related]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport SwiperDirective from './swiper.directive';\r\n\r\nexport default class SwiperSlidesDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', `swiper-${this.rxcompId}`);\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1,\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t1024: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 0,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tloop: false,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tspeed: 600,\r\n\t\t\t/*\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\t*/\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: `#swiper-${this.rxcompId} .swiper-pagination`,\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tnavigation: {\r\n\t\t\t\tnextEl: `#swiper-${this.rxcompId} .swiper-button-next`,\r\n\t\t\t\tprevEl: `#swiper-${this.rxcompId} .swiper-button-prev`,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t}\r\n\r\n}\r\n\r\nSwiperSlidesDirective.meta = {\r\n\tselector: '[swiper-slides]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport SwiperDirective from './swiper.directive';\r\n\r\nexport default class SwiperTopEventsDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', `swiper-${this.rxcompId}`);\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1,\r\n\t\t\tspaceBetween: 2,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t768: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 2,\r\n\t\t\t\t},\r\n\t\t\t\t1024: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 2,\r\n\t\t\t\t},\r\n\t\t\t\t1440: {\r\n\t\t\t\t\tslidesPerView: 4,\r\n\t\t\t\t\tspaceBetween: 2,\r\n\t\t\t\t},\r\n\t\t\t\t1920: {\r\n\t\t\t\t\tslidesPerView: 4,\r\n\t\t\t\t\tspaceBetween: 2,\r\n\t\t\t\t},\r\n\t\t\t\t2440: {\r\n\t\t\t\t\tslidesPerView: 5,\r\n\t\t\t\t\tspaceBetween: 2,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tcenteredSlides: false,\r\n\t\t\t// loop: true,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tspeed: 600,\r\n\t\t\t/*\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\t*/\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: `#swiper-${this.rxcompId} .swiper-pagination`,\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tnavigation: {\r\n\t\t\t\tnextEl: `#swiper-${this.rxcompId} .swiper-button-next`,\r\n\t\t\t\tprevEl: `#swiper-${this.rxcompId} .swiper-button-prev`,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t\t// console.log('SwiperTopEventsDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperTopEventsDirective.meta = {\r\n\tselector: '[swiper-top-events]'\r\n};\r\n","import { Component, getContext } from 'rxcomp';\n\nexport default class ThronComponent extends Component {\n\n\tonInit() {\n\t\tconst THRON = window.THRONContentExperience || window.THRONPlayer;\n\t\tif (!THRON) {\n\t\t\treturn;\n\t\t}\n\t\tThronComponent.registerSkin();\n\t\tconst { node } = getContext(this);\n\t\tnode.setAttribute('id', `thron-${this.rxcompId}`);\n\n\t\tlet media = this.thron;\n\t\tif (media.indexOf('pkey=') === -1) {\n\t\t\tconst splitted = media.split('/');\n\t\t\tconst clientId = splitted[6];\n\t\t\tconst xcontentId = splitted[7];\n\t\t\tconst pkey = splitted[8];\n\t\t\tmedia = `https://gruppoconcorde-view.thron.com/api/xcontents/resources/delivery/getContentDetail?clientId=${clientId}&xcontentId=${xcontentId}&pkey=${pkey}`;\n\t\t\t// console.log(media);\n\t\t}\n\t\tconst controls = node.hasAttribute('controls') ? true : false,\n\t\t\tloop = node.hasAttribute('loop') ? true : false,\n\t\t\tautoplay = node.hasAttribute('autoplay') ? true : false,\n\t\t\tlive = node.hasAttribute('live') ? true : false;\n\t\tconst player = this.player = THRON(node.id, {\n\t\t\tmedia: media,\n\t\t\tloop: loop,\n\t\t\tautoplay: autoplay,\n\t\t\tmuted: !controls,\n\t\t\tdisplayLinked: 'close',\n\t\t\tnoSkin: !controls,\n\t\t\t// lockBitrate: 'max',\n\t\t\t//loader spinner color\n\t\t\tpreloadColor: '#446CB3',\n\t\t\t//Audio Wave color\n\t\t\twaveColor: '#ffffff',\n\t\t\twaveProgressColor: '#446CB3'\n\t\t});\n\t\t/*\n\t\t// Set the bottom bar of the video with share and fullscreen only. The first on the left and the second to the right.\n\t\tconst params = {\n\t\t\tsessId: 'asessId',\n\t\t\tclientId: 'aclientId',\n\t\t\txcontentId: 'acontentId'\n\t\t};\n\t\t*/\n\t\tthis.onBeforeInit = this.onBeforeInit.bind(this);\n\t\tthis.onReady = this.onReady.bind(this);\n\t\tthis.onCanPlay = this.onCanPlay.bind(this);\n\t\tthis.onPlaying = this.onPlaying.bind(this);\n\t\tthis.onComplete = this.onComplete.bind(this);\n\t\tplayer.on('beforeInit', this.onBeforeInit);\n\t\tplayer.on('ready', this.onReady);\n\t\tplayer.on('canPlay', this.onCanPlay);\n\t\tplayer.on('playing', this.onPlaying);\n\t\tplayer.on('complete', this.onComplete);\n\t}\n\n\tonBeforeInit(playerInstance) {\n\t\t// VIDEO: ['captionText', 'shareButton', 'downloadableButton', 'playButton', 'timeSeek', 'timeInfoText', 'volumeButton', 'hdButton', 'speedButton', 'fullscreenButton', 'subtitleButton'],\n\t\tconst removedElements = ['captionText', 'subtitleButton', 'downloadableButton', 'speedButton'];\n\n\t\tconst { node } = getContext(this);\n\t\tconst live = node.hasAttribute('live') ? true : false;\n\t\tif (live) {\n\t\t\tremovedElements.push('timeSeek', 'timeInfoText');\n\t\t}\n\t\t// Removes playButton and hdButton from schema bar\n\t\tconst schema = window.THRONSchemaHelper.getSchema();\n\t\tconst elements = window.THRONSchemaHelper.removeElementsById(schema, 'VIDEO', removedElements);\n\t\t// A simple verify: existsElements must false\n\t\tconst existsElements = window.THRONSchemaHelper.getElementsById(schema, 'VIDEO', removedElements).coordinates.length > 0;\n\t\tconsole.log('ThronComponent.onBeforeInit.existsElements', existsElements);\n\t\tconst params = { bars: schema };\n\t\tplayerInstance.params(params);\n\t}\n\n\tonReady() {\n\t\tconst { node } = getContext(this);\n\t\tconst controls = node.hasAttribute('controls') ? true : false;\n\t\tif (!controls) {\n\t\t\tconst player = this.player;\n\t\t\tconst mediaContainer = player.mediaContainer();\n\t\t\tconst video = mediaContainer.querySelector('video');\n\t\t\tvideo.setAttribute('playsinline', 'true');\n\t\t}\n\t\tthis.ready.next(this);\n\t}\n\n\tonCanPlay() {\n\t\tthis.canPlay.next(this);\n\t}\n\n\tonPlaying() {\n\t\tconst player = this.player;\n\t\tplayer.off('playing', this.onPlaying);\n\t\tconst { node } = getContext(this);\n\t\tconst controls = node.hasAttribute('controls') ? true : false;\n\t\tif (!controls) {\n\t\t\tconst qualities = player.qualityLevels();\n\t\t\tif (qualities.length) {\n\t\t\t\tconst highestQuality = qualities[qualities.length - 1].index;\n\t\t\t\tconst lowestQuality = qualities[0].index;\n\t\t\t\tplayer.currentQuality(highestQuality);\n\t\t\t}\n\t\t}\n\t}\n\n\tonComplete() {\n\t\tthis.complete.next(this);\n\t}\n\n\tonDestroy() {\n\t\tconst player = this.player;\n\t\tplayer.off('ready', this.onReady);\n\t\tplayer.off('canPlay', this.onCanPlay);\n\t\tplayer.off('playing', this.onPlaying);\n\t\tplayer.off('complete', this.onComplete);\n\t}\n\n\tplay() {\n\t\tconst player = this.player;\n\t\tconst status = player.status();\n\t\tif (status && !status.playing) {\n\t\t\tplayer.play();\n\t\t}\n\t}\n\n\tpause() {\n\t\tconst player = this.player;\n\t\tconst status = player.status();\n\t\tif (status && status.playing) {\n\t\t\tplayer.pause();\n\t\t}\n\t}\n\n\tstatic registerSkin() {\n\t\tif (window.wseThronPlugin) {\n\t\t\treturn;\n\t\t}\n\t\twindow.wseThronPlugin = function(playerInstance, dom, otherparams, jquery) {\n\t\t\tthis.player = playerInstance;\n\t\t\tthis.$ = jquery;\n\t\t\t/*\n\t\t\tthis.player.on('beforeInit',\n\t\t\t\tfunction(playerInstance) {\n\t\t\t\t\tconsole.log('set action before player init', playerInstance, 'otherparams', otherparams);\n\t\t\t\t\tvar params = {\n\t\t\t\t\t\tvolume: 0.5,\n\t\t\t\t\t\tautoplay: false,\n\t\t\t\t\t\tlinkedContent: 'show',\n\t\t\t\t\t\t//loader spinner color\n\t\t\t\t\t\tpreloadColor: '#f39900',\n\t\t\t\t\t\t//Audio Wave color\n\t\t\t\t\t\twaveColor: '#ffffff',\n\t\t\t\t\t\twaveProgressColor: '#f39900'\n\t\t\t\t\t};\n\t\t\t\t\t//add params\n\t\t\t\t\tplayerInstance.params(params);\n\t\t\t\t}\n\t\t\t);\n\t\t\tthis.player.on('resize', function(playerInstance) {\n\t\t\t\tconsole.log('resize', playerInstance);\n\t\t\t});\n\t\t\tthis.player.on('ready', function(playerInstance) {\n\t\t\t\tconsole.log('ready', playerInstance);\n\t\t\t});\n\t\t\t*/\n\t\t};\n\t\tTHRONContentExperience.plugin('wse', wseThronPlugin);\n\t}\n\n}\n\nThronComponent.meta = {\n\tselector: '[thron]',\n\toutputs: ['ready', 'canPlay', 'complete'],\n\tinputs: ['thron'],\n};\n","function push_(event) {\r\n\tconst dataLayer = window.dataLayer || [];\r\n\tdataLayer.push(event);\r\n\tconsole.log('GtmService.dataLayer', event);\r\n}\r\n\r\nexport default class GtmService {\r\n\r\n\tstatic push(event) {\r\n\t\treturn push_(event);\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport GtmService from '../gtm/gtm.service';\r\nimport SwiperDirective from '../swiper/swiper.directive';\r\n\r\nexport default class VideoComponent extends Component {\r\n\r\n\tget playing() {\r\n\t\treturn this.playing_;\r\n\t}\r\n\r\n\tset playing(playing) {\r\n\t\tif (this.playing_ !== playing) {\r\n\t\t\tthis.playing_ = playing;\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.item = {};\r\n\t\tconst { node, parentInstance } = getContext(this);\r\n\t\tnode.classList.add('video');\r\n\t\tthis.video = node.querySelector('video');\r\n\t\tthis.progress = node.querySelector('.icon--play-progress path');\r\n\t\tif (parentInstance instanceof SwiperDirective) {\r\n\t\t\tparentInstance.events$.pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t).subscribe(event => this.pause());\r\n\t\t}\r\n\t\tthis.addListeners();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tconst video = this.video;\r\n\t\tif (video) {\r\n\t\t\tthis.onPlay = this.onPlay.bind(this);\r\n\t\t\tthis.onPause = this.onPause.bind(this);\r\n\t\t\tthis.onEnded = this.onEnded.bind(this);\r\n\t\t\tthis.onTimeUpdate = this.onTimeUpdate.bind(this);\r\n\t\t\tvideo.addEventListener('play', this.onPlay);\r\n\t\t\tvideo.addEventListener('pause', this.onPause);\r\n\t\t\tvideo.addEventListener('ended', this.onEnded);\r\n\t\t\tvideo.addEventListener('timeupdate', this.onTimeUpdate);\r\n\t\t}\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tconst video = this.video;\r\n\t\tif (video) {\r\n\t\t\tvideo.removeEventListener('play', this.onPlay);\r\n\t\t\tvideo.removeEventListener('pause', this.onPause);\r\n\t\t\tvideo.removeEventListener('ended', this.onEnded);\r\n\t\t\tvideo.removeEventListener('timeupdate', this.onTimeUpdate);\r\n\t\t}\r\n\t}\r\n\r\n\ttogglePlay() {\r\n\t\t// console.log('VideoComponent.togglePlay')\r\n\t\tconst video = this.video;\r\n\t\tif (video) {\r\n\t\t\tif (video.paused) {\r\n\t\t\t\tthis.play();\r\n\t\t\t} else {\r\n\t\t\t\tthis.pause();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tplay() {\r\n\t\tconst video = this.video;\r\n\t\tvideo.muted = false;\r\n\t\tvideo.play();\r\n\t}\r\n\r\n\tpause() {\r\n\t\tconst video = this.video;\r\n\t\tvideo.muted = true;\r\n\t\tvideo.pause();\r\n\t}\r\n\r\n\tonPlay() {\r\n\t\tthis.playing = true;\r\n\t\tGtmService.push({\r\n\t\t\tevent: 'video play',\r\n\t\t\tvideo_name: this.video.src\r\n\t\t});\r\n\t}\r\n\r\n\tonPause() {\r\n\t\tthis.playing = false;\r\n\t}\r\n\r\n\tonEnded() {\r\n\t\tthis.playing = false;\r\n\t}\r\n\r\n\tonTimeUpdate() {\r\n\t\tthis.progress.style.strokeDashoffset = this.video.currentTime / this.video.duration;\r\n\t}\r\n\r\n}\r\n\r\nVideoComponent.meta = {\r\n\tselector: '[video]',\r\n\tinputs: ['item'],\r\n};\r\n","import { Context } from 'rxcomp';\n\nexport default class VirtualItem extends Context {\n\tconstructor(key, $key, value, $value, index, count, parentInstance) {\n\t\tsuper(parentInstance);\n\t\tthis[key] = $key;\n\t\tthis[value] = $value;\n\t\tthis.index = index;\n\t\tthis.count = count;\n\t}\n\n\tget first() {\n\t\treturn this.index === 0;\n\t}\n\n\tget last() {\n\t\treturn this.index === this.count - 1;\n\t}\n\n\tget even() {\n\t\treturn this.index % 2 === 0;\n\t}\n\n\tget odd() {\n\t\treturn !this.even;\n\t}\n}\n","import { getContext, Structure } from 'rxcomp';\nimport { BehaviorSubject, fromEvent, merge } from 'rxjs';\nimport { auditTime, map, startWith, takeUntil, tap } from 'rxjs/operators';\nimport VirtualItem from './virtual.item';\n\nexport const VirtualMode = {\n\tResponsive: 1,\n\tGrid: 2,\n\tCentered: 3,\n\tList: 4\n};\n\nexport default class VirtualStructure extends Structure {\n\n\tonInit() {\n\t\tconst { module, node } = getContext(this);\n\t\tconst template = node.firstElementChild;\n\t\tconst expression = node.getAttribute('*virtual');\n\t\tnode.removeAttribute('*virtual');\n\t\tnode.removeChild(template);\n\t\tconst tokens = (this.tokens = this.getExpressionTokens(expression));\n\t\tthis.virtualFunction = module.makeFunction(tokens.iterable);\n\t\tthis.container = node;\n\t\tthis.template = template;\n\t\tthis.mode = this.mode || 1;\n\t\tthis.width = this.width || 250;\n\t\tthis.gutter = (this.gutter !== undefined) ? this.gutter : 20;\n\t\tthis.options = {\n\t\t\ttop: 0,\n\t\t\twidth: this.width,\n\t\t\tgutter: this.gutter,\n\t\t\tcontainerWidth: 0,\n\t\t\tcontainerHeight: 0,\n\t\t\tcols: [0],\n\t\t\tstrategy: 1\n\t\t};\n\t\tthis.cachedRects = {};\n\t\tthis.cachedInstances = [];\n\t\tthis.cacheNodes = [];\n\t\tthis.items$ = new BehaviorSubject([]);\n\t\tthis.update$()\n\t\t\t.pipe(takeUntil(this.unsubscribe$))\n\t\t\t.subscribe(visibleItems => {\n\t\t\t\t// console.log(visibleItems.length);\n\t\t\t});\n\t}\n\n\tonChanges(changes) {\n\t\tconst context = getContext(this);\n\t\tconst module = context.module;\n\t\t// resolve\n\t\tconst items = module.resolve(this.virtualFunction, context.parentInstance, this) || [];\n\t\tthis.mode = this.mode || 1;\n\t\tthis.width = this.width || 250;\n\t\tthis.gutter = (this.gutter !== undefined) ? this.gutter : 20;\n\t\tthis.options.width = this.width;\n\t\tthis.updateView(true);\n\t\tthis.items$.next(items);\n\t}\n\n\tupdate$() {\n\t\treturn merge(this.scroll$(), this.resize$(), this.items$).pipe(\n\t\t\tmap(datas => {\n\t\t\t\tconst options = this.options;\n\t\t\t\tconst items = this.items$.getValue();\n\t\t\t\tconst total = items.length;\n\t\t\t\tthis.container.position = 'relative';\n\t\t\t\tlet highestHeight = 0;\n\t\t\t\tconst width = this.getWidth();\n\t\t\t\tconst gutter = this.getGutter(width);\n\t\t\t\tconst visibleItems = items.filter((item, i) => {\n\t\t\t\t\tlet col, height, top, left, bottom;\n\t\t\t\t\tlet rect = this.cachedRects[i];\n\t\t\t\t\tif (rect) {\n\t\t\t\t\t\tcol = rect.col;\n\t\t\t\t\t\theight = rect.height;\n\t\t\t\t\t\tleft = rect.left;\n\t\t\t\t\t\t// top = rect.top;\n\t\t\t\t\t\t// bottom = rect.bottom;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcol = this.getCol();\n\t\t\t\t\t\theight = this.getHeight(width, item);\n\t\t\t\t\t}\n\t\t\t\t\ttop = options.cols[col];\n\t\t\t\t\tif (this.intersect(top + options.top, top + height + options.top, 0, options.containerHeight)) {\n\t\t\t\t\t\tif (!rect) {\n\t\t\t\t\t\t\tleft = this.getLeft(col, width, gutter);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst node = this.cachedNode(i, i, item, total);\n\t\t\t\t\t\tnode.style.position = 'absolute';\n\t\t\t\t\t\tnode.style.top = top + 'px';\n\t\t\t\t\t\tnode.style.left = left + 'px';\n\t\t\t\t\t\tnode.style.width = width + 'px';\n\t\t\t\t\t\tif (height !== node.offsetHeight) {\n\t\t\t\t\t\t\theight = node.offsetHeight;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbottom = top + height + options.gutter;\n\t\t\t\t\t\thighestHeight = Math.max(highestHeight, bottom);\n\t\t\t\t\t\toptions.cols[col] = bottom;\n\t\t\t\t\t\tif (!rect) {\n\t\t\t\t\t\t\tthis.cachedRects[i] = { col, width, height, left, top, bottom };\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trect.height = height;\n\t\t\t\t\t\t\trect.bottom = bottom;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.removeNode(i);\n\t\t\t\t\t\tbottom = top + height + options.gutter;\n\t\t\t\t\t\toptions.cols[col] = bottom;\n\t\t\t\t\t\thighestHeight = Math.max(highestHeight, bottom);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tlet removeIndex = items.length;\n\t\t\t\twhile (removeIndex < this.cacheNodes.length) {\n\t\t\t\t\tthis.removeNode(removeIndex);\n\t\t\t\t\tremoveIndex++;\n\t\t\t\t}\n\t\t\t\tthis.cacheNodes.length = items.length;\n\t\t\t\tthis.container.style.height = `${highestHeight}px`;\n\t\t\t\treturn visibleItems;\n\t\t\t})\n\t\t);\n\t}\n\n\tgetCols() {\n\t\tconst options = this.options;\n\t\tconst cols = Math.floor((options.containerWidth + options.gutter) / (options.width + options.gutter)) || 1;\n\t\treturn new Array(cols).fill(0);\n\t}\n\n\tgetCol() {\n\t\tconst options = this.options;\n\t\tlet col;\n\t\tswitch (this.mode) {\n\t\t\tcase VirtualMode.Grid:\n\t\t\tcase VirtualMode.Centered:\n\t\t\tcase VirtualMode.Responsive:\n\t\t\t\tcol = options.cols.reduce((p, c, i, a) => {\n\t\t\t\t\treturn c < a[p] ? i : p;\n\t\t\t\t}, 0);\n\t\t\t\tbreak;\n\t\t\tcase VirtualMode.List:\n\t\t\tdefault:\n\t\t\t\tcol = 0;\n\t\t}\n\t\treturn col;\n\t}\n\n\tgetWidth() {\n\t\tconst options = this.options;\n\t\tlet width;\n\t\tswitch (this.mode) {\n\t\t\tcase VirtualMode.Grid:\n\t\t\tcase VirtualMode.Centered:\n\t\t\t\twidth = options.width;\n\t\t\t\tbreak;\n\t\t\tcase VirtualMode.Responsive:\n\t\t\t\twidth = (options.containerWidth - (options.cols.length - 1) * options.gutter) / options.cols.length;\n\t\t\t\tbreak;\n\t\t\tcase VirtualMode.List:\n\t\t\tdefault:\n\t\t\t\twidth = options.containerWidth;\n\t\t}\n\t\treturn width;\n\t}\n\n\tgetHeight(width, item) {\n\t\tconst options = this.options;\n\t\tlet height;\n\t\tswitch (this.mode) {\n\t\t\tcase VirtualMode.Grid:\n\t\t\tcase VirtualMode.Centered:\n\t\t\tcase VirtualMode.Responsive:\n\t\t\t\theight = options.width;\n\t\t\t\tbreak;\n\t\t\tcase VirtualMode.List:\n\t\t\tdefault:\n\t\t\t\theight = 80;\n\t\t}\n\t\treturn height;\n\t}\n\n\tgetGutter(width) {\n\t\tconst options = this.options;\n\t\tlet gutter;\n\t\tswitch (this.mode) {\n\t\t\tcase VirtualMode.Grid:\n\t\t\tcase VirtualMode.Centered:\n\t\t\t\tgutter = options.gutter;\n\t\t\t\tbreak;\n\t\t\tcase VirtualMode.Responsive:\n\t\t\t\tgutter = (options.containerWidth - options.cols.length * width) / (options.cols.length - 1);\n\t\t\t\tbreak;\n\t\t\tcase VirtualMode.List:\n\t\t\tdefault:\n\t\t\t\tgutter = 0;\n\t\t}\n\t\treturn gutter;\n\t}\n\n\tgetLeft(index, width, gutter) {\n\t\tconst options = this.options;\n\t\tlet left;\n\t\tswitch (this.mode) {\n\t\t\tcase VirtualMode.Grid:\n\t\t\tcase VirtualMode.Responsive:\n\t\t\t\tleft = index * (width + gutter);\n\t\t\t\tbreak;\n\t\t\tcase VirtualMode.Centered:\n\t\t\t\tleft = (options.containerWidth - options.cols.length * (width + gutter) + gutter) / 2 + index * (width + gutter);\n\t\t\t\tbreak;\n\t\t\tcase VirtualMode.List:\n\t\t\tdefault:\n\t\t\t\tleft = 0;\n\t\t}\n\t\treturn left;\n\t}\n\n\tcachedNode(index, i, value, total) {\n\t\tif (this.cacheNodes[index]) {\n\t\t\treturn this.updateNode(index, i, value);\n\t\t} else {\n\t\t\treturn this.createNode(index, i, value, total);\n\t\t}\n\t}\n\n\tcreateNode(index, i, value, total) {\n\t\tconst clonedNode = this.template.cloneNode(true);\n\t\tdelete clonedNode.rxcompId;\n\t\tthis.container.appendChild(clonedNode);\n\t\tthis.cacheNodes[index] = clonedNode;\n\t\tconst context = getContext(this);\n\t\tconst module = context.module;\n\t\tconst tokens = this.tokens;\n\t\tconst args = [tokens.key, i, tokens.value, value, i, total, context.parentInstance];\n\t\tconst instance = module.makeInstance(clonedNode, VirtualItem, context.selector, context.parentInstance, args);\n\t\tconst forItemContext = getContext(instance);\n\t\tmodule.compile(clonedNode, forItemContext.instance);\n\t\tthis.cachedInstances[index] = instance;\n\t\treturn clonedNode;\n\t}\n\n\tupdateNode(index, i, value) {\n\t\tconst instance = this.cachedInstances[index];\n\t\tconst tokens = this.tokens;\n\t\tif (instance[tokens.key] !== i) {\n\t\t\tinstance[tokens.key] = i;\n\t\t\tinstance[tokens.value] = value;\n\t\t\tinstance.pushChanges();\n\t\t}\n\t\t// console.log(index, i, value);\n\t\treturn this.cacheNodes[index];\n\t}\n\n\tremoveNode(index) {\n\t\tthis.cachedInstances[index] = undefined;\n\t\tconst node = this.cacheNodes[index];\n\t\tif (node) {\n\t\t\tconst context = getContext(this);\n\t\t\tconst module = context.module;\n\t\t\tnode.parentNode.removeChild(node);\n\t\t\tmodule.remove(node);\n\t\t}\n\t\tthis.cacheNodes[index] = undefined;\n\t\treturn node;\n\t}\n\n\tintersect(top1, bottom1, top2, bottom2) {\n\t\treturn top2 < bottom1 && bottom2 > top1;\n\t}\n\n\tresize$() {\n\t\treturn fromEvent(window, 'resize').pipe(\n\t\t\tauditTime(100),\n\t\t\tstartWith(null),\n\t\t\ttap(() => this.updateView(true))\n\t\t);\n\t}\n\n\tscroll$(node) {\n\t\treturn fromEvent(window, 'scroll').pipe(tap(() => this.updateView()));\n\t}\n\n\tupdateView(reset) {\n\t\tconst rect = this.container.getBoundingClientRect();\n\t\tconst options = this.options;\n\t\toptions.top = rect.top;\n\t\toptions.containerWidth = rect.width;\n\t\toptions.containerHeight = window.innerHeight;\n\t\toptions.cols = this.getCols();\n\t\tif (reset) {\n\t\t\tthis.cachedRects = {};\n\t\t}\n\t}\n\n\tgetExpressionTokens(expression) {\n\t\tif (expression === null) {\n\t\t\tthrow new Error('invalid virtual');\n\t\t}\n\t\tif (expression.trim().indexOf('let ') === -1 || expression.trim().indexOf(' of ') === -1) {\n\t\t\tthrow new Error('invalid virtual');\n\t\t}\n\t\tconst expressions = expression\n\t\t\t.split(';')\n\t\t\t.map(x => x.trim())\n\t\t\t.filter(x => x !== '');\n\t\tconst virtualExpressions = expressions[0].split(' of ').map(x => x.trim());\n\t\tlet value = virtualExpressions[0].replace(/\\s*let\\s*/, '');\n\t\tconst iterable = virtualExpressions[1];\n\t\tlet key = 'index';\n\t\tconst keyValueMatches = value.match(/\\[(.+)\\s*,\\s*(.+)\\]/);\n\t\tif (keyValueMatches) {\n\t\t\tkey = keyValueMatches[1];\n\t\t\tvalue = keyValueMatches[2];\n\t\t}\n\t\tif (expressions.length > 1) {\n\t\t\tconst indexExpressions = expressions[1].split(/\\s*let\\s*|\\s*=\\s*index/).map(x => x.trim());\n\t\t\tif (indexExpressions.length === 3) {\n\t\t\t\tkey = indexExpressions[1];\n\t\t\t}\n\t\t}\n\t\treturn { key, value, iterable };\n\t}\n}\n\nVirtualStructure.meta = {\n\tselector: '[*virtual]',\n\tinputs: ['mode', 'width', 'gutter']\n};\n","import { Component, getContext } from 'rxcomp';\r\nimport { BehaviorSubject, interval, Subject } from 'rxjs';\r\nimport { distinctUntilChanged, filter, map, switchMap, takeUntil, tap } from 'rxjs/operators';\r\nimport SwiperDirective from '../swiper/swiper.directive';\r\n\r\nexport default class YoutubeComponent extends Component {\r\n\r\n\tget playing() {\r\n\t\treturn this.playing_;\r\n\t}\r\n\r\n\tset playing(playing) {\r\n\t\tif (this.playing_ !== playing) {\r\n\t\t\tthis.playing_ = playing;\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\tget cover() {\r\n\t\treturn this.youtubeId ? `//i.ytimg.com/vi/${this.youtubeId}/maxresdefault.jpg` : '';\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.item = {};\r\n\t\tconst { node, parentInstance } = getContext(this);\r\n\t\tnode.classList.add('youtube');\r\n\t\tif (YoutubeComponent.MOBILE) {\r\n\t\t\tnode.classList.add('mobile');\r\n\t\t}\r\n\t\tthis.progress = node.querySelector('.icon--play-progress path');\r\n\t\tthis.onPlayerReady = this.onPlayerReady.bind(this);\r\n\t\tthis.onPlayerStateChange = this.onPlayerStateChange.bind(this);\r\n\t\tthis.onPlayerError = this.onPlayerError.bind(this);\r\n\t\tthis.id$ = new Subject().pipe(distinctUntilChanged());\r\n\t\tif (parentInstance instanceof SwiperDirective) {\r\n\t\t\tparentInstance.events$.pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t).subscribe(event => this.pause());\r\n\t\t}\r\n\t\t// this.addListeners();\r\n\t}\r\n\r\n\tonChanges(changes) {\r\n\t\tconst id = this.youtubeId;\r\n\t\t// console.log('YoutubeComponent.onChanges', id);\r\n\t\tthis.id$.next(id);\r\n\t}\r\n\r\n\tinitPlayer() {\r\n\t\t// console.log('VideoComponent.initPlayer');\r\n\t\tthis.player$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(player => {\r\n\t\t\tconsole.log('YoutubeComponent.player$', player);\r\n\t\t});\r\n\t\tthis.interval$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(() => {});\r\n\t\tthis.id$.next(this.youtubeId);\r\n\t}\r\n\r\n\tplayer$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst video = node.querySelector('.video');\r\n\t\treturn this.id$.pipe(\r\n\t\t\tswitchMap(id => {\r\n\t\t\t\t// console.log('YoutubeComponent.videoId', id);\r\n\t\t\t\treturn YoutubeComponent.once$().pipe(\r\n\t\t\t\t\tmap(youtube => {\r\n\t\t\t\t\t\t// console.log('YoutubeComponent.once$', youtube);\r\n\t\t\t\t\t\tthis.destroyPlayer();\r\n\t\t\t\t\t\tthis.player = new youtube.Player(video, {\r\n\t\t\t\t\t\t\twidth: node.offsetWidth,\r\n\t\t\t\t\t\t\theight: node.offsetHeight,\r\n\t\t\t\t\t\t\tvideoId: id,\r\n\t\t\t\t\t\t\tplayerVars: {\r\n\t\t\t\t\t\t\t\tautoplay: 1,\r\n\t\t\t\t\t\t\t\tcontrols: 1, // YoutubeComponent.MOBILE ? 1 : 0,\r\n\t\t\t\t\t\t\t\tdisablekb: 1,\r\n\t\t\t\t\t\t\t\tenablejsapi: 1,\r\n\t\t\t\t\t\t\t\tfs: 0,\r\n\t\t\t\t\t\t\t\tloop: 1,\r\n\t\t\t\t\t\t\t\tmodestbranding: 1,\r\n\t\t\t\t\t\t\t\tplaysinline: 1,\r\n\t\t\t\t\t\t\t\trel: 0,\r\n\t\t\t\t\t\t\t\tshowinfo: 0,\r\n\t\t\t\t\t\t\t\tiv_load_policy: 3,\r\n\t\t\t\t\t\t\t\tlistType: 'user_uploads',\r\n\t\t\t\t\t\t\t\t// origin: 'https://log6i.csb.app/'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tevents: {\r\n\t\t\t\t\t\t\t\tonReady: this.onPlayerReady,\r\n\t\t\t\t\t\t\t\tonStateChange: this.onPlayerStateChange,\r\n\t\t\t\t\t\t\t\tonPlayerError: this.onPlayerError\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn this.player;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tonPlayerReady(event) {\r\n\t\t// console.log('YoutubeComponent.onPlayerReady', event);\r\n\t\tevent.target.mute();\r\n\t\tevent.target.playVideo();\r\n\t}\r\n\r\n\tonPlayerStateChange(event) {\r\n\t\t// console.log('YoutubeComponent.onPlayerStateChange', event.data);\r\n\t\tif (event.data === 1) {\r\n\t\t\tthis.playing = true;\r\n\t\t} else {\r\n\t\t\tthis.playing = false;\r\n\t\t}\r\n\t}\r\n\r\n\tonPlayerError(event) {\r\n\t\tconsole.log('YoutubeComponent.onPlayerError', event);\r\n\t}\r\n\r\n\tdestroyPlayer() {\r\n\t\tif (this.player) {\r\n\t\t\tthis.player.destroy();\r\n\t\t}\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.destroyPlayer();\r\n\t}\r\n\r\n\tinterval$() {\r\n\t\treturn interval(500).pipe(\r\n\t\t\tfilter(() => this.playing && this.player),\r\n\t\t\ttap(() => {\r\n\t\t\t\tthis.progress.style.strokeDashoffset =\r\n\t\t\t\t\tthis.player.getCurrentTime() / this.player.getDuration();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\ttogglePlay() {\r\n\t\t// console.log('VideoComponent.togglePlay');\r\n\t\tif (this.playing) {\r\n\t\t\tthis.pause();\r\n\t\t} else {\r\n\t\t\tthis.play();\r\n\t\t}\r\n\t}\r\n\r\n\tplay() {\r\n\t\t// console.log('VideoComponent.play');\r\n\t\tif (!this.player) {\r\n\t\t\tthis.initPlayer();\r\n\t\t} else {\r\n\t\t\tthis.player.playVideo();\r\n\t\t}\r\n\t}\r\n\r\n\tpause() {\r\n\t\tif (!this.player) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.player.stopVideo();\r\n\t}\r\n\r\n\tstatic once$() {\r\n\t\tif (this.youtube$) {\r\n\t\t\treturn this.youtube$;\r\n\t\t} else {\r\n\t\t\tthis.youtube$ = new BehaviorSubject(null).pipe(\r\n\t\t\t\tfilter(youtube => youtube !== null)\r\n\t\t\t);\r\n\t\t\twindow.onYouTubeIframeAPIReady = this.onYouTubeIframeAPIReady_.bind(this);\r\n\t\t\tconst script = document.createElement('script');\r\n\t\t\tconst scripts = document.querySelectorAll('script');\r\n\t\t\tconst last = scripts[scripts.length - 1];\r\n\t\t\tlast.parentNode.insertBefore(script, last);\r\n\t\t\tscript.src = '//www.youtube.com/iframe_api';\r\n\t\t\treturn this.youtube$;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic onYouTubeIframeAPIReady_() {\r\n\t\t// console.log('onYouTubeIframeAPIReady');\r\n\t\tthis.youtube$.next(window.YT);\r\n\t}\r\n\r\n\tstatic mobilecheck() {\r\n\t\tlet check = false;\r\n\t\t(function(a) { if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true; })(navigator.userAgent || navigator.vendor || window.opera);\r\n\t\treturn check;\r\n\t}\r\n\r\n\tstatic mobileAndTabletcheck() {\r\n\t\tlet check = false;\r\n\t\t(function(a) { if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true; })(navigator.userAgent || navigator.vendor || window.opera);\r\n\t\treturn check;\r\n\t}\r\n\r\n}\r\n\r\nYoutubeComponent.MOBILE = YoutubeComponent.mobileAndTabletcheck();\r\n\r\nYoutubeComponent.meta = {\r\n\tselector: '[youtube]',\r\n\tinputs: ['youtubeId', 'title']\r\n};\r\n","import { CoreModule, Module } from 'rxcomp';\r\nimport { FormModule } from 'rxcomp-form';\r\nimport AppComponent from './app.component';\r\nimport AsideComponent from './aside/aside.component';\r\nimport ChannelPageComponent from './channel/channel-page.component';\r\nimport ChannelComponent from './channel/channel.component';\r\nimport ClickOutsideDirective from './click-outside/click-outside.directive';\r\nimport CountPipe from './count/count.pipe';\r\nimport DatePipe from './date/date.pipe';\r\nimport DropdownItemDirective from './dropdown/dropdown-item.directive';\r\nimport DropdownDirective from './dropdown/dropdown.directive';\r\nimport EventDateComponent from './event/event-date.component';\r\nimport EventPageComponent from './event/event-page.component';\r\nimport EventComponent from './event/event.component';\r\nimport FavouritePageComponent from './favourite/favourite-page.component';\r\nimport ErrorsComponent from './forms/errors.component';\r\nimport HeaderComponent from './header/header.component';\r\nimport HtmlPipe from './html/html.pipe';\r\nimport IndexPageComponent from './index/index-page.component';\r\nimport LazyDirective from './lazy/lazy.directive';\r\nimport ModalOutletComponent from './modal/modal-outlet.component';\r\nimport ModalComponent from './modal/modal.component';\r\nimport NotificationComponent from './notification/notification.component';\r\nimport RegisterOrLoginComponent from './register-or-login/register-or-login.component';\r\nimport RelativeDateDirective from './relative-date/relative-date.component';\r\nimport RelativeDatePipe from './relative-date/relative-date.pipe';\r\nimport ScrollToDirective from './scroll-to/scroll-to.directive';\r\nimport SecureDirective from './secure/secure.directive';\r\nimport SlugPipe from './slug/slug.pipe';\r\nimport SwiperEventsDirective from './swiper/swiper-events.directive';\r\nimport SwiperRelatedDirective from './swiper/swiper-related.directive';\r\nimport SwiperSlidesDirective from './swiper/swiper-slides.directive';\r\nimport SwiperTopEventsDirective from './swiper/swiper-top-events.directive';\r\nimport SwiperDirective from './swiper/swiper.directive';\r\nimport ThronComponent from './thron/thron.component';\r\nimport VideoComponent from './video/video.component';\r\nimport VirtualStructure from './virtual/virtual.structure';\r\nimport YoutubeComponent from './youtube/youtube.component';\r\n\r\nexport default class AppModule extends Module {}\r\n\r\nAppModule.meta = {\r\n\timports: [\r\n\t\tCoreModule,\r\n\t\tFormModule,\r\n\t],\r\n\tdeclarations: [\r\n\t\tAsideComponent,\r\n\t\tChannelComponent,\r\n\t\tChannelPageComponent,\r\n\t\tClickOutsideDirective,\r\n\t\tCountPipe,\r\n\t\tDatePipe,\r\n\t\tDropdownDirective,\r\n\t\tDropdownItemDirective,\r\n\t\tErrorsComponent,\r\n\t\tEventComponent,\r\n\t\tEventDateComponent,\r\n\t\tEventPageComponent,\r\n\t\tFavouritePageComponent,\r\n\t\tHeaderComponent,\r\n\t\tHtmlPipe,\r\n\t\tIndexPageComponent,\r\n\t\tLazyDirective,\r\n\t\tModalComponent,\r\n\t\tModalOutletComponent,\r\n\t\tNotificationComponent,\r\n\t\tRegisterOrLoginComponent,\r\n\t\tRelativeDateDirective,\r\n\t\tRelativeDatePipe,\r\n\t\tScrollToDirective,\r\n\t\tSecureDirective,\r\n\t\tSlugPipe,\r\n\t\tSwiperDirective,\r\n\t\tSwiperEventsDirective,\r\n\t\tSwiperRelatedDirective,\r\n\t\tSwiperSlidesDirective,\r\n\t\tSwiperTopEventsDirective,\r\n\t\tThronComponent,\r\n\t\tVirtualStructure,\r\n\t\tVideoComponent,\r\n\t\tYoutubeComponent,\r\n\t],\r\n\tbootstrap: AppComponent,\r\n};\r\n","import { Browser } from 'rxcomp';\r\nimport AppModule from './app.module';\r\n\r\nBrowser.bootstrap(AppModule);\r\n"]}