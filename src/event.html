<!-- @@master = ./templates/layout.html { "baseHref": "/ws-events/" } -->

<!-- @@block = main-->

<div class="event-page" event-page>

	<div class="wse__container">
		<div class="wse__player">
			<div class="wse__thron" controls thron="https://gruppoconcorde-view.thron.com/api/xcontents/resources/delivery/getContentDetail?clientId=gruppoconcorde&xcontentId=16ef3c0a-ba0c-4e3a-a10a-32bc7f9a4297&pkey=yz1hpd"></div>
		</div>
	</div>

	<div class="wse__section--channel__header" [event]="event" *if="event">
		<div class="wse__container">
			<div class="wse__row">
				<div class="wse__col-md-6">
					<div class="wse__section--channel__content">
						<div class="wse__section--channel__title" [innerHTML]="event.name"></div>
						<div class="wse__section--channel__abstract" [innerHTML]="event.abstract"></div>
					</div>
				</div>
				<div class="wse__col-md-6">
					<div class="wse__channel__info">
						<div class="wse__subscribe" [class]="{ 'wse__active': event.info.subscribed }" (click)="toggleSubscribe()">
							<div class="wse__info">
								<svg class="wse__bell" *if="!event.info.subscribed"><use xlink:href="#bell"></use></svg>
								<svg class="wse__bell" *if="event.info.subscribed"><use xlink:href="#bell-active"></use></svg>
								<span [innerHTML]="event.info.subscribers"></span>&nbsp;<span>iscritti</span>
							</div>
							<div class="wse__label"><svg class="wse__bell-active"><use xlink:href="#bell-active"></use></svg> <span [innerHTML]="event.info.subscribed ? 'iscritto' : 'iscriviti'"></span></div>
						</div>
						<div class="wse__like" [class]="{ 'wse__active': event.info.liked }" (click)="toggleLike()">
							<div class="wse__info">
								<svg class="wse__heart" *if="!event.info.liked"><use xlink:href="#heart"></use></svg>
								<svg class="wse__heart" *if="event.info.liked"><use xlink:href="#heart-active"></use></svg>
								<span [innerHTML]="event.info.likes"></span>&nbsp;<span>mi piace</span>
							</div>
							<div class="wse__label"><svg class="wse__heart-active"><use xlink:href="#heart-active"></use></svg> <span>mi piace</span></div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="wse__section--filters" *if="listing?.length">
		<div class="wse__container-fluid">
			<div class="wse__group--filters">
				<ul class="wse__nav--filters">
					<li class="wse__nav--filters__item wse__filter" *for="let option of filters.type.options">
						<span class="wse__filter__option" [class]="{ active: filters.type.has(option), disabled: option.disabled }" (click)="filters.type.set(option)">
							<span class="name" *if="option.value === undefined">Tutti</span>
							<span class="name" *if="option.value === 'event'">Eventi</span>
							<span class="name" *if="option.value === 'picture'">Immagini</span>
							<span class="name" *if="option.value === 'product'">Prodotti</span>
							<span class="name" *if="option.value === 'magazine'">Magazine</span>
							<span class="count" [innerHTML]="option.count || ''"></span>
						</span>
					</li>
				</ul>
				<div class="wse__group--actions">
					<div class="wse__btn--mode" (click)="toggleGrid()">
						<svg class="wse__grid" *if="grid.width === 350"><use xlink:href="#grid"></use></svg>
						<svg class="wse__grid" *if="grid.width === 700"><use xlink:href="#grid-active"></use></svg>
					</div>
					<div class="wse__btn--filter">
						<svg class="wse__filter"><use xlink:href="#filter"></use></svg>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="wse__section--channel__listing">
		<div class="wse__container-fluid">
			<div class="wse__group--grid" *virtual="let item of filteredItems" [mode]="grid.mode" [width]="grid.width" [gutter]="grid.gutter">
				<!-- serve un nodo figlio -->
				<div class="wse__section--channel__listing__item">
					<div [event]="item" *if="item.type === 'event'">
						<!-- @@include ./templates/shared/event/card-listing.html -->
					</div>
					<div *if="item.type === 'picture'">
						<!-- @@include ./templates/shared/generic/card-picture.html -->
					</div>
					<div *if="item.type === 'product'">
						<!-- @@include ./templates/shared/generic/card-product.html -->
					</div>
					<div *if="item.type === 'magazine'">
						<!-- @@include ./templates/shared/generic/card-magazine.html -->
					</div>
				</div>
			</div>
		</div>
	</div>

</div>

<!-- @@close-->
