/**
 * @license ws-events v1.0.0
 * (c) 2021 Luca Zampetti <lzampetti@gmail.com>
 * License: MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("rxcomp"),require("rxcomp-form"),require("rxjs/operators"),require("rxjs"),require("swiper")):"function"==typeof define&&define.amd?define(["rxcomp","rxcomp-form","rxjs/operators","rxjs","swiper"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).rxcomp,e.rxcomp.form,e.rxjs.operators,e.rxjs,e.Swiper)}(this,(function(e,t,n,i,r){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;var u=function(t){function n(){return t.apply(this,arguments)||this}s(n,t);var i=n.prototype;return i.onInit=function(){e.getContext(this).node.classList.remove("wse__hidden"),this.asideActive=!1},i.onAsideToggle=function(t){var n=e.getContext(this).node;t?(n.classList.add("wse__aside--active"),n.classList.remove("wse__notification--active")):n.classList.remove("wse__aside--active")},i.onNotificationToggle=function(t){var n=e.getContext(this).node;t?(n.classList.add("wse__notification--active"),n.classList.remove("wse__aside--active")):n.classList.remove("wse__notification--active")},n}(e.Component);u.meta={selector:"[app-component]"};var l="undefined"!=typeof module&&module.exports,c=(l||document.querySelector("base").getAttribute("href"),!l&&(window&&-1!==window.location.host.indexOf("herokuapp"))),d=!l&&(c||window&&("40431"===window.location.port||"5000"===window.location.port||"6443"===window.location.port||"actarian.github.io"===window.location.host)),h=!l&&(window&&-1!==["localhost","127.0.0.1","0.0.0.0"].indexOf(window.location.host.split(":")[0])),p={NAME:"ws-events",STATIC:d,DEVELOPMENT:h,PRODUCTION:!h,RESOURCE:"/Modules/Events/Client/docs/",STATIC_RESOURCE:"./",API:"/api",STATIC_API:h&&!d?"/Modules/Events/Client/docs/api":"./api"};function f(e,t){return""+(t||d?p.STATIC_API:p.API)+e+(t||d?".json":"")}var m=function(){function e(e){this.data=null,e&&(this.url=e.url,this.status=e.status,this.statusText=e.statusText,this.ok=e.ok,this.redirected=e.redirected)}return a(e,[{key:"static",get:function(){return this.url.indexOf(".json")===this.url.length-5}}]),e}(),v=function(){function e(){}return e.http$=function(e,t,r,o){var a=this;void 0===o&&(o="json"),e=-1!==t.indexOf(".json")?"GET":e;var s=null;return i.from(fetch(t,{method:e,headers:{Accept:"application/json","Content-Type":"application/json"},body:-1!==["POST","PUT","PATCH"].indexOf(e)?JSON.stringify(r):void 0}).then((function(e){return s=new m(e),e[o]().then((function(t){return s.data=t,e.ok?Promise.resolve(s):Promise.reject(s)}))}))).pipe(n.catchError((function(e){return i.throwError(a.getError(e,s))})))},e.get$=function(e,t,n){var i=this.query(t);return this.http$("GET",""+e+i,void 0,n)},e.delete$=function(e){return this.http$("DELETE",e)},e.post$=function(e,t){return this.http$("POST",e,t)},e.put$=function(e,t){return this.http$("PUT",e,t)},e.patch$=function(e,t){return this.http$("PATCH",e,t)},e.query=function(e){return""},e.getError=function(e,t){var n=(e="string"==typeof e?{statusMessage:e}:e).data||t.data;return"object"==typeof n&&Object.assign(e,n),e.statusCode||(e.statusCode=t?t.status:0),e.statusMessage||(e.statusMessage=t?t.statusText:"Unknown Error"),e.friendlyMessage||(e.friendlyMessage="Unknown Error"),e},e}(),g=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t.get$=function(t,n,i){return e.get$.call(this,f(t),n,i)},t.delete$=function(t){return e.delete$.call(this,f(t))},t.post$=function(t,n){return e.post$.call(this,f(t),n)},t.put$=function(t,n){return e.put$.call(this,f(t),n)},t.patch$=function(t,n){return e.patch$.call(this,f(t),n)},t.staticGet$=function(t,n,i){return e.get$.call(this,f(t,!0),n,i)},t.staticDelete$=function(t){return e.delete$.call(this,f(t,!0))},t.staticPost$=function(t,n){return e.post$.call(this,f(t,!0),n)},t.staticPut$=function(t,n){return e.put$.call(this,f(t,!0),n)},t.staticPatch$=function(t,n){return e.patch$.call(this,f(t,!0),n)},t}(v),b=function(){function e(){}return e.delete=function(e){this.isLocalStorageSupported()&&window.localStorage.removeItem(e)},e.exist=function(e){if(this.isLocalStorageSupported())return void 0!==window.localStorage[e]},e.get=function(e){var t=null;if(this.isLocalStorageSupported()&&void 0!==window.localStorage[e])try{t=JSON.parse(window.localStorage[e])}catch(t){console.log("LocalStorageService.get.error parsing",e,t)}return t},e.set=function(e,t){if(this.isLocalStorageSupported())try{var n=[],i=JSON.stringify(t,(function(e,t){if("object"==typeof t&&null!==t){if(-1!==n.indexOf(t))return;n.push(t)}return t}));window.localStorage.setItem(e,i)}catch(n){console.log("LocalStorageService.set.error serializing",e,t,n)}},e.isLocalStorageSupported=function(){if(this.supported)return!0;var e=!1;try{(e="localStorage"in window&&null!==window.localStorage)?(window.localStorage.setItem("test","1"),window.localStorage.removeItem("test")):e=!1}catch(t){e=!1}return this.supported=e,e},e}(),w=new i.BehaviorSubject([]),y=new i.BehaviorSubject([]),k=new i.BehaviorSubject([]),C=function(){function e(){}return e.getCurrentSubscriptions=function(){return w.getValue()},e.getCurrentLikes=function(){return y.getValue()},e.getCurrentFavourites=function(){return k.getValue()},e.subscriptions$=function(){return g.get$("/user/subscription").pipe(n.map((function(e){return P.mapEvents(e.data,e.static)})),n.switchMap((function(e){return w.next(e),w})))},e.likes$=function(){return g.get$("/user/like").pipe(n.map((function(e){return P.mapEvents(e.data,e.static)})),n.switchMap((function(e){return y.next(e),y})))},e.favourites$=function(){return g.get$("/user/favourite").pipe(n.map((function(e){return P.mapEvents(e.data,e.static)})),n.switchMap((function(e){return k.next(e),k})))},e.subscriptionAdd$=function(e){return g.post$("/user/subscription/add",{id:e}).pipe(n.map((function(t){if(t.static){var n=b.get("subscriptions")||[];n.find((function(t){return t.id===e}))||n.unshift({id:e}),w.next(n),b.set("subscriptions",n)}return t.data})))},e.subscriptionRemove$=function(e){return g.post$("/user/subscription/remove",{id:e}).pipe(n.map((function(t){if(t.static){var n=b.get("subscriptions")||[],i=n.find((function(t){return t.id===e})),r=i?n.indexOf(i):-1;-1!==r&&n.splice(r,1),w.next(n),b.set("subscriptions",n)}return t.data})))},e.likeAdd$=function(e,t){return g.post$("/user/like/add",{id:e,type:t}).pipe(n.map((function(t){if(t.static){var n=b.get("likes")||[];n.find((function(t){return t.id===e}))||n.unshift({id:e}),y.next(n),b.set("likes",n)}return t.data})))},e.likeRemove$=function(e,t){return g.post$("/user/like/remove",{id:e,type:t}).pipe(n.map((function(t){if(t.static){var n=b.get("likes")||[],i=n.find((function(t){return t.id===e})),r=i?n.indexOf(i):-1;-1!==r&&n.splice(r,1),y.next(n),b.set("likes",n)}return t.data})))},e.favouriteAdd$=function(e){return g.post$("/user/favourite/add",{id:e}).pipe(n.map((function(t){var n=b.get("favourites")||[];return n.find((function(t){return t.id===e}))||n.unshift({id:e}),k.next(n),b.set("favourites",n),t.data})))},e.favouriteRemove$=function(e){return g.post$("/user/favourite/remove",{id:e}).pipe(n.map((function(t){var n=b.get("favourites")||[],i=n.find((function(t){return t.id===e})),r=i?n.indexOf(i):-1;return-1!==r&&n.splice(r,1),k.next(n),b.set("favourites",n),t.data})))},e}();C.sharedSubscriptions$=C.subscriptions$().pipe(n.shareReplay(1)),C.sharedLikes$=C.likes$().pipe(n.shareReplay(1)),C.sharedFavourites$=C.favourites$().pipe(n.shareReplay(1));var $=function(e){this.data=e},x=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t}($),D=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t}($),E=function(){function e(){}return e.open$=function(e){var t=this;return this.getTemplate$(e.src).pipe(n.map((function(n){return{node:t.getNode(n),data:e.data,modal:e}})),n.tap((function(e){return t.modal$.next(e)})),n.switchMap((function(e){return t.events$})))},e.load$=function(e){},e.getTemplate$=function(e){return i.from(fetch(e).then((function(e){return e.text()})))},e.getNode=function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstElementChild},e.reject=function(e){this.modal$.next(null),this.events$.next(new D(e))},e.resolve=function(e){this.modal$.next(null),this.events$.next(new x(e))},e}();E.modal$=new i.Subject,E.events$=new i.Subject;var _=d?"/ws-events/register-or-login-modal.html":window.linkModal,M=function(){function e(e){e&&Object.assign(this,e)}return a(e,[{key:"avatar",get:function(){return(this.firstName||"?").substr(0,1).toUpperCase()+(this.lastName||"?").substr(0,1).toUpperCase()}},{key:"fullName",get:function(){return this.firstName+" "+this.lastName}}]),e}(),L=function(){function e(){}return e.getCurrentUser=function(){return this.user$_.getValue()},e.setUser=function(e){e&&(e=new M(e)),this.user$_.next(e)},e.me$=function(){var e=this;return g.get$("/user/me").pipe(n.map((function(t){return e.mapUser(t.data,t.static)})),n.catchError((function(e){return i.of(null)})),n.switchMap((function(t){return e.setUser(t),e.user$_})))},e.changed$=function(){return this.sharedMe$.pipe(n.distinctUntilChanged((function(e,t){return null==e&&null==t||e&&t&&e.id===t.id})))},e.authorized$=function(){var e=this,t=this.getCurrentUser();return t?i.of(t):E.open$({src:_,data:{view:1}}).pipe(n.switchMap((function(n){return n instanceof x&&(t=n.data,e.setUser(t)),t?i.of(t):i.throwError("unauthorized")})))},e.register$=function(e){var t=this;return g.staticPost$("/user/register",e).pipe(n.map((function(e){return t.mapUser(e.data,e.static)})),n.tap((function(e){return t.setUser(e)})))},e.login$=function(e){var t=this;return g.staticPost$("/user/login",e).pipe(n.map((function(e){return t.mapUser(e.data,e.static)})),n.tap((function(e){e&&e.thron&&window.thronClientId&&window._ta&&_ta.initTracker&&_ta.initTracker(window.thronClientId).loginAs(e.thron.loginType,e.thron.loginValue,e.thron.contactName).then((function(e){return console.log("UserService.tracker.success",e)}))})),n.tap((function(e){return t.setUser(e)})))},e.logout$=function(){var e=this;return g.staticPost$("/user/logout").pipe(n.tap((function(t){return e.setUser(null)})))},e.forgot$=function(e){return g.staticPost$("/user/forgot",e).pipe()},e.update$=function(e){var t=this;return g.staticPost$("/user/update",e).pipe(n.map((function(e){return t.mapUser(e.data,e.static)})),n.tap((function(e){return t.setUser(e)})))},e.mapStatic__=function(e,t,n){if(void 0===n&&(n="me"),!t)return e;switch(n){case"me":b.exist("user")||(e=null);break;case"register":case"login":b.set("user",e);break;case"logout":b.delete("user")}return e},e.fake=function(e){return e.firstName=e.firstName||"Jhon",e.lastName=e.lastName||"Appleseed",e},e.mapUser=function(t,n){if(t)return n?e.fake(new M(t)):new M(t)},e.mapUsers=function(t,n){return t?t.map((function(t){return e.mapUser(t,n)})):[]},e}();L.user$_=new i.BehaviorSubject(null),L.sharedMe$=L.me$().pipe(n.shareReplay(1)),L.sharedChanged$=L.changed$().pipe(n.shareReplay(1));var F=function(e){e&&(Object.assign(this,e),this.creationDate&&(this.creationDate=new Date(this.creationDate)),this.user&&(this.user=L.mapUser(this.user)))},I=function(){function e(){}return e.mapQuestion=function(t,n){return n?e.fake(new F(t)):new F(t)},e.mapQuestions=function(t,n){return t?t.map((function(t){return e.mapQuestion(t,n)})):[]},e.fake=function(e){var t=new Date;switch(e.id%1e6){case 4:e.creationDate=new Date((new Date).setSeconds(t.getSeconds()-30));break;case 3:e.creationDate=new Date((new Date).setMinutes(t.getMinutes()-10));break;case 2:e.creationDate=new Date((new Date).setMinutes(t.getMinutes()-45));break;case 1:e.creationDate=new Date((new Date).setHours(t.getHours()-1));break;default:e.creationDate=new Date((new Date).setDate(t.getDate()-1-Math.floor(20*Math.random())))}return e},e}(),S=[{key:"collection",label:"Collection",options:[{value:10000001,label:"Lims"},{value:10000002,label:"Boost Pro"},{value:10000003,label:"Canone Inverso"},{value:10000004,label:"3D wall design"},{value:10000005,label:"Brick Atelier"},{value:10000006,label:"Blaze"},{value:10000007,label:"Echo"},{value:10000008,label:"GreenColors"},{value:10000009,label:"Granigliati"},{value:10000010,label:"Ground Track"},{value:10000011,label:"Boost"},{value:10000012,label:"Raw"},{value:10000013,label:"Dolmen Pro"},{value:10000014,label:"Dwell"},{value:10000015,label:"Kone"},{value:10000016,label:"Arkshade"},{value:10000017,label:"Mek"},{value:10000018,label:"Mark"},{value:10000019,label:"Evolve"},{value:10000020,label:"EWall"},{value:10000021,label:"Arty"},{value:10000022,label:"Aix"},{value:10000023,label:"Brave"},{value:10000024,label:"Exence"},{value:10000025,label:"Heartwood"},{value:10000026,label:"Nid"},{value:10000027,label:"Arbor"},{value:10000028,label:"Klif"},{value:10000029,label:"Axi"},{value:10000030,label:"Nash"},{value:10000031,label:"Etic"},{value:10000032,label:"Etic Pro"},{value:10000033,label:"Trust"},{value:10000034,label:"Marvel"},{value:10000035,label:"Marvel Pro"},{value:10000036,label:"Marvel Stone"},{value:10000037,label:"Marvel Dream"},{value:10000038,label:"Marvel Edge"},{value:10000039,label:"Marvel Gems"},{value:10000040,label:"Room"},{value:10000041,label:"Seastone"},{value:10000042,label:"Sunrock"}]},{key:"placement",label:"Placement",options:[{value:10000043,label:"Indoor"},{value:10000044,label:"Outdoor"}]},{key:"material",label:"Material",options:[{value:10000045,label:"Marble"},{value:10000046,label:"Stone"},{value:10000047,label:"Cement"},{value:10000048,label:"Wood"},{value:10000049,label:"Metal"},{value:10000050,label:"Fabric"}]},{key:"finish",label:"Finish",options:[{value:10000051,label:"Lucid"},{value:10000052,label:"Matt"}]},{key:"color",label:"Color",options:[{value:10000053,label:"White"},{value:10000054,label:"Black"},{value:10000055,label:"Gray"},{value:10000056,label:"Ivory"},{value:10000057,label:"Cream"},{value:10000058,label:"Beige"},{value:10000059,label:"Brown"},{value:10000060,label:"Gold"},{value:10000061,label:"Cream"},{value:10000062,label:"Yellow"},{value:10000063,label:"Pink"},{value:10000064,label:"Orange"},{value:10000065,label:"Red"},{value:10000066,label:"Blue"},{value:10000067,label:"Green"},{value:10000068,label:"Purple"}]},{key:"size",label:"Size",options:[{value:10000069,label:"Small"},{value:10000070,label:"Medium"},{value:10000071,label:"Large"},{value:10000072,label:"Extra Large"}]},{key:"class",label:"Class",options:[{value:10000073,label:"Class A"},{value:10000074,label:"Class B"},{value:10000075,label:"Class C"},{value:10000076,label:"Class D"}]},{key:"category",label:"Category",options:[{value:10000077,label:"Professional"},{value:10000078,label:"Heritage"},{value:10000079,label:"Premium"}]}],T=function(){function e(e,t){e&&(Object.assign(this,e),this.info=this.info||{},this.creationDate&&(this.creationDate=new Date(this.creationDate)),this.startDate&&(this.startDate=new Date(this.startDate),this.info.started=this.startDate<Date.now()),this.endDate&&(this.endDate=new Date(this.endDate),this.endDate<Date.now()?this.info.ended=!0:this.endDate=null),this.related&&(this.related=P.mapEvents(this.related,t)),this.questions&&(this.questions=I.mapQuestions(this.questions,t)))}return a(e,[{key:"live",get:function(){return this.info.started&&!this.info.ended}},{key:"incoming",get:function(){var e=new Date,t=this.startDate-e,n=Math.floor(t/1e3/60/60);return!this.info.started&&this.startDate>e&&n<24}},{key:"future",get:function(){var e=new Date;return!this.info.started&&this.startDate>e}},{key:"past",get:function(){return this.info.ended}},{key:"hasRelated",get:function(){return this.related&&this.related.length}}]),e}(),P=function(){function e(){}return e.detail$=function(t){return g.get$("/event/"+t+"/detail").pipe(n.tap((function(e){return e.data.id=parseInt(t)})),n.map((function(t){return e.mapEvent(t.data,t.static)})))},e.listing$=function(t){return g.get$("/event/"+t+"/listing").pipe(n.switchMap((function(n){return e.mapListing(n.data,n.static,t)})))},e.filter$=function(e){return g.get$("/channel/filter").pipe(n.map((function(e){return e.data})))},e.top$=function(){return g.get$("/event/evidence").pipe(n.map((function(t){return e.mapEvents(t.data,t.static)})))},e.upcoming$=function(){return g.get$("/event/upcoming").pipe(n.map((function(t){return e.mapEvents(t.data,t.static)})))},e.subscribe$=function(e){return i.of(null)},e.unsubscribe$=function(e){return i.of(null)},e.like$=function(e){return i.of(null)},e.unlike$=function(e){return i.of(null)},e.postQuestion$=function(e,t){return g.post$("/event/"+e.id+"/question",t).pipe(n.map((function(n){var i=I.mapQuestion(n.data,n.static);return n.static&&(i.id=e.questions[0].id+1,i.creationDate=new Date,i.user=L.getCurrentUser(),i.body=t),i})))},e.mapEvent=function(t,n){return n?e.fake(new T(t,!0)):new T(t)},e.mapEvents=function(t,n){return t?t.map((function(t){return e.mapEvent(t,n)})):[]},e.mapListing=function(t,n,r){return n?e.fakeListing(r):i.of(t.map((function(t){return"event"===t.type?e.mapEvent(t):t})))},e.fake=function(e){var t=["thron","vimeo"],n=["A","B","C","D","E","F","G","H","I","L","M"],i=e.id%1e3,r=100+(e.id-i)/1e3;if(e.url=e.url+"?eventId="+e.id,e.channel){e.channel.id=r,e.channel.url=e.channel.url+"?channelId="+e.channel.id;var o=e.channel.id%100;e.channel.name="Channel "+n[o-1],e.name="Event "+n[o-1]+i}if(e.info){switch(e.info.subscribers=50+Math.floor(200*Math.random()),e.info.likes=50+Math.floor(200*Math.random()),t[Math.floor(Math.random()*t.length)]){case"vimeo":e.media={src:"497693771",type:"vimeo"},e.picture={src:"https://i.vimeocdn.com/video/1029929333_1920x1080.webp",width:1920,height:1080};break;default:e.media={src:"https://gruppoconcorde-view.thron.com/api/xcontents/resources/delivery/getContentDetail?clientId=gruppoconcorde&xcontentId=16ef3c0a-ba0c-4e3a-a10a-32bc7f9a4297&pkey=yz1hpd",type:"thron"}}var a=new Date;switch(i){case 1:e.startDate=new Date((new Date).setMinutes(a.getMinutes()-10)),e.endDate=null,e.info.started=!0,e.info.ended=!1;break;case 2:e.startDate=new Date((new Date).setMinutes(a.getMinutes()+2)),e.endDate=null,e.info.started=!1,e.info.ended=!1;break;case 3:e.startDate=new Date((new Date).setHours(a.getHours()+2)),e.endDate=null,e.info.started=!1,e.info.ended=!1;break;case 4:e.startDate=new Date((new Date).setHours(a.getHours()-7)),e.endDate=new Date((new Date).setHours(a.getHours()-6)),e.info.started=!0,e.info.ended=!0;break;case 5:e.startDate=new Date((new Date).setDate(a.getDate()+7)),e.endDate=null,e.info.started=!1,e.info.ended=!1;break;case 6:e.startDate=new Date((new Date).setDate(a.getDate()+14)),e.endDate=null,e.info.started=!1,e.info.ended=!1;break;default:e.startDate=new Date((new Date).setDate(a.getDate()-14-Math.floor(150*Math.random()))),e.endDate=new Date(new Date(e.startDate.getTime()).setHours(e.startDate.getHours()+1)),e.info.started=!0,e.info.ended=!0}var s=C.getCurrentSubscriptions().find((function(t){return t.id===e.id}));e.info.subscribed=void 0!==s;var u=C.getCurrentLikes().find((function(t){return t.id===e.id}));e.info.liked=void 0!==u;var l=C.getCurrentFavourites().find((function(t){return t.id===e.id}));e.info.saved=void 0!==l}return e.features=[],S.forEach((function(t){var n=Math.floor(Math.random()*t.options.length);e.features.push(t.options[n].value)})),e.related&&(e.related=e.related.filter((function(t){return t.id!==e.id&&(t.live||t.incoming||t.past)}))),e},e.fakeListing=function(t){var i=100+(t-t%1e3)/1e3;return t=1001,g.staticGet$("/event/"+t+"/detail").pipe(n.map((function(t){var n=new T(t.data,!0).channel;n.id=i;var r={started:!1,ended:!1,subscribers:100,subscribed:!1,likes:100,liked:!1},o={id:1e5,width:700,height:700,src:"https://source.unsplash.com/random/"},a={id:1e4,name:"Category",url:"/ws-events/events-category.html"},s={id:1e3,type:"event",name:"Evento",title:"Evento",abstract:"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>",url:"/ws-events/events-event.html",creationDate:"2020-05-20T08:11:17.827Z",startDate:"2020-05-20T08:11:17.827Z",picture:o,info:r,channel:n},u={id:1e3,type:"picture",name:"Picture",title:"Picture",abstract:"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>",url:"/ws-events/events-document.html",picture:o,category:a},l={id:1e3,type:"product",name:"Product",title:"Product",abstract:"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>",url:"/ws-events/events-product.html",picture:o,category:a},c={id:1e3,type:"magazine",name:"Magazine",title:"Magazine",abstract:"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>",url:"/ws-events/events-product.html",picture:o,category:a},d={id:1e3,type:"download",name:"Download",title:"Download",abstract:"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>",url:"/ws-events/files/download.pdf",picture:o,category:a},h=["A","B","C","D","E","F","G","H","I","L","M"];return new Array(30).fill(!0).map((function(t,i){var p,f="event";switch(i>3&&(i%5==0&&(f="picture"),i%7==0&&(f="product"),i%11==0&&(f="magazine"),i%13==0&&(f="download")),f){case"picture":p=Object.assign({},u);break;case"product":p=Object.assign({},l);break;case"magazine":p=Object.assign({},c);break;case"download":p=Object.assign({},d);break;case"event":p=Object.assign({},s)}if(p.id=1e3*(n.id-100)+1+i,p.name=p.title=p.name+" "+h[(p.id-1)%10],p.type=f,p.picture&&(p.picture=Object.assign({},o,{id:100001+i,width:"download"===f?340:700,height:"download"===f?480:[700,900,1100][i%3]})),p.info&&(p.info=Object.assign({},r)),p.channel&&(p.channel=Object.assign({},n)),p.category){var m=10001+i%10;p.category=Object.assign({},a,{id:m,name:"Category "+h[m%10],url:a.url+"?categoryId="+m})}switch(f){case"event":p=e.fake(new T(p,!0));break;default:p.features=[],S.forEach((function(e){var t=Math.floor(Math.random()*e.options.length);p.features.push(e.options[t].value)}))}return p}))})))},e.fakeSaved=function(t){var n={started:!1,ended:!1,subscribers:100,subscribed:!1,likes:100,liked:!1},i={id:1e5,width:700,height:700,src:"https://source.unsplash.com/random/"},r={id:1e3,type:"event",name:"Evento",title:"Evento",abstract:"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>",url:"/ws-events/events-event.html",creationDate:"2020-05-20T08:11:17.827Z",startDate:"2020-05-20T08:11:17.827Z",picture:i,info:n},o=["A","B","C","D","E","F","G","H","I","L","M"];return t.map((function(t,a){var s=Object.assign({},r);s.id=t.id,s.name=s.title=s.name+" "+o[(s.id-1)%10];var u=t.id%1e3;return s.channel={id:(t.id-u)/1e3+1e3},s.type="event",s.picture=Object.assign({},i,{id:100001+a,width:700,height:[700,900,1100][a%3]}),s.info=Object.assign({},n),s=e.fake(new T(s,!0))}))},e}(),O=function(e,t){e&&(Object.assign(this,e),this.events=P.mapEvents(this.events,t))},A=function(){function e(){}return e.channels$=function(){return g.get$("/channel/channels").pipe(n.map((function(t){return e.mapChannels(t.data,t.static)})))},e.detail$=function(t){return g.get$("/channel/"+t+"/detail").pipe(n.map((function(t){return e.mapChannel(t.data,t.static)})))},e.listing$=function(t){return g.get$("/channel/"+t+"/listing").pipe(n.switchMap((function(n){return e.mapListing(n.data,n.static,t)})))},e.filter$=function(e){return g.get$("/channel/filter").pipe(n.map((function(e){return e.data})))},e.top$=function(){return g.get$("/channel/evidence").pipe(n.map((function(t){return e.mapChannels(t.data,t.static)})))},e.subscribe$=function(e){return i.of(null)},e.unsubscribe$=function(e){return i.of(null)},e.like$=function(e){return i.of(null)},e.unlike$=function(e){return i.of(null)},e.mapChannel=function(t,n){return n?e.fake(new O(t,!0)):new O(t)},e.mapChannels=function(t,n){return t?t.map((function(t){return e.mapChannel(t,n)})):[]},e.mapListing=function(t,n,r){return n?e.fakeListing(101):i.of(t.map((function(e){return"event"===e.type?P.mapEvent(e):e})))},e.fake=function(e){return e.url=e.url+"?channelId="+e.id,e.info.subscribers=1500+Math.floor(200*Math.random()),e.info.likes=500+Math.floor(200*Math.random()),e},e.fakeListing=function(t){return g.staticGet$("/channel/"+t+"/detail").pipe(n.map((function(n){var i=e.fake(new O(n.data,!0)),r={started:!1,ended:!1,subscribers:100,subscribed:!1,likes:100,liked:!1},o={id:1e5,width:700,height:700,src:"https://source.unsplash.com/random/"},a={id:1e4,name:"Category",url:"/ws-events/category.html"},s={id:1e3,type:"event",name:"Evento",title:"Evento",abstract:"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>",url:"/ws-events/events-event.html",creationDate:"2020-05-20T08:11:17.827Z",startDate:"2020-05-20T08:11:17.827Z",picture:o,info:r,channel:i},u={id:1e3,type:"picture",name:"Picture",title:"Picture",abstract:"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>",url:"/ws-events/document.html",picture:o,category:a},l={id:1e3,type:"product",name:"Product",title:"Product",abstract:"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>",url:"/ws-events/product.html",picture:o,category:a},c={id:1e3,type:"magazine",name:"Magazine",title:"Magazine",abstract:"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>",url:"/ws-events/product.html",picture:o,category:a},d={id:1e3,type:"download",name:"Download",title:"Download",abstract:"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>",url:"/ws-events/files/download.pdf",picture:o,category:a},h=["A","B","C","D","E","F","G","H","I","L","M"];return new Array(250).fill(!0).map((function(e,n){var p,f="event";switch(n>3&&(n%5==0&&(f="picture"),n%7==0&&(f="product"),n%11==0&&(f="magazine"),n%13==0&&(f="download")),f){case"picture":p=Object.assign({},u);break;case"product":p=Object.assign({},l);break;case"magazine":p=Object.assign({},c);break;case"download":p=Object.assign({},d);break;case"event":p=Object.assign({},s)}if(p.id=1e3*(t-100)+1+n,p.name=p.title=p.name+" "+h[(p.id-1)%10],p.type=f,p.picture&&(p.picture=Object.assign({},o,{id:100001+n,width:"download"===f?340:700,height:"download"===f?480:[700,900,1100][n%3]})),p.info&&(p.info=Object.assign({},r)),p.channel&&(p.channel=Object.assign({},i)),p.category){var m=10001+n%10;p.category=Object.assign({},a,{id:m,name:"Category "+h[m%10],url:a.url+"?categoryId="+m})}switch(f){case"event":p=P.fake(new T(p,!0));break;default:p.features=[],S.forEach((function(e){var t=Math.floor(Math.random()*e.options.length);p.features.push(e.options[t].value)}))}return p}))})))},e}();A.sharedChannels$=A.channels$().pipe(n.shareReplay(1));var j=function(){function e(){}return e.get=function(e){return new URLSearchParams(window.location.search).get(e)},e.set=function(e,t){var n=new URLSearchParams(window.location.search);"string"==typeof e?n.set(e,t):n.set(e,""),this.replace(n)},e.replace=function(e){if(window.history&&window.history.pushState){var t=document.title,n=window.location.href.split("?")[0]+"?"+e.toString();window.history.pushState(e.toString(),t,n)}},e.deserialize=function(e){var t=this.get("params");return this.decode(e,t)},e.serialize=function(e,t){var n=this.deserialize(),i=this.encode(e,t,n);this.set("params",i)},e.decode=function(e,t){var n=null;if(t){var i=window.atob(t);n=JSON.parse(i)}return e&&n&&(n=n[e]),n||null},e.encode=function(e,t,n){n=n||{};"string"==typeof e?n[e]=t:n=e;var i=JSON.stringify(n);return window.btoa(i)},e}(),N=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t.prototype.onInit=function(){},t}(e.Component);N.meta={selector:"[page]"};var R=function(e){function t(){return e.apply(this,arguments)||this}s(t,e);var i=t.prototype;return i.onInit=function(){var e=this,t=j.get("channelId");t=t?parseInt(t):null,this.channelId=t,this.channels=[],this.load$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){e.channels=t,e.pushChanges()}))},i.load$=function(){return L.sharedChanged$.pipe(n.switchMap((function(){return A.channels$()})))},t}(N);R.meta={selector:"[aside]"};var q="select",U="or",z=function(){function e(e){this.change$=new i.BehaviorSubject,this.mode=q,this.placeholder="Select",this.values=[],this.options=[],e&&(e.mode===q&&e.options.unshift({label:e.placeholder,values:[]}),Object.assign(this,e))}var t=e.prototype;return t.filter=function(e,t){return!0},t.match=function(e){var t,n=this;return this.mode===U?(t=!this.values.length,this.values.forEach((function(i){t=t||n.filter(e,i)}))):(t=!0,this.values.forEach((function(i){t=t&&n.filter(e,i)}))),t},t.getSelectedOption=function(){var e=this;return this.options.find((function(t){return e.has(t)}))},t.getLabel=function(){if(this.mode===q){var e=this.getSelectedOption();return e?e.label:this.placeholder}return this.label},t.has=function(e){return-1!==this.values.indexOf(e.value)},t.set=function(e){this.mode===q&&(this.values=[]),-1===this.values.indexOf(e.value)&&void 0!==e.value&&this.values.push(e.value),this.mode===q&&(this.placeholder=e.label),this.change$.next()},t.remove=function(e){var t=this.values.indexOf(e.value);if(-1!==t&&this.values.splice(t,1),this.mode===q){var n=this.options[0];this.placeholder=n.label}this.change$.next()},t.toggle=function(e){this.has(e)?this.remove(e):this.set(e)},t.toggleActive=function(){this.active=!this.active},e}(),V=function(){function e(e,t,n){var i={};this.filters=i,e&&(Object.keys(e).forEach((function(t){var r=new z(e[t]);"function"==typeof n&&n(t,r),i[t]=r})),this.deserialize(this.filters,t))}var t=e.prototype;return t.getParamsCount=function(e){return e?Object.keys(e).reduce((function(t,n,i){var r=e[n];return t+(r?r.length:0)}),0):0},t.deserialize=function(e,t){var n;t&&this.getParamsCount(t)&&(n=t);var i=j.deserialize("filters");return i&&this.getParamsCount(i)&&(n=i),n&&Object.keys(e).forEach((function(t){e[t].values=n[t]||[]})),e},t.serialize=function(e){var t={},n=!1;return Object.keys(e).forEach((function(i){var r=e[i];r.values&&r.values.length>0&&(t[i]=r.values,n=!0)})),n||(t=null),j.serialize("filters",t),t},t.items$=function(e){var t=this,r=this.filters,o=Object.keys(r).map((function(e){return r[e].change$}));return this.updateFilterStates(r,e,!0),i.merge.apply(void 0,o).pipe(n.auditTime(1),n.tap((function(){return t.serialize(r)})),n.map((function(){return t.filterItems(e)})),n.tap((function(){return t.updateFilterStates(r,e)})))},t.filterItems=function(e,t){var n=this,i=Object.keys(this.filters).map((function(e){return n.filters[e]})).filter((function(e){return e.values&&e.values.length>0}));return e=e.filter((function(e){var n=!0;return i.forEach((function(i){i!==t&&(n=n&&i.match(e))})),n}))},t.updateFilterStates=function(e,t,n){var i=this;Object.keys(e).forEach((function(r){var o=e[r],a=n?t:i.filterItems(t,o);o.options.forEach((function(e){var t=0;if(e.value)for(var i=0;i<a.length;){var r=a[i];o.filter(r,e.value)&&t++,i++}else t=a.length;n?e.initialCount=t:e.count=t,e.disabled=0===t})),n&&o.options.sort((function(e,t){return t.initialCount-e.initialCount}))}))},e}(),H=function(t){function r(){return t.apply(this,arguments)||this}s(r,t);var o=r.prototype;return o.onInit=function(){var e=this;this.grid={mode:1,width:350,gutter:2},this.channels=null,this.channel=null,this.listing=null,this.filters=null,this.secondaryFiltersVisible=!1,this.secondaryFilters=null,this.activeFilters=null,this.filteredItems=[],this.load$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){e.channels=t[0],e.channel=t[1],e.listing=t[2],e.setFilters(t[3]),e.startFilter(e.listing),e.pushChanges()}))},o.load$=function(){var t=j.get("channelId")||0;return e.getContext(this).node.classList.add("wse__channel-page-"+t%4),L.sharedChanged$.pipe(n.switchMap((function(){return i.combineLatest([A.channels$(),A.detail$(t),A.listing$(t),A.filter$(t)])})))},o.setFilters=function(e){var t=this,n={type:{label:"Type",mode:"select",options:[{value:"event",label:"Event"},{value:"picture",label:"Picture"},{value:"product",label:"Product"},{value:"magazine",label:"Magazine"},{value:"download",label:"Downloads"}]}};e.forEach((function(e){e.mode="or",n[e.key]=e}));var i=this.filterService=new V(n,{},(function(e,t){switch(e){case"type":t.filter=function(e,t){return e.type===t};break;case"tag":t.filter=function(e,t){return-1!==e.tags.indexOf(t)};break;default:t.filter=function(e,t){return-1!==e.features.indexOf(t)}}}));this.filters=i.filters,this.secondaryFilters=Object.keys(this.filters).filter((function(e){return"type"!==e})).map((function(e){return t.filters[e]}))},o.startFilter=function(e){var t=this;this.filterService.items$(e).pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.filteredItems=[],t.activeFilters=[],t.pushChanges(),setTimeout((function(){t.filteredItems=e,t.activeFilters=t.secondaryFilters.map((function(e){return(e=new z(e)).options=e.options.filter((function(t){return e.has(t)})),e})).filter((function(e){return e.options.length})),t.pushChanges()}),1)}))},o.toggleGrid=function(){this.grid.width=350===this.grid.width?525:350,this.pushChanges()},o.toggleFilters=function(){this.secondaryFiltersVisible=!this.secondaryFiltersVisible,this.pushChanges()},r}(N);H.meta={selector:"[channel-page]"};var B=function(e){function t(){return e.apply(this,arguments)||this}s(t,e);var i=t.prototype;return i.toggleSubscribe=function(){var e=this,t=this.channel.info.subscribed;L.authorized$().pipe(n.switchMap((function(n){return C[t?"subscriptionRemove$":"subscriptionAdd$"](e.channel.idDoc)})),n.first()).subscribe((function(){t=!t,e.channel.info.subscribed=t,t?e.channel.info.subscribers++:e.channel.info.subscribers--,e.pushChanges()}),(function(e){console.log("ChannelComponent.toggleSubscribe.error",e)}))},i.toggleLike=function(){var e=this,t=this.channel.info.liked;L.authorized$().pipe(n.switchMap((function(n){return C[t?"likeRemove$":"likeAdd$"](e.channel.id,"channel")})),n.first()).subscribe((function(){t=!t,e.channel.info.liked=t,t?e.channel.info.likes++:e.channel.info.likes--,e.pushChanges()}),(function(e){console.log("ChannelComponent.toggleLike.error",e)}))},t}(e.Component);B.meta={selector:"[channel]",inputs:["channel"]};var G=function(t){function r(){return t.apply(this,arguments)||this}return s(r,t),r.prototype.onInit=function(){var t=this;this.initialFocus=!1;var r=e.getContext(this),o=r.module,a=r.node,s=r.parentInstance,u=(r.selector,this.event$=i.fromEvent(document,"click").pipe(n.filter((function(e){var n=e.target;if(a.contains(n)||!document.contains(n))t.initialFocus=!0;else if(t.initialFocus)return t.initialFocus=!1,!0})),n.shareReplay(1))),l=a.getAttribute("(clickOutside)");if(l){var c=o.makeFunction(l,["$event"]);u.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){o.resolve(c,s,e)}))}else s.clickOutside$=u},r}(e.Directive);G.meta={selector:"[(clickOutside)]"};var W=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t.isNumber=function(e){return"number"==typeof e&&isFinite(e)},t.transform=function(e){if(!t.isNumber(e))return e;var n="";if((e=parseInt(e))>1e6)n=(e=Math.floor(e/1e5)/10)+"M";else{if(!(e>1e3))return e;n=(e=Math.floor(e/100)/10)+"k"}return n},t}(e.Pipe);W.meta={name:"count"};var Y="dateFormats",Z="timeFormats",Q="dayPeriods",J="days",X="months",K="eras",ee="numberSymbols",te="short",ne="medium",ie="long",re="full",oe="narrow",ae="short",se="abbreviated",ue="wide",le={Sunday:"sunday",Monday:"monday",Tuesday:"tuesday",Wednesday:"wednesday",Thursday:"thursday",Friday:"friday",Saturday:"saturday"},ce={January:"january",February:"february",March:"march",April:"april",May:"may",June:"june",July:"july",August:"august",September:"september",October:"october",November:"november",December:"december"},de="am",he="pm",pe="bc",fe="ad",me="minusSign",ve=function(){function e(){}return e.getLocale=function(){var t=window.locale||e.defaultLocale,n=Array.prototype.slice.call(arguments).join(".");return t[n]||"{"+n+"}"},e.getObjectLocale=function(){for(var e,t=0;t<arguments.length;t++){var n=arguments[t];e=e?e[n]:locale[n]}return e},e.toLocaleString=function(e,t){var n=this;void 0===t&&(t={});for(var i=arguments.length,r=new Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];return"string"==typeof e?t[r.join(".")]=e:Object.keys(e).forEach((function(i){var o=r.slice();o.push(i),t=n.toLocaleString.apply(n,[e[i],t].concat(o))})),t},e.toLocaleObject=function(e,t,n){var i=this;return void 0===n&&(n={}),"string"==typeof e?n[t]=e:(t&&(n=n[t]={}),Object.keys(e).forEach((function(t){n=i.toLocaleObject(e[t],t,n)}))),n},e}();ve.defaultLocale=ve.toLocaleString({id:"it",dateFormats:{short:"dd/MM/yy",medium:"d MMM y",long:"d MMMM y",full:"EEEE d MMMM y"},timeFormats:{short:"HH:mm",medium:"HH:mm:ss",long:"HH:mm:ss z",full:"HH:mm:ss zzzz"},dayPeriods:{narrow:{am:"m",pm:"p"},abbreviated:{am:"AM",pm:"PM"},wide:{am:"AM",pm:"PM"}},days:{narrow:{sunday:"D",monday:"L",tuesday:"M",wednesday:"M",thursday:"G",friday:"V",saturday:"S"},short:{sunday:"Do",monday:"Lu",tuesday:"Ma",wednesday:"Me",thursday:"Gi",friday:"Ve",saturday:"Sa"},abbreviated:{sunday:"Dom",monday:"Lun",tuesday:"Mar",wednesday:"Mer",thursday:"Gio",friday:"Ven",saturday:"Sab"},wide:{sunday:"Domenica",monday:"Lunedì",tuesday:"Martedì",wednesday:"Mercoledì",thursday:"Giovedì",friday:"Venerdì",saturday:"Sabato"}},months:{narrow:{january:"G",february:"F",march:"M",april:"A",may:"M",june:"G",july:"L",august:"A",september:"S",october:"O",november:"N",december:"D"},abbreviated:{january:"Gen",february:"Feb",march:"Mar",april:"Apr",may:"Mag",june:"Giu",july:"Lug",august:"Ago",september:"Set",october:"Ott",november:"Nov",december:"Dic"},wide:{january:"Gennaio",february:"Febbraio",march:"Marzo",april:"Aprile",may:"Maggio",june:"Giugno",july:"Luglio",august:"Agosto",september:"Settembre",october:"Ottobre",november:"Novembre",december:"Dicembre"}},eras:{narrow:{bc:"aC",ad:"dC"},abbreviated:{bc:"a.C.",ad:"d.C."},wide:{bc:"avanti Cristo",ad:"dopo Cristo"}},numberSymbols:{decimal:",",group:".",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"×",perMille:"‰",infinite:"∞",nan:"NaN",timeSeparator:":"}});var ge="short",be="shortGmt",we="long",ye="extended",ke="fullYear",Ce="month",$e="date",xe="hours",De="minutes",Ee="seconds",_e="milliseconds",Me="day";function Le(e,t,n,i,r){void 0===n&&(n="-");var o="";r&&e<=0?e=1-e:e<0&&(e=-e,o=n);for(var a=String(e);a.length<t;)a="0"+a;return i&&(a=a.substr(a.length-t)),o+a}var Fe=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Ie=function(){function e(){}return e.getDatePart=function(e,t){switch(e){case ke:return t.getFullYear();case Ce:return t.getMonth();case $e:return t.getDate();case Me:return t.getDay();case xe:return t.getHours();case De:return t.getMinutes();case Ee:return t.getSeconds();case _e:return t.getMilliseconds();default:throw new Error('Unknown DatePart value "'+e+'".')}},e.formatMilliseconds=function(e,t){return Le(e,3).substr(0,t)},e.getDateFormatter=function(t,n,i,r,o){return void 0===i&&(i=0),void 0===r&&(r=!1),void 0===o&&(o=!1),function(a,s){var u=e.getDatePart(t,a);if((i>0||u>-i)&&(u+=i),t===xe)0===u&&-12===i&&(u=12);else if(t===_e)return e.formatMilliseconds(u,n);var l=ve.getLocale(ee,me);return Le(u,n,l,r,o)}},e.getDateTranslation=function(e,t,n,i){switch(t){case J:return ve.getLocale(J,n,Object.values(le)[e.getDay()]);case X:return ve.getLocale(X,n,Object.values(ce)[e.getMonth()]);case Q:var r=e.getHours();return ve.getLocale(Q,n,r<12?de:he);case K:return ve.getLocale(K,n,e.getFullYear()<=0?pe:fe);default:throw new Error("unknown translation type "+t)}},e.getDateLocaleFormatter=function(t,n,i){return void 0===i&&(i=!1),function(r){return e.getDateTranslation(r,t,n,i)}},e.getWeekFirstThursdayOfYear=function(e){var t=new Date(e,0,1).getDay();return new Date(e,0,1+(t<=4?4:11)-t)},e.getWeekThursday=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))},e.getWeekFormatter=function(t,n){return void 0===n&&(n=!1),function(i,r){var o;if(n){var a=new Date(i.getFullYear(),i.getMonth(),1).getDay()-1,s=i.getDate();o=1+Math.floor((s+a)/7)}else{var u=e.getWeekFirstThursdayOfYear(i.getFullYear()),l=e.getWeekThursday(i).getTime()-u.getTime();o=1+Math.round(l/6048e5)}return Le(o,t,ve.getLocale(ee,me))}},e.getTimezoneFormatter=function(e){return function(t,n){var i=-1*n,r=ve.getLocale(ee,me),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(e){case ge:return(i>=0?"+":"")+Le(o,2,r)+Le(Math.abs(i%60),2,r);case be:return"GMT"+(i>=0?"+":"")+Le(o,1,r);case we:return"GMT"+(i>=0?"+":"")+Le(o,2,r)+":"+Le(Math.abs(i%60),2,r);case ye:return 0===n?"Z":(i>=0?"+":"")+Le(o,2,r)+":"+Le(Math.abs(i%60),2,r);default:throw new Error('Unknown zone width "'+e+'"')}}},e.getFormatter=function(t){var n;switch(t){case"y":n=e.getDateFormatter(ke,1,0,!1,!0);break;case"yy":n=e.getDateFormatter(ke,2,0,!0,!0);break;case"yyy":n=e.getDateFormatter(ke,3,0,!1,!0);break;case"yyyy":n=e.getDateFormatter(ke,4,0,!1,!0);break;case"M":case"L":n=e.getDateFormatter(Ce,1,1);break;case"MM":case"LL":n=e.getDateFormatter(Ce,2,1);break;case"d":n=e.getDateFormatter($e,1);break;case"dd":n=e.getDateFormatter($e,2);break;case"h":n=e.getDateFormatter(xe,1,-12);break;case"hh":n=e.getDateFormatter(xe,2,-12);break;case"H":n=e.getDateFormatter(xe,1);break;case"HH":n=e.getDateFormatter(xe,2);break;case"m":n=e.getDateFormatter(De,1);break;case"mm":n=e.getDateFormatter(De,2);break;case"s":n=e.getDateFormatter(Ee,1);break;case"ss":n=e.getDateFormatter(Ee,2);break;case"S":n=e.getDateFormatter(_e,1);break;case"SS":n=e.getDateFormatter(_e,2);break;case"SSS":n=e.getDateFormatter(_e,3);break;case"MMM":n=e.getDateLocaleFormatter(X,se);break;case"MMMM":n=e.getDateLocaleFormatter(X,ue);break;case"MMMMM":n=e.getDateLocaleFormatter(X,oe);break;case"LLL":n=e.getDateLocaleFormatter(X,se,FormStyle.Standalone);break;case"LLLL":n=e.getDateLocaleFormatter(X,ue,FormStyle.Standalone);break;case"LLLLL":n=e.getDateLocaleFormatter(X,oe,FormStyle.Standalone);break;case"E":case"EE":case"EEE":n=e.getDateLocaleFormatter(J,se);break;case"EEEE":n=e.getDateLocaleFormatter(J,ue);break;case"EEEEE":n=e.getDateLocaleFormatter(J,oe);break;case"EEEEEE":n=e.getDateLocaleFormatter(J,ae);break;case"a":case"aa":case"aaa":n=e.getDateLocaleFormatter(Q,se);break;case"aaaa":n=e.getDateLocaleFormatter(Q,ue);break;case"aaaaa":n=e.getDateLocaleFormatter(Q,oe);break;case"b":case"bb":case"bbb":n=e.getDateLocaleFormatter(Q,se,FormStyle.Standalone,!0);break;case"bbbb":n=e.getDateLocaleFormatter(Q,ue,FormStyle.Standalone,!0);break;case"bbbbb":n=e.getDateLocaleFormatter(Q,oe,FormStyle.Standalone,!0);break;case"B":case"BB":case"BBB":n=e.getDateLocaleFormatter(Q,se,FormStyle.Format,!0);break;case"BBBB":n=e.getDateLocaleFormatter(Q,ue,FormStyle.Format,!0);break;case"BBBBB":n=e.getDateLocaleFormatter(Q,oe,FormStyle.Format,!0);break;case"GGGGG":n=e.getDateLocaleFormatter(K,oe);break;case"G":case"GG":case"GGG":n=e.getDateLocaleFormatter(K,se);break;case"GGGG":n=e.getDateLocaleFormatter(K,ue);break;case"w":n=e.getWeekFormatter(1);break;case"ww":n=e.getWeekFormatter(2);break;case"W":n=e.getWeekFormatter(1,!0);break;case"Z":case"ZZ":case"ZZZ":n=e.getTimezoneFormatter(ge);break;case"ZZZZZ":n=e.getTimezoneFormatter(ye);break;case"O":case"OO":case"OOO":n=e.getTimezoneFormatter(be);break;case"z":case"zz":case"zzz":n=e.getTimezoneFormatter(be);break;case"OOOO":case"ZZZZ":case"zzzz":n=e.getTimezoneFormatter(we);break;default:return null}return n},e.setTimezoneOffset=function(e,t){e=e.replace(/:/g,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n},e.dateTimezoneToLocal=function(t,n,i){var r=i?-1:1,o=t.getTimezoneOffset(),a=r*(e.setTimezoneOffset(n,o)-o);return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+a),t},e.parseDate=function(e){return e instanceof Date?e:Date.parse(e)},e.getNamedFormat=function(t){var n="";switch(t){case"shortDate":n=ve.getLocale(Y,te);break;case"mediumDate":n=ve.getLocale(Y,ne);break;case"longDate":n=ve.getLocale(Y,ie);break;case"fullDate":n=ve.getLocale(Y,re);break;case"shortTime":n=ve.getLocale(Z,te);break;case"mediumTime":n=ve.getLocale(Z,ne);break;case"longTime":n=ve.getLocale(Z,ie);break;case"fullTime":n=ve.getLocale(Z,re);break;case"short":n=e.getNamedFormat("shortTime")+" "+e.getNamedFormat("shortDate");break;case"medium":n=e.getNamedFormat("mediumTime")+" "+e.getNamedFormat("mediumDate");break;case"long":n=e.getNamedFormat("longTime")+" "+e.getNamedFormat("longDate");break;case"full":n=e.getNamedFormat("fullTime")+" "+e.getNamedFormat("fullDate")}return n},e.formatDate=function(t,n,i){var r=e.parseDate(t);n=e.getNamedFormat(n)||n;for(var o,a=[];n;){if(!(o=Fe.exec(n))){a.push(n);break}var s=(a=a.concat(o.slice(1))).pop();if(!s)break;n=s}var u=r.getTimezoneOffset();i&&(u=e.setTimezoneOffset(i,u),r=e.dateTimezoneToLocal(r,i,!0));var l="";return a.forEach((function(t){var n=e.getFormatter(t);l+=n?n(r,u):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")})),l},e}(),Se=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t.transform=function(e,t){return void 0===t&&(t="short"),Ie.formatDate(e,t)},t}(e.Pipe);Se.meta={name:"date"};var Te=1e6,Pe=function(t){function i(){return t.apply(this,arguments)||this}s(i,t);var r=i.prototype;return r.onInit=function(){var t=this,r=e.getContext(this).node,o=r.getAttribute("dropdown-trigger");this.trigger=o?r.querySelector(o):r,this.opened=null,this.onClick=this.onClick.bind(this),this.onDocumentClick=this.onDocumentClick.bind(this),this.openDropdown=this.openDropdown.bind(this),this.closeDropdown=this.closeDropdown.bind(this),this.addListeners(),i.dropdown$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.id===e?r.classList.add("dropped"):r.classList.remove("dropped")}))},r.onClick=function(t){var n=e.getContext(this).node;null===this.opened?this.openDropdown():n.querySelector("[dropdown-item]")||this.closeDropdown()},r.onDocumentClick=function(t){var n=e.getContext(this).node;n===t.target||n.contains(t.target)||this.closeDropdown()},r.openDropdown=function(){null===this.opened&&(this.opened=!0,this.addDocumentListeners(),i.dropdown$.next(this.id),this.dropped.next(this.id))},r.closeDropdown=function(){null!==this.opened&&(this.removeDocumentListeners(),this.opened=null,i.dropdown$.getValue()===this.id&&(i.dropdown$.next(null),this.dropped.next(null)))},r.addListeners=function(){this.trigger.addEventListener("click",this.onClick)},r.addDocumentListeners=function(){document.addEventListener("click",this.onDocumentClick)},r.removeListeners=function(){this.trigger.removeEventListener("click",this.onClick)},r.removeDocumentListeners=function(){document.removeEventListener("click",this.onDocumentClick)},r.onDestroy=function(){this.removeListeners(),this.removeDocumentListeners()},i.nextId=function(){return Te++},a(i,[{key:"id",get:function(){return this.dropdown||this.id_||(this.id_=i.nextId())}}]),i}(e.Directive);Pe.meta={selector:"[dropdown]",inputs:["dropdown","dropdown-trigger"],outputs:["dropped"]},Pe.dropdown$=new i.BehaviorSubject(null);var Oe=function(t){function i(){return t.apply(this,arguments)||this}return s(i,t),i.prototype.onInit=function(){var t=this,i=e.getContext(this).node;i.classList.add("dropdown-item"),Pe.dropdown$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.id===e?i.classList.add("dropped"):i.classList.remove("dropped")}))},a(i,[{key:"id",get:function(){return this["dropdown-item"]}}]),i}(e.Directive);Oe.meta={selector:"[dropdown-item], [[dropdown-item]]",inputs:["dropdown-item"]};var Ae="live",je="countdown",Ne="watchRelative",Re="relative",qe="date",Ue=1e3,ze=6e4,Ve=36e5,He=function(e){return e<10?"0"+e:e},Be=function(e){function t(){return e.apply(this,arguments)||this}s(t,e),t.hoursDiff=function(e){var t=e-new Date,n=Math.abs(Math.floor(t/1e3/60/60));return n},t.getMode=function(e){e.past||e.info.started||new Date>e.startDate&&(e.info.started=!0);if(e.live)return Ae;if(e.incoming)return je;var n=t.hoursDiff(e.startDate);return e.past&&n<24?Ne:n<336?Re:qe};var r=t.prototype;return r.onInit=function(){var e=this;this.mode_=t.getMode(this.eventDate),this.countdown="",this.live$=new i.Subject,this.change$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(){e.mode=t.getMode(e.eventDate),e.mode!==je&&e.mode!==Ne||e.pushChanges()}))},r.change$=function(){var e=this;return i.interval(1e3).pipe(n.takeUntil(this.live$),n.startWith(0),n.tap((function(){if(e.mode===je){var t=e.eventDate.startDate-new Date,n=Math.floor(t/Ve);t-=n*Ve;var i=Math.floor(t/ze);t-=i*ze;var r=Math.floor(t/Ue);t-=r*Ue,e.countdown="-"+He(n)+":"+He(i)+":"+He(r),t<0&&(e.eventDate.info.started=!0)}})))},a(t,[{key:"mode",get:function(){return this.mode_},set:function(e){this.mode_!==e&&(this.mode_=e,this.change.next(this.eventDate))}}]),t}(e.Component);Be.meta={selector:"[eventDate]",outputs:["change"],inputs:["eventDate"]};var Ge=function(r){function o(){return r.apply(this,arguments)||this}s(o,r);var a=o.prototype;return a.onInit=function(){var e=this;this.grid={mode:1,width:350,gutter:2},this.user=null,this.event=null,this.listing=null,this.filters=null,this.secondaryFiltersVisible=!1,this.secondaryFilters=null,this.activeFilters=null,this.filteredItems=[],this.load$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){e.event=t[0],e.listing=t[1],e.setFilters(t[2]),e.startFilter(e.listing),e.pushChanges()})),this.error=null,this.inputActive=!1,(this.form=new t.FormGroup({question:new t.FormControl(null,[t.Validators.RequiredValidator()]),checkRequest:window.antiforgery,checkField:""})).changes$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){e.inputActive=t.question&&t.question.length>0,e.pushChanges()}))},a.load$=function(){var t=this,r=j.get("eventId")||this.eventId;return e.getContext(this).node.classList.add("wse__channel-page-"+r%4),d&&(r=1001+(r-1)%2),L.sharedChanged$.pipe(n.tap((function(e){return t.user=e})),n.switchMap((function(){return i.combineLatest([P.detail$(r),P.listing$(r),P.filter$(r)])})))},a.setFilters=function(e){var t=this,n={type:{label:"Type",mode:"select",options:[{value:"event",label:"Event"},{value:"picture",label:"Picture"},{value:"product",label:"Product"},{value:"magazine",label:"Magazine"},{value:"download",label:"Downloads"}]}};e.forEach((function(e){e.mode="or",n[e.key]=e}));var i=this.filterService=new V(n,{},(function(e,t){switch(e){case"type":t.filter=function(e,t){return e.type===t};break;case"tag":t.filter=function(e,t){return-1!==e.tags.indexOf(t)};break;default:t.filter=function(e,t){return-1!==e.features.indexOf(t)}}}));this.filters=i.filters,this.secondaryFilters=Object.keys(this.filters).filter((function(e){return"type"!==e})).map((function(e){return t.filters[e]}))},a.startFilter=function(e){var t=this;this.filterService.items$(e).pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.filteredItems=[],t.activeFilters=[],t.pushChanges(),setTimeout((function(){t.filteredItems=e,t.activeFilters=t.secondaryFilters.map((function(e){return(e=new z(e)).options=e.options.filter((function(t){return e.has(t)})),e})).filter((function(e){return e.options.length})),t.pushChanges()}),1)}))},a.onChange=function(e){this.pushChanges()},a.toggleGrid=function(){this.grid.width=350===this.grid.width?525:350,this.pushChanges()},a.toggleFilters=function(){this.secondaryFiltersVisible=!this.secondaryFiltersVisible,this.pushChanges()},a.toggleSubscribe=function(){var e=this,t=this.event.info.subscribed;L.authorized$().pipe(n.switchMap((function(n){return C[t?"subscriptionRemove$":"subscriptionAdd$"](e.event.id)})),n.first()).subscribe((function(){t=!t,e.event.info.subscribed=t,t?e.event.info.subscribers++:e.event.info.subscribers--,e.pushChanges()}),(function(e){console.log("EventPageComponent.toggleSubscribe.error",e)}))},a.toggleLike=function(){var e=this,t=this.event.info.liked;L.authorized$().pipe(n.switchMap((function(n){return C[t?"likeRemove$":"likeAdd$"](e.event.id,"event")})),n.first()).subscribe((function(){t=!t,e.event.info.liked=t,t?e.event.info.likes++:e.event.info.likes--,e.pushChanges()}),(function(e){console.log("EventPageComponent.toggleLike.error",e)}))},a.toggleSave=function(){var e=this,t=this.event.info.saved;L.authorized$().pipe(n.switchMap((function(n){return C[t?"favouriteRemove$":"favouriteAdd$"](e.event.id)})),n.first()).subscribe((function(){t=!t,e.event.info.saved=t,e.pushChanges()}),(function(e){console.log("EventPageComponent.toggleSave.error",e)}))},a.toggleShare=function(e){this.event.info.sharing=void 0!==e?e:!this.event.info.sharing,this.pushChanges()},a.onInputFocus=function(e){this.inputFocus=!0,this.pushChanges()},a.onInputBlur=function(e){this.inputFocus=!1,this.pushChanges()},a.postQuestion=function(e){var t=this;this.form.valid?(this.form.submitted=!0,P.postQuestion$(this.event,this.form.value.question).pipe(n.first()).subscribe((function(e){t.event.questions.unshift(e),t.form.controls.question.value=null}),(function(e){console.log("EventPageComponent.postQuestion.error",e),t.error=e,t.pushChanges()}))):this.form.touched=!0},o}(N);Ge.meta={selector:"[event-page]",inputs:["eventId"]};var We=function(e){function t(){return e.apply(this,arguments)||this}s(t,e);var i=t.prototype;return i.onChange=function(e){this.pushChanges()},i.toggleSubscribe=function(){var e=this,t=this.event.info.subscribed;L.authorized$().pipe(n.switchMap((function(n){return C[t?"subscriptionRemove$":"subscriptionAdd$"](e.event.id)})),n.first()).subscribe((function(){t=!t,e.event.info.subscribed=t,t?e.event.info.subscribers++:e.event.info.subscribers--,e.pushChanges()}),(function(e){console.log("EventComponent.toggleSubscribe.error",e)}))},i.toggleLike=function(){var e=this,t=this.event.info.liked;L.authorized$().pipe(n.switchMap((function(n){return C[t?"likeRemove$":"likeAdd$"](e.event.id,"event")})),n.first()).subscribe((function(){t=!t,e.event.info.liked=t,t?e.event.info.likes++:e.event.info.likes--,e.pushChanges()}),(function(e){console.log("EventComponent.toggleLike.error",e)}))},i.toggleSave=function(){var e=this,t=this.event.info.saved;L.authorized$().pipe(n.switchMap((function(n){return C[t?"favouriteRemove$":"favouriteAdd$"](e.event.id)})),n.first()).subscribe((function(){t=!t,e.event.info.saved=t,e.pushChanges()}),(function(e){console.log("EventComponent.toggleSave.error",e)}))},t}(e.Component);We.meta={selector:"[event]",inputs:["event"]};var Ye="saved",Ze=function(e){function t(){return e.apply(this,arguments)||this}s(t,e);var r=t.prototype;return r.onInit=function(){var e=this;this.channels=null,this.savedItems=[],this.likedItems=[],this.viewMode_=Ye,this.grid={mode:1,width:350,gutter:2},this.load$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){e.channels=t[0],e.savedItems=t[1],e.likedItems=t[2],e.pushChanges()}))},r.load$=function(){return L.sharedChanged$.pipe(n.switchMap((function(){return i.combineLatest([A.channels$(),C.favourites$(),C.likes$()])})))},r.toggleGrid=function(){this.grid.width=350===this.grid.width?525:350,this.pushChanges()},a(t,[{key:"viewMode",get:function(){return this.viewMode_},set:function(e){this.viewMode_!==e&&(this.viewMode_=e,this.pushChanges())}}]),t}(N);Ze.meta={selector:"[favourite-page]"};var Qe=function(t){function n(){var e;return(e=t.call(this)||this).label="label",e}return s(n,t),n.prototype.onChanges=function(){var t=e.getContext(this).node,n=this.control.flags;Object.keys(n).forEach((function(e){n[e]?t.classList.add(e):t.classList.remove(e)}))},n}(e.Component);Qe.meta={selector:"[control]",inputs:["control"]};var Je=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t}(Qe);Je.meta={selector:"[control-checkbox]",inputs:["control","label"],template:'\n\t\t<div class="wse__group--form--checkbox" [class]="{ required: control.validators.length }">\n\t\t\t<label>\n\t\t\t\t<input type="checkbox" class="wse__control--checkbox" [formControl]="control" [value]="true" />\n\t\t\t\t<span [innerHTML]="label | html"></span>\n\t\t\t</label>\n\t\t\t<span class="wse__required__badge">required</span>\n\t\t</div>\n\t\t<errors-component [control]="control"></errors-component>\n\t'};var Xe=function(){function e(){}return e.keydown$=function(){return i.fromEvent(window,"keydown").pipe(n.shareReplay(1))},e.keyup$=function(){return i.fromEvent(window,"keyup").pipe(n.shareReplay(1))},e.typing$=function(){var e,t="";return this.key$().pipe(n.map((function(n){return e&&clearTimeout(e),t+=n,e=setTimeout((function(){t=""}),1500),t})),n.shareReplay(1))},e.key$=function(){var e=/\w/;return this.keydown$().pipe(n.filter((function(t){return t.key&&t.key.match(e)})),n.map((function(e){return e.key})),n.shareReplay(1))},e}(),Ke=function(t){function i(){return t.apply(this,arguments)||this}s(i,t);var r=i.prototype;return r.onInit=function(){var e=this;this.labels=window.labels||{},this.dropped=!1,this.dropdownId=Pe.nextId(),Xe.typing$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){e.scrollToWord(t)}))},r.scrollToWord=function(t){for(var n=this.control.options||[],i=-1,r=0;r<n.length;r++){if(0===n[r].name.toLowerCase().indexOf(t.toLowerCase())){i=r;break}}if(-1!==i){var o=e.getContext(this).node,a=o.querySelector(".dropdown"),s=o.querySelector(".nav--dropdown");if(s){var u=s.children[i];a.scrollTo(0,u.offsetTop)}}},r.setOption=function(e){if(this.isMultiple){var t=this.control.value||[],n=t.indexOf(e.id);-1!==n?t.splice(n,1):t.push(e.id),this.control.value=t.length?t.slice():null}else this.control.value=e.id},r.hasOption=function(e){return this.isMultiple?-1!==(this.control.value||[]).indexOf(e.id):this.control.value===e.id},r.onDropped=function(e){},r.getLabel=function(){var e=this.control.value,t=this.control.options||[];if(this.isMultiple)return(e=e||[]).length?e.map((function(e){var n=t.find((function(t){return t.id===e||t.name===e}));return n?n.name:""})).join(", "):this.labels.select;var n=t.find((function(t){return t.id===e||t.name===e}));return n?n.name:this.labels.select},r.onDropped=function(e){this.dropped=e===this.dropdownId},a(i,[{key:"isMultiple",get:function(){return this.multiple&&!1!==this.multiple&&"false"!==this.multiple}}]),i}(Qe);Ke.meta={selector:"[control-custom-select]",inputs:["control","label","multiple"],template:'\n\t\t<div class="wse__group--form--select" [class]="{ required: control.validators.length, multiple: isMultiple }" [dropdown]="dropdownId" (dropped)="onDropped($event)">\n\t\t\t<label [innerHTML]="label"></label>\n\t\t\t<span class="wse__control--select" [innerHTML]="getLabel()"></span>\n\t\t\t<svg class="wse__caret-down"><use xlink:href="#caret-down"></use></svg>\n\t\t\t<span class="wse__required__badge">required</span>\n\t\t</div>\n\t\t<errors-component [control]="control"></errors-component>\n\t\t<div class="wse__dropdown" [dropdown-item]="dropdownId">\n\t\t\t<div class="wse__category" [innerHTML]="label"></div>\n\t\t\t<ul class="wse__nav--dropdown" [class]="{ multiple: isMultiple }">\n\t\t\t<li *for="let item of control.options" (click)="setOption(item)"><span [class]="{ active: hasOption(item) }" [innerHTML]="item.name"></span></li>\n\t\t\t</ul>\n\t\t</div>\n\t'};var et=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t}(Qe);et.meta={selector:"[control-email]",inputs:["control","label"],template:'\n\t\t<div class="wse__group--form" [class]="{ required: control.validators.length }">\n\t\t\t<label [innerHTML]="label"></label>\n\t\t\t<input type="text" class="wse__control--text" [formControl]="control" [placeholder]="label" required email />\n\t\t\t<span class="wse__required__badge">required</span>\n\t\t</div>\n\t\t<errors-component [control]="control"></errors-component>\n\t'};var tt=function(e){function t(){return e.apply(this,arguments)||this}s(t,e);var n=t.prototype;return n.onInit=function(){this.labels=window.labels||{},this.file=null,this.required=!1,this.onReaderComplete=this.onReaderComplete.bind(this)},n.onInputDidChange=function(e){var t=e.target.files[0];this.file={name:t.name,lastModified:t.lastModified,lastModifiedDate:t.lastModifiedDate,size:t.size,type:t.type};var n=new FileReader;n.addEventListener("load",this.onReaderComplete),n.readAsDataURL(t)},n.onReaderComplete=function(e){var t=e.target.result;this.file.content=t,this.control.value=this.file},t}(Qe);tt.meta={selector:"[control-file]",inputs:["control","label"],template:'\n\t\t<div class="wse__group--form--file" [class]="{ required: control.validators.length }">\n\t\t\t<label for="file" [innerHTML]="label"></label>\n\t\t\t<span class="wse__control--select" [innerHTML]="file?.name || labels.select_file"></span>\n\t\t\t<svg class="wse__upload"><use xlink:href="#upload"></use></svg>\n\t\t\t<span class="wse__required__badge">required</span>\n\t\t\t<input name="file" type="file" accept=".pdf,.doc,.docx,*.txt" class="wse__control--file" (change)="onInputDidChange($event)" />\n\t\t</div>\n\t\t<errors-component [control]="control"></errors-component>\n\t'};var nt=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t.prototype.onInit=function(){this.required=!1},t}(Qe);nt.meta={selector:"[control-password]",inputs:["control","label"],template:'\n\t\t<div class="wse__group--form" [class]="{ required: control.validators.length }">\n\t\t\t<label [innerHTML]="label"></label>\n\t\t\t<input type="password" class="wse__control--text" [formControl]="control" [placeholder]="label" autocomplete="new-password" />\n\t\t\t<span class="wse__required__badge">required</span>\n\t\t</div>\n\t\t<errors-component [control]="control"></errors-component>\n\t'};var it=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t}(Qe);it.meta={selector:"[control-radio]",inputs:["control","label"],template:'\n\t\t<div class="wse__group--form--radio" [class]="{ required: control.validators.length }">\n\t\t\t<label>\n\t\t\t\t<input type="radio" class="wse__control--radio" [formControl]="control" [value]="true"/>\n\t\t\t\t<span [innerHTML]="label"></span>\n\t\t\t</label>\n\t\t\t<span class="wse__required__badge">required</span>\n\t\t</div>\n\t\t<errors-component [control]="control"></errors-component>\n\t'};var rt=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t.prototype.onInit=function(){this.labels=window.labels||{}},t}(Qe);rt.meta={selector:"[control-select]",inputs:["control","label"],template:'\n\t\t<div class="wse__group--form--select" [class]="{ required: control.validators.length }">\n\t\t\t<label [innerHTML]="label"></label>\n\t\t\t<select class="wse__control--select" [formControl]="control" required>\n\t\t\t\t<option value="">{{labels.select}}</option>\n\t\t\t\t<option [value]="item.id" *for="let item of control.options" [innerHTML]="item.name"></option>\n\t\t\t</select>\n\t\t\t<span class="wse__required__badge">required</span>\n\t\t\t<svg class="wse__caret-down"><use xlink:href="#caret-down"></use></svg>\n\t\t</div>\n\t\t<errors-component [control]="control"></errors-component>\n\t'};var ot=function(t){function n(){return t.apply(this,arguments)||this}return s(n,t),n.prototype.onInit=function(){this.required=!1,e.getContext(this).node.querySelector("input").setAttribute("autocomplete",this.control.name)},n}(Qe);ot.meta={selector:"[control-text]",inputs:["control","label"],template:'\n\t\t<div class="wse__group--form" [class]="{ required: control.validators.length }">\n\t\t\t<label [innerHTML]="label"></label>\n\t\t\t<input type="text" class="wse__control--text" [formControl]="control" [placeholder]="label" />\n\t\t\t<span class="wse__required__badge">required</span>\n\t\t</div>\n\t\t<errors-component [control]="control"></errors-component>\n\t'};var at=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t.prototype.onInit=function(){this.required=!1},t}(Qe);at.meta={selector:"[control-textarea]",inputs:["control","label"],template:'\n\t\t<div class="wse__group--form--textarea" [class]="{ required: control.validators.length }">\n\t\t\t<label [innerHTML]="label"></label>\n\t\t\t<textarea class="wse__control--text" [formControl]="control" [innerHTML]="label" rows="4"></textarea>\n\t\t\t<span class="wse__required__badge">required</span>\n\t\t</div>\n\t\t<errors-component [control]="control"></errors-component>\n\t'};var st=function(e){function t(){return e.apply(this,arguments)||this}s(t,e);var n=t.prototype;return n.onInit=function(){this.labels=window.labels||{}},n.getLabel=function(e,t){return this.labels["error_"+e]},t}(Qe);st.meta={selector:"errors-component",inputs:["control"],template:'\n\t<div class="wse__inner" [style]="{ display: control.invalid && control.touched ? \'block\' : \'none\' }">\n\t\t<div class="wse__error" *for="let [key, value] of control.errors">\n\t\t\t<span [innerHTML]="getLabel(key, value)"></span>\n\t\t\t\x3c!-- <span class="wse__key" [innerHTML]="key"></span> <span class="wse__value" [innerHTML]="value | json"></span> --\x3e\n\t\t</div>\n\t</div>\n\t'};var ut=function(){function e(){}return e.height$=function(){var e=document.documentElement.style;return i.fromEvent(window,"resize").pipe(n.map((function(e){return window.innerHeight})),n.startWith(window.innerHeight),n.tap((function(t){var n=.01*t;e.setProperty("--vh",n+"px")})))},e}(),lt=new i.BehaviorSubject(null),ct=function(){function e(){}return e.getCurrentNotifications=function(){return lt.getValue()},e.notifications$=function(){return g.get$("/user/subscription").pipe(n.map((function(e){return P.mapEvents(e.data,e.static)})),n.switchMap((function(e){return lt.next(e),lt})))},e}();ct.sharedNotifications$=ct.notifications$().pipe(n.shareReplay(1));var dt=d?"/ws-events/register-or-login-modal.html":window.linkModal,ht=function(e){function t(){return e.apply(this,arguments)||this}s(t,e);var r=t.prototype;return r.onInit=function(){var e=this;this.user=null,this.favourites=[],L.sharedChanged$.pipe(n.tap((function(t){return e.user=t})),n.switchMap((function(){return i.combineLatest([ct.notifications$(),C.subscriptions$(),C.likes$(),C.favourites$()])})),n.catchError((function(){return i.of(null)})),n.takeUntil(this.unsubscribe$)).subscribe((function(t){e.notifications=t[0],e.subscriptions=t[1],e.likes=t[2],e.favourites=t[3],e.pushChanges()})),ut.height$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){}))},r.doLogout=function(e){L.logout$().pipe(n.first()).subscribe((function(e){return window.location.href=e.data.retUrl}))},r.doLogin=function(e){E.open$({src:dt,data:{view:1}}).pipe(n.takeUntil(this.unsubscribe$)).subscribe()},r.toggleAside=function(e){this.aside_=!this.aside_,this.aside.next(this.aside_)},r.dismissAside=function(e){this.aside_&&(this.aside_=!1,this.aside.next(this.aside_))},r.toggleNotification=function(e){this.notification_=!this.notification_,this.notification.next(this.notification_)},r.dismissNotification=function(e){this.notification_&&(this.notification_=!1,this.notification.next(this.notification_))},r.onDropped=function(e){this.submenu=e,this.pushChanges()},t}(e.Component);ht.meta={selector:"header",outputs:["aside","notification"]};var pt=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t.transform=function(e){if(e){e=e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t))}));var t=['"',"&","'","<",">"," ","¡","¢","£","¤","¥","¦","§","¨","©","ª","«","¬","­","®","¯","°","±","²","³","´","µ","¶","·","¸","¹","º","»","¼","½","¾","¿","À","Á","Â","Ã","Ä","Å","Æ","Ç","È","É","Ê","Ë","Ì","Í","Î","Ï","Ð","Ñ","Ò","Ó","Ô","Õ","Ö","×","Ø","Ù","Ú","Û","Ü","Ý","Þ","ß","à","á","ã","ä","å","æ","ç","è","é","ê","ë","ì","í","î","ï","ð","ñ","ò","ó","ô","õ","ö","÷","ø","ù","ú","û","ü","ý","þ","ÿ","&","•","°","∞","‰","⋅","±","†","—","¬","µ","⊥","∥","€","£","¥","¢","©","®","™","α","β","γ","δ","ε","ζ","η","θ","ι","κ","λ","μ","ν","ξ","ο","π","ρ","σ","τ","υ","φ","χ","ψ","ω","Α","Β","Γ","Δ","Ε","Ζ","Η","Θ","Ι","Κ","Λ","Μ","Ν","Ξ","Ο","Π","Ρ","Σ","Τ","Υ","Φ","Χ","Ψ","Ω"],n=new RegExp("(&"+["quot","amp","apos","lt","gt","nbsp","iexcl","cent","pound","curren","yen","brvbar","sect","uml","copy","ordf","laquo","not","shy","reg","macr","deg","plusmn","sup2","sup3","acute","micro","para","middot","cedil","sup1","ordm","raquo","frac14","frac12","frac34","iquest","Agrave","Aacute","Acirc","Atilde","Auml","Aring","AElig","Ccedil","Egrave","Eacute","Ecirc","Euml","Igrave","Iacute","Icirc","Iuml","ETH","Ntilde","Ograve","Oacute","Ocirc","Otilde","Ouml","times","Oslash","Ugrave","Uacute","Ucirc","Uuml","Yacute","THORN","szlig","agrave","aacute","atilde","auml","aring","aelig","ccedil","egrave","eacute","ecirc","euml","igrave","iacute","icirc","iuml","eth","ntilde","ograve","oacute","ocirc","otilde","ouml","divide","oslash","ugrave","uacute","ucirc","uuml","yacute","thorn","yuml","amp","bull","deg","infin","permil","sdot","plusmn","dagger","mdash","not","micro","perp","par","euro","pound","yen","cent","copy","reg","trade","alpha","beta","gamma","delta","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","pi","rho","sigma","tau","upsilon","phi","chi","psi","omega","Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa","Lambda","Mu","Nu","Xi","Omicron","Pi","Rho","Sigma","Tau","Upsilon","Phi","Chi","Psi","Omega"].join(";)|(&")+";)","g");return e=e.replace(n,(function(){for(var e=1;e<arguments.length;e++)if(arguments[e])return t[e-1]}))}},t}(e.Pipe);pt.meta={name:"html"};var ft=function(e){function t(){return e.apply(this,arguments)||this}s(t,e);var r=t.prototype;return r.onInit=function(){var e=this;this.topEvents=this.topChannels=this.upcomingEvents=[],this.load$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){e.topEvents=t[0],e.topChannels=t[1],e.upcomingEvents=t[2],e.pushChanges()}))},r.load$=function(){return L.sharedChanged$.pipe(n.switchMap((function(){return i.combineLatest([P.top$(),A.top$(),P.upcoming$()])})))},t}(N);ft.meta={selector:"[index-page]"};var mt=Object.assign({cancel:"Cancel",error_email:"Invalid email",error_match:"Fields do not match",error_required:"Field is required",loading:"loading",required:"Required",select:"Select"},window.labels||{}),vt=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t.transform=function(e){return mt[e]||"#"+e+"#"},t}(e.Pipe);vt.meta={name:"label"};var gt=0,bt=function(){function e(){}return e.worker=function(){return this.worker_||(this.worker_=new Worker((d?p.STATIC_RESOURCE:p.RESOURCE)+"js/workers/image.service.worker.js")),this.worker_},e.load$=function(e){if(!("Worker"in window)||this.isBlob(e))return i.of(e);var t=++gt,r=this.worker();return r.postMessage({src:e,id:t}),i.fromEvent(r,"message").pipe(n.filter((function(t){return t.data.src===e})),n.map((function(e){return URL.createObjectURL(e.data.blob)})),n.first(),n.finalize((function(e){r.postMessage({id:t}),e&&URL.revokeObjectURL(e)})))},e.isCors=function(e){return-1!==e.indexOf("//")&&-1===e.indexOf(window.location.host)},e.isBlob=function(e){return 0===e.indexOf("blob:")},e}(),wt=function(){function e(){}return e.observer=function(){var e=this;return this.observer_||(this.readySubject_=new i.BehaviorSubject(!1),this.observerSubject_=new i.Subject,this.observer_=new IntersectionObserver((function(t){e.observerSubject_.next(t)}))),this.observer_},e.intersection$=function(e){if("IntersectionObserver"in window){var t=this.observer();return t.observe(e),this.observerSubject_.pipe(n.map((function(t){return t.find((function(t){return t.target===e}))})),n.filter((function(e){return void 0!==e})),n.finalize((function(){return t.unobserve(e)})))}return i.of({target:e,isIntersecting:!0})},e.firstIntersection$=function(e){return this.intersection$(e).pipe(n.filter((function(e){return e.isIntersecting})),n.first())},e}(),yt=function(){function e(){}return e.get=function(e){return this.cache[e]},e.set=function(e,t){this.cache[e]=t;var n=Object.keys(this.cache);n.length>100&&this.remove(n[0])},e.remove=function(e){delete this.cache[e]},a(e,null,[{key:"cache",get:function(){return this.cache_||(this.cache_={}),this.cache_}}]),e}(),kt=function(t){function r(){return t.apply(this,arguments)||this}s(r,t);var o=r.prototype;return o.onInit=function(){var t=this,r=e.getContext(this).node;r.classList.add("lazy"),this.input$=(new i.Subject).pipe(n.distinctUntilChanged(),n.switchMap((function(e){var n=yt.get(e);return n?i.of(n):(r.classList.remove("lazyed"),t.lazy$(e))})),n.takeUntil(this.unsubscribe$)),this.input$.subscribe((function(e){yt.set(t.lazy,e),r.setAttribute("src",e),r.classList.add("lazyed")}))},o.onChanges=function(){this.input$.next(this.lazy)},o.lazy$=function(t){var i=e.getContext(this).node;return wt.firstIntersection$(i).pipe(n.switchMap((function(){return bt.load$(t)})),n.takeUntil(this.unsubscribe$))},r}(e.Directive);kt.meta={selector:"[lazy],[[lazy]]",inputs:["lazy"]};var Ct=function(t){function n(){return t.apply(this,arguments)||this}s(n,t);var i=n.prototype;return i.onInit=function(){this.onLoad=this.onLoad.bind(this);var t=e.getContext(this).node;"loading"in HTMLImageElement.prototype?t.addEventListener("load",this.onLoad):this.onLoad()},i.onLoad=function(){e.getContext(this).node.classList.add("lazyed")},i.onDestroy=function(){e.getContext(this).node.removeEventListener("load",this.onLoad)},n}(e.Directive);Ct.meta={selector:"[loading]",inputs:["loading"]};var $t=function(t){function i(){return t.apply(this,arguments)||this}s(i,t);var r=i.prototype;return r.onInit=function(){var t=this,i=e.getContext(this).node;this.modalNode=i.querySelector(".wse__modal-outlet__modal"),E.modal$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.modal=e}))},r.onRegister=function(e){this.pushChanges()},r.onLogin=function(e){this.pushChanges()},r.reject=function(e){E.reject()},a(i,[{key:"modal",get:function(){return this.modal_},set:function(t){var n=e.getContext(this).module;if(this.modal_&&this.modal_.node&&(n.remove(this.modal_.node,this),this.modalNode.removeChild(this.modal_.node)),t&&t.node){this.modal_=t,this.modalNode.appendChild(t.node);n.compile(t.node)}this.modal_=t,this.pushChanges()}}]),i}(e.Component);$t.meta={selector:"[modal-outlet]",template:'\n\t<div class="wse__modal-outlet__container" [class]="{ active: modal }">\n\t\t<div class="wse__modal-outlet__background" (click)="reject($event)"></div>\n\t\t<div class="wse__modal-outlet__modal"></div>\n\t</div>\n\t'};var xt=function(t){function n(){return t.apply(this,arguments)||this}s(n,t);var i=n.prototype;return i.onInit=function(){var t=e.getContext(this).parentInstance;t instanceof $t&&(this.data=t.modal.data)},i.close=function(){E.reject()},n}(e.Component);xt.meta={selector:"[modal]"};var Dt=function(e){function t(){return e.apply(this,arguments)||this}s(t,e);var i=t.prototype;return i.onInit=function(){var e=this;this.grid={mode:4,width:320,gutter:0},this.notifications=[],this.load$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){e.notifications=t,e.pushChanges()}))},i.load$=function(){return L.sharedChanged$.pipe(n.switchMap((function(){return ct.notifications$()})))},t}(N);Dt.meta={selector:"[notification]"};var Et=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t.transform=function(e,t){var n=e.picture,i=n.src,r=n.width,o=n.height;t&&(r=t.width,o=t.height);var a="";switch(e.media?e.media.type:null){case"vimeo":a=""+i;break;default:a=""+i+r+"x"+o+"?sig="+e.id}return a},t}(e.Pipe);Et.meta={name:"picture"};var _t=function(t){function n(){return t.apply(this,arguments)||this}s(n,t);var i=n.prototype;return i.onInit=function(){var t=e.getContext(this),n=t.node,i=t.parentInstance;if(i instanceof $t)i.modal.data;this.views={SIGN_IN:1,SIGN_UP:2,FORGOTTEN:3},this.view=n.hasAttribute("view")?parseInt(n.getAttribute("view")):this.views.SIGN_IN},i.onForgot=function(e){this.view=this.views.FORGOTTEN,this.pushChanges()},i.onLogin=function(e){this.view=this.views.SIGN_IN,this.pushChanges()},i.onRegister=function(e){this.view=this.views.SIGN_UP,this.pushChanges()},i.onSignIn=function(e){E.resolve(e)},i.onSignUp=function(e){E.resolve(e)},i.onForgottenSent=function(e){this.pushChanges()},i.close=function(){E.reject()},n}(e.Component);_t.meta={selector:"[register-or-login-modal]"};var Mt=function(e,t){return Math.round(Math.abs(e-t)/1e3)};function Lt(e){return function(t,n){void 0===n&&(n=new Date),t instanceof Date||(t=new Date(t));var i=null,r=3600,o=86400,a=7*o,s=30*o,u=365*o;(i=Mt(n,t))>o&&i<a&&(t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0),i=Mt(n,t));var l=function(i,r){var o=e["justNow"===i?i:n>=t?i+"Ago":i+"FromNow"];return"function"==typeof o?o(r):o.replace("{{time}}",r)};switch(!1){case!(i<30):return l("justNow");case!(i<60):return l("seconds",i);case!(i<120):return l("aMinute");case!(i<r):return l("minutes",Math.floor(i/60));case 1!==Math.floor(i/r):return l("anHour");case!(i<o):return l("hours",Math.floor(i/r));case!(i<2*o):return l("aDay");case!(i<a):return l("days",Math.floor(i/o));case 1!==Math.floor(i/a):return l("aWeek");case!(i<s):return l("weeks",Math.floor(i/a));case 1!==Math.floor(i/s):return l("aMonth");case!(i<u):return l("months",Math.floor(i/s));case 1!==Math.floor(i/u):return l("aYear");default:return l("overAYear")}}}var Ft=Lt({justNow:"just now",secondsAgo:"{{time}} seconds ago",aMinuteAgo:"a minute ago",minutesAgo:"{{time}} minutes ago",anHourAgo:"an hour ago",hoursAgo:"{{time}} hours ago",aDayAgo:"yesterday",daysAgo:"{{time}} days ago",aWeekAgo:"a week ago",weeksAgo:"{{time}} weeks ago",aMonthAgo:"a month ago",monthsAgo:"{{time}} months ago",aYearAgo:"a year ago",yearsAgo:"{{time}} years ago",overAYearAgo:"over a year ago",secondsFromNow:"{{time}} seconds from now",aMinuteFromNow:"a minute from now",minutesFromNow:"{{time}} minutes from now",anHourFromNow:"an hour from now",hoursFromNow:"{{time}} hours from now",aDayFromNow:"tomorrow",daysFromNow:"{{time}} days from now",aWeekFromNow:"a week from now",weeksFromNow:"{{time}} weeks from now",aMonthFromNow:"a month from now",monthsFromNow:"{{time}} months from now",aYearFromNow:"a year from now",yearsFromNow:"{{time}} years from now",overAYearFromNow:"over a year from now"}),It=["justNow","secondsAgo","aMinuteAgo","minutesAgo","anHourAgo","hoursAgo","aDayAgo","daysAgo","aWeekAgo","weeksAgo","aMonthAgo","monthsAgo","aYearAgo","yearsAgo","overAYearAgo","secondsFromNow","aMinuteFromNow","minutesFromNow","anHourFromNow","hoursFromNow","aDayFromNow","daysFromNow","aWeekFromNow","weeksFromNow","aMonthFromNow","monthsFromNow","aYearFromNow","yearsFromNow","overAYearFromNow"],St=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t.transform=function(e){if(e)return this.relativeDate(e)},t.setLocale=function(e){if(e){var t={},n=Object.keys(e).filter((function(e){return-1!==It.indexOf(e)}));n.length&&(n.forEach((function(n){return t[n]=e[n]})),this.relativeDate=Lt(t))}},t}(e.Pipe);St.meta={name:"relativeDate"},St.relativeDate=Ft,window.locale&&St.setLocale(window.locale);var Tt=function(t){function r(){return t.apply(this,arguments)||this}s(r,t);var o=r.prototype;return o.onInit=function(){var e=this;this.change$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(){e.text=St.transform(e.relativeDate)}))},o.change$=function(){return i.interval(1e3).pipe(n.startWith(0))},a(r,[{key:"text",set:function(t){this.text_!==t&&(this.text_=t,e.getContext(this).node.innerText=t)}}]),r}(e.Directive);Tt.meta={selector:"[relativeDate]",inputs:["relativeDate"]};var Pt=function(t){function r(){return t.apply(this,arguments)||this}s(r,t);var o=r.prototype;return o.onInit=function(){this.initialFocus=!1;var t=e.getContext(this),i=t.module,r=t.node,o=this.expression=r.getAttribute("(scrollTo)");this.outputFunction=i.makeFunction(o,["$event"]),this.scrollTo$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(){}))},o.scrollTo$=function(){var t=this,r=e.getContext(this),o=r.module,a=r.node,s=r.parentInstance;return i.fromEvent(a,"click").pipe(n.tap((function(e){var n=o.resolve(t.outputFunction,s,e);if("string"==typeof n){var i=document.querySelector(n);if(i){var r=t.currentTop(),a=r+i.getBoundingClientRect().top-50,u={pow:0},l=document.querySelector("html");gsap.set(l,{"scroll-behavior":"auto"}),gsap.to(u,Math.abs(a-r)/2e3,{pow:1,ease:Quad.easeOut,overwrite:"all",onUpdate:function(){window.scrollTo(0,r+(a-r)*u.pow)},onComplete:function(){gsap.set(l,{"scroll-behavior":"smooth"})}})}}})),n.shareReplay(1))},o.currentTop=function(){return self.pageYOffset?self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0},r}(e.Directive);Pt.meta={selector:"[(scrollTo)]"};var Ot=function(){function e(){}return e.download=function(e,t){void 0===t&&(t="download.txt");var n=window.URL.createObjectURL(e),i=this.a;i.href=n,i.download=t,i.click(),window.URL.revokeObjectURL(n)},a(e,null,[{key:"a",get:function(){var e=this.a_;return e||((e=document.createElement("a")).style="display: none",document.body.appendChild(e),this.a_=e),e}}]),e}(),At=d?"/ws-events/register-or-login-modal.html":window.linkModal,jt=function(t){function r(){return t.apply(this,arguments)||this}s(r,t);var o=r.prototype;return o.onInit=function(){var t=this,r=e.getContext(this).node;i.fromEvent(r,"click").pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){e.preventDefault(),t.tryDownloadHref()}))},o.tryDownloadHref=function(){var t=this,i=e.getContext(this).node.getAttribute("href");i&&v.get$(i,void 0,"blob").pipe(n.first(),n.map((function(e){return e.data}))).subscribe((function(e){Ot.download(e,i.split("/").pop())}),(function(e){console.log("SecureDirective.tryDownloadHref.error",e),t.onLogin(event)}))},o.onLogin=function(e){var t=this;E.open$({src:At,data:{view:1}}).pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){e instanceof x&&(L.setUser(e.data),t.tryDownloadHref())}))},r}(e.Directive);jt.meta={selector:"[secure]"};var Nt=function(e){function t(){return e.apply(this,arguments)||this}s(t,e);var n=t.prototype;return n.onInit=function(){},n.getTitle=function(){var e=this.title?this.title:document.title;return this.encodeURI(e)},n.getUrl=function(){var e=this.url;return e?-1===e.indexOf(window.location.origin)&&(e=window.location.origin+(0===e.indexOf("/")?e:"/"+e)):e=window.location.href,this.encodeURI(e)},n.encodeURI=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16)}))},a(t,[{key:"facebookUrl",get:function(){return"https://www.facebook.com/sharer/sharer.php?u="+this.getUrl()}},{key:"linkedInUrl",get:function(){return"https://www.linkedin.com/shareArticle?mini=true&url="+this.getUrl()+"&title="+this.getTitle()}},{key:"twitterUrl",get:function(){return"https://twitter.com/intent/tweet?text="+this.getTitle()+"%20"+this.getUrl()}},{key:"whatsappUrl",get:function(){return"https://api.whatsapp.com/send?text="+this.getUrl()}},{key:"mailToUrl",get:function(){return"mailto:?subject="+this.getTitle()+"&body="+this.getUrl()}}]),t}(e.Component);Nt.meta={selector:"[share]",inputs:["share","title"],template:'\n\t<ul class="wse__nav--share">\n\t\t<li>\n\t\t\t<a [href]="facebookUrl" target="_blank"><svg class="wse__facebook"><use xlink:href="#facebook"></use></svg></a>\n\t\t</li>\n\t\t<li>\n\t\t\t<a [href]="linkedInUrl" target="_blank"><svg class="wse__linkedin"><use xlink:href="#linkedin"></use></svg></a>\n\t\t</li>\n\t\t<li>\n\t\t\t<a [href]="twitterUrl" target="_blank"><svg class="wse__twitter"><use xlink:href="#twitter"></use></svg></a>\n\t\t</li>\n\t\t<li>\n\t\t\t<a [href]="whatsappUrl" target="_blank"><svg class="wse__whatsapp"><use xlink:href="#whatsapp"></use></svg></a>\n\t\t</li>\n\t\t<li>\n\t\t\t<a [href]="mailToUrl"><svg class="wse__email"><use xlink:href="#email"></use></svg></a>\n\t\t</li>\n\t</ul>\n\t'};var Rt=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t.transform=function(e){return(t=e)?0!==t.indexOf("/"+p.NAME)||d?t:"/it/it"+(t=(t=t.replace("/"+p.NAME,"")).replace(".html","")):t;var t},t}(e.Pipe);Rt.meta={name:"slug"};var qt=function(t){function n(){return t.apply(this,arguments)||this}s(n,t);var o=n.prototype;return o.onInit=function(){e.getContext(this).node.setAttribute("id","swiper-"+this.rxcompId),this.options={slidesPerView:"auto",spaceBetween:0,centeredSlides:!0,speed:600,autoplay:{delay:5e3},keyboardControl:!0,mousewheelControl:!1,pagination:{el:"#swiper-"+this.rxcompId+" .swiper-pagination",clickable:!0},navigation:{nextEl:"#swiper-"+this.rxcompId+" .swiper-button-next",prevEl:"#swiper-"+this.rxcompId+" .swiper-button-prev"},keyboard:{enabled:!0,onlyInViewport:!0}},this.init_()},o.onView=function(){var e=this;setTimeout((function(){e.swiperInitOrUpdate_()}),1)},o.onDestroy=function(){this.removeListeners_(),this.swiperDestroy_()},o.onBeforePrint=function(){this.swiperDestroy_()},o.slideToIndex=function(e){this.swiper&&this.swiper.slideTo(e)},o.init_=function(){if(this.events$=new i.Subject,this.enabled){var t=e.getContext(this).node;gsap.set(t,{opacity:0}),this.index=0;var n=this.options.on||{},r=this;n.slideChange=function(){r.index=this.activeIndex,r.events$.next(r.index),r.pushChanges()},this.options.on=n,this.addListeners_()}},o.addListeners_=function(){this.onBeforePrint=this.onBeforePrint.bind(this),window.addEventListener("beforeprint",this.onBeforePrint)},o.removeListeners_=function(){window.removeEventListener("beforeprint",this.onBeforePrint)},o.swiperInitOrUpdate_=function(){if(this.enabled){var t=e.getContext(this).node;if(this.swiper)this.swiper.update();else{var n,i=this.options.on||(this.options.on={}),o=i.init;i.init&&i.init.swiperDirectiveInit||(i.init=function(){var e=this;gsap.to(t,.4,{opacity:1,ease:Power2.easeOut}),setTimeout((function(){"function"==typeof o&&o.apply(e,[n,element,scope])}),1)},i.init.swiperDirectiveInit=!0),gsap.set(t,{opacity:1}),n=new r(t,this.options),this.swiper=n,this.swiper._opening=!0,t.classList.add("swiper-init")}}},o.swiperDestroy_=function(){this.swiper&&this.swiper.destroy()},o.openMore=function(e){this.more.next(e)},a(n,[{key:"enabled",get:function(){return!window.matchMedia("print").matches}}]),n}(e.Directive);qt.meta={selector:"[swiper]",inputs:["consumer"],outputs:["more"]};var Ut=function(t){function n(){return t.apply(this,arguments)||this}return s(n,t),n.prototype.onInit=function(){e.getContext(this).node.setAttribute("id","swiper-"+this.rxcompId),this.options={slidesPerView:1,spaceBetween:15,breakpoints:{1024:{slidesPerView:2,spaceBetween:0},1440:{slidesPerView:2.5,spaceBetween:0}},centeredSlides:!1,loopAdditionalSlides:100,speed:600,keyboardControl:!0,mousewheelControl:!1,pagination:{el:"#swiper-"+this.rxcompId+" .swiper-pagination",clickable:!0},navigation:{nextEl:"#swiper-"+this.rxcompId+" .swiper-button-next",prevEl:"#swiper-"+this.rxcompId+" .swiper-button-prev"},keyboard:{enabled:!0,onlyInViewport:!0}},this.init_()},n}(qt);Ut.meta={selector:"[swiper-events]"};var zt=function(t){function n(){return t.apply(this,arguments)||this}return s(n,t),n.prototype.onInit=function(){e.getContext(this).node.setAttribute("id","swiper-"+this.rxcompId),this.options={slidesPerView:"auto",spaceBetween:0,centeredSlides:!1,loop:!1,loopAdditionalSlides:100,speed:600,keyboardControl:!0,mousewheelControl:!1,pagination:{el:"#swiper-"+this.rxcompId+" .swiper-pagination",clickable:!0},navigation:{nextEl:"#swiper-"+this.rxcompId+" .swiper-button-next",prevEl:"#swiper-"+this.rxcompId+" .swiper-button-prev"},keyboard:{enabled:!0,onlyInViewport:!0}},this.init_()},n}(qt);zt.meta={selector:"[swiper-related]"};var Vt=function(t){function n(){return t.apply(this,arguments)||this}return s(n,t),n.prototype.onInit=function(){e.getContext(this).node.setAttribute("id","swiper-"+this.rxcompId),this.options={slidesPerView:1,spaceBetween:0,breakpoints:{1024:{slidesPerView:3,spaceBetween:0}},centeredSlides:!0,loop:!1,loopAdditionalSlides:100,speed:600,keyboardControl:!0,mousewheelControl:!1,pagination:{el:"#swiper-"+this.rxcompId+" .swiper-pagination",clickable:!0},navigation:{nextEl:"#swiper-"+this.rxcompId+" .swiper-button-next",prevEl:"#swiper-"+this.rxcompId+" .swiper-button-prev"},keyboard:{enabled:!0,onlyInViewport:!0}},this.init_()},n}(qt);Vt.meta={selector:"[swiper-slides]"};var Ht=function(t){function n(){return t.apply(this,arguments)||this}return s(n,t),n.prototype.onInit=function(){e.getContext(this).node.setAttribute("id","swiper-"+this.rxcompId),this.options={slidesPerView:1,spaceBetween:0,breakpoints:{768:{slidesPerView:2,spaceBetween:0},1024:{slidesPerView:3,spaceBetween:0},1440:{slidesPerView:4,spaceBetween:0},1920:{slidesPerView:4,spaceBetween:0},2440:{slidesPerView:5,spaceBetween:0}},centeredSlides:!1,loopAdditionalSlides:100,speed:600,keyboardControl:!0,mousewheelControl:!1,pagination:{el:"#swiper-"+this.rxcompId+" .swiper-pagination",clickable:!0},navigation:{nextEl:"#swiper-"+this.rxcompId+" .swiper-button-next",prevEl:"#swiper-"+this.rxcompId+" .swiper-button-prev"},keyboard:{enabled:!0,onlyInViewport:!0}},this.init_()},n}(qt);Ht.meta={selector:"[swiper-top-events]"};var Bt=function(){function e(){}return e.push=function(e){return function(e){(window.dataLayer||[]).push(e),console.log("GtmService.dataLayer",e)}(e)},e}(),Gt=function(t){function r(){return t.apply(this,arguments)||this}s(r,t);var o=r.prototype;return o.onInit=function(){var t=window.THRONContentExperience||window.THRONPlayer;if(t){r.registerSkin();var i=e.getContext(this).node;i.setAttribute("id","thron-"+this.rxcompId);var o=this.thron.media.src;if(-1===o.indexOf("pkey=")){var a=o.split("/");o="https://gruppoconcorde-view.thron.com/api/xcontents/resources/delivery/getContentDetail?clientId="+a[6]+"&xcontentId="+a[7]+"&pkey="+a[8]}var s=!!i.hasAttribute("controls"),u=!!i.hasAttribute("loop"),l=!!i.hasAttribute("autoplay"),c=(i.hasAttribute("live"),this.player=t(i.id,{media:o,loop:u,autoplay:l,muted:!s,displayLinked:"close",noSkin:!s,preloadColor:"#446CB3",waveColor:"#ffffff",waveProgressColor:"#446CB3"}));this.onBeforeInit=this.onBeforeInit.bind(this),this.onReady=this.onReady.bind(this),this.onCanPlay=this.onCanPlay.bind(this),this.onPlaying=this.onPlaying.bind(this),this.onComplete=this.onComplete.bind(this),c.on("beforeInit",this.onBeforeInit),c.on("ready",this.onReady),c.on("canPlay",this.onCanPlay),c.on("playing",this.onPlaying),c.on("complete",this.onComplete),this.timeupdate$(c,o).pipe(n.takeUntil(this.unsubscribe$)).subscribe()}},o.timeupdate$=function(e,t){var r=this;var o=["play","progress - 25%","progress - 50%","progress - 75%","progress - 90%","progress - 100%"],a=[0,.25,.5,.75,.9,1],s=function(e){return a.reduce((function(t,n,i){return e>=n?i:t}),0)},u=-1;return i.fromEventPattern((function(t){e.on("timeupdate",t)}),(function(t){e.off("timeupdate",t)})).pipe(n.auditTime(1e3),n.filter((function(e){var t=e[1],n=e[2],i=s(t/n);return i>u&&(u=i,!0)})),n.tap((function(e){var n=e[1],i=e[2],a=s(n/i),u=L.getCurrentUser();Bt.push({event:"PlayingEvent",videoType:"Thron",videoId:t,duration:i,progress:o[a],eventId:r.thron.id,eventTitle:r.thron.title,userId:u?u.id:"not logged"})})))},o.onBeforeInit=function(t){var n=["captionText","subtitleButton","downloadableButton","speedButton"];!!e.getContext(this).node.hasAttribute("live")&&n.push("timeSeek","timeInfoText");var i=window.THRONSchemaHelper.getSchema(),r=(window.THRONSchemaHelper.removeElementsById(i,"VIDEO",n),window.THRONSchemaHelper.getElementsById(i,"VIDEO",n).coordinates.length,{bars:i});t.params(r)},o.onReady=function(){!!e.getContext(this).node.hasAttribute("controls")||this.player.mediaContainer().querySelector("video").setAttribute("playsinline","true");this.ready.next(this)},o.onCanPlay=function(){this.canPlay.next(this)},o.onPlaying=function(){var t=this.player;if(t.off("playing",this.onPlaying),!!!e.getContext(this).node.hasAttribute("controls")){var n=t.qualityLevels();if(n.length){var i=n[n.length-1].index;n[0].index;t.currentQuality(i)}}},o.onComplete=function(){this.complete.next(this)},o.onDestroy=function(){var e=this.player;e.off("ready",this.onReady),e.off("canPlay",this.onCanPlay),e.off("playing",this.onPlaying),e.off("complete",this.onComplete)},o.play=function(){var e=this.player,t=e.status();t&&!t.playing&&e.play()},o.pause=function(){var e=this.player,t=e.status();t&&t.playing&&e.pause()},r.registerSkin=function(){window.wseThronPlugin||(window.wseThronPlugin=function(e,t,n,i){this.player=e,this.$=i},THRONContentExperience.plugin("wse",wseThronPlugin))},r}(e.Component);Gt.meta={selector:"[thron]",outputs:["ready","canPlay","complete"],inputs:["thron"]};var Wt=function(e){function i(){return e.apply(this,arguments)||this}s(i,e);var r=i.prototype;return r.onInit=function(){var e=this,i=new t.FormGroup({email:new t.FormControl(null,[t.Validators.RequiredValidator(),t.Validators.EmailValidator()]),checkRequest:window.antiforgery,checkField:""}),r=i.controls;this.controls=r,i.changes$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){e.pushChanges()})),this.form=i,this.error=null,this.success=!1},r.test=function(){this.form.patch({email:"jhonappleseed@gmail.com",checkRequest:window.antiforgery,checkField:""})},r.reset=function(){this.form.reset()},r.onSubmit=function(){var e=this;this.form.valid?(this.form.submitted=!0,L.forgot$(this.form.value).pipe(n.first()).subscribe((function(t){e.sent.next(!0),e.success=!0,e.pushChanges()}),(function(t){console.log("UserForgotComponent.error",t),e.error=t,e.pushChanges()}))):this.form.touched=!0},r.onLogin=function(){this.login.next()},r.onRegister=function(){this.register.next()},i}(e.Component);Wt.meta={selector:"[user-forgot]",outputs:["sent","login","register"]};var Yt=function(e){function i(){return e.apply(this,arguments)||this}s(i,e);var r=i.prototype;return r.onInit=function(){var e=this,i=new t.FormGroup({email:new t.FormControl(null,[t.Validators.RequiredValidator(),t.Validators.EmailValidator()]),password:new t.FormControl(null,t.Validators.RequiredValidator()),checkRequest:window.antiforgery,checkField:""}),r=i.controls;this.controls=r,i.changes$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){e.pushChanges()})),this.form=i,this.error=null,this.success=!1},r.test=function(){this.form.patch({email:"jhonappleseed@gmail.com",password:"password",checkRequest:window.antiforgery,checkField:""})},r.reset=function(){this.form.reset()},r.onSubmit=function(){var e=this;this.form.valid?(this.form.submitted=!0,L.login$(this.form.value).pipe(n.first()).subscribe((function(t){e.success=!0,e.pushChanges(),e.signIn.next("string"==typeof t?{status:t}:t)}),(function(t){console.log("UserSigninComponent.error",t),e.error=t,e.pushChanges()}))):this.form.touched=!0},r.onForgot=function(){this.forgot.next()},r.onRegister=function(){this.register.next()},i}(e.Component);Yt.meta={selector:"[user-signin]",outputs:["signIn","forgot","register"]};var Zt=function(e){function i(){return e.apply(this,arguments)||this}s(i,e);var r=i.prototype;return r.onInit=function(){var e,i=this,r=window.data||{roles:[{id:0,name:"area eventi"},{id:5,name:"architetto"},{id:6,name:"giornalista"},{id:4,name:"rivenditore"}],countries:[{id:114,name:"Italia",idstato:114},{id:204,name:"Stati Uniti d'America",idstato:0}],provinces:[{id:1,name:"Pesaro",idstato:114}],newsletterLanguages:[{id:1,name:"Italiano"},{id:2,name:"Inglese"}]},o=new t.FormGroup({firstName:new t.FormControl(null,t.Validators.RequiredValidator()),lastName:new t.FormControl(null,t.Validators.RequiredValidator()),company:new t.FormControl(null,t.Validators.RequiredValidator()),role:null,country:new t.FormControl(null,t.Validators.RequiredValidator()),province:new t.FormControl(null,t.Validators.RequiredValidator()),address:new t.FormControl(null,t.Validators.RequiredValidator()),zipCode:new t.FormControl(null,t.Validators.RequiredValidator()),city:new t.FormControl(null,t.Validators.RequiredValidator()),telephone:new t.FormControl(null,t.Validators.RequiredValidator()),fax:null,email:new t.FormControl(null,[t.Validators.RequiredValidator(),t.Validators.EmailValidator()]),password:new t.FormControl(null,[t.Validators.RequiredValidator()]),passwordConfirm:new t.FormControl(null,[t.Validators.RequiredValidator(),this.MatchValidator("password")]),privacy:new t.FormControl(null,t.Validators.RequiredTrueValidator()),newsletter:null,newsletterLanguage:new t.FormControl(null,(e=function(){return o.controls.newsletter.value},new t.FormValidator((function(e,t){var n=t.condition;return!0!==Boolean(n())||null!=e&&0!==e.length?null:{required:!0}}),{condition:e}))),checkRequest:window.antiforgery,checkField:""}),a=o.controls;a.role.options=r.roles,a.country.options=r.countries,a.province.options=[],a.newsletterLanguage.options=r.newsletterLanguages,this.controls=a,o.changes$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){i.countryId=e.country,i.pushChanges()})),o.controls.newsletter.changes$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(){return o.controls.Lingua.newsletterLanguage.next(null)})),this.data=r,this.form=o,this.error=null,this.success=!1},r.test=function(){this.form.patch({firstName:"Jhon",lastName:"Appleseed",company:"Websolute",role:this.controls.role.options[0].id,country:this.controls.country.options[0].id,address:"Strada della Campanara",zipCode:"15",city:"Pesaro",telephone:"00390721411112",email:"jhonappleseed@gmail.com",password:"password",passwordConfirm:"password",privacy:!0,checkRequest:window.antiforgery,checkField:""})},r.MatchValidator=function(e){var n=this;return new t.FormValidator((function(t){var i=n.form?n.form.get(e):null;return t&&i&&t!==i.value?{match:{value:t,match:i.value}}:null}))},r.reset=function(){this.form.reset()},r.onSubmit=function(){var e=this;this.form.valid?(this.form.submitted=!0,L.register$(this.form.value).pipe(n.first()).subscribe((function(t){e.success=!0,e.form.reset()}),(function(t){console.log("UserSignupComponent.error",t),e.error=t,e.form.submitted=!1,e.pushChanges()}))):this.form.touched=!0},r.onLogin=function(){this.login.next()},a(i,[{key:"countryId",set:function(e){var t=this;if(this.countryId_!==e){this.countryId_=e;var n=this.data.provinces.filter((function(t){return String(t.idstato)===String(e)}));this.controls.province.options=n,this.controls.province.hidden=0===n.length,n.find((function(e){return e.id===t.controls.province.value}))||(this.controls.province.value=null)}}}]),i}(e.Component);Zt.meta={selector:"[user-signup]"};var Qt=function(t){function i(){return t.apply(this,arguments)||this}s(i,t);var r=i.prototype;return r.onInit=function(){var t=this;this.item={};var i=e.getContext(this),r=i.node,o=i.parentInstance;r.classList.add("video"),this.video=r.querySelector("video"),this.progress=r.querySelector(".icon--play-progress path"),o instanceof qt&&o.events$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){return t.pause()})),this.addListeners()},r.onDestroy=function(){this.removeListeners()},r.addListeners=function(){var e=this.video;e&&(this.onPlay=this.onPlay.bind(this),this.onPause=this.onPause.bind(this),this.onEnded=this.onEnded.bind(this),this.onTimeUpdate=this.onTimeUpdate.bind(this),e.addEventListener("play",this.onPlay),e.addEventListener("pause",this.onPause),e.addEventListener("ended",this.onEnded),e.addEventListener("timeupdate",this.onTimeUpdate))},r.removeListeners=function(){var e=this.video;e&&(e.removeEventListener("play",this.onPlay),e.removeEventListener("pause",this.onPause),e.removeEventListener("ended",this.onEnded),e.removeEventListener("timeupdate",this.onTimeUpdate))},r.togglePlay=function(){var e=this.video;e&&(e.paused?this.play():this.pause())},r.play=function(){var e=this.video;e.muted=!1,e.play()},r.pause=function(){var e=this.video;e.muted=!0,e.pause()},r.onPlay=function(){this.playing=!0,Bt.push({event:"video play",video_name:this.video.src})},r.onPause=function(){this.playing=!1},r.onEnded=function(){this.playing=!1},r.onTimeUpdate=function(){this.progress.style.strokeDashoffset=this.video.currentTime/this.video.duration},a(i,[{key:"playing",get:function(){return this.playing_},set:function(e){this.playing_!==e&&(this.playing_=e,this.pushChanges())}}]),i}(e.Component);/*! @vimeo/player v2.15.0 | (c) 2021 Vimeo | MIT License | https://github.com/vimeo/player.js */
function Jt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Qt.meta={selector:"[video]",inputs:["item"]};var Kt="undefined"!=typeof global&&"[object global]"==={}.toString.call(global);function en(e,t){return 0===e.indexOf(t.toLowerCase())?e:"".concat(t.toLowerCase()).concat(e.substr(0,1).toUpperCase()).concat(e.substr(1))}function tn(e){return Boolean(e&&1===e.nodeType&&"nodeName"in e&&e.ownerDocument&&e.ownerDocument.defaultView)}function nn(e){return!isNaN(parseFloat(e))&&isFinite(e)&&Math.floor(e)==e}function rn(e){return/^(https?:)?\/\/((player|www)\.)?vimeo\.com(?=$|\/)/.test(e)}function on(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.url,i=t||n;if(!i)throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(nn(i))return"https://vimeo.com/".concat(i);if(rn(i))return i.replace("http:","https:");if(t)throw new TypeError("“".concat(t,"” is not a valid video id."));throw new TypeError("“".concat(i,"” is not a vimeo.com url."))}var an=void 0!==Array.prototype.indexOf,sn="undefined"!=typeof window&&void 0!==window.postMessage;if(!(Kt||an&&sn))throw new Error("Sorry, the Vimeo Player API is not available in this browser.");var un="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/*!
 * weakmap-polyfill v2.0.1 - ECMAScript6 WeakMap polyfill
 * https://github.com/polygonplanet/weakmap-polyfill
 * Copyright (c) 2015-2020 Polygon Planet <polygon.planet.aqua@gmail.com>
 * @license MIT
 */
!function(e){if(!e.WeakMap){var t=Object.prototype.hasOwnProperty,n=function(e,t,n){Object.defineProperty?Object.defineProperty(e,t,{configurable:!0,writable:!0,value:n}):e[t]=n};e.WeakMap=function(){function e(){if(void 0===this)throw new TypeError("Constructor WeakMap requires 'new'");if(n(this,"_id",o("_WeakMap")),arguments.length>0)throw new TypeError("WeakMap iterable is not supported")}function r(e,n){if(!i(e)||!t.call(e,"_id"))throw new TypeError(n+" method called on incompatible receiver "+typeof e)}function o(e){return e+"_"+a()+"."+a()}function a(){return Math.random().toString().substring(2)}return n(e.prototype,"delete",(function(e){if(r(this,"delete"),!i(e))return!1;var t=e[this._id];return!(!t||t[0]!==e)&&(delete e[this._id],!0)})),n(e.prototype,"get",(function(e){if(r(this,"get"),i(e)){var t=e[this._id];return t&&t[0]===e?t[1]:void 0}})),n(e.prototype,"has",(function(e){if(r(this,"has"),!i(e))return!1;var t=e[this._id];return!(!t||t[0]!==e)})),n(e.prototype,"set",(function(e,t){if(r(this,"set"),!i(e))throw new TypeError("Invalid value used as weak map key");var o=e[this._id];return o&&o[0]===e?(o[1]=t,this):(n(e,this._id,[e,t]),this)})),n(e,"_polyfill",!0),e}()}function i(e){return Object(e)===e}}("undefined"!=typeof self?self:"undefined"!=typeof window?window:un);var ln=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){
/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/
var t,n,i;i=function(){var e,t,n,i=Object.prototype.toString,r="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{}),e=function(e,t,n,i){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!1!==i})}}catch(t){e=function(e,t,n){return e[t]=n,e}}function o(e,i){n.add(e,i),t||(t=r(n.drain))}function a(e){var t,n=typeof e;return null==e||"object"!=n&&"function"!=n||(t=e.then),"function"==typeof t&&t}function s(){for(var e=0;e<this.chain.length;e++)u(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function u(e,t,n){var i,r;try{!1===t?n.reject(e.msg):(i=!0===t?e.msg:t.call(void 0,e.msg))===n.promise?n.reject(TypeError("Promise-chain cycle")):(r=a(i))?r.call(i,n.resolve,n.reject):n.resolve(i)}catch(e){n.reject(e)}}function l(e){var t,n=this;if(!n.triggered){n.triggered=!0,n.def&&(n=n.def);try{(t=a(e))?o((function(){var i=new h(n);try{t.call(e,(function(){l.apply(i,arguments)}),(function(){c.apply(i,arguments)}))}catch(e){c.call(i,e)}})):(n.msg=e,n.state=1,n.chain.length>0&&o(s,n))}catch(e){c.call(new h(n),e)}}}function c(e){var t=this;t.triggered||(t.triggered=!0,t.def&&(t=t.def),t.msg=e,t.state=2,t.chain.length>0&&o(s,t))}function d(e,t,n,i){for(var r=0;r<t.length;r++)!function(r){e.resolve(t[r]).then((function(e){n(r,e)}),i)}(r)}function h(e){this.def=e,this.triggered=!1}function p(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function f(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var t=new p(this);this.then=function(e,n){var i={success:"function"!=typeof e||e,failure:"function"==typeof n&&n};return i.promise=new this.constructor((function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");i.resolve=e,i.reject=t})),t.chain.push(i),0!==t.state&&o(s,t),i.promise},this.catch=function(e){return this.then(void 0,e)};try{e.call(void 0,(function(e){l.call(t,e)}),(function(e){c.call(t,e)}))}catch(e){c.call(t,e)}}n=function(){var e,n,i;function r(e,t){this.fn=e,this.self=t,this.next=void 0}return{add:function(t,o){i=new r(t,o),n?n.next=i:e=i,n=i,i=void 0},drain:function(){var i=e;for(e=n=t=void 0;i;)i.fn.call(i.self),i=i.next}}}();var m=e({},"constructor",f,!1);return f.prototype=m,e(m,"__NPO__",0,!1),e(f,"resolve",(function(e){return e&&"object"==typeof e&&1===e.__NPO__?e:new this((function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");t(e)}))})),e(f,"reject",(function(e){return new this((function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");n(e)}))})),e(f,"all",(function(e){var t=this;return"[object Array]"!=i.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t((function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");var r=e.length,o=Array(r),a=0;d(t,e,(function(e,t){o[e]=t,++a===r&&n(o)}),i)}))})),e(f,"race",(function(e){var t=this;return"[object Array]"!=i.call(e)?t.reject(TypeError("Not an array")):new t((function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");d(t,e,(function(e,t){n(t)}),i)}))})),f},(n=un)[t="Promise"]=n[t]||i(),e.exports&&(e.exports=n[t])})),cn=new WeakMap;function dn(e,t,n){var i=cn.get(e.element)||{};t in i||(i[t]=[]),i[t].push(n),cn.set(e.element,i)}function hn(e,t){return(cn.get(e.element)||{})[t]||[]}function pn(e,t,n){var i=cn.get(e.element)||{};if(!i[t])return!0;if(!n)return i[t]=[],cn.set(e.element,i),!0;var r=i[t].indexOf(n);return-1!==r&&i[t].splice(r,1),cn.set(e.element,i),i[t]&&0===i[t].length}function fn(e,t){var n=cn.get(e);cn.set(t,n),cn.delete(e)}var mn=["autopause","autoplay","background","byline","color","controls","dnt","height","id","loop","maxheight","maxwidth","muted","playsinline","portrait","responsive","speed","texttrack","title","transparent","url","width"];function vn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return mn.reduce((function(t,n){var i=e.getAttribute("data-vimeo-".concat(n));return(i||""===i)&&(t[n]=""===i?1:i),t}),t)}function gn(e,t){var n=e.html;if(!t)throw new TypeError("An element must be provided");if(null!==t.getAttribute("data-vimeo-initialized"))return t.querySelector("iframe");var i=document.createElement("div");return i.innerHTML=n,t.appendChild(i.firstChild),t.setAttribute("data-vimeo-initialized","true"),t.querySelector("iframe")}function bn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(i,r){if(!rn(e))throw new TypeError("“".concat(e,"” is not a vimeo.com url."));var o="https://vimeo.com/api/oembed.json?url=".concat(encodeURIComponent(e));for(var a in t)t.hasOwnProperty(a)&&(o+="&".concat(a,"=").concat(encodeURIComponent(t[a])));var s="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;s.open("GET",o,!0),s.onload=function(){if(404!==s.status)if(403!==s.status)try{var t=JSON.parse(s.responseText);if(403===t.domain_status_code)return gn(t,n),void r(new Error("“".concat(e,"” is not embeddable.")));i(t)}catch(e){r(e)}else r(new Error("“".concat(e,"” is not embeddable.")));else r(new Error("“".concat(e,"” was not found.")))},s.onerror=function(){var e=s.status?" (".concat(s.status,")"):"";r(new Error("There was an error fetching the embed code from Vimeo".concat(e,".")))},s.send()}))}function wn(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return console.warn(e),{}}return e}function yn(e,t,n){if(e.element.contentWindow&&e.element.contentWindow.postMessage){var i={method:t};void 0!==n&&(i.value=n);var r=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1"));r>=8&&r<10&&(i=JSON.stringify(i)),e.element.contentWindow.postMessage(i,e.origin)}}function kn(e,t){var n,i=[];if((t=wn(t)).event){if("error"===t.event)hn(e,t.data.method).forEach((function(n){var i=new Error(t.data.message);i.name=t.data.name,n.reject(i),pn(e,t.data.method,n)}));i=hn(e,"event:".concat(t.event)),n=t.data}else if(t.method){var r=function(e,t){var n=hn(e,t);if(n.length<1)return!1;var i=n.shift();return pn(e,t,i),i}(e,t.method);r&&(i.push(r),n=t.value)}i.forEach((function(t){try{if("function"==typeof t)return void t.call(e,n);t.resolve(n)}catch(e){}}))}var Cn=new WeakMap,$n=new WeakMap,xn={},Dn=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Jt(this,e),window.jQuery&&t instanceof jQuery&&(t.length>1&&window.console&&console.warn&&console.warn("A jQuery object with multiple elements was passed, using the first element."),t=t[0]),"undefined"!=typeof document&&"string"==typeof t&&(t=document.getElementById(t)),!tn(t))throw new TypeError("You must pass either a valid element or a valid id.");if("IFRAME"!==t.nodeName){var r=t.querySelector("iframe");r&&(t=r)}if("IFRAME"===t.nodeName&&!rn(t.getAttribute("src")||""))throw new Error("The player element passed isn’t a Vimeo embed.");if(Cn.has(t))return Cn.get(t);this._window=t.ownerDocument.defaultView,this.element=t,this.origin="*";var o=new ln((function(e,r){if(n._onMessage=function(t){if(rn(t.origin)&&n.element.contentWindow===t.source){"*"===n.origin&&(n.origin=t.origin);var i=wn(t.data);if(i&&"error"===i.event&&i.data&&"ready"===i.data.method){var o=new Error(i.data.message);return o.name=i.data.name,void r(o)}var a=i&&"ready"===i.event,s=i&&"ping"===i.method;if(a||s)return n.element.setAttribute("data-ready","true"),void e();kn(n,i)}},n._window.addEventListener("message",n._onMessage),"IFRAME"!==n.element.nodeName){var o=vn(t,i);bn(on(o),o,t).then((function(e){var i=gn(e,t);return n.element=i,n._originalElement=t,fn(t,i),Cn.set(n.element,n),e})).catch(r)}}));if($n.set(this,o),Cn.set(this.element,this),"IFRAME"===this.element.nodeName&&yn(this,"ping"),xn.isEnabled){var a=function(){return xn.exit()};xn.on("fullscreenchange",(function(){xn.isFullscreen?dn(n,"event:exitFullscreen",a):pn(n,"event:exitFullscreen",a),n.ready().then((function(){yn(n,"fullscreenchange",xn.isFullscreen)}))}))}return this}var t,n,i;return t=e,(n=[{key:"callMethod",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new ln((function(i,r){return t.ready().then((function(){dn(t,e,{resolve:i,reject:r}),yn(t,e,n)})).catch(r)}))}},{key:"get",value:function(e){var t=this;return new ln((function(n,i){return e=en(e,"get"),t.ready().then((function(){dn(t,e,{resolve:n,reject:i}),yn(t,e)})).catch(i)}))}},{key:"set",value:function(e,t){var n=this;return new ln((function(i,r){if(e=en(e,"set"),null==t)throw new TypeError("There must be a value to set.");return n.ready().then((function(){dn(n,e,{resolve:i,reject:r}),yn(n,e,t)})).catch(r)}))}},{key:"on",value:function(e,t){if(!e)throw new TypeError("You must pass an event name.");if(!t)throw new TypeError("You must pass a callback function.");if("function"!=typeof t)throw new TypeError("The callback must be a function.");0===hn(this,"event:".concat(e)).length&&this.callMethod("addEventListener",e).catch((function(){})),dn(this,"event:".concat(e),t)}},{key:"off",value:function(e,t){if(!e)throw new TypeError("You must pass an event name.");if(t&&"function"!=typeof t)throw new TypeError("The callback must be a function.");pn(this,"event:".concat(e),t)&&this.callMethod("removeEventListener",e).catch((function(e){}))}},{key:"loadVideo",value:function(e){return this.callMethod("loadVideo",e)}},{key:"ready",value:function(){var e=$n.get(this)||new ln((function(e,t){t(new Error("Unknown player. Probably unloaded."))}));return ln.resolve(e)}},{key:"addCuePoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.callMethod("addCuePoint",{time:e,data:t})}},{key:"removeCuePoint",value:function(e){return this.callMethod("removeCuePoint",e)}},{key:"enableTextTrack",value:function(e,t){if(!e)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:e,kind:t})}},{key:"disableTextTrack",value:function(){return this.callMethod("disableTextTrack")}},{key:"pause",value:function(){return this.callMethod("pause")}},{key:"play",value:function(){return this.callMethod("play")}},{key:"requestFullscreen",value:function(){return xn.isEnabled?xn.request(this.element):this.callMethod("requestFullscreen")}},{key:"exitFullscreen",value:function(){return xn.isEnabled?xn.exit():this.callMethod("exitFullscreen")}},{key:"getFullscreen",value:function(){return xn.isEnabled?ln.resolve(xn.isFullscreen):this.get("fullscreen")}},{key:"requestPictureInPicture",value:function(){return this.callMethod("requestPictureInPicture")}},{key:"exitPictureInPicture",value:function(){return this.callMethod("exitPictureInPicture")}},{key:"getPictureInPicture",value:function(){return this.get("pictureInPicture")}},{key:"unload",value:function(){return this.callMethod("unload")}},{key:"destroy",value:function(){var e=this;return new ln((function(t){if($n.delete(e),Cn.delete(e.element),e._originalElement&&(Cn.delete(e._originalElement),e._originalElement.removeAttribute("data-vimeo-initialized")),e.element&&"IFRAME"===e.element.nodeName&&e.element.parentNode&&e.element.parentNode.removeChild(e.element),e.element&&"DIV"===e.element.nodeName&&e.element.parentNode){e.element.removeAttribute("data-vimeo-initialized");var n=e.element.querySelector("iframe");n&&n.parentNode&&n.parentNode.removeChild(n)}e._window.removeEventListener("message",e._onMessage),t()}))}},{key:"getAutopause",value:function(){return this.get("autopause")}},{key:"setAutopause",value:function(e){return this.set("autopause",e)}},{key:"getBuffered",value:function(){return this.get("buffered")}},{key:"getCameraProps",value:function(){return this.get("cameraProps")}},{key:"setCameraProps",value:function(e){return this.set("cameraProps",e)}},{key:"getChapters",value:function(){return this.get("chapters")}},{key:"getCurrentChapter",value:function(){return this.get("currentChapter")}},{key:"getColor",value:function(){return this.get("color")}},{key:"setColor",value:function(e){return this.set("color",e)}},{key:"getCuePoints",value:function(){return this.get("cuePoints")}},{key:"getCurrentTime",value:function(){return this.get("currentTime")}},{key:"setCurrentTime",value:function(e){return this.set("currentTime",e)}},{key:"getDuration",value:function(){return this.get("duration")}},{key:"getEnded",value:function(){return this.get("ended")}},{key:"getLoop",value:function(){return this.get("loop")}},{key:"setLoop",value:function(e){return this.set("loop",e)}},{key:"setMuted",value:function(e){return this.set("muted",e)}},{key:"getMuted",value:function(){return this.get("muted")}},{key:"getPaused",value:function(){return this.get("paused")}},{key:"getPlaybackRate",value:function(){return this.get("playbackRate")}},{key:"setPlaybackRate",value:function(e){return this.set("playbackRate",e)}},{key:"getPlayed",value:function(){return this.get("played")}},{key:"getQualities",value:function(){return this.get("qualities")}},{key:"getQuality",value:function(){return this.get("quality")}},{key:"setQuality",value:function(e){return this.set("quality",e)}},{key:"getSeekable",value:function(){return this.get("seekable")}},{key:"getSeeking",value:function(){return this.get("seeking")}},{key:"getTextTracks",value:function(){return this.get("textTracks")}},{key:"getVideoEmbedCode",value:function(){return this.get("videoEmbedCode")}},{key:"getVideoId",value:function(){return this.get("videoId")}},{key:"getVideoTitle",value:function(){return this.get("videoTitle")}},{key:"getVideoWidth",value:function(){return this.get("videoWidth")}},{key:"getVideoHeight",value:function(){return this.get("videoHeight")}},{key:"getVideoUrl",value:function(){return this.get("videoUrl")}},{key:"getVolume",value:function(){return this.get("volume")}},{key:"setVolume",value:function(e){return this.set("volume",e)}}])&&Xt(t.prototype,n),i&&Xt(t,i),e}();Kt||(xn=function(){var e=function(){for(var e,t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,i=t.length,r={};n<i;n++)if((e=t[n])&&e[1]in document){for(n=0;n<e.length;n++)r[t[0][n]]=e[n];return r}return!1}(),t={fullscreenchange:e.fullscreenchange,fullscreenerror:e.fullscreenerror},n={request:function(t){return new Promise((function(i,r){var o=function e(){n.off("fullscreenchange",e),i()};n.on("fullscreenchange",o);var a=(t=t||document.documentElement)[e.requestFullscreen]();a instanceof Promise&&a.then(o).catch(r)}))},exit:function(){return new Promise((function(t,i){if(n.isFullscreen){var r=function e(){n.off("fullscreenchange",e),t()};n.on("fullscreenchange",r);var o=document[e.exitFullscreen]();o instanceof Promise&&o.then(r).catch(i)}else t()}))},on:function(e,n){var i=t[e];i&&document.addEventListener(i,n)},off:function(e,n){var i=t[e];i&&document.removeEventListener(i,n)}};return Object.defineProperties(n,{isFullscreen:{get:function(){return Boolean(document[e.fullscreenElement])}},element:{enumerable:!0,get:function(){return document[e.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(document[e.fullscreenEnabled])}}}),n}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=[].slice.call(e.querySelectorAll("[data-vimeo-id], [data-vimeo-url]")),n=function(e){"console"in window&&console.error&&console.error("There was an error creating an embed: ".concat(e))};t.forEach((function(e){try{if(null!==e.getAttribute("data-vimeo-defer"))return;var t=vn(e);bn(on(t),t,e).then((function(t){return gn(t,e)})).catch(n)}catch(e){n(e)}}))}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;if(!window.VimeoPlayerResizeEmbeds_){window.VimeoPlayerResizeEmbeds_=!0;var t=function(t){if(rn(t.origin)&&t.data&&"spacechange"===t.data.event)for(var n=e.querySelectorAll("iframe"),i=0;i<n.length;i++)if(n[i].contentWindow===t.source){n[i].parentElement.style.paddingBottom="".concat(t.data.data[0].bottom,"px");break}};window.addEventListener("message",t)}}());var En=function(t){function r(){return t.apply(this,arguments)||this}s(r,t);var o=r.prototype;return o.onInit=function(){var t=this,i=e.getContext(this).node,r="vimeo-"+this.rxcompId;i.setAttribute("id",r);var o=this.vimeo.media.src,a=i.hasAttribute("controls")?1:0,s=a?0:1,u=i.hasAttribute("loop")?1:0,l=i.hasAttribute("autoplay")?1:0,c=(i.hasAttribute("live"),i.hasAttribute("color")?i.getAttribute("color"):"f67c53"),d=new Dn(r,{id:o,autoplay:l,color:c,controls:a,background:s,loop:u,title:0,byline:0,portrait:0});d.ready().then((function(){var e=i.querySelector("iframe");e.setAttribute("frameborder","0"),e.setAttribute("allow","autoplay;fullscreen"),e.setAttribute("webkitallowfullscreen",""),e.setAttribute("mozallowfullscreen",""),e.setAttribute("allowfullscreen",""),t.timeupdate$(d,o).pipe(n.takeUntil(t.unsubscribe$)).subscribe()}),(function(e){console.log("VimeoComponent.player.error",e)}))},o.timeupdate$=function(e,t){var r=this;var o=["play","progress - 25%","progress - 50%","progress - 75%","progress - 90%","progress - 100%"],a=[0,.25,.5,.75,.9,1],s=function(e){return a.reduce((function(t,n,i){return e>=n?i:t}),0)},u=-1;return i.fromEventPattern((function(t){e.on("timeupdate",t)}),(function(t){e.off("timeupdate",t)})).pipe(n.auditTime(1e3),n.filter((function(e){var t=s(e.percent);return t>u&&(u=t,!0)})),n.tap((function(e){var n=s(e.percent),i=L.getCurrentUser();Bt.push({event:"PlayingEvent",videoType:"Vimeo",videoId:t,duration:e.duration,progress:o[n],eventId:r.vimeo.id,eventTitle:r.vimeo.title,userId:i?i.id:"not logged"})})))},r}(e.Component);En.meta={selector:"[vimeo]",outputs:["ready","canPlay","complete"],inputs:["vimeo"]};var _n=function(e){function t(t,n,i,r,o,a,s){var u;return(u=e.call(this,s)||this)[t]=n,u[i]=r,u.index=o,u.count=a,u}return s(t,e),a(t,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),t}(e.Context),Mn=1,Ln=2,Fn=3,In=4,Sn=function(t){function r(){return t.apply(this,arguments)||this}s(r,t);var o=r.prototype;return o.onInit=function(){var t=e.getContext(this),r=t.module,o=t.node,a=o.firstElementChild,s=o.getAttribute("*virtual");o.removeAttribute("*virtual"),o.removeChild(a);var u=this.tokens=this.getExpressionTokens(s);this.virtualFunction=r.makeFunction(u.iterable),this.container=o,this.template=a,this.mode=this.mode||1,this.width=this.width||250,this.gutter=void 0!==this.gutter?this.gutter:20,this.options={top:0,width:this.width,gutter:this.gutter,containerWidth:0,containerHeight:0,cols:[0],strategy:1},this.cachedRects={},this.cachedInstances=[],this.cacheNodes=[],this.items$=new i.BehaviorSubject([]),this.update$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){}))},o.onChanges=function(t){var n=e.getContext(this),i=n.module.resolve(this.virtualFunction,n.parentInstance,this)||[];this.mode=this.mode||1,this.width=this.width||250,this.gutter=void 0!==this.gutter?this.gutter:20,this.options.width=this.width,this.updateView(!0),this.items$.next(i)},o.update$=function(){var e=this;return i.merge(this.scroll$(),this.resize$(),this.items$).pipe(n.map((function(t){var n=e.options,i=e.items$.getValue(),r=i.length;e.container.position="relative";for(var o=0,a=e.getWidth(),s=e.getGutter(a),u=i.filter((function(t,i){var u,l,c,d,h,p=e.cachedRects[i];if(p?(u=p.col,l=p.height,d=p.left):(u=e.getCol(),l=e.getHeight(a,t)),c=n.cols[u],e.intersect(c+n.top,c+l+n.top,0,n.containerHeight)){p||(d=e.getLeft(u,a,s));var f=e.cachedNode(i,i,t,r);return f.style.position="absolute",f.style.top=c+"px",f.style.left=d+"px",f.style.width=a+"px",l!==f.offsetHeight&&(l=f.offsetHeight),h=c+l+n.gutter,o=Math.max(o,h),n.cols[u]=h,p?(p.height=l,p.bottom=h):e.cachedRects[i]={col:u,width:a,height:l,left:d,top:c,bottom:h},!0}return e.removeNode(i),h=c+l+n.gutter,n.cols[u]=h,o=Math.max(o,h),!1})),l=i.length;l<e.cacheNodes.length;)e.removeNode(l),l++;return e.cacheNodes.length=i.length,e.container.style.height=o+"px",u})))},o.getCols=function(){var e=this.options,t=Math.floor((e.containerWidth+e.gutter)/(e.width+e.gutter))||1;return new Array(t).fill(0)},o.getCol=function(){var e,t=this.options;switch(this.mode){case Ln:case Fn:case Mn:e=t.cols.reduce((function(e,t,n,i){return t<i[e]?n:e}),0);break;case In:default:e=0}return e},o.getWidth=function(){var e,t=this.options;switch(this.mode){case Ln:case Fn:e=t.width;break;case Mn:e=(t.containerWidth-(t.cols.length-1)*t.gutter)/t.cols.length;break;case In:default:e=t.containerWidth}return e},o.getHeight=function(e,t){var n,i=this.options;switch(this.mode){case Ln:case Fn:case Mn:n=i.width;break;case In:default:n=80}return n},o.getGutter=function(e){var t,n=this.options;switch(this.mode){case Ln:case Fn:t=n.gutter;break;case Mn:t=(n.containerWidth-n.cols.length*e)/(n.cols.length-1);break;case In:default:t=0}return t},o.getLeft=function(e,t,n){var i,r=this.options;switch(this.mode){case Ln:case Mn:i=e*(t+n);break;case Fn:i=(r.containerWidth-r.cols.length*(t+n)+n)/2+e*(t+n);break;case In:default:i=0}return i},o.cachedNode=function(e,t,n,i){return this.cacheNodes[e]?this.updateNode(e,t,n):this.createNode(e,t,n,i)},o.createNode=function(t,n,i,r){var o=this.template.cloneNode(!0);delete o.rxcompId,this.container.appendChild(o),this.cacheNodes[t]=o;var a=e.getContext(this),s=a.module,u=this.tokens,l=[u.key,n,u.value,i,n,r,a.parentInstance],c=s.makeInstance(o,_n,a.selector,a.parentInstance,l),d=e.getContext(c);return s.compile(o,d.instance),this.cachedInstances[t]=c,o},o.updateNode=function(e,t,n){var i=this.cachedInstances[e],r=this.tokens;return i[r.key]!==t&&(i[r.key]=t,i[r.value]=n,i.pushChanges()),this.cacheNodes[e]},o.removeNode=function(t){this.cachedInstances[t]=void 0;var n=this.cacheNodes[t];if(n){var i=e.getContext(this).module;n.parentNode.removeChild(n),i.remove(n)}return this.cacheNodes[t]=void 0,n},o.intersect=function(e,t,n,i){return n<t&&i>e},o.resize$=function(){var e=this;return i.fromEvent(window,"resize").pipe(n.auditTime(100),n.startWith(null),n.tap((function(){return e.updateView(!0)})))},o.scroll$=function(e){var t=this;return i.fromEvent(window,"scroll").pipe(n.tap((function(){return t.updateView()})))},o.updateView=function(e){var t=this.container.getBoundingClientRect(),n=this.options;n.top=t.top,n.containerWidth=t.width,n.containerHeight=window.innerHeight,n.cols=this.getCols(),e&&(this.cachedRects={})},o.getExpressionTokens=function(e){if(null===e)throw new Error("invalid virtual");if(-1===e.trim().indexOf("let ")||-1===e.trim().indexOf(" of "))throw new Error("invalid virtual");var t=e.split(";").map((function(e){return e.trim()})).filter((function(e){return""!==e})),n=t[0].split(" of ").map((function(e){return e.trim()})),i=n[0].replace(/\s*let\s*/,""),r=n[1],o="index",a=i.match(/\[(.+)\s*,\s*(.+)\]/);if(a&&(o=a[1],i=a[2]),t.length>1){var s=t[1].split(/\s*let\s*|\s*=\s*index/).map((function(e){return e.trim()}));3===s.length&&(o=s[1])}return{key:o,value:i,iterable:r}},r}(e.Structure);Sn.meta={selector:"[*virtual]",inputs:["mode","width","gutter"]};var Tn=function(t){function r(){return t.apply(this,arguments)||this}s(r,t);var o=r.prototype;return o.onInit=function(){var t=this;this.item={};var o=e.getContext(this),a=o.node,s=o.parentInstance;a.classList.add("youtube"),r.MOBILE&&a.classList.add("mobile"),this.progress=a.querySelector(".icon--play-progress path"),this.onPlayerReady=this.onPlayerReady.bind(this),this.onPlayerStateChange=this.onPlayerStateChange.bind(this),this.onPlayerError=this.onPlayerError.bind(this),this.id$=(new i.Subject).pipe(n.distinctUntilChanged()),s instanceof qt&&s.events$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){return t.pause()}))},o.onChanges=function(e){var t=this.youtubeId;this.id$.next(t)},o.initPlayer=function(){this.player$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){console.log("YoutubeComponent.player$",e)})),this.interval$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(){})),this.id$.next(this.youtubeId)},o.player$=function(){var t=this,i=e.getContext(this).node,o=i.querySelector(".video");return this.id$.pipe(n.switchMap((function(e){return r.once$().pipe(n.map((function(n){return t.destroyPlayer(),t.player=new n.Player(o,{width:i.offsetWidth,height:i.offsetHeight,videoId:e,playerVars:{autoplay:1,controls:1,disablekb:1,enablejsapi:1,fs:0,loop:1,modestbranding:1,playsinline:1,rel:0,showinfo:0,iv_load_policy:3,listType:"user_uploads"},events:{onReady:t.onPlayerReady,onStateChange:t.onPlayerStateChange,onPlayerError:t.onPlayerError}}),t.player})))})))},o.onPlayerReady=function(e){e.target.mute(),e.target.playVideo()},o.onPlayerStateChange=function(e){1===e.data?this.playing=!0:this.playing=!1},o.onPlayerError=function(e){console.log("YoutubeComponent.onPlayerError",e)},o.destroyPlayer=function(){this.player&&this.player.destroy()},o.onDestroy=function(){this.destroyPlayer()},o.interval$=function(){var e=this;return i.interval(500).pipe(n.filter((function(){return e.playing&&e.player})),n.tap((function(){e.progress.style.strokeDashoffset=e.player.getCurrentTime()/e.player.getDuration()})))},o.togglePlay=function(){this.playing?this.pause():this.play()},o.play=function(){this.player?this.player.playVideo():this.initPlayer()},o.pause=function(){this.player&&this.player.stopVideo()},r.once$=function(){if(this.youtube$)return this.youtube$;this.youtube$=new i.BehaviorSubject(null).pipe(n.filter((function(e){return null!==e}))),window.onYouTubeIframeAPIReady=this.onYouTubeIframeAPIReady_.bind(this);var e=document.createElement("script"),t=document.querySelectorAll("script"),r=t[t.length-1];return r.parentNode.insertBefore(e,r),e.src="//www.youtube.com/iframe_api",this.youtube$},r.onYouTubeIframeAPIReady_=function(){this.youtube$.next(window.YT)},r.mobilecheck=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},r.mobileAndTabletcheck=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},a(r,[{key:"playing",get:function(){return this.playing_},set:function(e){this.playing_!==e&&(this.playing_=e,this.pushChanges())}},{key:"cover",get:function(){return this.youtubeId?"//i.ytimg.com/vi/"+this.youtubeId+"/maxresdefault.jpg":""}}]),r}(e.Component);Tn.MOBILE=Tn.mobileAndTabletcheck(),Tn.meta={selector:"[youtube]",inputs:["youtubeId","title"]};var Pn=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t}(e.Module);Pn.meta={imports:[e.CoreModule,t.FormModule],declarations:[R,B,H,G,Je,Ke,et,tt,nt,it,it,rt,ot,at,W,Se,Pe,Oe,st,We,Be,Ge,Ze,ht,pt,ft,vt,kt,Ct,xt,$t,Dt,Et,_t,Tt,St,Pt,jt,Nt,Rt,qt,Ut,zt,Vt,Ht,Gt,Wt,Yt,Zt,Sn,Qt,En,Tn],bootstrap:u},e.Browser.bootstrap(Pn)}));
//# sourceMappingURL=main.min.js.map