{"version":3,"sources":["src/js/main.js","../../src/js/app.component.js","../../src/js/environment/environment.js","../../src/js/http/http.service.js","../../src/js/api/api.service.js","../../src/js/local-storage/local-storage.service.js","../../src/js/favourite/favourite.service.js","../../src/js/modal/modal.service.js","../../src/js/user/user.service.js","../../src/js/question/question.service.js","../../src/js/event/fake-filters.js","../../src/js/event/event.service.js","../../src/js/channel/channel.service.js","../../src/js/location/location.service.js","../../src/js/page/page.component.js","../../src/js/aside/aside.component.js","../../src/js/filter/filter-item.js","../../src/js/filter/filter.service.js","../../src/js/channel/channel-page.component.js","../../src/js/channel/channel.component.js","../../src/js/click-outside/click-outside.directive.js","../../src/js/count/count.pipe.js","../../src/js/locale/locale.service.js","../../src/js/date/date-time.service.js","../../src/js/date/date.pipe.js","../../src/js/dropdown/dropdown.directive.js","../../src/js/dropdown/dropdown-item.directive.js","../../src/js/event/event-date.component.js","../../src/js/event/event-page.component.js","../../src/js/event/event.component.js","../../src/js/favourite/favourite-page.component.js","../../src/js/forms/control.component.js","../../src/js/forms/control-checkbox.component.js","../../src/js/keyboard/keyboard.service.js","../../src/js/forms/control-custom-select.component.js","../../src/js/forms/control-email.component.js","../../src/js/forms/control-file.component.js","../../src/js/forms/control-password.component.js","../../src/js/forms/control-radio.component.js","../../src/js/forms/control-select.component.js","../../src/js/forms/control-text.component.js","../../src/js/forms/control-textarea.component.js","../../src/js/forms/errors.component.js","../../src/js/css/css.service.js","../../src/js/notification/notification.service.js","../../src/js/header/header.component.js","../../src/js/html/html.pipe.js","../../src/js/index/index-page.component.js","../../src/js/label/label.pipe.js","../../src/js/image/image.service.js","../../src/js/intersection/intersection.service.js","../../src/js/lazy/lazy.cache.js","../../src/js/lazy/lazy.directive.js","../../src/js/modal/modal-outlet.component.js","../../src/js/modal/modal.component.js","../../src/js/notification/notification.component.js","../../src/js/picture/picture.pipe.js","../../src/js/register-or-login/register-or-login.modal.js","../../src/js/relative-date/factory.js","../../src/js/relative-date/translations.js","../../src/js/relative-date/tiny-relative-date.js","../../src/js/relative-date/relative-date.pipe.js","../../src/js/relative-date/relative-date.component.js","../../src/js/scroll-to/scroll-to.directive.js","../../src/js/download/download.service.js","../../src/js/secure/secure.directive.js","../../src/js/share/share.component.js","../../src/js/slug/slug.pipe.js","../../src/js/swiper/swiper.directive.js","../../src/js/swiper/swiper-events.directive.js","../../src/js/swiper/swiper-related.directive.js","../../src/js/swiper/swiper-slides.directive.js","../../src/js/swiper/swiper-top-events.directive.js","../../src/js/thron/thron.component.js","../../src/js/user/user-forgot.component.js","../../src/js/user/user-signin.component.js","../../src/js/forms/required-if.validator.js","../../src/js/user/user-signup.component.js","../../src/js/gtm/gtm.service.js","../../src/js/video/video.component.js","../../src/js/vimeo/vimeo.component.js","../../src/js/virtual/virtual.item.js","../../src/js/virtual/virtual.structure.js","../../src/js/youtube/youtube.component.js","../../src/js/app.module.js","../../src/js/main.js"],"names":["g","f","exports","module","require","define","amd","globalThis","self","rxcomp","form","rxjs","operators","Swiper","this","rxcompForm","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_inheritsLoose","subClass","superClass","create","constructor","__proto__","hasOwnProperty","call","AppComponent","_Component","apply","arguments","_proto","onInit","getContext","node","classList","remove","asideActive","onAsideToggle","$event","add","onNotificationToggle","Component","meta","selector","NODE","HEROKU","document","querySelector","getAttribute","window","location","host","indexOf","STATIC","port","DEVELOPMENT","split","ENV","NAME","PRODUCTION","RESOURCE","STATIC_RESOURCE","API","STATIC_API","getApiUrl","url","useStatic","HttpResponse","response","data","status","statusText","ok","redirected","get","HttpService","http$","method","format","_this","response_","from","fetch","headers","Accept","Content-Type","body","JSON","stringify","undefined","then","json","Promise","resolve","reject","pipe","catchError","error","throwError","getError","get$","query","delete$","post$","put$","patch$","statusMessage","assign","statusCode","friendlyMessage","ApiService","_HttpService","staticGet$","staticDelete$","staticPost$","staticPut$","staticPatch$","LocalStorageService","delete","name","isLocalStorageSupported","localStorage","removeItem","exist","value","parse","e","console","log","set","cache","push","setItem","supported","subscriptions$_","BehaviorSubject","likes$_","favourites$_","FavouriteService","getCurrentSubscriptions","getValue","getCurrentLikes","getCurrentFavourites","subscriptions$","map","EventService","mapEvents","static","switchMap","subscriptions","next","likes$","likes","favourites$","favourites","subscriptionAdd$","id","find","x","unshift","subscriptionRemove$","item","index","splice","likeAdd$","type","likeRemove$","favouriteAdd$","favouriteRemove$","sharedSubscriptions$","shareReplay","sharedLikes$","sharedFavourites$","ModalEvent","ModalResolveEvent","_ModalEvent","ModalRejectEvent","_ModalEvent2","ModalService","open$","modal","getTemplate$","src","template","getNode","tap","modal$","events$","load$","text","div","createElement","innerHTML","firstElementChild","Subject","User","firstName","substr","toUpperCase","lastName","UserService","getCurrentUser","user$_","setUser","user","me$","mapUser","of","changed$","sharedMe$","distinctUntilChanged","a","b","authorized$","_this2","view","event","register$","payload","_this3","login$","_this4","thron","thronClientId","_ta","initTracker","loginAs","loginType","loginValue","contactName","success","logout$","_this5","forgot$","update$","_this6","mapStatic__","isStatic","action","fake","mapUsers","users","sharedChanged$","Question","creationDate","Date","QuestionService","mapQuestion","question","mapQuestions","questions","now","setSeconds","getSeconds","setMinutes","getMinutes","setHours","getHours","setDate","getDate","Math","floor","random","FAKE_FILTERS","label","options","Event","info","startDate","started","endDate","ended","related","diff","hoursDiff","detail$","eventId","parseInt","mapEvent","listing$","mapListing","filter$","top$","upcoming$","subscribe$","unsubscribe$","like$","unlike$","postQuestion$","events","items","fakeListing","mediaTypes","letters","channelId","channel","channelIndex","subscribers","media","picture","width","height","getTime","subscription","subscribed","like","liked","favourite","saved","features","forEach","filter","live","incoming","past","channel_","info_","image_","category_","event_","title","abstract","picture_","category","product_","magazine_","download_","Array","fill","categoryId","fakeSaved","Channel","ChannelService","channels$","mapChannels","mapChannel","channels","sharedChannels$","LocationService","URLSearchParams","search","keyOrValue","params","replace","history","pushState","href","toString","deserialize","encoded","decode","serialize","encode","decoded","atob","btoa","PageComponent","AsideComponent","_PageComponent","takeUntil","subscribe","pushChanges","FilterMode","FilterItem","change$","mode","placeholder","values","match","getSelectedOption","has","getLabel","selectedOption","first","toggle","toggleActive","active","FilterService","initialParams","callback","filters","keys","getParamsCount","reduce","p","c","locationParams","any","items$","changes","updateFilterStates","merge","auditTime","filterItems","skipFilter","initialCount","filteredItems","option","count","disabled","sort","ChannelPageComponent","grid","gutter","listing","secondaryFiltersVisible","secondaryFilters","activeFilters","setFilters","startFilter","combineLatest","filterObject","filterService","tags","setTimeout","o","toggleGrid","toggleFilters","ChannelComponent","toggleSubscribe","flag","idDoc","toggleLike","inputs","ClickOutsideDirective","_Directive","initialFocus","_getContext","parentInstance","event$","fromEvent","contains","expression","outputFunction","makeFunction","clickOutside$","Directive","CountPipe","_Pipe","isNumber","isFinite","transform","Pipe","LocaleType","LocaleStyle","LocaleLength","LocaleDay","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","LocaleMonth","January","February","March","April","May","June","July","August","September","October","November","December","LocaleDayPeriod","LocaleEra","LocaleNumberSymbol","LocaleService","getLocale","locale","defaultLocale","slice","join","getObjectLocale","toLocaleString","out","_len","args","_key","concat","toLocaleObject","dateFormats","short","medium","long","full","timeFormats","dayPeriods","narrow","am","pm","abbreviated","wide","days","sunday","monday","tuesday","wednesday","thursday","friday","saturday","months","january","february","march","april","may","june","july","august","september","october","november","december","eras","bc","ad","numberSymbols","decimal","group","list","percentSign","plusSign","minusSign","exponential","superscriptingExponent","perMille","infinite","nan","timeSeparator","TimezoneLength","DatePart","padNumber","num","digits","trim","negWrap","neg","strNum","String","FORMAT_SPLITTER_REGEX","DateTimeService","getDatePart","part","date","getFullYear","getMonth","getDay","getMilliseconds","Error","formatMilliseconds","milliseconds","getDateFormatter","offset","localeMinus","getDateTranslation","extended","currentHours","getDateLocaleFormatter","getWeekFirstThursdayOfYear","year","firstDayOfYear","THURSDAY","getWeekThursday","datetime","getWeekFormatter","monthBased","result","nbDaysBefore1stDayOfMonth","today","firstThurs","round","getTimezoneFormatter","zone","hours","ceil","abs","getFormatter","formatter","FormStyle","Standalone","Format","setTimezoneOffset","timezone","fallback","requestedTimezoneOffset","isNaN","dateTimezoneToLocal","reverse","reverseValue","dateTimezoneOffset","getTimezoneOffset","minutes","parseDate","getNamedFormat","formatValue","formatDate","formats","exec","pop","DatePipe","DROPDOWN_ID","DropdownDirective","trigger","opened","onClick","bind","onDocumentClick","openDropdown","closeDropdown","addListeners","dropdown$","addDocumentListeners","dropped","removeDocumentListeners","addEventListener","removeListeners","removeEventListener","onDestroy","nextId","dropdown","id_","outputs","DropdownItemDirective","EventDateMode","SECOND","MINUTE","HOUR","to10","EventDateComponent","getMode","mode_","eventDate","countdown","live$","interval","startWith","hh","mm","ss","change","EventPageComponent","inputActive","FormGroup","FormControl","Validators","RequiredValidator","checkRequest","antiforgery","checkField","changes$","onChange","toggleSave","_this7","toggleShare","sharing","onInputFocus","inputFocus","onInputBlur","postQuestion","_this8","valid","submitted","controls","touched","EventComponent","ViewModes","FavouritePageComponent","savedItems","likedItems","viewMode_","viewMode","ControlComponent","onChanges","flags","control","ControlCheckboxComponent","_ControlComponent","KeyboardService","keydown$","keyup$","typing$","to","typing","key$","clearTimeout","regexp","ControlCustomSelectComponent","labels","dropdownId","word","scrollToWord","toLowerCase","navDropdown","children","scrollTo","offsetTop","setOption","isMultiple","hasOption","onDropped","v","select","multiple","ControlEmailComponent","ControlFileComponent","file","required","onReaderComplete","onInputDidChange","files","lastModified","lastModifiedDate","size","reader","FileReader","readAsDataURL","content","ControlPasswordComponent","ControlRadioComponent","ControlSelectComponent","ControlTextComponent","setAttribute","ControlTextareaComponent","ErrorsComponent","CssService","height$","style","documentElement","innerHeight","vh","setProperty","notifications$_","NotificationService","getCurrentNotifications","notifications$","sharedNotifications$","HeaderComponent","notifications","doLogout","retUrl","toggleAside","aside_","aside","dismissAside","toggleNotification","notification_","notification","dismissNotification","submenu","HtmlPipe","m","n","fromCharCode","unescapes","rx","RegExp","IndexPageComponent","topEvents","topChannels","upcomingEvents","LABELS","cancel","error_email","error_match","error_required","loading","LabelPipe","UID","ImageService","worker","worker_","Worker","isBlob","postMessage","URL","createObjectURL","blob","finalize","revokeObjectURL","isCors","IntersectionService","observer","observer_","readySubject_","observerSubject_","IntersectionObserver","entries","intersection$","observe","entry","unobserve","isIntersecting","firstIntersection$","LazyCache","cache_","LazyDirective","input$","input","lazy$","lazy","ModalOutletComponent","modalNode","onRegister","onLogin","modal_","removeChild","appendChild","compile","ModalComponent","close","NotificationComponent","PicturePipe","_value$picture","RegisterOrLoginModal","views","SIGN_IN","SIGN_UP","FORGOTTEN","hasAttribute","onForgot","onSignIn","onSignUp","onForgottenSent","email","calculateDelta","relativeDateFactory","translations","delta","hour","minute","day","week","month","translate","translatePhrase","timeValue","translation","relativeDate","justNow","secondsAgo","aMinuteAgo","minutesAgo","anHourAgo","hoursAgo","aDayAgo","daysAgo","aWeekAgo","weeksAgo","aMonthAgo","monthsAgo","aYearAgo","yearsAgo","overAYearAgo","secondsFromNow","aMinuteFromNow","minutesFromNow","anHourFromNow","hoursFromNow","aDayFromNow","daysFromNow","aWeekFromNow","weeksFromNow","aMonthFromNow","monthsFromNow","aYearFromNow","yearsFromNow","overAYearFromNow","RELATIVE_DATE_KEYS","RelativeDatePipe","setLocale","RelativeDateDirective","text_","innerText","ScrollToDirective","scrollTo$","_getContext2","currentTop","getBoundingClientRect","top","pow","html","gsap","scroll-behavior","ease","Quad","easeOut","overwrite","onUpdate","onComplete","pageYOffset","scrollTop","DownloadService","download","fileName","click","a_","SecureDirective","preventDefault","tryDownloadHref","ShareComponent","getTitle","encodeURI","getUrl","origin","encodeURIComponent","charCodeAt","SlugPipe","SwiperDirective","rxcompId","slidesPerView","spaceBetween","centeredSlides","speed","autoplay","delay","keyboardControl","mousewheelControl","pagination","el","clickable","navigation","nextEl","prevEl","keyboard","enabled","onlyInViewport","init_","onView","swiperInitOrUpdate_","removeListeners_","swiperDestroy_","onBeforePrint","slideToIndex","swiper","slideTo","opacity","on","slideChange","activeIndex","addListeners_","update","init","swiperDirectiveInit","Power2","element","scope","_opening","destroy","openMore","more","matchMedia","matches","SwiperEventsDirective","_SwiperDirective","breakpoints","1024","1440","loopAdditionalSlides","SwiperRelatedDirective","loop","SwiperSlidesDirective","SwiperTopEventsDirective","768","1920","2440","ThronComponent","THRON","THRONContentExperience","THRONPlayer","registerSkin","splitted","player","muted","displayLinked","noSkin","preloadColor","waveColor","waveProgressColor","onBeforeInit","onReady","onCanPlay","onPlaying","playerInstance","removedElements","schema","THRONSchemaHelper","getSchema","removeElementsById","getElementsById","coordinates","bars","mediaContainer","ready","canPlay","off","qualities","qualityLevels","highestQuality","currentQuality","complete","play","playing","pause","wseThronPlugin","dom","otherparams","jquery","$","plugin","UserForgotComponent","EmailValidator","test","patch","reset","onSubmit","sent","login","register","UserSigninComponent","password","signIn","forgot","UserSignupComponent","condition","roles","countries","idstato","provinces","newsletterLanguages","company","role","country","province","address","zipCode","city","telephone","fax","passwordConfirm","MatchValidator","privacy","RequiredTrueValidator","newsletter","newsletterLanguage","FormValidator","Boolean","countryId","Lingua","fieldName","field","countryId_","hidden","GtmService","dataLayer","push_","VideoComponent","video","progress","onPlay","onPause","onEnded","onTimeUpdate","togglePlay","paused","video_name","strokeDashoffset","currentTime","duration","playing_","VimeoComponent","vimeo","background","VirtualItem","$key","$value","_Context","even","Context","VirtualMode","VirtualStructure","_Structure","removeAttribute","tokens","getExpressionTokens","virtualFunction","iterable","container","containerWidth","containerHeight","cols","strategy","cachedRects","cachedInstances","cacheNodes","visibleItems","context","updateView","scroll$","resize$","datas","total","position","highestHeight","getWidth","getGutter","col","left","bottom","rect","getCol","getHeight","intersect","getLeft","cachedNode","offsetHeight","max","removeNode","removeIndex","getCols","updateNode","createNode","clonedNode","cloneNode","instance","makeInstance","forItemContext","parentNode","top1","bottom1","top2","bottom2","expressions","virtualExpressions","keyValueMatches","indexExpressions","Structure","YoutubeComponent","MOBILE","onPlayerReady","onPlayerStateChange","onPlayerError","id$","youtubeId","initPlayer","player$","interval$","once$","youtube","destroyPlayer","Player","offsetWidth","videoId","playerVars","disablekb","enablejsapi","fs","modestbranding","playsinline","rel","showinfo","iv_load_policy","listType","onStateChange","mute","playVideo","getCurrentTime","getDuration","stopVideo","youtube$","onYouTubeIframeAPIReady","onYouTubeIframeAPIReady_","script","scripts","querySelectorAll","last","insertBefore","YT","mobilecheck","check","navigator","userAgent","vendor","opera","mobileAndTabletcheck","AppModule","_Module","Module","imports","CoreModule","FormModule","declarations","bootstrap","Browser"],"mappings":"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","file":"docs\\js\\main.min.js","sourcesContent":[null,"import { Component, getContext } from 'rxcomp';\r\n\r\nexport default class AppComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('wse__hidden');\r\n\t\tthis.asideActive = false;\r\n\t}\r\n\r\n\t// onView() { const context = getContext(this); }\r\n\r\n\t// onChanges() {}\r\n\r\n\t// onDestroy() {}\r\n\r\n\tonAsideToggle($event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tif ($event) {\r\n\t\t\tnode.classList.add('wse__aside--active');\r\n\t\t\tnode.classList.remove('wse__notification--active');\r\n\t\t} else {\r\n\t\t\tnode.classList.remove('wse__aside--active');\r\n\t\t}\r\n\t\t/*\r\n\t\tthis.asideActive = $event;\r\n\t\tthis.pushChanges();\r\n\t\t*/\r\n\t}\r\n\r\n\tonNotificationToggle($event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tif ($event) {\r\n\t\t\tnode.classList.add('wse__notification--active');\r\n\t\t\tnode.classList.remove('wse__aside--active');\r\n\t\t} else {\r\n\t\t\tnode.classList.remove('wse__notification--active');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nAppComponent.meta = {\r\n\tselector: '[app-component]',\r\n};\r\n","export const NODE = (typeof module !== 'undefined' && module.exports);\r\nexport const BASE_HREF = NODE ? null : document.querySelector('base').getAttribute('href');\r\nexport const HEROKU = NODE ? false : (window && window.location.host.indexOf('herokuapp') !== -1);\r\nexport const STATIC = NODE ? false : (HEROKU || (window && (window.location.port === '40431' || window.location.port === '5000' || window.location.port === '6443' || window.location.host === 'actarian.github.io')));\r\nexport const DEVELOPMENT = NODE ? false : (window && ['localhost', '127.0.0.1', '0.0.0.0'].indexOf(window.location.host.split(':')[0]) !== -1);\r\nexport const PRODUCTION = !DEVELOPMENT;\r\nexport const ENV = {\r\n\tNAME: 'ws-events',\r\n\tSTATIC,\r\n\tDEVELOPMENT,\r\n\tPRODUCTION,\r\n\tRESOURCE: '/Modules/Events/Client/docs/',\r\n\tSTATIC_RESOURCE: './',\r\n\tAPI: '/api',\r\n\tSTATIC_API: (DEVELOPMENT && !STATIC) ? '/Modules/Events/Client/docs/api' : './api',\r\n};\r\nexport function getApiUrl(url, useStatic) {\r\n\tconst base = (useStatic || STATIC) ? ENV.STATIC_API : ENV.API;\r\n\tconst json = (useStatic || STATIC) ? '.json' : '';\r\n\treturn `${base}${url}${json}`;\r\n}\r\nexport function getResourceRoot() {\r\n\treturn STATIC ? ENV.STATIC_RESOURCE : ENV.RESOURCE;\r\n}\r\nexport function getSlug(url) {\r\n\tif (!url) {\r\n\t\treturn url;\r\n\t}\r\n\tif (url.indexOf(`/${ENV.NAME}`) !== 0) {\r\n\t\treturn url;\r\n\t}\r\n\tif (STATIC) {\r\n\t\t// console.log(url);\r\n\t\treturn url;\r\n\t}\r\n\turl = url.replace(`/${ENV.NAME}`, '');\r\n\turl = url.replace('.html', '');\r\n\treturn `/it/it${url}`;\r\n}\r\n","import { from, throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\n\r\nexport class HttpResponse {\r\n\r\n\tget static() {\r\n\t\treturn this.url.indexOf('.json') === this.url.length - 5;\r\n\t}\r\n\r\n\tconstructor(response) {\r\n\t\tthis.data = null;\r\n\t\tif (response) {\r\n\t\t\tthis.url = response.url;\r\n\t\t\tthis.status = response.status;\r\n\t\t\tthis.statusText = response.statusText;\r\n\t\t\tthis.ok = response.ok;\r\n\t\t\tthis.redirected = response.redirected;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default class HttpService {\r\n\r\n\tstatic http$(method, url, data, format = 'json') {\r\n\t\tmethod = url.indexOf('.json') !== -1 ? 'GET' : method;\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tlet response_ = null;\r\n\t\treturn from(fetch(url, {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: methods.indexOf(method) !== -1 ? JSON.stringify(data) : undefined\r\n\t\t}).then((response) => {\r\n\t\t\tresponse_ = new HttpResponse(response);\r\n\t\t\treturn response[format]().then(json => {\r\n\t\t\t\tresponse_.data = json;\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\treturn Promise.resolve(response_);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(response_);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t/*\r\n\t\t\tif (response.ok) {\r\n\t\t\t\treturn response[format]();\r\n\t\t\t} else {\r\n\t\t\t\treturn response.json().then(json => {\r\n\t\t\t\t\treturn Promise.reject(json);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => throwError(this.getError(error, response_)))\r\n\t\t\t// catchError(error => from(Promise.reject(this.getError(error, response_))))\r\n\t\t);\r\n\t}\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\tconst query = this.query(data);\r\n\t\treturn this.http$('GET', `${url}${query}`, undefined, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn this.http$('DELETE', url);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn this.http$('POST', url, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn this.http$('PUT', url, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn this.http$('PATCH', url, data);\r\n\t}\r\n\r\n\tstatic query(data) {\r\n\t\treturn ''; // todo\r\n\t}\r\n\r\n\tstatic getError(error, response) {\r\n\t\terror = typeof error === 'string' ? { statusMessage: error } : error;\r\n\t\tconst data = error.data || response.data;\r\n\t\tif (typeof data === 'object') {\r\n\t\t\tObject.assign(error, data);\r\n\t\t}\r\n\t\tif (!error.statusCode) {\r\n\t\t\terror.statusCode = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusMessage) {\r\n\t\t\terror.statusMessage = response ? response.statusText : 'Unknown Error';\r\n\t\t}\r\n\t\tif (!error.friendlyMessage) {\r\n\t\t\terror.friendlyMessage = 'Unknown Error';\r\n\t\t}\r\n\t\t// console.log('HttpService.getError', error, response);\r\n\t\treturn error;\r\n\t}\r\n\r\n}\r\n","import { getApiUrl } from '../environment/environment';\r\nimport HttpService from '../http/http.service';\r\n\r\nexport default class ApiService extends HttpService {\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\treturn super.get$(getApiUrl(url), data, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn super.delete$(getApiUrl(url));\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn super.post$(getApiUrl(url), data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn super.put$(getApiUrl(url), data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn super.patch$(getApiUrl(url), data);\r\n\t}\r\n\r\n\tstatic staticGet$(url, data, format) {\r\n\t\treturn super.get$(getApiUrl(url, true), data, format);\r\n\t}\r\n\r\n\tstatic staticDelete$(url) {\r\n\t\treturn super.delete$(getApiUrl(url, true));\r\n\t}\r\n\r\n\tstatic staticPost$(url, data) {\r\n\t\treturn super.post$(getApiUrl(url, true), data);\r\n\t}\r\n\r\n\tstatic staticPut$(url, data) {\r\n\t\treturn super.put$(getApiUrl(url, true), data);\r\n\t}\r\n\r\n\tstatic staticPatch$(url, data) {\r\n\t\treturn super.patch$(getApiUrl(url, true), data);\r\n\t}\r\n\r\n}\r\n","export default class LocalStorageService {\r\n\r\n\tstatic delete(name) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\twindow.localStorage.removeItem(name);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic exist(name) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\treturn window.localStorage[name] !== undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic get(name) {\r\n\t\tlet value = null;\r\n\t\tif (this.isLocalStorageSupported() && window.localStorage[name] !== undefined) {\r\n\t\t\ttry {\r\n\t\t\t\tvalue = JSON.parse(window.localStorage[name]);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('LocalStorageService.get.error parsing', name, e);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tstatic set(name, value) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\ttry {\r\n\t\t\t\tconst cache = [];\r\n\t\t\t\tconst json = JSON.stringify(value, function(key, value) {\r\n\t\t\t\t\tif (typeof value === 'object' && value !== null) {\r\n\t\t\t\t\t\tif (cache.indexOf(value) !== -1) {\r\n\t\t\t\t\t\t\t// Circular reference found, discard key\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcache.push(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t});\r\n\t\t\t\twindow.localStorage.setItem(name, json);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('LocalStorageService.set.error serializing', name, value, e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic isLocalStorageSupported() {\r\n\t\tif (this.supported) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tlet supported = false;\r\n\t\ttry {\r\n\t\t\tsupported = 'localStorage' in window && window.localStorage !== null;\r\n\t\t\tif (supported) {\r\n\t\t\t\twindow.localStorage.setItem('test', '1');\r\n\t\t\t\twindow.localStorage.removeItem('test');\r\n\t\t\t} else {\r\n\t\t\t\tsupported = false;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tsupported = false;\r\n\t\t}\r\n\t\tthis.supported = supported;\r\n\t\treturn supported;\r\n\t}\r\n\r\n}\r\n","import { BehaviorSubject } from 'rxjs';\r\nimport { map, shareReplay, switchMap } from 'rxjs/operators';\r\nimport ApiService from '../api/api.service';\r\nimport EventService from '../event/event.service';\r\nimport LocalStorageService from '../local-storage/local-storage.service';\r\n\r\nconst subscriptions$_ = new BehaviorSubject([]);\r\nconst likes$_ = new BehaviorSubject([]);\r\nconst favourites$_ = new BehaviorSubject([]);\r\n\r\nexport default class FavouriteService {\r\n\r\n\tstatic getCurrentSubscriptions() {\r\n\t\treturn subscriptions$_.getValue();\r\n\t}\r\n\r\n\tstatic getCurrentLikes() {\r\n\t\treturn likes$_.getValue();\r\n\t}\r\n\r\n\tstatic getCurrentFavourites() {\r\n\t\treturn favourites$_.getValue();\r\n\t}\r\n\r\n\tstatic subscriptions$() {\r\n\t\treturn ApiService.get$(`/user/subscription`).pipe(\r\n\t\t\tmap(response => EventService.mapEvents(response.data, response.static)),\r\n\t\t\t//map(response => {\r\n\t\t\t//\tif (response.static) {\r\n\t\t\t//\t\tconst subscriptions = LocalStorageService.get('subscriptions') || [];\r\n\t\t\t//\t\treturn EventService.fakeSaved(subscriptions);\r\n\t\t\t//\t} else {\r\n\t\t\t//\t\treturn response.data;\r\n\t\t\t//\t}\r\n\t\t\t//}),\r\n\t\t\tswitchMap(subscriptions => {\r\n\t\t\t\tsubscriptions$_.next(subscriptions);\r\n\t\t\t\treturn subscriptions$_;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic likes$() {\r\n\t\treturn ApiService.get$(`/user/like`).pipe(\r\n\t\t\tmap(response => EventService.mapEvents(response.data, response.static)),\r\n\t\t\t//map(response => {\r\n\t\t\t//\tif (response.static) {\r\n\t\t\t//\t\tconst likes = LocalStorageService.get('likes') || [];\r\n\t\t\t//\t\treturn EventService.fakeSaved(likes);\r\n\t\t\t//\t} else {\r\n\t\t\t//\t\treturn response.data;\r\n\t\t\t//\t}\r\n\t\t\t//}),\r\n\t\t\tswitchMap(likes => {\r\n\t\t\t\tlikes$_.next(likes);\r\n\t\t\t\treturn likes$_;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic favourites$() {\r\n\t\treturn ApiService.get$(`/user/favourite`).pipe(\r\n\t\t\tmap(response => EventService.mapEvents(response.data, response.static)),\r\n\t\t\t//map(response => {\r\n\t\t\t//\tif (response.static) {\r\n\t\t\t//\t\tconst favourites = LocalStorageService.get('favourites') || [];\r\n\t\t\t//\t\treturn EventService.fakeSaved(favourites);\r\n\t\t\t//\t} else {\r\n\t\t\t//\t\treturn response.data;\r\n\t\t\t//\t}\r\n\t\t\t//}),\r\n\t\t\tswitchMap(favourites => {\r\n\t\t\t\tfavourites$_.next(favourites);\r\n\t\t\t\treturn favourites$_;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic subscriptionAdd$(id) {\r\n\t\treturn ApiService.post$(`/user/subscription/add`, { id }).pipe(\r\n\t\t\tmap(response => {\r\n\t\t\t\tif (response.static) {\r\n\t\t\t\t\tconst subscriptions = LocalStorageService.get('subscriptions') || [];\r\n\t\t\t\t\tconst item = subscriptions.find(x => x.id === id);\r\n\t\t\t\t\tif (!item) {\r\n\t\t\t\t\t\tsubscriptions.unshift({ id });\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsubscriptions$_.next(subscriptions);\r\n\t\t\t\t\tLocalStorageService.set('subscriptions', subscriptions);\r\n\t\t\t\t}\r\n\t\t\t\treturn response.data;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic subscriptionRemove$(id) {\r\n\t\treturn ApiService.post$(`/user/subscription/remove`, { id }).pipe(\r\n\t\t\tmap(response => {\r\n\t\t\t\tif (response.static) {\r\n\t\t\t\t\tconst subscriptions = LocalStorageService.get('subscriptions') || [];\r\n\t\t\t\t\tconst item = subscriptions.find(x => x.id === id);\r\n\t\t\t\t\tconst index = item ? subscriptions.indexOf(item) : -1;\r\n\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\tsubscriptions.splice(index, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsubscriptions$_.next(subscriptions);\r\n\t\t\t\t\tLocalStorageService.set('subscriptions', subscriptions);\r\n\t\t\t\t}\r\n\t\t\t\treturn response.data;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic likeAdd$(id, type) {\r\n\t\treturn ApiService.post$(`/user/like/add`, { id, type }).pipe(\r\n\t\t\tmap(response => {\r\n\t\t\t\tif (response.static) {\r\n\t\t\t\t\tconst likes = LocalStorageService.get('likes') || [];\r\n\t\t\t\t\tconst item = likes.find(x => x.id === id);\r\n\t\t\t\t\tif (!item) {\r\n\t\t\t\t\t\tlikes.unshift({ id });\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlikes$_.next(likes);\r\n\t\t\t\t\tLocalStorageService.set('likes', likes);\r\n\t\t\t\t}\r\n\t\t\t\treturn response.data;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic likeRemove$(id, type) {\r\n\t\treturn ApiService.post$(`/user/like/remove`, { id, type }).pipe(\r\n\t\t\tmap(response => {\r\n\t\t\t\tif (response.static) {\r\n\t\t\t\t\tconst likes = LocalStorageService.get('likes') || [];\r\n\t\t\t\t\tconst item = likes.find(x => x.id === id);\r\n\t\t\t\t\tconst index = item ? likes.indexOf(item) : -1;\r\n\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\tlikes.splice(index, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlikes$_.next(likes);\r\n\t\t\t\t\tLocalStorageService.set('likes', likes);\r\n\t\t\t\t}\r\n\t\t\t\treturn response.data;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic favouriteAdd$(id) {\r\n\t\treturn ApiService.post$(`/user/favourite/add`, { id }).pipe(\r\n\t\t\tmap(response => {\r\n\t\t\t\t//if (response.static) {\r\n\t\t\t\tconst favourites = LocalStorageService.get('favourites') || [];\r\n\t\t\t\tconst item = favourites.find(x => x.id === id);\r\n\t\t\t\tif (!item) {\r\n\t\t\t\t\tfavourites.unshift({ id });\r\n\t\t\t\t}\r\n\t\t\t\tfavourites$_.next(favourites);\r\n\t\t\t\tLocalStorageService.set('favourites', favourites);\r\n\t\t\t\t//}\r\n\t\t\t\treturn response.data;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic favouriteRemove$(id) {\r\n\t\treturn ApiService.post$(`/user/favourite/remove`, { id }).pipe(\r\n\t\t\tmap(response => {\r\n\t\t\t\t//if (response.static) {\r\n\t\t\t\tconst favourites = LocalStorageService.get('favourites') || [];\r\n\t\t\t\tconst item = favourites.find(x => x.id === id);\r\n\t\t\t\tconst index = item ? favourites.indexOf(item) : -1;\r\n\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\tfavourites.splice(index, 1);\r\n\t\t\t\t}\r\n\t\t\t\tfavourites$_.next(favourites);\r\n\t\t\t\tLocalStorageService.set('favourites', favourites);\r\n\t\t\t\t//}\r\n\t\t\t\treturn response.data;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nFavouriteService.sharedSubscriptions$ = FavouriteService.subscriptions$().pipe(shareReplay(1));\r\nFavouriteService.sharedLikes$ = FavouriteService.likes$().pipe(shareReplay(1));\r\nFavouriteService.sharedFavourites$ = FavouriteService.favourites$().pipe(shareReplay(1));\r\n","import { from, Subject } from 'rxjs';\r\nimport { map, switchMap, tap } from 'rxjs/operators';\r\n\r\nexport class ModalEvent {\r\n\r\n\tconstructor(data) {\r\n\t\tthis.data = data;\r\n\t}\r\n\r\n}\r\n\r\nexport class ModalResolveEvent extends ModalEvent {}\r\nexport class ModalRejectEvent extends ModalEvent {}\r\n\r\nexport default class ModalService {\r\n\r\n\tstatic open$(modal) {\r\n\t\treturn this.getTemplate$(modal.src).pipe(\r\n\t\t\tmap(template => {\r\n\t\t\t\treturn { node: this.getNode(template), data: modal.data, modal: modal };\r\n\t\t\t}),\r\n\t\t\ttap(node => this.modal$.next(node)),\r\n\t\t\tswitchMap(node => this.events$),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic load$(modal) {\r\n\r\n\t}\r\n\r\n\tstatic getTemplate$(url) {\r\n\t\treturn from(fetch(url).then(response => {\r\n\t\t\treturn response.text();\r\n\t\t}));\r\n\t}\r\n\r\n\tstatic getNode(template) {\r\n\t\tconst div = document.createElement(\"div\");\r\n\t\tdiv.innerHTML = template;\r\n\t\tconst node = div.firstElementChild;\r\n\t\treturn node;\r\n\t}\r\n\r\n\tstatic reject(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalRejectEvent(data));\r\n\t}\r\n\r\n\tstatic resolve(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalResolveEvent(data));\r\n\t}\r\n\r\n}\r\n\r\nModalService.modal$ = new Subject();\r\nModalService.events$ = new Subject();\r\n","import { BehaviorSubject, of , throwError } from 'rxjs';\r\nimport { catchError, distinctUntilChanged, map, shareReplay, switchMap, tap } from 'rxjs/operators';\r\nimport ApiService from '../api/api.service';\r\nimport { STATIC } from '../environment/environment';\r\nimport LocalStorageService from '../local-storage/local-storage.service';\r\nimport ModalService, { ModalResolveEvent } from '../modal/modal.service';\r\n\r\nconst src = STATIC ? '/ws-events/register-or-login-modal.html' : '/Viewdoc.cshtml?co_id=23649';\r\n\r\nexport class User {\r\n\tget avatar() {\r\n\t\treturn (this.firstName || '?').substr(0, 1).toUpperCase() + (this.lastName || '?').substr(0, 1).toUpperCase();\r\n\t}\r\n\r\n\tget fullName() {\r\n\t\treturn this.firstName + ' ' + this.lastName;\r\n\t}\r\n\r\n\tconstructor(data) {\r\n\t\tif (data) {\r\n\t\t\tObject.assign(this, data);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default class UserService {\r\n\r\n\tstatic getCurrentUser() {\r\n\t\treturn this.user$_.getValue();\r\n\t}\r\n\r\n\tstatic setUser(user) {\r\n\t\tif (user) {\r\n\t\t\tuser = new User(user);\r\n\t\t}\r\n\t\tthis.user$_.next(user);\r\n\t}\r\n\r\n\tstatic me$() {\r\n\t\t//return ApiService.staticGet$(`/user/me`).pipe(\r\n\t\treturn ApiService.get$(`/user/me`).pipe(\r\n\t\t\t// map((user) => this.mapStatic__(user, 'me')),\r\n\t\t\tmap((response) => this.mapUser(response.data, response.static)),\r\n\t\t\tcatchError(error => of (null)),\r\n\t\t\tswitchMap(user => {\r\n\t\t\t\tthis.setUser(user);\r\n\t\t\t\treturn this.user$_;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic changed$() {\r\n\t\treturn this.sharedMe$.pipe(\r\n\t\t\tdistinctUntilChanged((a, b) => (a == null && b == null) || (a && b && a.id === b.id)),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic authorized$() {\r\n\t\tlet user = this.getCurrentUser();\r\n\t\tif (user) {\r\n\t\t\treturn of(user);\r\n\t\t} else {\r\n\t\t\treturn ModalService.open$({ src: src, data: { view: 1 } }).pipe(\r\n\t\t\t\tswitchMap(event => {\r\n\t\t\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\t\t\tuser = event.data;\r\n\t\t\t\t\t\tthis.setUser(user);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (user) {\r\n\t\t\t\t\t\treturn of(user);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn throwError('unauthorized');\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic register$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/register`, payload).pipe(\r\n\t\t\tmap((response) => this.mapUser(response.data, response.static)),\r\n\t\t\t// map((response) => this.mapStatic__(response.data, response.static, 'register')),\r\n\t\t\ttap(user => this.setUser(user)),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic login$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/login`, payload).pipe(\r\n\t\t\tmap((response) => this.mapUser(response.data, response.static)),\r\n\t\t\t// map((response) => this.mapStatic__(response.data, response.static, 'login')),\r\n\t\t\ttap(user => {\r\n\t\t\t\tif (user && user.thron && window.thronClientId && window._ta && _ta.initTracker) {\r\n\t\t\t\t\tvar tracker = _ta.initTracker(window.thronClientId);\r\n\t\t\t\t\ttracker.loginAs(\r\n\t\t\t\t\t\tuser.thron.loginType,\r\n\t\t\t\t\t\tuser.thron.loginValue,\r\n\t\t\t\t\t\tuser.thron.contactName\r\n\t\t\t\t\t).then(success => console.log('UserService.tracker.success', success));\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\ttap(user => this.setUser(user)),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic logout$() {\r\n\t\treturn ApiService.staticPost$(`/user/logout`).pipe(\r\n\t\t\t// map((response) => this.mapUser(null, response.static)),\r\n\t\t\t// map((response) => this.mapStatic__(response.data, response.static, 'logout')),\r\n\t\t\ttap(user => this.setUser(null)),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic forgot$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/forgot`, payload).pipe(\r\n\t\t\t// map((response) => this.mapUser(response.data, response.static)),\r\n\t\t\t// map((response) => this.mapStatic__(response.data, response.static, 'retrieve')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic update$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/update`, payload).pipe(\r\n\t\t\tmap((response) => this.mapUser(response.data, response.static)),\r\n\t\t\t// map((response) => this.mapStatic__(response.data, response.static, 'register')),\r\n\t\t\ttap(user => this.setUser(user)),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic mapStatic__(user, isStatic, action = 'me') {\r\n\t\tif (!isStatic) {\r\n\t\t\treturn user;\r\n\t\t};\r\n\t\tswitch (action) {\r\n\t\t\tcase 'me':\r\n\t\t\t\tif (!LocalStorageService.exist('user')) {\r\n\t\t\t\t\tuser = null;\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'register':\r\n\t\t\t\tLocalStorageService.set('user', user);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'login':\r\n\t\t\t\tLocalStorageService.set('user', user);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'logout':\r\n\t\t\t\tLocalStorageService.delete('user');\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn user;\r\n\t}\r\n\r\n\tstatic fake(user) {\r\n\t\tuser.firstName = user.firstName || 'Jhon';\r\n\t\tuser.lastName = user.lastName || 'Appleseed';\r\n\t\treturn user;\r\n\t}\r\n\r\n\tstatic mapUser(user, isStatic) {\r\n\t\tif (user) {\r\n\t\t\treturn isStatic ? UserService.fake(new User(user)) : new User(user);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic mapUsers(users, isStatic) {\r\n\t\treturn users ? users.map(x => UserService.mapUser(x, isStatic)) : [];\r\n\t}\r\n\r\n}\r\n\r\nUserService.user$_ = new BehaviorSubject(null);\r\nUserService.sharedMe$ = UserService.me$().pipe(shareReplay(1));\r\nUserService.sharedChanged$ = UserService.changed$().pipe(shareReplay(1));\r\n","import UserService from '../user/user.service';\r\n\r\nexport class Question {\r\n\r\n\tconstructor(data) {\r\n\t\tif (data) {\r\n\t\t\tObject.assign(this, data);\r\n\t\t\tif (this.creationDate) {\r\n\t\t\t\tthis.creationDate = new Date(this.creationDate);\r\n\t\t\t}\r\n\t\t\tif (this.user) {\r\n\t\t\t\tthis.user = UserService.mapUser(this.user);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport default class QuestionService {\r\n\r\n\tstatic mapQuestion(question, isStatic) {\r\n\t\treturn isStatic ? QuestionService.fake(new Question(question)) : new Question(question);\r\n\t}\r\n\r\n\tstatic mapQuestions(questions, isStatic) {\r\n\t\treturn questions ? questions.map(x => QuestionService.mapQuestion(x, isStatic)) : [];\r\n\t}\r\n\r\n\tstatic fake(item) {\r\n\t\tconst now = new Date();\r\n\t\tconst index = item.id % 1000000;\r\n\t\tswitch (index) {\r\n\t\t\tcase 4:\r\n\t\t\t\titem.creationDate = new Date(new Date().setSeconds(now.getSeconds() - 30));\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\titem.creationDate = new Date(new Date().setMinutes(now.getMinutes() - 10));\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\titem.creationDate = new Date(new Date().setMinutes(now.getMinutes() - 45));\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\titem.creationDate = new Date(new Date().setHours(now.getHours() - 1));\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\titem.creationDate = new Date(new Date().setDate(now.getDate() - 1 - Math.floor(Math.random() * 20)));\r\n\t\t}\r\n\t\treturn item;\r\n\t}\r\n\r\n}\r\n","export const FAKE_FILTERS = [\r\n\t{\r\n\t\t\"key\": \"collection\",\r\n\t\t\"label\": \"Collection\",\r\n\t\t\"options\": [\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000001,\r\n\t\t\t\t\"label\": \"Lims\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000002,\r\n\t\t\t\t\"label\": \"Boost Pro\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000003,\r\n\t\t\t\t\"label\": \"Canone Inverso\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000004,\r\n\t\t\t\t\"label\": \"3D wall design\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000005,\r\n\t\t\t\t\"label\": \"Brick Atelier\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000006,\r\n\t\t\t\t\"label\": \"Blaze\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000007,\r\n\t\t\t\t\"label\": \"Echo\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000008,\r\n\t\t\t\t\"label\": \"GreenColors\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000009,\r\n\t\t\t\t\"label\": \"Granigliati\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000010,\r\n\t\t\t\t\"label\": \"Ground Track\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000011,\r\n\t\t\t\t\"label\": \"Boost\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000012,\r\n\t\t\t\t\"label\": \"Raw\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000013,\r\n\t\t\t\t\"label\": \"Dolmen Pro\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000014,\r\n\t\t\t\t\"label\": \"Dwell\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000015,\r\n\t\t\t\t\"label\": \"Kone\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000016,\r\n\t\t\t\t\"label\": \"Arkshade\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000017,\r\n\t\t\t\t\"label\": \"Mek\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000018,\r\n\t\t\t\t\"label\": \"Mark\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000019,\r\n\t\t\t\t\"label\": \"Evolve\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000020,\r\n\t\t\t\t\"label\": \"EWall\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000021,\r\n\t\t\t\t\"label\": \"Arty\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000022,\r\n\t\t\t\t\"label\": \"Aix\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000023,\r\n\t\t\t\t\"label\": \"Brave\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000024,\r\n\t\t\t\t\"label\": \"Exence\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000025,\r\n\t\t\t\t\"label\": \"Heartwood\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000026,\r\n\t\t\t\t\"label\": \"Nid\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000027,\r\n\t\t\t\t\"label\": \"Arbor\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000028,\r\n\t\t\t\t\"label\": \"Klif\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000029,\r\n\t\t\t\t\"label\": \"Axi\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000030,\r\n\t\t\t\t\"label\": \"Nash\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000031,\r\n\t\t\t\t\"label\": \"Etic\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000032,\r\n\t\t\t\t\"label\": \"Etic Pro\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000033,\r\n\t\t\t\t\"label\": \"Trust\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000034,\r\n\t\t\t\t\"label\": \"Marvel\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000035,\r\n\t\t\t\t\"label\": \"Marvel Pro\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000036,\r\n\t\t\t\t\"label\": \"Marvel Stone\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000037,\r\n\t\t\t\t\"label\": \"Marvel Dream\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000038,\r\n\t\t\t\t\"label\": \"Marvel Edge\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000039,\r\n\t\t\t\t\"label\": \"Marvel Gems\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000040,\r\n\t\t\t\t\"label\": \"Room\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000041,\r\n\t\t\t\t\"label\": \"Seastone\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000042,\r\n\t\t\t\t\"label\": \"Sunrock\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"key\": \"placement\",\r\n\t\t\"label\": \"Placement\",\r\n\t\t\"options\": [\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000043,\r\n\t\t\t\t\"label\": \"Indoor\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000044,\r\n\t\t\t\t\"label\": \"Outdoor\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"key\": \"material\",\r\n\t\t\"label\": \"Material\",\r\n\t\t\"options\": [\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000045,\r\n\t\t\t\t\"label\": \"Marble\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000046,\r\n\t\t\t\t\"label\": \"Stone\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000047,\r\n\t\t\t\t\"label\": \"Cement\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000048,\r\n\t\t\t\t\"label\": \"Wood\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000049,\r\n\t\t\t\t\"label\": \"Metal\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000050,\r\n\t\t\t\t\"label\": \"Fabric\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"key\": \"finish\",\r\n\t\t\"label\": \"Finish\",\r\n\t\t\"options\": [\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000051,\r\n\t\t\t\t\"label\": \"Lucid\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000052,\r\n\t\t\t\t\"label\": \"Matt\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"key\": \"color\",\r\n\t\t\"label\": \"Color\",\r\n\t\t\"options\": [\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000053,\r\n\t\t\t\t\"label\": \"White\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000054,\r\n\t\t\t\t\"label\": \"Black\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000055,\r\n\t\t\t\t\"label\": \"Gray\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000056,\r\n\t\t\t\t\"label\": \"Ivory\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000057,\r\n\t\t\t\t\"label\": \"Cream\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000058,\r\n\t\t\t\t\"label\": \"Beige\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000059,\r\n\t\t\t\t\"label\": \"Brown\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000060,\r\n\t\t\t\t\"label\": \"Gold\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000061,\r\n\t\t\t\t\"label\": \"Cream\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000062,\r\n\t\t\t\t\"label\": \"Yellow\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000063,\r\n\t\t\t\t\"label\": \"Pink\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000064,\r\n\t\t\t\t\"label\": \"Orange\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000065,\r\n\t\t\t\t\"label\": \"Red\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000066,\r\n\t\t\t\t\"label\": \"Blue\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000067,\r\n\t\t\t\t\"label\": \"Green\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000068,\r\n\t\t\t\t\"label\": \"Purple\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"key\": \"size\",\r\n\t\t\"label\": \"Size\",\r\n\t\t\"options\": [\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000069,\r\n\t\t\t\t\"label\": \"Small\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000070,\r\n\t\t\t\t\"label\": \"Medium\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000071,\r\n\t\t\t\t\"label\": \"Large\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000072,\r\n\t\t\t\t\"label\": \"Extra Large\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"key\": \"class\",\r\n\t\t\"label\": \"Class\",\r\n\t\t\"options\": [\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000073,\r\n\t\t\t\t\"label\": \"Class A\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000074,\r\n\t\t\t\t\"label\": \"Class B\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000075,\r\n\t\t\t\t\"label\": \"Class C\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000076,\r\n\t\t\t\t\"label\": \"Class D\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"key\": \"category\",\r\n\t\t\"label\": \"Category\",\r\n\t\t\"options\": [\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000077,\r\n\t\t\t\t\"label\": \"Professional\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000078,\r\n\t\t\t\t\"label\": \"Heritage\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"value\": 10000079,\r\n\t\t\t\t\"label\": \"Premium\"\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n];\r\n","import { of } from 'rxjs';\r\nimport { map, switchMap, tap } from 'rxjs/operators';\r\nimport ApiService from '../api/api.service';\r\nimport FavouriteService from '../favourite/favourite.service';\r\nimport QuestionService from '../question/question.service';\r\nimport UserService from '../user/user.service';\r\nimport { FAKE_FILTERS } from './fake-filters';\r\n\r\nexport class Event {\r\n\r\n\tget live() {\r\n\t\treturn this.info.started && !this.info.ended;\r\n\t}\r\n\r\n\tget incoming() {\r\n\t\tconst now = new Date();\r\n\t\tconst diff = this.startDate - now;\r\n\t\tconst hoursDiff = Math.floor(diff / 1000 / 60 / 60);\r\n\t\treturn !this.info.started && this.startDate > now && hoursDiff < 24;\r\n\t}\r\n\r\n\tget future() {\r\n\t\tconst now = new Date();\r\n\t\treturn !this.info.started && this.startDate > now;\r\n\t}\r\n\r\n\tget past() {\r\n\t\treturn this.info.ended;\r\n\t}\r\n\r\n\tget hasRelated() {\r\n\t\treturn this.related && this.related.length;\r\n\t}\r\n\r\n\tconstructor(data, isStatic) {\r\n\t\tif (data) {\r\n\t\t\tObject.assign(this, data);\r\n\t\t\tthis.info = this.info || {};\r\n\t\t\tif (this.creationDate) {\r\n\t\t\t\tthis.creationDate = new Date(this.creationDate);\r\n\t\t\t}\r\n\t\t\tif (this.startDate) {\r\n\t\t\t\tthis.startDate = new Date(this.startDate);\r\n\t\t\t\tthis.info.started = this.startDate < Date.now();\r\n\t\t\t}\r\n\t\t\tif (this.endDate) {\r\n\t\t\t\tthis.endDate = new Date(this.endDate);\r\n\t\t\t\tif (this.endDate < Date.now()) {\r\n\t\t\t\t\tthis.info.ended = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.endDate = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.related) {\r\n\t\t\t\tthis.related = EventService.mapEvents(this.related, isStatic);\r\n\t\t\t}\r\n\t\t\tif (this.questions) {\r\n\t\t\t\tthis.questions = QuestionService.mapQuestions(this.questions, isStatic);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default class EventService {\r\n\r\n\tstatic detail$(eventId) {\r\n\t\t//return ApiService.staticGet$(`/event/${1001}/detail`).pipe(\r\n\t\treturn ApiService.get$(`/event/${eventId}/detail`).pipe(\r\n\t\t\ttap(response => response.data.id = parseInt(eventId)), // !!!\r\n\t\t\tmap(response => EventService.mapEvent(response.data, response.static))\r\n\t\t);\r\n\t}\r\n\r\n\tstatic listing$(eventId) {\r\n\t\t// return ApiService.staticGet$(`/event/${1001}/listing`).pipe(\r\n\t\treturn ApiService.get$(`/event/${eventId}/listing`).pipe(\r\n\t\t\tswitchMap(response => EventService.mapListing(response.data, response.static, eventId))\r\n\t\t);\r\n\t}\r\n\r\n\tstatic filter$(eventId) {\r\n\t\treturn ApiService.get$(`/channel/filter`).pipe(map(response => response.data));\r\n\t\t//return ApiService.staticGet$(`/event/${1001}/filter`).pipe(map(response => response.data));\r\n\t}\r\n\r\n\tstatic top$() {\r\n\t\t//return ApiService.staticGet$(`/event/evidence`).pipe(\r\n\t\treturn ApiService.get$(`/event/evidence`).pipe(\r\n\t\t\tmap(response => EventService.mapEvents(response.data, response.static))\r\n\t\t);\r\n\t}\r\n\r\n\tstatic upcoming$() {\r\n\t\treturn ApiService.get$(`/event/upcoming`).pipe(\r\n\t\t\tmap(response => EventService.mapEvents(response.data, response.static))\r\n\t\t);\r\n\t}\r\n\r\n\tstatic subscribe$(eventId) {\r\n\t\treturn of(null);\r\n\t}\r\n\r\n\tstatic unsubscribe$(eventId) {\r\n\t\treturn of(null);\r\n\t}\r\n\r\n\tstatic like$(eventId) {\r\n\t\treturn of(null);\r\n\t}\r\n\r\n\tstatic unlike$(eventId) {\r\n\t\treturn of(null);\r\n\t}\r\n\r\n\tstatic postQuestion$(event, body) {\r\n\t\t//const eventId = 1001; // event.id !!!\r\n\t\t//return ApiService.staticPost$(`/event/${eventId}/question`, body).pipe(\r\n\t\treturn ApiService.post$(`/event/${event.id}/question`, body).pipe(\r\n\t\t\tmap(response => {\r\n\t\t\t\tconst question = QuestionService.mapQuestion(response.data, response.static);\r\n\t\t\t\tif (response.static) {\r\n\t\t\t\t\tquestion.id = event.questions[0].id + 1;\r\n\t\t\t\t\tquestion.creationDate = new Date();\r\n\t\t\t\t\tquestion.user = UserService.getCurrentUser();\r\n\t\t\t\t\tquestion.body = body;\r\n\t\t\t\t}\r\n\t\t\t\treturn question;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic mapEvent(event, isStatic) {\r\n\t\treturn isStatic ? EventService.fake(new Event(event, true)) : new Event(event);\r\n\t}\r\n\r\n\tstatic mapEvents(events, isStatic) {\r\n\t\treturn events ? events.map(x => EventService.mapEvent(x, isStatic)) : [];\r\n\t}\r\n\r\n\tstatic mapListing(items, isStatic, eventId) {\r\n\t\tif (isStatic) {\r\n\t\t\treturn EventService.fakeListing(eventId);\r\n\t\t} else {\r\n\t\t\treturn of(items.map(item => {\r\n\t\t\t\tif (item.type === 'event') {\r\n\t\t\t\t\treturn EventService.mapEvent(item);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t}\r\n\t}\r\n\r\n\tstatic fake(item) {\r\n\t\t// !!! todo, wrap static api response { static: true, data: ... }\r\n\t\t// console.log('EventService.fake', item);\r\n\t\tconst mediaTypes = ['thron', 'vimeo'];\r\n\t\tconst letters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'L', 'M'];\r\n\t\tconst index = item.id % 1000;\r\n\t\tconst channelId = 100 + (item.id - index) / 1000;\r\n\t\titem.url = `${item.url}?eventId=${item.id}`;\r\n\t\tif (item.channel) {\r\n\t\t\titem.channel.id = channelId;\r\n\t\t\titem.channel.url = `${item.channel.url}?channelId=${item.channel.id}`;\r\n\t\t\tconst channelIndex = item.channel.id % 100;\r\n\t\t\titem.channel.name = `Channel ${letters[channelIndex - 1]}`;\r\n\t\t\titem.name = `Event ${letters[channelIndex - 1]}${index}`;\r\n\t\t}\r\n\t\tif (item.info) {\r\n\t\t\titem.info.subscribers = 50 + Math.floor(Math.random() * 200);\r\n\t\t\titem.info.likes = 50 + Math.floor(Math.random() * 200);\r\n\t\t\tconst mediaType = mediaTypes[Math.floor(Math.random() * mediaTypes.length)];\r\n\t\t\tswitch (mediaType) {\r\n\t\t\t\tcase 'vimeo':\r\n\t\t\t\t\titem.media = {\r\n\t\t\t\t\t\tsrc: '497693771',\r\n\t\t\t\t\t\ttype: 'vimeo'\r\n\t\t\t\t\t};\r\n\t\t\t\t\titem.picture = {\r\n\t\t\t\t\t\tsrc: 'https://i.vimeocdn.com/video/1029929333_1920x1080.webp',\r\n\t\t\t\t\t\twidth: 1920,\r\n\t\t\t\t\t\theight: 1080\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\titem.media = {\r\n\t\t\t\t\t\tsrc: 'https://gruppoconcorde-view.thron.com/api/xcontents/resources/delivery/getContentDetail?clientId=gruppoconcorde&xcontentId=16ef3c0a-ba0c-4e3a-a10a-32bc7f9a4297&pkey=yz1hpd',\r\n\t\t\t\t\t\ttype: 'thron'\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tconst now = new Date();\r\n\t\t\tswitch (index) {\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\titem.startDate = new Date(new Date().setMinutes(now.getMinutes() - 10));\r\n\t\t\t\t\titem.endDate = null;\r\n\t\t\t\t\titem.info.started = true;\r\n\t\t\t\t\titem.info.ended = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\titem.startDate = new Date(new Date().setMinutes(now.getMinutes() + 2));\r\n\t\t\t\t\titem.endDate = null;\r\n\t\t\t\t\titem.info.started = false;\r\n\t\t\t\t\titem.info.ended = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\titem.startDate = new Date(new Date().setHours(now.getHours() + 2));\r\n\t\t\t\t\titem.endDate = null;\r\n\t\t\t\t\titem.info.started = false;\r\n\t\t\t\t\titem.info.ended = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 4:\r\n\t\t\t\t\titem.startDate = new Date(new Date().setHours(now.getHours() - 7));\r\n\t\t\t\t\titem.endDate = new Date(new Date().setHours(now.getHours() - 6));\r\n\t\t\t\t\titem.info.started = true;\r\n\t\t\t\t\titem.info.ended = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 5:\r\n\t\t\t\t\titem.startDate = new Date(new Date().setDate(now.getDate() + 7));\r\n\t\t\t\t\titem.endDate = null;\r\n\t\t\t\t\titem.info.started = false;\r\n\t\t\t\t\titem.info.ended = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 6:\r\n\t\t\t\t\titem.startDate = new Date(new Date().setDate(now.getDate() + 14));\r\n\t\t\t\t\titem.endDate = null;\r\n\t\t\t\t\titem.info.started = false;\r\n\t\t\t\t\titem.info.ended = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\titem.startDate = new Date(new Date().setDate(now.getDate() - 14 - Math.floor(Math.random() * 150)));\r\n\t\t\t\t\titem.endDate = new Date(new Date(item.startDate.getTime()).setHours(item.startDate.getHours() + 1));\r\n\t\t\t\t\titem.info.started = true;\r\n\t\t\t\t\titem.info.ended = true;\r\n\t\t\t}\r\n\t\t\tconst subscriptions = FavouriteService.getCurrentSubscriptions();\r\n\t\t\tconst subscription = subscriptions.find(x => x.id === item.id);\r\n\t\t\titem.info.subscribed = subscription !== undefined;\r\n\r\n\t\t\tconst likes = FavouriteService.getCurrentLikes();\r\n\t\t\tconst like = likes.find(x => x.id === item.id);\r\n\t\t\titem.info.liked = like !== undefined;\r\n\r\n\t\t\tconst favourites = FavouriteService.getCurrentFavourites();\r\n\t\t\tconst favourite = favourites.find(x => x.id === item.id);\r\n\t\t\titem.info.saved = favourite !== undefined;\r\n\t\t}\r\n\t\titem.features = [];\r\n\t\tconst filters = FAKE_FILTERS;\r\n\t\tfilters.forEach(filter => {\r\n\t\t\tconst index = Math.floor(Math.random() * filter.options.length);\r\n\t\t\titem.features.push(filter.options[index].value);\r\n\t\t});\r\n\t\tif (item.related) {\r\n\t\t\titem.related = item.related.filter(x => (x.id !== item.id) && (x.live || x.incoming || x.past));\r\n\t\t}\r\n\t\treturn item;\r\n\t}\r\n\r\n\tstatic fakeListing(eventId) {\r\n\t\tconst index = eventId % 1000;\r\n\t\tconst channelId = 100 + (eventId - index) / 1000;\r\n\t\teventId = 1001;\r\n\t\treturn ApiService.staticGet$(`/event/${eventId}/detail`).pipe(\r\n\t\t\tmap(response => {\r\n\t\t\t\tconst channel_ = new Event(response.data, true).channel;\r\n\t\t\t\tchannel_.id = channelId;\r\n\t\t\t\tconst info_ = {\r\n\t\t\t\t\tstarted: false,\r\n\t\t\t\t\tended: false,\r\n\t\t\t\t\tsubscribers: 100,\r\n\t\t\t\t\tsubscribed: false,\r\n\t\t\t\t\tlikes: 100,\r\n\t\t\t\t\tliked: false\r\n\t\t\t\t};\r\n\t\t\t\tconst image_ = {\r\n\t\t\t\t\tid: 100000,\r\n\t\t\t\t\twidth: 700,\r\n\t\t\t\t\theight: 700,\r\n\t\t\t\t\tsrc: 'https://source.unsplash.com/random/',\r\n\t\t\t\t};\r\n\t\t\t\tconst category_ = {\r\n\t\t\t\t\tid: 10000,\r\n\t\t\t\t\tname: 'Category',\r\n\t\t\t\t\turl: '/ws-events/events-category.html',\r\n\t\t\t\t};\r\n\t\t\t\tconst event_ = {\r\n\t\t\t\t\tid: 1000,\r\n\t\t\t\t\ttype: 'event',\r\n\t\t\t\t\tname: 'Evento',\r\n\t\t\t\t\ttitle: 'Evento',\r\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\r\n\t\t\t\t\turl: '/ws-events/events-event.html',\r\n\t\t\t\t\tcreationDate: '2020-05-20T08:11:17.827Z',\r\n\t\t\t\t\tstartDate: '2020-05-20T08:11:17.827Z',\r\n\t\t\t\t\tpicture: image_,\r\n\t\t\t\t\tinfo: info_,\r\n\t\t\t\t\tchannel: channel_,\r\n\t\t\t\t};\r\n\t\t\t\tconst picture_ = {\r\n\t\t\t\t\tid: 1000,\r\n\t\t\t\t\ttype: 'picture',\r\n\t\t\t\t\tname: 'Picture',\r\n\t\t\t\t\ttitle: 'Picture',\r\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\r\n\t\t\t\t\turl: '/ws-events/events-document.html',\r\n\t\t\t\t\tpicture: image_,\r\n\t\t\t\t\tcategory: category_,\r\n\t\t\t\t};\r\n\t\t\t\tconst product_ = {\r\n\t\t\t\t\tid: 1000,\r\n\t\t\t\t\ttype: 'product',\r\n\t\t\t\t\tname: 'Product',\r\n\t\t\t\t\ttitle: 'Product',\r\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\r\n\t\t\t\t\turl: '/ws-events/events-product.html',\r\n\t\t\t\t\tpicture: image_,\r\n\t\t\t\t\tcategory: category_,\r\n\t\t\t\t};\r\n\t\t\t\tconst magazine_ = {\r\n\t\t\t\t\tid: 1000,\r\n\t\t\t\t\ttype: 'magazine',\r\n\t\t\t\t\tname: 'Magazine',\r\n\t\t\t\t\ttitle: 'Magazine',\r\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\r\n\t\t\t\t\turl: '/ws-events/events-product.html',\r\n\t\t\t\t\tpicture: image_,\r\n\t\t\t\t\tcategory: category_,\r\n\t\t\t\t};\r\n\t\t\t\tconst download_ = {\r\n\t\t\t\t\tid: 1000,\r\n\t\t\t\t\ttype: 'download',\r\n\t\t\t\t\tname: 'Download',\r\n\t\t\t\t\ttitle: 'Download',\r\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\r\n\t\t\t\t\turl: '/ws-events/files/download.pdf',\r\n\t\t\t\t\tpicture: image_,\r\n\t\t\t\t\tcategory: category_,\r\n\t\t\t\t};\r\n\t\t\t\tconst letters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'L', 'M'];\r\n\t\t\t\treturn new Array(30).fill(true).map((x, i) => {\r\n\t\t\t\t\tlet type = 'event';\r\n\t\t\t\t\tif (i > 3) {\r\n\t\t\t\t\t\tif (i % 5 === 0) {\r\n\t\t\t\t\t\t\ttype = 'picture';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (i % 7 === 0) {\r\n\t\t\t\t\t\t\ttype = 'product';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (i % 11 === 0) {\r\n\t\t\t\t\t\t\ttype = 'magazine';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (i % 13 === 0) {\r\n\t\t\t\t\t\t\ttype = 'download';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet item;\r\n\t\t\t\t\tswitch (type) {\r\n\t\t\t\t\t\tcase 'picture':\r\n\t\t\t\t\t\t\titem = Object.assign({}, picture_);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'product':\r\n\t\t\t\t\t\t\titem = Object.assign({}, product_);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'magazine':\r\n\t\t\t\t\t\t\titem = Object.assign({}, magazine_);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'download':\r\n\t\t\t\t\t\t\titem = Object.assign({}, download_);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'event':\r\n\t\t\t\t\t\t\titem = Object.assign({}, event_);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\titem.id = (channel_.id - 100) * 1000 + 1 + i;\r\n\t\t\t\t\titem.name = item.title = `${item.name} ${letters[(item.id - 1) % 10]}`;\r\n\t\t\t\t\titem.type = type;\r\n\t\t\t\t\tif (item.picture) {\r\n\t\t\t\t\t\titem.picture = Object.assign({}, image_, {\r\n\t\t\t\t\t\t\tid: (100001 + i),\r\n\t\t\t\t\t\t\twidth: type === 'download' ? 340 : 700,\r\n\t\t\t\t\t\t\theight: type === 'download' ? 480 : [700, 900, 1100][i % 3],\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (item.info) {\r\n\t\t\t\t\t\titem.info = Object.assign({}, info_);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (item.channel) {\r\n\t\t\t\t\t\titem.channel = Object.assign({}, channel_);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (item.category) {\r\n\t\t\t\t\t\tconst categoryId = (10001 + (i % 10));\r\n\t\t\t\t\t\titem.category = Object.assign({}, category_, {\r\n\t\t\t\t\t\t\tid: categoryId,\r\n\t\t\t\t\t\t\tname: 'Category ' + letters[categoryId % 10],\r\n\t\t\t\t\t\t\turl: `${category_.url}?categoryId=${categoryId}`,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tswitch (type) {\r\n\t\t\t\t\t\tcase 'event':\r\n\t\t\t\t\t\t\titem = EventService.fake(new Event(item, true));\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\titem.features = [];\r\n\t\t\t\t\t\t\tconst filters = FAKE_FILTERS;\r\n\t\t\t\t\t\t\tfilters.forEach(filter => {\r\n\t\t\t\t\t\t\t\tconst index = Math.floor(Math.random() * filter.options.length);\r\n\t\t\t\t\t\t\t\titem.features.push(filter.options[index].value);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic fakeSaved(items) {\r\n\t\tconst info_ = {\r\n\t\t\tstarted: false,\r\n\t\t\tended: false,\r\n\t\t\tsubscribers: 100,\r\n\t\t\tsubscribed: false,\r\n\t\t\tlikes: 100,\r\n\t\t\tliked: false\r\n\t\t};\r\n\t\tconst image_ = {\r\n\t\t\tid: 100000,\r\n\t\t\twidth: 700,\r\n\t\t\theight: 700,\r\n\t\t\tsrc: 'https://source.unsplash.com/random/',\r\n\t\t};\r\n\t\tconst event_ = {\r\n\t\t\tid: 1000,\r\n\t\t\ttype: 'event',\r\n\t\t\tname: 'Evento',\r\n\t\t\ttitle: 'Evento',\r\n\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\r\n\t\t\turl: '/ws-events/events-event.html',\r\n\t\t\tcreationDate: '2020-05-20T08:11:17.827Z',\r\n\t\t\tstartDate: '2020-05-20T08:11:17.827Z',\r\n\t\t\tpicture: image_,\r\n\t\t\tinfo: info_,\r\n\t\t};\r\n\t\tconst letters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'L', 'M'];\r\n\t\treturn items.map((x, i) => {\r\n\t\t\tlet type = 'event';\r\n\t\t\tlet item = Object.assign({}, event_);\r\n\t\t\titem.id = x.id;\r\n\t\t\titem.name = item.title = `${item.name} ${letters[(item.id - 1) % 10]}`;\r\n\t\t\tconst index = x.id % 1000;\r\n\t\t\titem.channel = { id: (x.id - index) / 1000 + 1000 };\r\n\t\t\titem.type = type;\r\n\t\t\titem.picture = Object.assign({}, image_, {\r\n\t\t\t\tid: (100001 + i),\r\n\t\t\t\twidth: 700,\r\n\t\t\t\theight: [700, 900, 1100][i % 3],\r\n\t\t\t});\r\n\t\t\titem.info = Object.assign({}, info_);\r\n\t\t\titem = EventService.fake(new Event(item, true));\r\n\t\t\treturn item;\r\n\t\t});\r\n\t}\r\n\r\n}\r\n","import { of } from 'rxjs';\r\nimport { map, shareReplay, switchMap } from 'rxjs/operators';\r\nimport ApiService from '../api/api.service';\r\nimport EventService, { Event } from '../event/event.service';\r\nimport { FAKE_FILTERS } from '../event/fake-filters';\r\n\r\nexport class Channel {\r\n\tconstructor(data, isStatic) {\r\n\t\tif (data) {\r\n\t\t\tObject.assign(this, data);\r\n\t\t\tthis.events = EventService.mapEvents(this.events, isStatic);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default class ChannelService {\r\n\r\n\tstatic channels$() {\r\n\t\treturn ApiService.get$(`/channel/channels`).pipe(\r\n\t\t\tmap(response => ChannelService.mapChannels(response.data, response.static))\r\n\t\t);\r\n\t}\r\n\r\n\tstatic detail$(channelId) {\r\n\t\treturn ApiService.get$(`/channel/${channelId}/detail`).pipe(\r\n\t\t\tmap(response => ChannelService.mapChannel(response.data, response.static))\r\n\t\t);\r\n\t}\r\n\r\n\tstatic listing$(channelId) {\r\n\t\t//return ApiService.staticGet$(`/channel/${101}/listing`).pipe(\r\n\t\treturn ApiService.get$(`/channel/${channelId}/listing`).pipe(\r\n\t\t\tswitchMap(response => ChannelService.mapListing(response.data, response.static, channelId))\r\n\t\t);\r\n\t}\r\n\r\n\tstatic filter$(channelId) {\r\n\t\t//return ApiService.get$(`/channel/${channelId}/filter`).pipe(\r\n\t\t//\tmap(response => response.data)\r\n\t\t//);\r\n\t\treturn ApiService.get$(`/channel/filter`).pipe(map(response => response.data));\r\n\t\t//return ApiService.staticGet$(`/event/${1001}/filter`).pipe(map(response => response.data));\r\n\t}\r\n\r\n\tstatic top$() {\r\n\t\treturn ApiService.get$(`/channel/evidence`).pipe(\r\n\t\t\tmap(response => ChannelService.mapChannels(response.data, response.static))\r\n\t\t);\r\n\t}\r\n\r\n\tstatic subscribe$(channelId) {\r\n\t\treturn of(null);\r\n\t}\r\n\r\n\tstatic unsubscribe$(channelId) {\r\n\t\treturn of(null);\r\n\t}\r\n\r\n\tstatic like$(channelId) {\r\n\t\treturn of(null);\r\n\t}\r\n\r\n\tstatic unlike$(channelId) {\r\n\t\treturn of(null);\r\n\t}\r\n\r\n\tstatic mapChannel(channel, isStatic) {\r\n\t\treturn isStatic ? ChannelService.fake(new Channel(channel, true)) : new Channel(channel);\r\n\t}\r\n\r\n\tstatic mapChannels(channels, isStatic) {\r\n\t\treturn channels ? channels.map(x => ChannelService.mapChannel(x, isStatic)) : [];\r\n\t}\r\n\r\n\tstatic mapListing(items, isStatic, channelId) {\r\n\t\tif (isStatic) {\r\n\t\t\treturn ChannelService.fakeListing(101);\r\n\t\t} else {\r\n\t\t\treturn of(items.map(item => {\r\n\t\t\t\tif (item.type === 'event') {\r\n\t\t\t\t\treturn EventService.mapEvent(item);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t}\r\n\t}\r\n\r\n\tstatic fake(item) {\r\n\t\t// console.log('ChannelService.fake', item);\r\n\t\titem.url = `${item.url}?channelId=${item.id}`;\r\n\t\titem.info.subscribers = 1500 + Math.floor(Math.random() * 200);\r\n\t\titem.info.likes = 500 + Math.floor(Math.random() * 200);\r\n\t\treturn item;\r\n\t}\r\n\r\n\tstatic fakeListing(channelId) {\r\n\t\treturn ApiService.staticGet$(`/channel/${channelId}/detail`).pipe(\r\n\t\t\tmap(response => {\r\n\t\t\t\tconst channel_ = ChannelService.fake(new Channel(response.data, true));\r\n\t\t\t\tconst info_ = {\r\n\t\t\t\t\tstarted: false,\r\n\t\t\t\t\tended: false,\r\n\t\t\t\t\tsubscribers: 100,\r\n\t\t\t\t\tsubscribed: false,\r\n\t\t\t\t\tlikes: 100,\r\n\t\t\t\t\tliked: false\r\n\t\t\t\t};\r\n\t\t\t\tconst image_ = {\r\n\t\t\t\t\tid: 100000,\r\n\t\t\t\t\twidth: 700,\r\n\t\t\t\t\theight: 700,\r\n\t\t\t\t\tsrc: 'https://source.unsplash.com/random/',\r\n\t\t\t\t};\r\n\t\t\t\tconst category_ = {\r\n\t\t\t\t\tid: 10000,\r\n\t\t\t\t\tname: 'Category',\r\n\t\t\t\t\turl: '/ws-events/category.html',\r\n\t\t\t\t};\r\n\t\t\t\tconst event_ = {\r\n\t\t\t\t\tid: 1000,\r\n\t\t\t\t\ttype: 'event',\r\n\t\t\t\t\tname: 'Evento',\r\n\t\t\t\t\ttitle: 'Evento',\r\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\r\n\t\t\t\t\turl: '/ws-events/events-event.html',\r\n\t\t\t\t\tcreationDate: '2020-05-20T08:11:17.827Z',\r\n\t\t\t\t\tstartDate: '2020-05-20T08:11:17.827Z',\r\n\t\t\t\t\tpicture: image_,\r\n\t\t\t\t\tinfo: info_,\r\n\t\t\t\t\tchannel: channel_,\r\n\t\t\t\t};\r\n\t\t\t\tconst picture_ = {\r\n\t\t\t\t\tid: 1000,\r\n\t\t\t\t\ttype: 'picture',\r\n\t\t\t\t\tname: 'Picture',\r\n\t\t\t\t\ttitle: 'Picture',\r\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\r\n\t\t\t\t\turl: '/ws-events/document.html',\r\n\t\t\t\t\tpicture: image_,\r\n\t\t\t\t\tcategory: category_,\r\n\t\t\t\t};\r\n\t\t\t\tconst product_ = {\r\n\t\t\t\t\tid: 1000,\r\n\t\t\t\t\ttype: 'product',\r\n\t\t\t\t\tname: 'Product',\r\n\t\t\t\t\ttitle: 'Product',\r\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\r\n\t\t\t\t\turl: '/ws-events/product.html',\r\n\t\t\t\t\tpicture: image_,\r\n\t\t\t\t\tcategory: category_,\r\n\t\t\t\t};\r\n\t\t\t\tconst magazine_ = {\r\n\t\t\t\t\tid: 1000,\r\n\t\t\t\t\ttype: 'magazine',\r\n\t\t\t\t\tname: 'Magazine',\r\n\t\t\t\t\ttitle: 'Magazine',\r\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\r\n\t\t\t\t\turl: '/ws-events/product.html',\r\n\t\t\t\t\tpicture: image_,\r\n\t\t\t\t\tcategory: category_,\r\n\t\t\t\t};\r\n\t\t\t\tconst download_ = {\r\n\t\t\t\t\tid: 1000,\r\n\t\t\t\t\ttype: 'download',\r\n\t\t\t\t\tname: 'Download',\r\n\t\t\t\t\ttitle: 'Download',\r\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\r\n\t\t\t\t\turl: '/ws-events/files/download.pdf',\r\n\t\t\t\t\tpicture: image_,\r\n\t\t\t\t\tcategory: category_,\r\n\t\t\t\t};\r\n\t\t\t\tconst letters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'L', 'M'];\r\n\t\t\t\treturn new Array(250).fill(true).map((x, i) => {\r\n\t\t\t\t\tlet type = 'event';\r\n\t\t\t\t\tif (i > 3) {\r\n\t\t\t\t\t\tif (i % 5 === 0) {\r\n\t\t\t\t\t\t\ttype = 'picture';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (i % 7 === 0) {\r\n\t\t\t\t\t\t\ttype = 'product';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (i % 11 === 0) {\r\n\t\t\t\t\t\t\ttype = 'magazine';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (i % 13 === 0) {\r\n\t\t\t\t\t\t\ttype = 'download';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet item;\r\n\t\t\t\t\tswitch (type) {\r\n\t\t\t\t\t\tcase 'picture':\r\n\t\t\t\t\t\t\titem = Object.assign({}, picture_);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'product':\r\n\t\t\t\t\t\t\titem = Object.assign({}, product_);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'magazine':\r\n\t\t\t\t\t\t\titem = Object.assign({}, magazine_);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'download':\r\n\t\t\t\t\t\t\titem = Object.assign({}, download_);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'event':\r\n\t\t\t\t\t\t\titem = Object.assign({}, event_);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\titem.id = (channelId - 100) * 1000 + 1 + i;\r\n\t\t\t\t\titem.name = item.title = `${item.name} ${letters[(item.id - 1) % 10]}`;\r\n\t\t\t\t\titem.type = type;\r\n\t\t\t\t\tif (item.picture) {\r\n\t\t\t\t\t\titem.picture = Object.assign({}, image_, {\r\n\t\t\t\t\t\t\tid: (100001 + i),\r\n\t\t\t\t\t\t\twidth: type === 'download' ? 340 : 700,\r\n\t\t\t\t\t\t\theight: type === 'download' ? 480 : [700, 900, 1100][i % 3],\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (item.info) {\r\n\t\t\t\t\t\titem.info = Object.assign({}, info_);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (item.channel) {\r\n\t\t\t\t\t\titem.channel = Object.assign({}, channel_);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (item.category) {\r\n\t\t\t\t\t\tconst categoryId = (10001 + (i % 10));\r\n\t\t\t\t\t\titem.category = Object.assign({}, category_, {\r\n\t\t\t\t\t\t\tid: categoryId,\r\n\t\t\t\t\t\t\tname: 'Category ' + letters[categoryId % 10],\r\n\t\t\t\t\t\t\turl: `${category_.url}?categoryId=${categoryId}`,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tswitch (type) {\r\n\t\t\t\t\t\tcase 'event':\r\n\t\t\t\t\t\t\titem = EventService.fake(new Event(item, true));\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\titem.features = [];\r\n\t\t\t\t\t\t\tconst filters = FAKE_FILTERS;\r\n\t\t\t\t\t\t\tfilters.forEach(filter => {\r\n\t\t\t\t\t\t\t\tconst index = Math.floor(Math.random() * filter.options.length);\r\n\t\t\t\t\t\t\t\titem.features.push(filter.options[index].value);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t// map(x => new Channel(x))\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nChannelService.sharedChannels$ = ChannelService.channels$().pipe(shareReplay(1));\r\n","export default class LocationService {\r\n\r\n\tstatic get(key) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\t// console.log('LocationService.get', params);\r\n\t\treturn params.get(key);\r\n\t}\r\n\r\n\tstatic set(keyOrValue, value) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams.set(keyOrValue, value);\r\n\t\t} else {\r\n\t\t\tparams.set(keyOrValue, '');\r\n\t\t}\r\n\t\tthis.replace(params);\r\n\t\t// console.log('LocationService.set', params, keyOrValue, value);\r\n\t}\r\n\r\n\tstatic replace(params) {\r\n\t\tif (window.history && window.history.pushState) {\r\n\t\t\tconst title = document.title;\r\n\t\t\tconst url = `${window.location.href.split('?')[0]}?${params.toString()}`;\r\n\t\t\twindow.history.pushState(params.toString(), title, url);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic deserialize(key) {\r\n\t\tconst encoded = this.get('params');\r\n\t\treturn this.decode(key, encoded);\r\n\t}\r\n\r\n\tstatic serialize(keyOrValue, value) {\r\n\t\tconst params = this.deserialize();\r\n\t\tconst encoded = this.encode(keyOrValue, value, params);\r\n\t\tthis.set('params', encoded);\r\n\t}\r\n\r\n\tstatic decode(key, encoded) {\r\n\t\tlet decoded = null;\r\n\t\tif (encoded) {\r\n\t\t\tconst json = window.atob(encoded);\r\n\t\t\tdecoded = JSON.parse(json);\r\n\t\t}\r\n\t\tif (key && decoded) {\r\n\t\t\tdecoded = decoded[key];\r\n\t\t}\r\n\t\treturn decoded || null;\r\n\t}\r\n\r\n\tstatic encode(keyOrValue, value, params) {\r\n\t\tparams = params || {};\r\n\t\tlet encoded = null;\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams[keyOrValue] = value;\r\n\t\t} else {\r\n\t\t\tparams = keyOrValue;\r\n\t\t}\r\n\t\tconst json = JSON.stringify(params);\r\n\t\tencoded = window.btoa(json);\r\n\t\treturn encoded;\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\n\r\nexport default class PageComponent extends Component {\r\n\r\n\tonInit() {\r\n\r\n\t}\r\n\r\n}\r\n\r\nPageComponent.meta = {\r\n\tselector: '[page]',\r\n};\r\n","import { switchMap, takeUntil } from 'rxjs/operators';\r\nimport ChannelService from '../channel/channel.service';\r\nimport LocationService from '../location/location.service';\r\nimport PageComponent from '../page/page.component';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class AsideComponent extends PageComponent {\r\n\r\n\tonInit() {\r\n\t\tlet channelId = LocationService.get('channelId');\r\n\t\tchannelId = channelId ? parseInt(channelId) : null;\r\n\t\tthis.channelId = channelId;\r\n\t\tthis.channels = [];\r\n\t\tthis.load$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(channels => {\r\n\t\t\tthis.channels = channels;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn UserService.sharedChanged$.pipe(\r\n\t\t\tswitchMap(() => ChannelService.channels$()),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nAsideComponent.meta = {\r\n\tselector: '[aside]',\r\n};\r\n","import { BehaviorSubject } from 'rxjs';\r\n\r\nexport const FilterMode = {\r\n\tSELECT: 'select',\r\n\tAND: 'and',\r\n\tOR: 'or',\r\n};\r\n\r\nexport default class FilterItem {\r\n\r\n\tconstructor(filter) {\r\n\t\tthis.change$ = new BehaviorSubject();\r\n\t\tthis.mode = FilterMode.SELECT;\r\n\t\tthis.placeholder = 'Select';\r\n\t\tthis.values = [];\r\n\t\tthis.options = [];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.SELECT) {\r\n\t\t\t\tfilter.options.unshift({\r\n\t\t\t\t\tlabel: filter.placeholder,\r\n\t\t\t\t\tvalues: [],\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tObject.assign(this, filter);\r\n\t\t}\r\n\t}\r\n\r\n\tfilter(item, value) {\r\n\t\treturn true; // item.options.indexOf(value) !== -1;\r\n\t}\r\n\r\n\tmatch(item) {\r\n\t\tlet match;\r\n\t\tif (this.mode === FilterMode.OR) {\r\n\t\t\tmatch = this.values.length ? false : true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match || this.filter(item, value);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tmatch = true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match && this.filter(item, value);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetSelectedOption() {\r\n\t\treturn this.options.find(x => this.has(x));\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst selectedOption = this.getSelectedOption();\r\n\t\t\treturn selectedOption ? selectedOption.label : this.placeholder;\r\n\t\t} else {\r\n\t\t\treturn this.label;\r\n\t\t}\r\n\t}\r\n\r\n\thas(item) {\r\n\t\treturn this.values.indexOf(item.value) !== -1;\r\n\t}\r\n\r\n\tset(item) {\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tthis.values = [];\r\n\t\t}\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index === -1) {\r\n\t\t\tif (item.value !== undefined) {\r\n\t\t\t\tthis.values.push(item.value);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tthis.placeholder = item.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.set', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\tremove(item) {\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index !== -1) {\r\n\t\t\tthis.values.splice(index, 1);\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.remove', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\ttoggle(item) {\r\n\t\tif (this.has(item)) {\r\n\t\t\tthis.remove(item);\r\n\t\t} else {\r\n\t\t\tthis.set(item);\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleActive() {\r\n\t\tthis.active = !this.active;\r\n\t}\r\n\r\n}\r\n","import { merge } from 'rxjs';\r\nimport { auditTime, map, tap } from 'rxjs/operators';\r\nimport LocationService from '../location/location.service';\r\nimport FilterItem from './filter-item';\r\n\r\nexport default class FilterService {\r\n\r\n\tconstructor(options, initialParams, callback) {\r\n\t\tconst filters = {};\r\n\t\tthis.filters = filters;\r\n\t\tif (options) {\r\n\t\t\tObject.keys(options).forEach(key => {\r\n\t\t\t\tconst filter = new FilterItem(options[key]);\r\n\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\tcallback(key, filter);\r\n\t\t\t\t}\r\n\t\t\t\tfilters[key] = filter;\r\n\t\t\t});\r\n\t\t\tthis.deserialize(this.filters, initialParams);\r\n\t\t}\r\n\t}\r\n\r\n\tgetParamsCount(params) {\r\n\t\tif (params) {\r\n\t\t\tconst paramsCount = Object.keys(params).reduce((p, c, i) => {\r\n\t\t\t\tconst values = params[c];\r\n\t\t\t\treturn p + (values ? values.length : 0);\r\n\t\t\t}, 0);\r\n\t\t\treturn paramsCount;\r\n\t\t} else {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\tdeserialize(filters, initialParams) {\r\n\t\tlet params;\r\n\t\tif (initialParams && this.getParamsCount(initialParams)) {\r\n\t\t\tparams = initialParams;\r\n\t\t}\r\n\t\tconst locationParams = LocationService.deserialize('filters');\r\n\t\tif (locationParams && this.getParamsCount(locationParams)) {\r\n\t\t\tparams = locationParams;\r\n\t\t}\r\n\t\tif (params) {\r\n\t\t\tObject.keys(filters).forEach(key => {\r\n\t\t\t\tfilters[key].values = params[key] || [];\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn filters;\r\n\t}\r\n\r\n\tserialize(filters) {\r\n\t\tlet params = {};\r\n\t\tlet any = false;\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tif (filter.values && filter.values.length > 0) {\r\n\t\t\t\tparams[x] = filter.values;\r\n\t\t\t\tany = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (!any) {\r\n\t\t\tparams = null;\r\n\t\t}\r\n\t\t// console.log('FilterService.serialize', params);\r\n\t\tLocationService.serialize('filters', params);\r\n\t\treturn params;\r\n\t}\r\n\r\n\titems$(items) {\r\n\t\tconst filters = this.filters;\r\n\t\tconst changes = Object.keys(filters).map(key => filters[key].change$);\r\n\t\tthis.updateFilterStates(filters, items, true);\r\n\t\treturn merge(...changes).pipe(\r\n\t\t\tauditTime(1),\r\n\t\t\t// tap(() => console.log(filters)),\r\n\t\t\ttap(() => this.serialize(filters)),\r\n\t\t\tmap(() => this.filterItems(items)),\r\n\t\t\ttap(() => this.updateFilterStates(filters, items))\r\n\t\t);\r\n\t}\r\n\r\n\tfilterItems(items, skipFilter) {\r\n\t\tconst filters = Object.keys(this.filters).map((x) => this.filters[x]).filter(x => x.values && x.values.length > 0);\r\n\t\titems = items.filter(item => {\r\n\t\t\tlet has = true;\r\n\t\t\tfilters.forEach(filter => {\r\n\t\t\t\tif (filter !== skipFilter) {\r\n\t\t\t\t\thas = has && filter.match(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn has;\r\n\t\t});\r\n\t\treturn items;\r\n\t}\r\n\r\n\tupdateFilterStates(filters, items, initialCount) {\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tconst filteredItems = initialCount ? items : this.filterItems(items, filter);\r\n\t\t\tfilter.options.forEach(option => {\r\n\t\t\t\tlet count = 0;\r\n\t\t\t\tif (option.value) {\r\n\t\t\t\t\tlet i = 0;\r\n\t\t\t\t\twhile (i < filteredItems.length) {\r\n\t\t\t\t\t\tconst item = filteredItems[i];\r\n\t\t\t\t\t\tif (filter.filter(item, option.value)) {\r\n\t\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcount = filteredItems.length;\r\n\t\t\t\t}\r\n\t\t\t\tinitialCount ? option.initialCount = count : option.count = count;\r\n\t\t\t\toption.disabled = count === 0;\r\n\t\t\t});\r\n\t\t\tif (initialCount) {\r\n\t\t\t\tfilter.options.sort((a, b) => b.initialCount - a.initialCount);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n","import { getContext } from 'rxcomp';\r\nimport { combineLatest } from 'rxjs';\r\nimport { switchMap, takeUntil } from 'rxjs/operators';\r\nimport FilterItem from '../filter/filter-item';\r\nimport FilterService from '../filter/filter.service';\r\nimport LocationService from '../location/location.service';\r\nimport PageComponent from '../page/page.component';\r\nimport UserService from '../user/user.service';\r\nimport ChannelService from './channel.service';\r\n\r\nexport default class ChannelPageComponent extends PageComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.grid = {\r\n\t\t\tmode: 1,\r\n\t\t\twidth: 350,\r\n\t\t\tgutter: 2,\r\n\t\t};\r\n\t\tthis.channels = null;\r\n\t\tthis.channel = null;\r\n\t\tthis.listing = null;\r\n\t\tthis.filters = null;\r\n\t\tthis.secondaryFiltersVisible = false;\r\n\t\tthis.secondaryFilters = null;\r\n\t\tthis.activeFilters = null;\r\n\t\tthis.filteredItems = [];\r\n\t\tthis.load$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.channels = data[0];\r\n\t\t\tthis.channel = data[1];\r\n\t\t\tthis.listing = data[2];\r\n\t\t\tthis.setFilters(data[3]);\r\n\t\t\tthis.startFilter(this.listing);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\tlet channelId = LocationService.get('channelId') || 0;\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add(`wse__channel-page-${channelId % 4}`);\r\n\t\treturn UserService.sharedChanged$.pipe(\r\n\t\t\tswitchMap(() => combineLatest([\r\n\t\t\t\tChannelService.channels$(),\r\n\t\t\t\tChannelService.detail$(channelId),\r\n\t\t\t\tChannelService.listing$(channelId),\r\n\t\t\t\tChannelService.filter$(channelId),\r\n\t\t\t]))\r\n\t\t);\r\n\t}\r\n\r\n\tsetFilters(filters) {\r\n\t\tconst filterObject = {\r\n\t\t\ttype: {\r\n\t\t\t\tlabel: 'Type',\r\n\t\t\t\tmode: 'select',\r\n\t\t\t\toptions: [{\r\n\t\t\t\t\tvalue: 'event',\r\n\t\t\t\t\tlabel: 'Event',\r\n\t\t\t\t}, {\r\n\t\t\t\t\tvalue: 'picture',\r\n\t\t\t\t\tlabel: 'Picture',\r\n\t\t\t\t}, {\r\n\t\t\t\t\tvalue: 'product',\r\n\t\t\t\t\tlabel: 'Product',\r\n\t\t\t\t}, {\r\n\t\t\t\t\tvalue: 'magazine',\r\n\t\t\t\t\tlabel: 'Magazine',\r\n\t\t\t\t}, {\r\n\t\t\t\t\tvalue: 'download',\r\n\t\t\t\t\tlabel: 'Downloads',\r\n\t\t\t\t}]\r\n\t\t\t},\r\n\t\t};\r\n\t\tfilters.forEach(filter => {\r\n\t\t\tfilter.mode = 'or';\r\n\t\t\tfilterObject[filter.key] = filter;\r\n\t\t});\r\n\t\tconst filterService = this.filterService = new FilterService(filterObject, {}, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'type':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.type === value;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'tag':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.tags.indexOf(value) !== -1;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.features.indexOf(value) !== -1;\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filters = filterService.filters;\r\n\t\tthis.secondaryFilters = Object.keys(this.filters).filter(key => key !== 'type').map(key => {\r\n\t\t\treturn this.filters[key];\r\n\t\t});\r\n\t}\r\n\r\n\tstartFilter(items) {\r\n\t\tthis.filterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(filteredItems => {\r\n\t\t\tthis.filteredItems = [];\r\n\t\t\tthis.activeFilters = [];\r\n\t\t\tthis.pushChanges();\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.filteredItems = filteredItems;\r\n\t\t\t\tthis.activeFilters = this.secondaryFilters.map(f => {\r\n\t\t\t\t\tf = new FilterItem(f);\r\n\t\t\t\t\tf.options = f.options.filter(o => f.has(o));\r\n\t\t\t\t\treturn f;\r\n\t\t\t\t}).filter(f => f.options.length);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t}, 1);\r\n\t\t\t// console.log('ChannelPageComponent.filteredItems', filteredItems.length);\r\n\t\t});\r\n\t}\r\n\r\n\ttoggleGrid() {\r\n\t\tthis.grid.width = this.grid.width === 350 ? 525 : 350;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\ttoggleFilters() {\r\n\t\tthis.secondaryFiltersVisible = !this.secondaryFiltersVisible;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n}\r\n\r\nChannelPageComponent.meta = {\r\n\tselector: '[channel-page]',\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { first, switchMap } from 'rxjs/operators';\r\nimport FavouriteService from \"../favourite/favourite.service\";\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class ChannelComponent extends Component {\r\n\r\n\ttoggleSubscribe() {\r\n\t\tlet flag = this.channel.info.subscribed;\r\n\t\tUserService.authorized$().pipe(\r\n\t\t\tswitchMap(user => FavouriteService[flag ? 'subscriptionRemove$' : 'subscriptionAdd$'](this.channel.idDoc)),\r\n\t\t\tfirst(),\r\n\t\t).subscribe(() => {\r\n\t\t\tflag = !flag;\r\n\t\t\tthis.channel.info.subscribed = flag;\r\n\t\t\tif (flag) {\r\n\t\t\t\tthis.channel.info.subscribers++;\r\n\t\t\t} else {\r\n\t\t\t\tthis.channel.info.subscribers--;\r\n\t\t\t}\r\n\t\t\tthis.pushChanges();\r\n\t\t}, (error) => {\r\n\t\t\tconsole.log('ChannelComponent.toggleSubscribe.error', error);\r\n\t\t});\r\n\t}\r\n\r\n\ttoggleLike() {\r\n\t\tlet flag = this.channel.info.liked;\r\n\t\tUserService.authorized$().pipe(\r\n\t\t\tswitchMap(user => FavouriteService[flag ? 'likeRemove$' : 'likeAdd$'](this.channel.id, 'channel')),\r\n\t\t\tfirst(),\r\n\t\t).subscribe(() => {\r\n\t\t\tflag = !flag;\r\n\t\t\tthis.channel.info.liked = flag;\r\n\t\t\tif (flag) {\r\n\t\t\t\tthis.channel.info.likes++;\r\n\t\t\t} else {\r\n\t\t\t\tthis.channel.info.likes--;\r\n\t\t\t}\r\n\t\t\tthis.pushChanges();\r\n\t\t}, (error) => {\r\n\t\t\tconsole.log('ChannelComponent.toggleLike.error', error);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nChannelComponent.meta = {\r\n\tselector: '[channel]',\r\n\tinputs: ['channel']\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { filter, shareReplay, takeUntil } from 'rxjs/operators';\r\n\r\nexport default class ClickOutsideDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tthis.initialFocus = false;\r\n\t\tconst { module, node, parentInstance, selector } = getContext(this);\r\n\t\tconst event$ = this.event$ = fromEvent(document, 'click').pipe(\r\n\t\t\tfilter(event => {\r\n\t\t\t\tconst target = event.target;\r\n\t\t\t\t// console.log('ClickOutsideDirective.onClick', this.element.nativeElement, target, this.element.nativeElement.contains(target));\r\n\t\t\t\t// const documentContained: boolean = Boolean(document.compareDocumentPosition(target) & Node.DOCUMENT_POSITION_CONTAINED_BY);\r\n\t\t\t\t// console.log(target, documentContained);\r\n\t\t\t\tconst clickedInside = node.contains(target) || !document.contains(target);\r\n\t\t\t\tif (!clickedInside) {\r\n\t\t\t\t\tif (this.initialFocus) {\r\n\t\t\t\t\t\tthis.initialFocus = false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.initialFocus = true;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t\tconst expression = node.getAttribute(`(clickOutside)`);\r\n\t\tif (expression) {\r\n\t\t\tconst outputFunction = module.makeFunction(expression, ['$event']);\r\n\t\t\tevent$.pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\tmodule.resolve(outputFunction, parentInstance, event);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tparentInstance.clickOutside$ = event$;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nClickOutsideDirective.meta = {\r\n\tselector: `[(clickOutside)]`,\r\n};\r\n","import { Pipe } from \"rxcomp\";\r\n\r\nexport default class CountPipe extends Pipe {\r\n\r\n\tstatic isNumber(value) {\r\n\t\treturn typeof value === 'number' && isFinite(value);\r\n\t}\r\n\r\n\tstatic transform(value) {\r\n\t\tif (!CountPipe.isNumber(value)) {\r\n\t\t\treturn value;\r\n\t\t}\r\n\t\tvalue = parseInt(value);\r\n\t\tlet count = '';\r\n\t\tif (value > 1000000) {\r\n\t\t\tvalue = Math.floor(value / 100000) / 10;\r\n\t\t\tcount = value + 'M';\r\n\t\t} else if (value > 1000) {\r\n\t\t\tvalue = Math.floor(value / 100) / 10;\r\n\t\t\tcount = value + 'k';\r\n\t\t} else {\r\n\t\t\treturn value;\r\n\t\t}\r\n\t\treturn count;\r\n\t}\r\n\r\n}\r\n\r\nCountPipe.meta = {\r\n\tname: 'count',\r\n};\r\n","export const LocaleType = {\r\n\tDateFormats: 'dateFormats',\r\n\tTimeFormats: 'timeFormats',\r\n\tDayPeriods: 'dayPeriods',\r\n\tDays: 'days',\r\n\tMonths: 'months',\r\n\tEras: 'eras',\r\n\tNumberSymbols: 'numberSymbols',\r\n};\r\n\r\nexport const LocaleStyle = {\r\n\t// For `en-US`, 'M/d/yy, h:mm a'` (Example: `6/15/15, 9:03 AM`)\r\n\tShort: 'short',\r\n\t// For `en-US`, `'MMM d, y, h:mm:ss a'` (Example: `Jun 15, 2015, 9:03:01 AM`)\r\n\tMedium: 'medium',\r\n\t// For `en-US`, `'MMMM d, y, h:mm:ss a z'` (Example: `June 15, 2015 at 9:03:01 AM GMT+1`)\r\n\tLong: 'long',\r\n\t// For `en-US`, `'EEEE, MMMM d, y, h:mm:ss a zzzz'` (Example: `Monday, June 15, 2015 at 9:03:01 AM GMT+01:00`)\r\n\tFull: 'full',\r\n};\r\n\r\nexport const LocaleLength = {\r\n\t// 1 character for `en-US`. For example: 'S'\r\n\tNarrow: 'narrow',\r\n\t// 2 characters for `en-US`, For example: 'Su'\r\n\tShort: 'short',\r\n\t// 3 characters for `en-US`. For example: 'Sun'\r\n\tAbbreviated: 'abbreviated',\r\n\t// Full length for `en-US`. For example: 'Sunday'\r\n\tWide: 'wide',\r\n};\r\n\r\nexport const LocaleDay = {\r\n\tSunday: 'sunday',\r\n\tMonday: 'monday',\r\n\tTuesday: 'tuesday',\r\n\tWednesday: 'wednesday',\r\n\tThursday: 'thursday',\r\n\tFriday: 'friday',\r\n\tSaturday: 'saturday',\r\n};\r\n\r\nexport const LocaleMonth = {\r\n\tJanuary: 'january',\r\n\tFebruary: 'february',\r\n\tMarch: 'march',\r\n\tApril: 'april',\r\n\tMay: 'may',\r\n\tJune: 'june',\r\n\tJuly: 'july',\r\n\tAugust: 'august',\r\n\tSeptember: 'september',\r\n\tOctober: 'october',\r\n\tNovember: 'november',\r\n\tDecember: 'december',\r\n};\r\n\r\nexport const LocaleDayPeriod = {\r\n\tAM: 'am',\r\n\tPM: 'pm',\r\n};\r\n\r\nexport const LocaleEra = {\r\n\tBC: 'bc',\r\n\tAD: 'ad',\r\n};\r\n\r\nexport const LocaleNumberSymbol = {\r\n\t// Decimal separator. For `en-US`, the dot character. Example : 2,345`.`67\r\n\tDecimal: 'decimal',\r\n\t// Grouping separator, typically for thousands. For `en-US`, the comma character. Example: 2`,`345.67\r\n\tGroup: 'group',\r\n\t// List-item separator. Example: 'one, two, and three'\r\n\tList: 'list',\r\n\t// Sign for percentage (out of 100). Example: 23.4%\r\n\tPercentSign: 'percentSign',\r\n\t// Sign for positive numbers. Example: +23\r\n\tPlusSign: 'plusSign',\r\n\t// Sign for negative numbers. Example: -23\r\n\tMinusSign: 'minusSign',\r\n\t// Computer notation for exponential value (n times a power of 10). Example: 1.2E3\r\n\tExponential: 'exponential',\r\n\t// Human-readable format of exponential. Example: 1.2x103\r\n\tSuperscriptingExponent: 'superscriptingExponent',\r\n\t// Sign for permille (out of 1000). Example: 23.4\r\n\tPerMille: 'perMille',\r\n\t// Infinity, can be used with plus and minus. Example: , +, -\r\n\tInfinity: 'infinity',\r\n\t// Not a number. Example: NaN\r\n\tNaN: 'nan',\r\n\t// Symbol used between time units. Example: 10:52\r\n\tTimeSeparator: 'timeSeparator',\r\n\t// Decimal separator for currency values (fallback to `Decimal`). Example: $2,345.67\r\n\tCurrencyDecimal: 'currencyDecimal',\r\n\t// Group separator for currency values (fallback to `Group`). Example: $2,345.67\r\n\tCurrencyGroup: 'currencyGroup',\r\n};\r\n\r\nconst locale_en = {\r\n\tid: 'en',\r\n\tdateFormats: {\r\n\t\tshort: 'M/d/yy',\r\n\t\tmedium: 'MMM d, y',\r\n\t\tlong: 'MMMM d, y',\r\n\t\tfull: 'EEEE, MMMM d, y',\r\n\t},\r\n\ttimeFormats: {\r\n\t\tshort: 'h:mm a',\r\n\t\tmedium: 'h:mm:ss a',\r\n\t\tlong: 'h:mm:ss a z',\r\n\t\tfull: 'h:mm:ss a zzzz',\r\n\t},\r\n\tdayPeriods: {\r\n\t\tnarrow: {\r\n\t\t\tam: 'a',\r\n\t\t\tpm: 'p',\r\n\t\t},\r\n\t\tabbreviated: {\r\n\t\t\tam: 'AM',\r\n\t\t\tpm: 'PM',\r\n\t\t},\r\n\t\twide: {\r\n\t\t\tam: 'AM',\r\n\t\t\tpm: 'PM',\r\n\t\t},\r\n\t},\r\n\tdays: {\r\n\t\tnarrow: { sunday: 'S', monday: 'M', tuesday: 'T', wednesday: 'W', thursday: 'T', friday: 'F', saturday: 'S' },\r\n\t\tshort: { sunday: 'Su', monday: 'Mo', tuesday: 'Tu', wednesday: 'We', thursday: 'Th', friday: 'Fr', saturday: 'Sa' },\r\n\t\tabbreviated: { sunday: 'Sun', monday: 'Mon', tuesday: 'Tue', wednesday: 'Wed', thursday: 'Thu', friday: 'Fri', saturday: 'Sat' },\r\n\t\twide: { sunday: 'Sunday', monday: 'Monday', tuesday: 'Tuesday', wednesday: 'Wednesday', thursday: 'Thursday', friday: 'Friday', saturday: 'Saturday' },\r\n\t},\r\n\tmonths: {\r\n\t\tnarrow: { january: 'J', february: 'F', march: 'M', april: 'A', may: 'M', june: 'J', july: 'J', august: 'A', september: 'S', october: 'O', november: 'N', december: 'D' },\r\n\t\tabbreviated: { january: 'Jan', february: 'Feb', march: 'Mar', april: 'Apr', may: 'May', june: 'Jun', july: 'Jul', august: 'Aug', september: 'Sep', october: 'Oct', november: 'Nov', december: 'Dec' },\r\n\t\twide: { january: 'January', february: 'February', march: 'March', april: 'April', may: 'May', june: 'June', july: 'July', august: 'August', september: 'September', october: 'October', november: 'November', december: 'December' },\r\n\t},\r\n\teras: {\r\n\t\tnarrow: { bc: 'B', ad: 'A' },\r\n\t\tabbreviated: { bc: 'BC', ad: 'AD' },\r\n\t\twide: { bc: 'Before Christ', ad: 'Anno Domini' },\r\n\t},\r\n\tnumberSymbols: {\r\n\t\tdecimal: '.',\r\n\t\tgroup: ',',\r\n\t\tlist: ';',\r\n\t\tpercentSign: '%',\r\n\t\tplusSign: '+',\r\n\t\tminusSign: '-',\r\n\t\texponential: 'E',\r\n\t\tsuperscriptingExponent: '',\r\n\t\tperMille: '',\r\n\t\tinfinite: '',\r\n\t\tnan: 'NaN',\r\n\t\ttimeSeparator: ':',\r\n\t\t// currencyDecimal: undefined, // fallback to decimal\r\n\t\t// currencyGroup: undefined, // fallback to group\r\n\t},\r\n};\r\n\r\nconst locale_it = {\r\n\tid: 'it',\r\n\tdateFormats: {\r\n\t\tshort: 'dd/MM/yy',\r\n\t\tmedium: 'd MMM y',\r\n\t\tlong: 'd MMMM y',\r\n\t\tfull: 'EEEE d MMMM y',\r\n\t},\r\n\ttimeFormats: {\r\n\t\tshort: 'HH:mm',\r\n\t\tmedium: 'HH:mm:ss',\r\n\t\tlong: 'HH:mm:ss z',\r\n\t\tfull: 'HH:mm:ss zzzz'\r\n\t},\r\n\tdayPeriods: {\r\n\t\tnarrow: {\r\n\t\t\tam: 'm',\r\n\t\t\tpm: 'p',\r\n\t\t},\r\n\t\tabbreviated: {\r\n\t\t\tam: 'AM',\r\n\t\t\tpm: 'PM',\r\n\t\t},\r\n\t\twide: {\r\n\t\t\tam: 'AM',\r\n\t\t\tpm: 'PM',\r\n\t\t},\r\n\t},\r\n\tdays: {\r\n\t\tnarrow: { sunday: 'D', monday: 'L', tuesday: 'M', wednesday: 'M', thursday: 'G', friday: 'V', saturday: 'S' },\r\n\t\tshort: { sunday: 'Do', monday: 'Lu', tuesday: 'Ma', wednesday: 'Me', thursday: 'Gi', friday: 'Ve', saturday: 'Sa' },\r\n\t\tabbreviated: { sunday: 'Dom', monday: 'Lun', tuesday: 'Mar', wednesday: 'Mer', thursday: 'Gio', friday: 'Ven', saturday: 'Sab' },\r\n\t\twide: { sunday: 'Domenica', monday: 'Luned', tuesday: 'Marted', wednesday: 'Mercoled', thursday: 'Gioved', friday: 'Venerd', saturday: 'Sabato' },\r\n\t},\r\n\tmonths: {\r\n\t\tnarrow: { january: 'G', february: 'F', march: 'M', april: 'A', may: 'M', june: 'G', july: 'L', august: 'A', september: 'S', october: 'O', november: 'N', december: 'D' },\r\n\t\tabbreviated: { january: 'Gen', february: 'Feb', march: 'Mar', april: 'Apr', may: 'Mag', june: 'Giu', july: 'Lug', august: 'Ago', september: 'Set', october: 'Ott', november: 'Nov', december: 'Dic' },\r\n\t\twide: { january: 'Gennaio', february: 'Febbraio', march: 'Marzo', april: 'Aprile', may: 'Maggio', june: 'Giugno', july: 'Luglio', august: 'Agosto', september: 'Settembre', october: 'Ottobre', november: 'Novembre', december: 'Dicembre' },\r\n\t},\r\n\teras: {\r\n\t\tnarrow: { bc: 'aC', ad: 'dC' },\r\n\t\tabbreviated: { bc: 'a.C.', ad: 'd.C.' },\r\n\t\twide: { bc: 'avanti Cristo', ad: 'dopo Cristo' },\r\n\t},\r\n\tnumberSymbols: {\r\n\t\tdecimal: ',',\r\n\t\tgroup: '.',\r\n\t\tlist: ';',\r\n\t\tpercentSign: '%',\r\n\t\tplusSign: '+',\r\n\t\tminusSign: '-',\r\n\t\texponential: 'E',\r\n\t\tsuperscriptingExponent: '',\r\n\t\tperMille: '',\r\n\t\tinfinite: '',\r\n\t\tnan: 'NaN',\r\n\t\ttimeSeparator: ':',\r\n\t\t// currencyDecimal: undefined, // fallback to decimal\r\n\t\t// currencyGroup: undefined, // fallback to group\r\n\t},\r\n};\r\n\r\nexport default class LocaleService {\r\n\r\n\tstatic getLocale() {\r\n\t\tconst locale = window.locale || LocaleService.defaultLocale;\r\n\t\tconst key = [...arguments].join('.');\r\n\t\t// console.log(key, locale[key]);\r\n\t\treturn locale[key] || `{${key}}`;\r\n\t}\r\n\r\n\tstatic getObjectLocale() {\r\n\t\t// console.log([...arguments].join(','));\r\n\t\tlet value;\r\n\t\tfor (let i = 0; i < arguments.length; i++) {\r\n\t\t\tconst key = arguments[i];\r\n\t\t\tvalue = value ? value[key] : locale[key];\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tstatic toLocaleString(locale, out = {}, ...args) {\r\n\t\tif (typeof locale === 'string') {\r\n\t\t\tout[args.join('.')] = locale;\r\n\t\t} else {\r\n\t\t\tObject.keys(locale).forEach(key => {\r\n\t\t\t\tconst keys = args.slice();\r\n\t\t\t\tkeys.push(key);\r\n\t\t\t\tout = this.toLocaleString(locale[key], out, ...keys);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn out;\r\n\t}\r\n\r\n\tstatic toLocaleObject(locale, key, out = {}) {\r\n\t\tif (typeof locale === 'string') {\r\n\t\t\tout[key] = locale;\r\n\t\t} else {\r\n\t\t\tif (key) {\r\n\t\t\t\tout = out[key] = {};\r\n\t\t\t}\r\n\t\t\tObject.keys(locale).forEach(key => {\r\n\t\t\t\tout = this.toLocaleObject(locale[key], key, out);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn out;\r\n\t}\r\n\r\n}\r\n\r\nLocaleService.defaultLocale = LocaleService.toLocaleString(locale_it);\r\n","import LocaleService, { LocaleDay, LocaleDayPeriod, LocaleEra, LocaleLength, LocaleMonth, LocaleNumberSymbol, LocaleStyle, LocaleType } from '../locale/locale.service';\r\n\r\nexport const NumberFormatStyle_ = {\r\n\tDecimal: 'decimal',\r\n\tPercent: 'percent',\r\n\tCurrency: 'currency',\r\n\tScientific: 'scientific',\r\n};\r\n\r\nexport const Plural_ = {\r\n\tZero: 0,\r\n\tOne: 1,\r\n\tTwo: 2,\r\n\tFew: 3,\r\n\tMany: 4,\r\n\tOther: 5,\r\n};\r\n\r\nexport const TimezoneLength = {\r\n\tShort: 'short',\r\n\tShortGMT: 'shortGmt',\r\n\tLong: 'long',\r\n\tExtended: 'extended',\r\n};\r\n\r\nexport const DatePart = {\r\n\tFullYear: 'fullYear',\r\n\tMonth: 'month',\r\n\tDate: 'date',\r\n\tHours: 'hours',\r\n\tMinutes: 'minutes',\r\n\tSeconds: 'seconds',\r\n\tMilliseconds: 'milliseconds',\r\n\tDay: 'day',\r\n};\r\n\r\n/*\r\n// Converts a value to date. Throws if unable to convert to a date.\r\nexport const ISO8601_DATE_REGEX = /^(\\d{4})-?(\\d\\d)-?(\\d\\d)(?:T(\\d\\d)(?::?(\\d\\d)(?::?(\\d\\d)(?:\\.(\\d+))?)?)?(Z|([+-])(\\d\\d):?(\\d\\d))?)?$/;\r\nexport function parseDate(value) {\r\n\tif (isDate(value)) {\r\n\t\treturn value;\r\n\t}\r\n\tif (typeof value === 'number' && !isNaN(value)) {\r\n\t\treturn new Date(value);\r\n\t}\r\n\tif (typeof value === 'string') {\r\n\t\tvalue = value.trim();\r\n\t\tconst parsedNb = parseFloat(value);\r\n\t\t// any string that only contains numbers, like '1234' but not like '1234hello'\r\n\t\tif (!isNaN(value - parsedNb)) {\r\n\t\t\treturn new Date(parsedNb);\r\n\t\t}\r\n\t\tif (/^(\\d{4}-\\d{1,2}-\\d{1,2})$/.test(value)) {\r\n\t\t\t// For ISO Strings without time the day, month and year must be extracted from the ISO String\r\n      // before Date creation to avoid time offset and errors in the new Date.\r\n      // If we only replace '-' with ',' in the ISO String ('2015,01,01'), and try to create a new\r\n      // date, some browsers (e.g. IE 9) will throw an invalid Date error.\r\n      // If we leave the '-' ('2015-01-01') and try to create a new Date('2015-01-01') the timeoffset\r\n      // is applied.\r\n      // Note: ISO months are 0 for January, 1 for February, ...\r\n\t\t\tconst [y, m, d] = value.split('-').map(val => +val);\r\n\t\t\treturn new Date(y, m - 1, d);\r\n\t\t}\r\n\t\tconst match = value.match(ISO8601_DATE_REGEX);\r\n\t\tif (match) {\r\n\t\t\treturn isoStringToDate(match);\r\n\t\t}\r\n\t}\r\n\tconst date = new Date(value);\r\n\tif (!isDate(date)) {\r\n\t\tthrow new Error(`Unable to convert \"${value}\" into a date`);\r\n\t}\r\n\treturn date;\r\n}\r\n\r\n// Converts a date in ISO8601 to a Date. Used instead of `Date.parse` because of browser discrepancies.\r\nexport function isoStringToDate(match) {\r\n\tconst date = new Date(0);\r\n\tlet tzHour = 0;\r\n\tlet tzMin = 0;\r\n\t// match[8] means that the string contains 'Z' (UTC) or a timezone like '+01:00' or '+0100'\r\n\tconst dateSetter = match[8] ? date.setUTCFullYear : date.setFullYear;\r\n\tconst timeSetter = match[8] ? date.setUTCHours : date.setHours;\r\n\t// if there is a timezone defined like '+01:00' or '+0100'\r\n\tif (match[9]) {\r\n\t\ttzHour = Number(match[9] + match[10]);\r\n\t\ttzMin = Number(match[9] + match[11]);\r\n\t}\r\n\tdateSetter.call(date, Number(match[1]), Number(match[2]) - 1, Number(match[3]));\r\n\tconst h = Number(match[4] || 0) - tzHour;\r\n\tconst m = Number(match[5] || 0) - tzMin;\r\n\tconst s = Number(match[6] || 0);\r\n\tconst ms = Math.round(parseFloat('0.' + (match[7] || 0)) * 1000);\r\n\ttimeSetter.call(date, h, m, s, ms);\r\n\treturn date;\r\n}\r\n\r\nexport function isDate(value) {\r\n\treturn value instanceof Date && !isNaN(value.valueOf());\r\n}\r\n*/\r\n\r\nfunction padNumber(num, digits, minusSign = '-', trim, negWrap) {\r\n\tlet neg = '';\r\n\tif (negWrap && num <= 0) {\r\n\t\tnum = -num + 1;\r\n\t} else if (num < 0) {\r\n\t\tnum = -num;\r\n\t\tneg = minusSign;\r\n\t}\r\n\tlet strNum = String(num);\r\n\twhile (strNum.length < digits) {\r\n\t\tstrNum = '0' + strNum;\r\n\t}\r\n\tif (trim) {\r\n\t\tstrNum = strNum.substr(strNum.length - digits);\r\n\t}\r\n\treturn neg + strNum;\r\n}\r\n\r\nconst FORMAT_SPLITTER_REGEX = /((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\\s\\S]*)/;\r\nconst JANUARY = 0;\r\nconst THURSDAY = 4;\r\n\r\nexport default class DateTimeService {\r\n\tstatic getDatePart(part, date) {\r\n\t\tswitch (part) {\r\n\t\t\tcase DatePart.FullYear:\r\n\t\t\t\treturn date.getFullYear();\r\n\t\t\tcase DatePart.Month:\r\n\t\t\t\treturn date.getMonth();\r\n\t\t\tcase DatePart.Date:\r\n\t\t\t\treturn date.getDate();\r\n\t\t\tcase DatePart.Day:\r\n\t\t\t\treturn date.getDay();\r\n\t\t\tcase DatePart.Hours:\r\n\t\t\t\treturn date.getHours();\r\n\t\t\tcase DatePart.Minutes:\r\n\t\t\t\treturn date.getMinutes();\r\n\t\t\tcase DatePart.Seconds:\r\n\t\t\t\treturn date.getSeconds();\r\n\t\t\tcase DatePart.Milliseconds:\r\n\t\t\t\treturn date.getMilliseconds();\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(`Unknown DatePart value \"${part}\".`);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic formatMilliseconds(milliseconds, digits) {\r\n\t\tconst strMs = padNumber(milliseconds, 3);\r\n\t\treturn strMs.substr(0, digits);\r\n\t}\r\n\r\n\tstatic getDateFormatter(name, digits, offset = 0, trim = false, negWrap = false) {\r\n\t\treturn function(date, locale) {\r\n\t\t\tlet part = DateTimeService.getDatePart(name, date);\r\n\t\t\tif (offset > 0 || part > -offset) {\r\n\t\t\t\tpart += offset;\r\n\t\t\t}\r\n\t\t\tif (name === DatePart.Hours) {\r\n\t\t\t\tif (part === 0 && offset === -12) {\r\n\t\t\t\t\tpart = 12;\r\n\t\t\t\t}\r\n\t\t\t} else if (name === DatePart.Milliseconds) {\r\n\t\t\t\treturn DateTimeService.formatMilliseconds(part, digits);\r\n\t\t\t}\r\n\t\t\tconst localeMinus = LocaleService.getLocale(LocaleType.NumberSymbols, LocaleNumberSymbol.MinusSign);\r\n\t\t\treturn padNumber(part, digits, localeMinus, trim, negWrap);\r\n\t\t};\r\n\t}\r\n\r\n\tstatic getDateTranslation(date, name, width, extended) {\r\n\t\tlet locale;\r\n\t\tswitch (name) {\r\n\t\t\tcase LocaleType.Days:\r\n\t\t\t\treturn LocaleService.getLocale(LocaleType.Days, width, Object.values(LocaleDay)[date.getDay()]);\r\n\t\t\t\t// return getLocaleDayNames(width)[Object.values(LocaleDay)[date.getDay()]];\r\n\t\t\tcase LocaleType.Months:\r\n\t\t\t\treturn LocaleService.getLocale(LocaleType.Months, width, Object.values(LocaleMonth)[date.getMonth()]);\r\n\t\t\tcase LocaleType.DayPeriods:\r\n\t\t\t\tconst currentHours = date.getHours();\r\n\t\t\t\t/*\r\n\t\t\t\tconst currentMinutes = date.getMinutes();\r\n\t\t\t\tif (extended) {\r\n\t\t\t\t\tconst rules = getLocaleExtraDayPeriodRules();\r\n\t\t\t\t\tconst dayPeriods = getLocaleExtraDayPeriods(width);\r\n\t\t\t\t\tconst index = rules.findIndex(rule => {\r\n\t\t\t\t\t\tif (Array.isArray(rule)) {\r\n\t\t\t\t\t\t\t// morning, afternoon, evening, night\r\n\t\t\t\t\t\t\tconst [from, to] = rule;\r\n\t\t\t\t\t\t\tconst afterFrom = currentHours >= from.hours && currentMinutes >= from.minutes;\r\n\t\t\t\t\t\t\tconst beforeTo = currentHours < to.hours || (currentHours === to.hours && currentMinutes < to.minutes);\r\n\t\t\t\t\t\t\t// We must account for normal rules that span a period during the day (e.g. 6am-9am)\r\n\t\t\t\t\t\t\t// where `from` is less (earlier) than `to`. But also rules that span midnight (e.g.\r\n\t\t\t\t\t\t\t// 10pm - 5am) where `from` is greater (later!) than `to`.\r\n\t\t\t\t\t\t\t//\r\n\t\t\t\t\t\t\t// In the first case the current time must be BOTH after `from` AND before `to`\r\n\t\t\t\t\t\t\t// (e.g. 8am is after 6am AND before 10am).\r\n\t\t\t\t\t\t\t//\r\n\t\t\t\t\t\t\t// In the second case the current time must be EITHER after `from` OR before `to`\r\n\t\t\t\t\t\t\t// (e.g. 4am is before 5am but not after 10pm; and 11pm is not before 5am but it is\r\n\t\t\t\t\t\t\t// after 10pm).\r\n\t\t\t\t\t\t\tif (from.hours < to.hours) {\r\n\t\t\t\t\t\t\t\tif (afterFrom && beforeTo) {\r\n\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (afterFrom || beforeTo) {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// noon or midnight\r\n\t\t\t\t\t\t\tif (rule.hours === currentHours && rule.minutes === currentMinutes) {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\treturn dayPeriods[index];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t*/\r\n\t\t\t\t// if no rules for the day periods, we use am/pm by default\r\n\t\t\t\treturn LocaleService.getLocale(LocaleType.DayPeriods, width, currentHours < 12 ? LocaleDayPeriod.AM : LocaleDayPeriod.PM);\r\n\t\t\tcase LocaleType.Eras:\r\n\t\t\t\treturn LocaleService.getLocale(LocaleType.Eras, width, date.getFullYear() <= 0 ? LocaleEra.BC : LocaleEra.AD);\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(`unknown translation type ${name}`);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getDateLocaleFormatter(name, width, extended = false) {\r\n\t\treturn function(date) {\r\n\t\t\treturn DateTimeService.getDateTranslation(date, name, width, extended);\r\n\t\t};\r\n\t}\r\n\r\n\tstatic getWeekFirstThursdayOfYear(year) {\r\n\t\tconst firstDayOfYear = new Date(year, JANUARY, 1).getDay();\r\n\t\treturn new Date(year, 0, 1 + (firstDayOfYear <= THURSDAY ? THURSDAY : THURSDAY + 7) - firstDayOfYear);\r\n\t}\r\n\r\n\tstatic getWeekThursday(datetime) {\r\n\t\treturn new Date(datetime.getFullYear(), datetime.getMonth(), datetime.getDate() + (THURSDAY - datetime.getDay()));\r\n\t}\r\n\r\n\tstatic getWeekFormatter(digits, monthBased = false) {\r\n\t\treturn function(date, locale) {\r\n\t\t\tlet result;\r\n\t\t\tif (monthBased) {\r\n\t\t\t\tconst nbDaysBefore1stDayOfMonth = new Date(date.getFullYear(), date.getMonth(), 1).getDay() - 1;\r\n\t\t\t\tconst today = date.getDate();\r\n\t\t\t\tresult = 1 + Math.floor((today + nbDaysBefore1stDayOfMonth) / 7);\r\n\t\t\t} else {\r\n\t\t\t\tconst firstThurs = DateTimeService.getWeekFirstThursdayOfYear(date.getFullYear());\r\n\t\t\t\tconst thisThurs = DateTimeService.getWeekThursday(date);\r\n\t\t\t\tconst diff = thisThurs.getTime() - firstThurs.getTime();\r\n\t\t\t\tresult = 1 + Math.round(diff / 6.048e8); // 6.048e8 ms per week\r\n\t\t\t}\r\n\t\t\treturn padNumber(result, digits, LocaleService.getLocale(LocaleType.NumberSymbols, LocaleNumberSymbol.MinusSign));\r\n\t\t};\r\n\t}\r\n\r\n\tstatic getTimezoneFormatter(width) {\r\n\t\treturn function(date, offset) {\r\n\t\t\tconst zone = -1 * offset;\r\n\t\t\tconst minusSign = LocaleService.getLocale(LocaleType.NumberSymbols, LocaleNumberSymbol.MinusSign);\r\n\t\t\tconst hours = zone > 0 ? Math.floor(zone / 60) : Math.ceil(zone / 60);\r\n\t\t\tswitch (width) {\r\n\t\t\t\tcase TimezoneLength.Short:\r\n\t\t\t\t\treturn (zone >= 0 ? '+' : '') + padNumber(hours, 2, minusSign) + padNumber(Math.abs(zone % 60), 2, minusSign);\r\n\t\t\t\tcase TimezoneLength.ShortGMT:\r\n\t\t\t\t\treturn 'GMT' + (zone >= 0 ? '+' : '') + padNumber(hours, 1, minusSign);\r\n\t\t\t\tcase TimezoneLength.Long:\r\n\t\t\t\t\treturn 'GMT' + (zone >= 0 ? '+' : '') + padNumber(hours, 2, minusSign) + ':' + padNumber(Math.abs(zone % 60), 2, minusSign);\r\n\t\t\t\tcase TimezoneLength.Extended:\r\n\t\t\t\t\tif (offset === 0) {\r\n\t\t\t\t\t\treturn 'Z';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn (zone >= 0 ? '+' : '') + padNumber(hours, 2, minusSign) + ':' + padNumber(Math.abs(zone % 60), 2, minusSign);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tthrow new Error(`Unknown zone width \"${width}\"`);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\t// Based on CLDR formats:\r\n\t// See complete list: http://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table\r\n\t// See also explanations: http://cldr.unicode.org/translation/date-time\r\n\t// TODO(ocombe): support all missing cldr formats: Y, U, Q, D, F, e, c, j, J, C, A, v, V, X, x\r\n\t// const CACHED_FORMATTERS = {};\r\n\tstatic getFormatter(format) {\r\n\t\t/*\r\n\t// cache\r\n\tif (CACHED_FORMATTERS[format]) {\r\n\t\treturn CACHED_FORMATTERS[format];\r\n\t}\r\n\t*/\r\n\t\tlet formatter;\r\n\t\tswitch (format) {\r\n\t\t\t// 1 digit representation of the year, e.g. (AD 1 => 1, AD 199 => 199)\r\n\t\t\tcase 'y':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.FullYear, 1, 0, false, true);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// 2 digit representation of the year, padded (00-99). (e.g. AD 2001 => 01, AD 2010 => 10)\r\n\t\t\tcase 'yy':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.FullYear, 2, 0, true, true);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// 3 digit representation of the year, padded (000-999). (e.g. AD 2001 => 01, AD 2010 => 10)\r\n\t\t\tcase 'yyy':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.FullYear, 3, 0, false, true);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// 4 digit representation of the year (e.g. AD 1 => 0001, AD 2010 => 2010)\r\n\t\t\tcase 'yyyy':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.FullYear, 4, 0, false, true);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Month of the year (1-12), numeric\r\n\t\t\tcase 'M':\r\n\t\t\tcase 'L':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Month, 1, 1);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'MM':\r\n\t\t\tcase 'LL':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Month, 2, 1);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Day of the month (1-31)\r\n\t\t\tcase 'd':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Date, 1);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'dd':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Date, 2);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Hour in AM/PM, (1-12)\r\n\t\t\tcase 'h':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Hours, 1, -12);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'hh':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Hours, 2, -12);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Hour of the day (0-23)\r\n\t\t\tcase 'H':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Hours, 1);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Hour in day, padded (00-23)\r\n\t\t\tcase 'HH':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Hours, 2);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Minute of the hour (0-59)\r\n\t\t\tcase 'm':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Minutes, 1);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'mm':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Minutes, 2);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Second of the minute (0-59)\r\n\t\t\tcase 's':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Seconds, 1);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'ss':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Seconds, 2);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Fractional second\r\n\t\t\tcase 'S':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Milliseconds, 1);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'SS':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Milliseconds, 2);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'SSS':\r\n\t\t\t\tformatter = DateTimeService.getDateFormatter(DatePart.Milliseconds, 3);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Month of the year (January, ...), string, format\r\n\t\t\tcase 'MMM':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.Months, LocaleLength.Abbreviated);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'MMMM':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.Months, LocaleLength.Wide);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'MMMMM':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.Months, LocaleLength.Narrow);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Month of the year (January, ...), string, standalone\r\n\t\t\tcase 'LLL':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.Months, LocaleLength.Abbreviated, FormStyle.Standalone);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'LLLL':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.Months, LocaleLength.Wide, FormStyle.Standalone);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'LLLLL':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.Months, LocaleLength.Narrow, FormStyle.Standalone);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Day of the Week\r\n\t\t\tcase 'E':\r\n\t\t\tcase 'EE':\r\n\t\t\tcase 'EEE':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.Days, LocaleLength.Abbreviated);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'EEEE':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.Days, LocaleLength.Wide);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'EEEEE':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.Days, LocaleLength.Narrow);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'EEEEEE':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.Days, LocaleLength.Short);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Generic period of the day (am-pm)\r\n\t\t\tcase 'a':\r\n\t\t\tcase 'aa':\r\n\t\t\tcase 'aaa':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.DayPeriods, LocaleLength.Abbreviated);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'aaaa':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.DayPeriods, LocaleLength.Wide);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'aaaaa':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.DayPeriods, LocaleLength.Narrow);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Extended period of the day (midnight, at night, ...), standalone\r\n\t\t\tcase 'b':\r\n\t\t\tcase 'bb':\r\n\t\t\tcase 'bbb':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.DayPeriods, LocaleLength.Abbreviated, FormStyle.Standalone, true);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'bbbb':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.DayPeriods, LocaleLength.Wide, FormStyle.Standalone, true);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'bbbbb':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.DayPeriods, LocaleLength.Narrow, FormStyle.Standalone, true);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Extended period of the day (midnight, night, ...), standalone\r\n\t\t\tcase 'B':\r\n\t\t\tcase 'BB':\r\n\t\t\tcase 'BBB':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.DayPeriods, LocaleLength.Abbreviated, FormStyle.Format, true);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'BBBB':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.DayPeriods, LocaleLength.Wide, FormStyle.Format, true);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'BBBBB':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.DayPeriods, LocaleLength.Narrow, FormStyle.Format, true);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Era name (AD/BC)\r\n\t\t\tcase 'GGGGG':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.Eras, LocaleLength.Narrow);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'G':\r\n\t\t\tcase 'GG':\r\n\t\t\tcase 'GGG':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.Eras, LocaleLength.Abbreviated);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'GGGG':\r\n\t\t\t\tformatter = DateTimeService.getDateLocaleFormatter(LocaleType.Eras, LocaleLength.Wide);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Week of the year (1, ... 52)\r\n\t\t\tcase 'w':\r\n\t\t\t\tformatter = DateTimeService.getWeekFormatter(1);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'ww':\r\n\t\t\t\tformatter = DateTimeService.getWeekFormatter(2);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Week of the month (1, ...)\r\n\t\t\tcase 'W':\r\n\t\t\t\tformatter = DateTimeService.getWeekFormatter(1, true);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Timezone ISO8601 short format (-0430)\r\n\t\t\tcase 'Z':\r\n\t\t\tcase 'ZZ':\r\n\t\t\tcase 'ZZZ':\r\n\t\t\t\tformatter = DateTimeService.getTimezoneFormatter(TimezoneLength.Short);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Timezone ISO8601 extended format (-04:30)\r\n\t\t\tcase 'ZZZZZ':\r\n\t\t\t\tformatter = DateTimeService.getTimezoneFormatter(TimezoneLength.Extended);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Timezone GMT short format (GMT+4)\r\n\t\t\tcase 'O':\r\n\t\t\tcase 'OO':\r\n\t\t\tcase 'OOO':\r\n\t\t\t\tformatter = DateTimeService.getTimezoneFormatter(TimezoneLength.ShortGMT);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Should be location, but fallback to format O instead because we don't have the data yet\r\n\t\t\tcase 'z':\r\n\t\t\tcase 'zz':\r\n\t\t\tcase 'zzz':\r\n\t\t\t\tformatter = DateTimeService.getTimezoneFormatter(TimezoneLength.ShortGMT);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Timezone GMT long format (GMT+0430)\r\n\t\t\tcase 'OOOO':\r\n\t\t\tcase 'ZZZZ':\r\n\t\t\t\tformatter = DateTimeService.getTimezoneFormatter(TimezoneLength.Long);\r\n\t\t\t\tbreak;\r\n\t\t\t\t// Should be location, but fallback to format O instead because we don't have the data yet\r\n\t\t\tcase 'zzzz':\r\n\t\t\t\tformatter = DateTimeService.getTimezoneFormatter(TimezoneLength.Long);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\treturn null;\r\n\t\t}\r\n\t\t/*\r\n\t// cache\r\n\tCACHED_FORMATTERS[format] = formatter;\r\n\t*/\r\n\t\treturn formatter;\r\n\t}\r\n\r\n\tstatic setTimezoneOffset(timezone, fallback) {\r\n\t\t// Support: IE 9-11 only, Edge 13-15+\r\n\t\t// IE/Edge do not \"understand\" colon (`:`) in timezone\r\n\t\ttimezone = timezone.replace(/:/g, '');\r\n\t\tconst requestedTimezoneOffset = Date.parse('Jan 01, 1970 00:00:00 ' + timezone) / 60000;\r\n\t\treturn isNaN(requestedTimezoneOffset) ? fallback : requestedTimezoneOffset;\r\n\t}\r\n\r\n\tstatic dateTimezoneToLocal(date, timezone, reverse) {\r\n\t\tconst reverseValue = reverse ? -1 : 1;\r\n\t\tconst dateTimezoneOffset = date.getTimezoneOffset();\r\n\t\tconst timezoneOffset = DateTimeService.setTimezoneOffset(timezone, dateTimezoneOffset);\r\n\t\tconst minutes = reverseValue * (timezoneOffset - dateTimezoneOffset);\r\n\t\tdate = new Date(date.getTime());\r\n\t\tdate.setMinutes(date.getMinutes() + minutes);\r\n\t\treturn date;\r\n\t}\r\n\r\n\tstatic parseDate(value) {\r\n\t\tif (value instanceof Date) {\r\n\t\t\treturn value;\r\n\t\t}\r\n\t\treturn Date.parse(value);\r\n\t}\r\n\r\n\t// const CACHED_FORMATS = {};\r\n\tstatic getNamedFormat(format) {\r\n\t\t/*\r\n\t// cache\r\n\tconst localeId = locale.id;\r\n\tCACHED_FORMATS[localeId] = CACHED_FORMATS[localeId] || {};\r\n\tif (CACHED_FORMATS[localeId][format]) {\r\n\t\treturn CACHED_FORMATS[localeId][format];\r\n\t}\r\n\t*/\r\n\t\tlet formatValue = '';\r\n\t\tswitch (format) {\r\n\t\t\tcase 'shortDate':\r\n\t\t\t\tformatValue = LocaleService.getLocale(LocaleType.DateFormats, LocaleStyle.Short);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'mediumDate':\r\n\t\t\t\tformatValue = LocaleService.getLocale(LocaleType.DateFormats, LocaleStyle.Medium);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'longDate':\r\n\t\t\t\tformatValue = LocaleService.getLocale(LocaleType.DateFormats, LocaleStyle.Long);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'fullDate':\r\n\t\t\t\tformatValue = LocaleService.getLocale(LocaleType.DateFormats, LocaleStyle.Full);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'shortTime':\r\n\t\t\t\tformatValue = LocaleService.getLocale(LocaleType.TimeFormats, LocaleStyle.Short);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'mediumTime':\r\n\t\t\t\tformatValue = LocaleService.getLocale(LocaleType.TimeFormats, LocaleStyle.Medium);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'longTime':\r\n\t\t\t\tformatValue = LocaleService.getLocale(LocaleType.TimeFormats, LocaleStyle.Long);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'fullTime':\r\n\t\t\t\tformatValue = LocaleService.getLocale(LocaleType.TimeFormats, LocaleStyle.Full);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'short':\r\n\t\t\t\tconst shortTime = DateTimeService.getNamedFormat('shortTime');\r\n\t\t\t\tconst shortDate = DateTimeService.getNamedFormat('shortDate');\r\n\t\t\t\tformatValue = `${shortTime} ${shortDate}`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'medium':\r\n\t\t\t\tconst mediumTime = DateTimeService.getNamedFormat('mediumTime');\r\n\t\t\t\tconst mediumDate = DateTimeService.getNamedFormat('mediumDate');\r\n\t\t\t\tformatValue = `${mediumTime} ${mediumDate}`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'long':\r\n\t\t\t\tconst longTime = DateTimeService.getNamedFormat('longTime');\r\n\t\t\t\tconst longDate = DateTimeService.getNamedFormat('longDate');\r\n\t\t\t\tformatValue = `${longTime} ${longDate}`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'full':\r\n\t\t\t\tconst fullTime = DateTimeService.getNamedFormat('fullTime');\r\n\t\t\t\tconst fullDate = DateTimeService.getNamedFormat('fullDate');\r\n\t\t\t\tformatValue = `${fullTime} ${fullDate}`;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t}\r\n\t\t/*\r\n\t// cache\r\n\tif (formatValue) {\r\n\t\tCACHED_FORMATS[localeId][format] = formatValue;\r\n\t}\r\n\t*/\r\n\t\treturn formatValue;\r\n\t}\r\n\r\n\tstatic formatDate(value, format, timezone) {\r\n\t\tlet date = DateTimeService.parseDate(value);\r\n\t\t// console.log(date);\r\n\t\t// named formats\r\n\t\tconst namedFormat = DateTimeService.getNamedFormat(format);\r\n\t\tformat = namedFormat || format;\r\n\t\tlet formats = [];\r\n\t\tlet match;\r\n\t\twhile (format) {\r\n\t\t\tmatch = FORMAT_SPLITTER_REGEX.exec(format);\r\n\t\t\tif (match) {\r\n\t\t\t\tformats = formats.concat(match.slice(1));\r\n\t\t\t\tconst part = formats.pop();\r\n\t\t\t\tif (!part) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tformat = part;\r\n\t\t\t} else {\r\n\t\t\t\tformats.push(format);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// console.log(formats);\r\n\t\tlet dateTimezoneOffset = date.getTimezoneOffset();\r\n\t\tif (timezone) {\r\n\t\t\tdateTimezoneOffset = DateTimeService.setTimezoneOffset(timezone, dateTimezoneOffset);\r\n\t\t\tdate = DateTimeService.dateTimezoneToLocal(date, timezone, true);\r\n\t\t}\r\n\t\t// console.log(dateTimezoneOffset);\r\n\t\tlet text = '';\r\n\t\tformats.forEach(format => {\r\n\t\t\tconst formatter = DateTimeService.getFormatter(format);\r\n\t\t\tif (formatter) {\r\n\t\t\t\ttext += formatter(date, dateTimezoneOffset);\r\n\t\t\t} else {\r\n\t\t\t\ttext += format === \"''\" ? \"'\" : format.replace(/(^'|'$)/g, '').replace(/''/g, \"'\");\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn text;\r\n\t}\r\n}\r\n","import { Pipe } from 'rxcomp';\r\nimport DateTimeService from './date-time.service';\r\n\r\nexport default class DatePipe extends Pipe {\r\n\tstatic transform(value, format = 'short') {\r\n\t\treturn DateTimeService.formatDate(value, format);\r\n\t}\r\n}\r\n\r\nDatePipe.meta = {\r\n\tname: 'date',\r\n};\r\n\r\n/**\r\n *\r\n * * The result of this pipe is not reevaluated when the input is mutated. To avoid the need to\r\n * reformat the date on every change-detection cycle, treat the date as an immutable object\r\n * and change the reference when the pipe needs to run again.\r\n *\r\n * ### Pre-defined format options\r\n *\r\n * Examples are given in `en-US` locale.\r\n *\r\n * - `'short'`: equivalent to `'M/d/yy, h:mm a'` (`6/15/15, 9:03 AM`).\r\n * - `'medium'`: equivalent to `'MMM d, y, h:mm:ss a'` (`Jun 15, 2015, 9:03:01 AM`).\r\n * - `'long'`: equivalent to `'MMMM d, y, h:mm:ss a z'` (`June 15, 2015 at 9:03:01 AM\r\n * GMT+1`).\r\n * - `'full'`: equivalent to `'EEEE, MMMM d, y, h:mm:ss a zzzz'` (`Monday, June 15, 2015 at\r\n * 9:03:01 AM GMT+01:00`).\r\n * - `'shortDate'`: equivalent to `'M/d/yy'` (`6/15/15`).\r\n * - `'mediumDate'`: equivalent to `'MMM d, y'` (`Jun 15, 2015`).\r\n * - `'longDate'`: equivalent to `'MMMM d, y'` (`June 15, 2015`).\r\n * - `'fullDate'`: equivalent to `'EEEE, MMMM d, y'` (`Monday, June 15, 2015`).\r\n * - `'shortTime'`: equivalent to `'h:mm a'` (`9:03 AM`).\r\n * - `'mediumTime'`: equivalent to `'h:mm:ss a'` (`9:03:01 AM`).\r\n * - `'longTime'`: equivalent to `'h:mm:ss a z'` (`9:03:01 AM GMT+1`).\r\n * - `'fullTime'`: equivalent to `'h:mm:ss a zzzz'` (`9:03:01 AM GMT+01:00`).\r\n *\r\n * ### Custom format options\r\n *\r\n * You can construct a format string using symbols to specify the components\r\n * of a date-time value, as described in the following table.\r\n * Format details depend on the locale.\r\n * Fields marked with (*) are only available in the extra data set for the given locale.\r\n *\r\n *  | Field type         | Format      | Description                                                   | Example Value                                              |\r\n *  |--------------------|-------------|---------------------------------------------------------------|------------------------------------------------------------|\r\n *  | Era                | G, GG & GGG | Abbreviated                                                   | AD                                                         |\r\n *  |                    | GGGG        | Wide                                                          | Anno Domini                                                |\r\n *  |                    | GGGGG       | Narrow                                                        | A                                                          |\r\n *  | Year               | y           | Numeric: minimum digits                                       | 2, 20, 201, 2017, 20173                                    |\r\n *  |                    | yy          | Numeric: 2 digits + zero padded                               | 02, 20, 01, 17, 73                                         |\r\n *  |                    | yyy         | Numeric: 3 digits + zero padded                               | 002, 020, 201, 2017, 20173                                 |\r\n *  |                    | yyyy        | Numeric: 4 digits or more + zero padded                       | 0002, 0020, 0201, 2017, 20173                              |\r\n *  | Month              | M           | Numeric: 1 digit                                              | 9, 12                                                      |\r\n *  |                    | MM          | Numeric: 2 digits + zero padded                               | 09, 12                                                     |\r\n *  |                    | MMM         | Abbreviated                                                   | Sep                                                        |\r\n *  |                    | MMMM        | Wide                                                          | September                                                  |\r\n *  |                    | MMMMM       | Narrow                                                        | S                                                          |\r\n *  | Month standalone   | L           | Numeric: 1 digit                                              | 9, 12                                                      |\r\n *  |                    | LL          | Numeric: 2 digits + zero padded                               | 09, 12                                                     |\r\n *  |                    | LLL         | Abbreviated                                                   | Sep                                                        |\r\n *  |                    | LLLL        | Wide                                                          | September                                                  |\r\n *  |                    | LLLLL       | Narrow                                                        | S                                                          |\r\n *  | Week of year       | w           | Numeric: minimum digits                                       | 1... 53                                                    |\r\n *  |                    | ww          | Numeric: 2 digits + zero padded                               | 01... 53                                                   |\r\n *  | Week of month      | W           | Numeric: 1 digit                                              | 1... 5                                                     |\r\n *  | Day of month       | d           | Numeric: minimum digits                                       | 1                                                          |\r\n *  |                    | dd          | Numeric: 2 digits + zero padded                               | 01                                                          |\r\n *  | Week day           | E, EE & EEE | Abbreviated                                                   | Tue                                                        |\r\n *  |                    | EEEE        | Wide                                                          | Tuesday                                                    |\r\n *  |                    | EEEEE       | Narrow                                                        | T                                                          |\r\n *  |                    | EEEEEE      | Short                                                         | Tu                                                         |\r\n *  | Period             | a, aa & aaa | Abbreviated                                                   | am/pm or AM/PM                                             |\r\n *  |                    | aaaa        | Wide (fallback to `a` when missing)                           | ante meridiem/post meridiem                                |\r\n *  |                    | aaaaa       | Narrow                                                        | a/p                                                        |\r\n *  | Period*            | B, BB & BBB | Abbreviated                                                   | mid.                                                       |\r\n *  |                    | BBBB        | Wide                                                          | am, pm, midnight, noon, morning, afternoon, evening, night |\r\n *  |                    | BBBBB       | Narrow                                                        | md                                                         |\r\n *  | Period standalone* | b, bb & bbb | Abbreviated                                                   | mid.                                                       |\r\n *  |                    | bbbb        | Wide                                                          | am, pm, midnight, noon, morning, afternoon, evening, night |\r\n *  |                    | bbbbb       | Narrow                                                        | md                                                         |\r\n *  | Hour 1-12          | h           | Numeric: minimum digits                                       | 1, 12                                                      |\r\n *  |                    | hh          | Numeric: 2 digits + zero padded                               | 01, 12                                                     |\r\n *  | Hour 0-23          | H           | Numeric: minimum digits                                       | 0, 23                                                      |\r\n *  |                    | HH          | Numeric: 2 digits + zero padded                               | 00, 23                                                     |\r\n *  | Minute             | m           | Numeric: minimum digits                                       | 8, 59                                                      |\r\n *  |                    | mm          | Numeric: 2 digits + zero padded                               | 08, 59                                                     |\r\n *  | Second             | s           | Numeric: minimum digits                                       | 0... 59                                                    |\r\n *  |                    | ss          | Numeric: 2 digits + zero padded                               | 00... 59                                                   |\r\n *  | Fractional seconds | S           | Numeric: 1 digit                                              | 0... 9                                                     |\r\n *  |                    | SS          | Numeric: 2 digits + zero padded                               | 00... 99                                                   |\r\n *  |                    | SSS         | Numeric: 3 digits + zero padded (= milliseconds)              | 000... 999                                                 |\r\n *  | Zone               | z, zz & zzz | Short specific non location format (fallback to O)            | GMT-8                                                      |\r\n *  |                    | zzzz        | Long specific non location format (fallback to OOOO)          | GMT-08:00                                                  |\r\n *  |                    | Z, ZZ & ZZZ | ISO8601 basic format                                          | -0800                                                      |\r\n *  |                    | ZZZZ        | Long localized GMT format                                     | GMT-8:00                                                   |\r\n *  |                    | ZZZZZ       | ISO8601 extended format + Z indicator for offset 0 (= XXXXX)  | -08:00                                                     |\r\n *  |                    | O, OO & OOO | Short localized GMT format                                    | GMT-8                                                      |\r\n *  |                    | OOOO        | Long localized GMT format                                     | GMT-08:00                                                  |\r\n *\r\n * Note that timezone correction is not applied to an ISO string that has no time component, such as \"2016-09-19\"\r\n *\r\n * ### Format examples\r\n *\r\n * These examples transform a date into various formats,\r\n * assuming that `dateObj` is a JavaScript `Date` object for\r\n * year: 2015, month: 6, day: 15, hour: 21, minute: 43, second: 11,\r\n * given in the local time for the `en-US` locale.\r\n *\r\n * ```\r\n * {{ dateObj | date }}               // output is 'Jun 15, 2015'\r\n * {{ dateObj | date:'medium' }}      // output is 'Jun 15, 2015, 9:43:11 PM'\r\n * {{ dateObj | date:'shortTime' }}   // output is '9:43 PM'\r\n * {{ dateObj | date:'mm:ss' }}       // output is '43:11'\r\n * ```\r\n *\r\n */\r\n","import { Directive, getContext } from \"rxcomp\";\r\nimport { BehaviorSubject } from \"rxjs\";\r\nimport { takeUntil } from \"rxjs/operators\";\r\n\r\nlet DROPDOWN_ID = 1000000;\r\n\r\nexport default class DropdownDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this.dropdown || this.id_ || (this.id_ = DropdownDirective.nextId());\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst trigger = node.getAttribute('dropdown-trigger');\r\n\t\tthis.trigger = trigger ? node.querySelector(trigger) : node;\r\n\t\tthis.opened = null;\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t\tthis.onDocumentClick = this.onDocumentClick.bind(this);\r\n\t\tthis.openDropdown = this.openDropdown.bind(this);\r\n\t\tthis.closeDropdown = this.closeDropdown.bind(this);\r\n\t\tthis.addListeners();\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.openDropdown();\r\n\t\t} else {\r\n\t\t\tconst dropdownItemNode = node.querySelector('[dropdown-item]');\r\n\t\t\t// console.log('dropdownItemNode', dropdownItemNode);\r\n\t\t\tif (!dropdownItemNode) { // if (this.trigger !== node) {\r\n\t\t\t\tthis.closeDropdown();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDocumentClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst clickedInside = node === event.target || node.contains(event.target);\r\n\t\tif (!clickedInside) {\r\n\t\t\tthis.closeDropdown();\r\n\t\t}\r\n\t}\r\n\r\n\topenDropdown() {\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.opened = true;\r\n\t\t\tthis.addDocumentListeners();\r\n\t\t\tDropdownDirective.dropdown$.next(this.id);\r\n\t\t\tthis.dropped.next(this.id);\r\n\t\t}\r\n\t}\r\n\r\n\tcloseDropdown() {\r\n\t\tif (this.opened !== null) {\r\n\t\t\tthis.removeDocumentListeners();\r\n\t\t\tthis.opened = null;\r\n\t\t\tif (DropdownDirective.dropdown$.getValue() === this.id) {\r\n\t\t\t\tDropdownDirective.dropdown$.next(null);\r\n\t\t\t\tthis.dropped.next(null);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tthis.trigger.addEventListener('click', this.onClick);\r\n\t}\r\n\r\n\taddDocumentListeners() {\r\n\t\tdocument.addEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tthis.trigger.removeEventListener('click', this.onClick);\r\n\t}\r\n\r\n\tremoveDocumentListeners() {\r\n\t\tdocument.removeEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t\tthis.removeDocumentListeners();\r\n\t}\r\n\r\n\tstatic nextId() {\r\n\t\treturn DROPDOWN_ID++;\r\n\t}\r\n\r\n}\r\n\r\nDropdownDirective.meta = {\r\n\tselector: '[dropdown]',\r\n\tinputs: ['dropdown', 'dropdown-trigger'],\r\n\toutputs: ['dropped']\r\n};\r\n\r\nDropdownDirective.dropdown$ = new BehaviorSubject(null);\r\n","import { Directive, getContext } from \"rxcomp\";\r\nimport { takeUntil } from \"rxjs/operators\";\r\nimport DropdownDirective from \"./dropdown.directive\";\r\n\r\nexport default class DropdownItemDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this['dropdown-item'];\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('dropdown-item');\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownItemDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nDropdownItemDirective.meta = {\r\n\tselector: '[dropdown-item], [[dropdown-item]]',\r\n\tinputs: ['dropdown-item']\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { interval, Subject } from 'rxjs';\r\nimport { startWith, takeUntil, tap } from 'rxjs/operators';\r\n\r\nexport const EventDateMode = {\r\n\tLive: 'live',\r\n\tCountdown: 'countdown',\r\n\tWatchRelative: 'watchRelative',\r\n\tRelative: 'relative',\r\n\tDate: 'date',\r\n};\r\n\r\nconst SECOND = 1000;\r\nconst MINUTE = SECOND * 60;\r\nconst HOUR = MINUTE * 60;\r\n\r\nconst to10 = (value) => {\r\n\treturn (value < 10) ? '0' + value : value;\r\n};\r\n\r\nexport default class EventDateComponent extends Component {\r\n\r\n\tget mode() {\r\n\t\treturn this.mode_;\r\n\t}\r\n\r\n\tset mode(mode) {\r\n\t\tif (this.mode_ !== mode) {\r\n\t\t\tthis.mode_ = mode;\r\n\t\t\tthis.change.next(this.eventDate);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic hoursDiff(date) {\r\n\t\tconst now = new Date();\r\n\t\tconst diff = date - now;\r\n\t\tconst hoursDiff = Math.abs(Math.floor(diff / 1000 / 60 / 60));\r\n\t\treturn hoursDiff;\r\n\t}\r\n\r\n\tstatic getMode(item) {\r\n\t\tif (!item.past && !item.info.started) {\r\n\t\t\tconst now = new Date();\r\n\t\t\tif (now > item.startDate) {\r\n\t\t\t\titem.info.started = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (item.live) {\r\n\t\t\treturn EventDateMode.Live;\r\n\t\t} else if (item.incoming) {\r\n\t\t\treturn EventDateMode.Countdown;\r\n\t\t}\r\n\t\tconst hoursDiff = EventDateComponent.hoursDiff(item.startDate);\r\n\t\tif (item.past && hoursDiff < 24) {\r\n\t\t\treturn EventDateMode.WatchRelative;\r\n\t\t} else if (hoursDiff < 24 * 14) {\r\n\t\t\treturn EventDateMode.Relative;\r\n\t\t} else {\r\n\t\t\treturn EventDateMode.Date;\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.mode_ = EventDateComponent.getMode(this.eventDate);\r\n\t\tthis.countdown = '';\r\n\t\tthis.live$ = new Subject();\r\n\t\tthis.change$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(() => {\r\n\t\t\tthis.mode = EventDateComponent.getMode(this.eventDate);\r\n\t\t\tif (this.mode === EventDateMode.Countdown || this.mode === EventDateMode.WatchRelative) {\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/*\r\n\tonChange() {\r\n\t\tthis.mode = EventDateComponent.getMode(this.eventDate);\r\n\t}\r\n\t*/\r\n\r\n\tchange$() {\r\n\t\treturn interval(1000).pipe(\r\n\t\t\ttakeUntil(this.live$),\r\n\t\t\tstartWith(0),\r\n\t\t\ttap(() => {\r\n\t\t\t\tif (this.mode === EventDateMode.Countdown) {\r\n\t\t\t\t\tlet diff = this.eventDate.startDate - new Date();\r\n\t\t\t\t\tconst hh = Math.floor(diff / HOUR);\r\n\t\t\t\t\tdiff -= hh * HOUR;\r\n\t\t\t\t\tconst mm = Math.floor(diff / MINUTE);\r\n\t\t\t\t\tdiff -= mm * MINUTE;\r\n\t\t\t\t\tconst ss = Math.floor(diff / SECOND);\r\n\t\t\t\t\tdiff -= ss * SECOND;\r\n\t\t\t\t\tthis.countdown = `-${to10(hh)}:${to10(mm)}:${to10(ss)}`;\r\n\t\t\t\t\tif (diff < 0) {\r\n\t\t\t\t\t\tthis.eventDate.info.started = true;\r\n\t\t\t\t\t\t// this.live$.next();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nEventDateComponent.meta = {\r\n\tselector: '[eventDate]',\r\n\toutputs: ['change'],\r\n\tinputs: ['eventDate']\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, switchMap, takeUntil, tap } from 'rxjs/operators';\r\nimport { STATIC } from '../environment/environment';\r\nimport FavouriteService from '../favourite/favourite.service';\r\nimport FilterItem from '../filter/filter-item';\r\nimport FilterService from '../filter/filter.service';\r\nimport LocationService from '../location/location.service';\r\nimport PageComponent from '../page/page.component';\r\nimport UserService from '../user/user.service';\r\nimport EventService from './event.service';\r\n\r\nexport default class EventPageComponent extends PageComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.grid = {\r\n\t\t\tmode: 1,\r\n\t\t\twidth: 350,\r\n\t\t\tgutter: 2,\r\n\t\t};\r\n\t\tthis.user = null;\r\n\t\tthis.event = null;\r\n\t\tthis.listing = null;\r\n\t\tthis.filters = null;\r\n\t\tthis.secondaryFiltersVisible = false;\r\n\t\tthis.secondaryFilters = null;\r\n\t\tthis.activeFilters = null;\r\n\t\tthis.filteredItems = [];\r\n\t\tthis.load$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.event = data[0];\r\n\t\t\tthis.listing = data[1];\r\n\t\t\tthis.setFilters(data[2]);\r\n\t\t\tthis.startFilter(this.listing);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.error = null;\r\n\t\tthis.inputActive = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tquestion: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(changes => {\r\n\t\t\tthis.inputActive = (changes.question && changes.question.length > 0);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\tlet eventId = LocationService.get('eventId') || this.eventId;\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add(`wse__channel-page-${eventId % 4}`);\r\n\t\tif (STATIC) {\r\n\t\t\teventId = 1001 + ((eventId - 1) % 2);\r\n\t\t}\r\n\t\treturn UserService.sharedChanged$.pipe(\r\n\t\t\ttap(user => this.user = user),\r\n\t\t\tswitchMap(() => combineLatest([\r\n\t\t\t\tEventService.detail$(eventId),\r\n\t\t\t\tEventService.listing$(eventId),\r\n\t\t\t\tEventService.filter$(eventId),\r\n\t\t\t]))\r\n\t\t);\r\n\t}\r\n\r\n\tsetFilters(filters) {\r\n\t\tconst filterObject = {\r\n\t\t\ttype: {\r\n\t\t\t\tlabel: 'Type',\r\n\t\t\t\tmode: 'select',\r\n\t\t\t\toptions: [{\r\n\t\t\t\t\tvalue: 'event',\r\n\t\t\t\t\tlabel: 'Event',\r\n\t\t\t\t}, {\r\n\t\t\t\t\tvalue: 'picture',\r\n\t\t\t\t\tlabel: 'Picture',\r\n\t\t\t\t}, {\r\n\t\t\t\t\tvalue: 'product',\r\n\t\t\t\t\tlabel: 'Product',\r\n\t\t\t\t}, {\r\n\t\t\t\t\tvalue: 'magazine',\r\n\t\t\t\t\tlabel: 'Magazine',\r\n\t\t\t\t}, {\r\n\t\t\t\t\tvalue: 'download',\r\n\t\t\t\t\tlabel: 'Downloads',\r\n\t\t\t\t}]\r\n\t\t\t},\r\n\t\t};\r\n\t\tfilters.forEach(filter => {\r\n\t\t\tfilter.mode = 'or';\r\n\t\t\tfilterObject[filter.key] = filter;\r\n\t\t});\r\n\t\tconst filterService = this.filterService = new FilterService(filterObject, {}, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'type':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.type === value;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'tag':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.tags.indexOf(value) !== -1;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.features.indexOf(value) !== -1;\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filters = filterService.filters;\r\n\t\tthis.secondaryFilters = Object.keys(this.filters).filter(key => key !== 'type').map(key => {\r\n\t\t\treturn this.filters[key];\r\n\t\t});\r\n\t}\r\n\r\n\tstartFilter(items) {\r\n\t\tthis.filterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(filteredItems => {\r\n\t\t\tthis.filteredItems = [];\r\n\t\t\tthis.activeFilters = [];\r\n\t\t\tthis.pushChanges();\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.filteredItems = filteredItems;\r\n\t\t\t\tthis.activeFilters = this.secondaryFilters.map(f => {\r\n\t\t\t\t\tf = new FilterItem(f);\r\n\t\t\t\t\tf.options = f.options.filter(o => f.has(o));\r\n\t\t\t\t\treturn f;\r\n\t\t\t\t}).filter(f => f.options.length);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t}, 1);\r\n\t\t\t// console.log('EventPageComponent.filteredItems', filteredItems.length);\r\n\t\t});\r\n\t}\r\n\r\n\tonChange($event) {\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\ttoggleGrid() {\r\n\t\tthis.grid.width = this.grid.width === 350 ? 525 : 350;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\ttoggleFilters() {\r\n\t\tthis.secondaryFiltersVisible = !this.secondaryFiltersVisible;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\ttoggleSubscribe() {\r\n\t\tlet flag = this.event.info.subscribed;\r\n\t\tUserService.authorized$().pipe(\r\n\t\t\tswitchMap(user => FavouriteService[flag ? 'subscriptionRemove$' : 'subscriptionAdd$'](this.event.id)),\r\n\t\t\tfirst(),\r\n\t\t).subscribe(() => {\r\n\t\t\tflag = !flag;\r\n\t\t\tthis.event.info.subscribed = flag;\r\n\t\t\tif (flag) {\r\n\t\t\t\tthis.event.info.subscribers++;\r\n\t\t\t} else {\r\n\t\t\t\tthis.event.info.subscribers--;\r\n\t\t\t}\r\n\t\t\tthis.pushChanges();\r\n\t\t}, (error) => {\r\n\t\t\tconsole.log('EventPageComponent.toggleSubscribe.error', error);\r\n\t\t});\r\n\t}\r\n\r\n\ttoggleLike() {\r\n\t\tlet flag = this.event.info.liked;\r\n\t\tUserService.authorized$().pipe(\r\n\t\t\tswitchMap(user => FavouriteService[flag ? 'likeRemove$' : 'likeAdd$'](this.event.id, 'event')),\r\n\t\t\tfirst(),\r\n\t\t).subscribe(() => {\r\n\t\t\tflag = !flag;\r\n\t\t\tthis.event.info.liked = flag;\r\n\t\t\tif (flag) {\r\n\t\t\t\tthis.event.info.likes++;\r\n\t\t\t} else {\r\n\t\t\t\tthis.event.info.likes--;\r\n\t\t\t}\r\n\t\t\tthis.pushChanges();\r\n\t\t}, (error) => {\r\n\t\t\tconsole.log('EventPageComponent.toggleLike.error', error);\r\n\t\t});\r\n\t}\r\n\r\n\ttoggleSave() {\r\n\t\tlet flag = this.event.info.saved;\r\n\t\tUserService.authorized$().pipe(\r\n\t\t\tswitchMap(user => FavouriteService[flag ? 'favouriteRemove$' : 'favouriteAdd$'](this.event.id)),\r\n\t\t\tfirst(),\r\n\t\t).subscribe(() => {\r\n\t\t\tflag = !flag;\r\n\t\t\tthis.event.info.saved = flag;\r\n\t\t\tthis.pushChanges();\r\n\t\t}, (error) => {\r\n\t\t\tconsole.log('EventPageComponent.toggleSave.error', error);\r\n\t\t});\r\n\t}\r\n\r\n\ttoggleShare(toggle) {\r\n\t\tthis.event.info.sharing = toggle !== undefined ? toggle : !this.event.info.sharing;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonInputFocus(event) {\r\n\t\tthis.inputFocus = true;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonInputBlur(event) {\r\n\t\tthis.inputFocus = false;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tpostQuestion(event) {\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('EventPageComponent.postQuestion.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\tEventService.postQuestion$(this.event, this.form.value.question).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(question => {\r\n\t\t\t\tthis.event.questions.unshift(question);\r\n\t\t\t\tthis.form.controls.question.value = null;\r\n\t\t\t\t// this.pushChanges();\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('EventPageComponent.postQuestion.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nEventPageComponent.meta = {\r\n\tselector: '[event-page]',\r\n\tinputs: ['eventId']\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { first, switchMap } from 'rxjs/operators';\r\nimport FavouriteService from '../favourite/favourite.service';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class EventComponent extends Component {\r\n\r\n\tonChange($event) {\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\ttoggleSubscribe() {\r\n\t\tlet flag = this.event.info.subscribed;\r\n\t\tUserService.authorized$().pipe(\r\n\t\t\tswitchMap(user => FavouriteService[flag ? 'subscriptionRemove$' : 'subscriptionAdd$'](this.event.id)),\r\n\t\t\tfirst(),\r\n\t\t).subscribe(() => {\r\n\t\t\tflag = !flag;\r\n\t\t\tthis.event.info.subscribed = flag;\r\n\t\t\tif (flag) {\r\n\t\t\t\tthis.event.info.subscribers++;\r\n\t\t\t} else {\r\n\t\t\t\tthis.event.info.subscribers--;\r\n\t\t\t}\r\n\t\t\tthis.pushChanges();\r\n\t\t}, (error) => {\r\n\t\t\tconsole.log('EventComponent.toggleSubscribe.error', error);\r\n\t\t});\r\n\t}\r\n\r\n\ttoggleLike() {\r\n\t\tlet flag = this.event.info.liked;\r\n\t\tUserService.authorized$().pipe(\r\n\t\t\tswitchMap(user => FavouriteService[flag ? 'likeRemove$' : 'likeAdd$'](this.event.id, 'event')),\r\n\t\t\tfirst(),\r\n\t\t).subscribe(() => {\r\n\t\t\tflag = !flag;\r\n\t\t\tthis.event.info.liked = flag;\r\n\t\t\tif (flag) {\r\n\t\t\t\tthis.event.info.likes++;\r\n\t\t\t} else {\r\n\t\t\t\tthis.event.info.likes--;\r\n\t\t\t}\r\n\t\t\tthis.pushChanges();\r\n\t\t}, (error) => {\r\n\t\t\tconsole.log('EventComponent.toggleLike.error', error);\r\n\t\t});\r\n\t}\r\n\r\n\ttoggleSave() {\r\n\t\tlet flag = this.event.info.saved;\r\n\t\tUserService.authorized$().pipe(\r\n\t\t\tswitchMap(user => FavouriteService[flag ? 'favouriteRemove$' : 'favouriteAdd$'](this.event.id)),\r\n\t\t\tfirst(),\r\n\t\t).subscribe(() => {\r\n\t\t\tflag = !flag;\r\n\t\t\tthis.event.info.saved = flag;\r\n\t\t\tthis.pushChanges();\r\n\t\t}, (error) => {\r\n\t\t\tconsole.log('EventComponent.toggleSave.error', error);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nEventComponent.meta = {\r\n\tselector: '[event]',\r\n\tinputs: ['event']\r\n};\r\n","import { combineLatest } from 'rxjs';\r\nimport { switchMap, takeUntil } from 'rxjs/operators';\r\nimport ChannelService from '../channel/channel.service';\r\nimport PageComponent from '../page/page.component';\r\nimport UserService from '../user/user.service';\r\nimport FavouriteService from './favourite.service';\r\n\r\nexport const ViewModes = {\r\n\tSaved: 'saved',\r\n\tLiked: 'liked',\r\n};\r\n\r\nexport default class FavouritePageComponent extends PageComponent {\r\n\r\n\tget viewMode() {\r\n\t\treturn this.viewMode_;\r\n\t}\r\n\r\n\tset viewMode(viewMode) {\r\n\t\tif (this.viewMode_ !== viewMode) {\r\n\t\t\tthis.viewMode_ = viewMode;\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.channels = null;\r\n\t\tthis.savedItems = [];\r\n\t\tthis.likedItems = [];\r\n\t\tthis.viewMode_ = ViewModes.Saved;\r\n\t\tthis.grid = {\r\n\t\t\tmode: 1,\r\n\t\t\twidth: 350,\r\n\t\t\tgutter: 2,\r\n\t\t};\r\n\t\tthis.load$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.channels = data[0];\r\n\t\t\tthis.savedItems = data[1];\r\n\t\t\tthis.likedItems = data[2];\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn UserService.sharedChanged$.pipe(\r\n\t\t\tswitchMap(() => combineLatest([\r\n\t\t\t\tChannelService.channels$(),\r\n\t\t\t\tFavouriteService.favourites$(),\r\n\t\t\t\tFavouriteService.likes$(),\r\n\t\t\t]))\r\n\t\t);\r\n\t}\r\n\r\n\ttoggleGrid() {\r\n\t\tthis.grid.width = this.grid.width === 350 ? 525 : 350;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n}\r\n\r\nFavouritePageComponent.meta = {\r\n\tselector: '[favourite-page]',\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\n\r\nexport default class ControlComponent extends Component {\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.label = 'label';\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst control = this.control;\r\n\t\tconst flags = control.flags;\r\n\t\tObject.keys(flags).forEach((key) => {\r\n\t\t\tflags[key] ? node.classList.add(key) : node.classList.remove(key);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nControlComponent.meta = {\r\n\tselector: '[control]',\r\n\tinputs: ['control']\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlCheckboxComponent extends ControlComponent {}\r\n\r\nControlCheckboxComponent.meta = {\r\n\tselector: '[control-checkbox]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"wse__group--form--checkbox\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label>\r\n\t\t\t\t<input type=\"checkbox\" class=\"wse__control--checkbox\" [formControl]=\"control\" [value]=\"true\" />\r\n\t\t\t\t<span [innerHTML]=\"label | html\"></span>\r\n\t\t\t</label>\r\n\t\t\t<span class=\"wse__required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { fromEvent } from 'rxjs';\r\nimport { filter, map, shareReplay } from 'rxjs/operators';\r\n\r\nexport default class KeyboardService {\r\n\r\n\tstatic keydown$() {\r\n\t\treturn fromEvent(window, 'keydown').pipe(\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t}\r\n\r\n\tstatic keyup$() {\r\n\t\treturn fromEvent(window, 'keyup').pipe(\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t}\r\n\r\n\tstatic typing$() {\r\n\t\tlet typing = '',\r\n\t\t\tto;\r\n\t\treturn this.key$().pipe(\r\n\t\t\tmap(key => {\r\n\t\t\t\tif (to) {\r\n\t\t\t\t\tclearTimeout(to);\r\n\t\t\t\t}\r\n\t\t\t\ttyping += key;\r\n\t\t\t\tto = setTimeout(() => {\r\n\t\t\t\t\ttyping = '';\r\n\t\t\t\t}, 1500);\r\n\t\t\t\treturn typing;\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t)\r\n\t}\r\n\r\n\tstatic key$() {\r\n\t\tconst regexp = /\\w/;\r\n\t\treturn this.keydown$().pipe(\r\n\t\t\tfilter(event => event.key && event.key.match(regexp)),\r\n\t\t\tmap(event => event.key),\r\n\t\t\tshareReplay(1)\r\n\t\t)\r\n\t}\r\n\r\n}\r\n","import { getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport DropdownDirective from '../dropdown/dropdown.directive';\r\nimport KeyboardService from '../keyboard/keyboard.service';\r\nimport ControlComponent from './control.component';\r\n\r\nexport default class ControlCustomSelectComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.labels = window.labels || {};\r\n\t\tthis.dropped = false;\r\n\t\tthis.dropdownId = DropdownDirective.nextId();\r\n\t\tKeyboardService.typing$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(word => {\r\n\t\t\tthis.scrollToWord(word);\r\n\t\t});\r\n\t\t/*\r\n\t\tKeyboardService.key$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(key => {\r\n\t\t\tthis.scrollToKey(key);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\tscrollToWord(word) {\r\n\t\t// console.log('ControlCustomSelectComponent.scrollToWord', word);\r\n\t\tconst items = this.control.options || [];\r\n\t\tlet index = -1;\r\n\t\tfor (let i = 0; i < items.length; i++) {\r\n\t\t\tconst x = items[i];\r\n\t\t\tif (x.name.toLowerCase().indexOf(word.toLowerCase()) === 0) {\r\n\t\t\t\t// console.log(word, x.name);\r\n\t\t\t\tindex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (index !== -1) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tconst dropdown = node.querySelector('.dropdown');\r\n\t\t\tconst navDropdown = node.querySelector('.nav--dropdown');\r\n\t\t\tif (navDropdown) {\r\n\t\t\t\tconst item = navDropdown.children[index];\r\n\t\t\t\tdropdown.scrollTo(0, item.offsetTop);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tsetOption(item) {\r\n\t\tthis.control.value = item.id;\r\n\t\t// DropdownDirective.dropdown$.next(null);\r\n\t}\r\n\t*/\r\n\r\n\tsetOption(item) {\r\n\t\t// console.log('setOption', item, this.isMultiple);\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst value = this.control.value || [];\r\n\t\t\tconst index = value.indexOf(item.id);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\t// if (value.length > 1) {\r\n\t\t\t\tvalue.splice(index, 1);\r\n\t\t\t\t// }\r\n\t\t\t} else {\r\n\t\t\t\tvalue.push(item.id);\r\n\t\t\t}\r\n\t\t\tthis.control.value = value.length ? value.slice() : null;\r\n\t\t} else {\r\n\t\t\tthis.control.value = item.id;\r\n\t\t\t// DropdownDirective.dropdown$.next(null);\r\n\t\t}\r\n\t}\r\n\r\n\thasOption(item) {\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst values = this.control.value || [];\r\n\t\t\treturn values.indexOf(item.id) !== -1;\r\n\t\t} else {\r\n\t\t\treturn this.control.value === item.id;\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped(id) {\r\n\t\t// console.log('ControlCustomSelectComponent.onDropped', id);\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tlet value = this.control.value;\r\n\t\tconst items = this.control.options || [];\r\n\t\tif (this.isMultiple) {\r\n\t\t\tvalue = value || [];\r\n\t\t\tif (value.length) {\r\n\t\t\t\treturn value.map(v => {\r\n\t\t\t\t\tconst item = items.find(x => x.id === v || x.name === v);\r\n\t\t\t\t\treturn item ? item.name : '';\r\n\t\t\t\t}).join(', ');\r\n\t\t\t} else {\r\n\t\t\t\treturn this.labels.select;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst item = items.find(x => x.id === value || x.name === value);\r\n\t\t\tif (item) {\r\n\t\t\t\treturn item.name;\r\n\t\t\t} else {\r\n\t\t\t\treturn this.labels.select;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped($event) {\r\n\t\t// console.log($event);\r\n\t\tthis.dropped = $event === this.dropdownId;\r\n\t}\r\n\r\n\t/*\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.querySelector('.dropdown').classList.add('dropped');\r\n\t}\r\n\t*/\r\n\r\n\t/*\r\n\tonClickOutside(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.querySelector('.dropdown').classList.remove('dropped');\r\n\t}\r\n\t*/\r\n\r\n\tget isMultiple() {\r\n\t\treturn this.multiple && this.multiple !== false && this.multiple !== 'false';\r\n\t}\r\n\r\n}\r\n\r\nControlCustomSelectComponent.meta = {\r\n\tselector: '[control-custom-select]',\r\n\tinputs: ['control', 'label', 'multiple'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"wse__group--form--select\" [class]=\"{ required: control.validators.length, multiple: isMultiple }\" [dropdown]=\"dropdownId\" (dropped)=\"onDropped($event)\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<span class=\"wse__control--select\" [innerHTML]=\"getLabel()\"></span>\r\n\t\t\t<svg class=\"wse__caret-down\"><use xlink:href=\"#caret-down\"></use></svg>\r\n\t\t\t<span class=\"wse__required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t\t<div class=\"wse__dropdown\" [dropdown-item]=\"dropdownId\">\r\n\t\t\t<div class=\"wse__category\" [innerHTML]=\"label\"></div>\r\n\t\t\t<ul class=\"wse__nav--dropdown\" [class]=\"{ multiple: isMultiple }\">\r\n\t\t\t<li *for=\"let item of control.options\" (click)=\"setOption(item)\"><span [class]=\"{ active: hasOption(item) }\" [innerHTML]=\"item.name\"></span></li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t`\r\n\t/*  (click)=\"onClick($event)\" (clickOutside)=\"onClickOutside($event)\" */\r\n\t/*  <!-- <div class=\"dropdown\" [class]=\"{ dropped: dropped }\"> --> */\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlEmailComponent extends ControlComponent {\r\n\r\n}\r\n\r\nControlEmailComponent.meta = {\r\n\tselector: '[control-email]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"wse__group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<input type=\"text\" class=\"wse__control--text\" [formControl]=\"control\" [placeholder]=\"label\" required email />\r\n\t\t\t<span class=\"wse__required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlFileComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.labels = window.labels || {};\r\n\t\tthis.file = null;\r\n\t\tthis.required = false;\r\n\t\tthis.onReaderComplete = this.onReaderComplete.bind(this);\r\n\t}\r\n\r\n\tonInputDidChange(event) {\r\n\t\tconst input = event.target;\r\n\t\tconst file = input.files[0];\r\n\t\tthis.file = {\r\n\t\t\tname: file.name,\r\n\t\t\tlastModified: file.lastModified,\r\n\t\t\tlastModifiedDate: file.lastModifiedDate,\r\n\t\t\tsize: file.size,\r\n\t\t\ttype: file.type,\r\n\t\t};\r\n\t\tconst reader = new FileReader();\r\n\t\treader.addEventListener('load', this.onReaderComplete);\r\n\t\treader.readAsDataURL(file);\r\n\t\t// reader.readAsArrayBuffer() // Starts reading the contents of the specified Blob, once finished, the result attribute contains an ArrayBuffer representing the file's data.\r\n\t\t// reader.readAsBinaryString() // Starts reading the contents of the specified Blob, once finished, the result attribute contains the raw binary data from the file as a string.\r\n\t\t// reader.readAsDataURL() // Starts reading the contents of the specified Blob, once finished, the result attribute contains a data: URL representing the file's data.\r\n\t\t// reader.readAsText() // Starts reading the contents of the specified Blob, once finished, the result attribute contains the contents of the file as a text string. An optional encoding name can be specified.\r\n\t}\r\n\r\n\tonReaderComplete(event) {\r\n\t\tconst content = event.target.result;\r\n\t\tthis.file.content = content;\r\n\t\tthis.control.value = this.file;\r\n\t\t// console.log('ControlFileComponent.onReaderComplete', this.file);\r\n\t\t// image/*,\r\n\t}\r\n\r\n}\r\n\r\nControlFileComponent.meta = {\r\n\tselector: '[control-file]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"wse__group--form--file\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label for=\"file\" [innerHTML]=\"label\"></label>\r\n\t\t\t<span class=\"wse__control--select\" [innerHTML]=\"file?.name || labels.select_file\"></span>\r\n\t\t\t<svg class=\"wse__upload\"><use xlink:href=\"#upload\"></use></svg>\r\n\t\t\t<span class=\"wse__required__badge\">required</span>\r\n\t\t\t<input name=\"file\" type=\"file\" accept=\".pdf,.doc,.docx,*.txt\" class=\"wse__control--file\" (change)=\"onInputDidChange($event)\" />\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlPasswordComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.required = false;\r\n\t}\r\n\r\n}\r\n\r\nControlPasswordComponent.meta = {\r\n\tselector: '[control-password]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"wse__group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<input type=\"password\" class=\"wse__control--text\" [formControl]=\"control\" [placeholder]=\"label\" autocomplete=\"new-password\" />\r\n\t\t\t<span class=\"wse__required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlRadioComponent extends ControlComponent {\r\n\r\n}\r\n\r\nControlRadioComponent.meta = {\r\n\tselector: '[control-radio]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"wse__group--form--radio\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label>\r\n\t\t\t\t<input type=\"radio\" class=\"wse__control--radio\" [formControl]=\"control\" [value]=\"true\"/>\r\n\t\t\t\t<span [innerHTML]=\"label\"></span>\r\n\t\t\t</label>\r\n\t\t\t<span class=\"wse__required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlSelectComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.labels = window.labels || {};\r\n\t}\r\n\r\n}\r\n\r\nControlSelectComponent.meta = {\r\n\tselector: '[control-select]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"wse__group--form--select\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<select class=\"wse__control--select\" [formControl]=\"control\" required>\r\n\t\t\t\t<option value=\"\">{{labels.select}}</option>\r\n\t\t\t\t<option [value]=\"item.id\" *for=\"let item of control.options\" [innerHTML]=\"item.name\"></option>\r\n\t\t\t</select>\r\n\t\t\t<span class=\"wse__required__badge\">required</span>\r\n\t\t\t<svg class=\"wse__caret-down\"><use xlink:href=\"#caret-down\"></use></svg>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport ControlComponent from './control.component';\r\n\r\nexport default class ControlTextComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.required = false;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst input = node.querySelector('input');\r\n\t\tinput.setAttribute('autocomplete', this.control.name);\r\n\t}\r\n\r\n}\r\n\r\nControlTextComponent.meta = {\r\n\tselector: '[control-text]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"wse__group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<input type=\"text\" class=\"wse__control--text\" [formControl]=\"control\" [placeholder]=\"label\" />\r\n\t\t\t<span class=\"wse__required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlTextareaComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.required = false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextareaComponent.meta = {\r\n\tselector: '[control-textarea]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"wse__group--form--textarea\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<textarea class=\"wse__control--text\" [formControl]=\"control\" [innerHTML]=\"label\" rows=\"4\"></textarea>\r\n\t\t\t<span class=\"wse__required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ErrorsComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.labels = window.labels || {};\r\n\t}\r\n\r\n\tgetLabel(key, value) {\r\n\t\tconst label = this.labels[`error_${key}`];\r\n\t\treturn label;\r\n\t}\r\n\r\n}\r\n\r\nErrorsComponent.meta = {\r\n\tselector: 'errors-component',\r\n\tinputs: ['control'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"wse__inner\" [style]=\"{ display: control.invalid && control.touched ? 'block' : 'none' }\">\r\n\t\t<div class=\"wse__error\" *for=\"let [key, value] of control.errors\">\r\n\t\t\t<span [innerHTML]=\"getLabel(key, value)\"></span>\r\n\t\t\t<!-- <span class=\"wse__key\" [innerHTML]=\"key\"></span> <span class=\"wse__value\" [innerHTML]=\"value | json\"></span> -->\r\n\t\t</div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { fromEvent } from \"rxjs\";\r\nimport { map, startWith, tap } from \"rxjs/operators\";\r\n\r\nexport default class CssService {\r\n\r\n\tstatic height$() {\r\n\t\tconst style = document.documentElement.style;\r\n\t\treturn fromEvent(window, 'resize').pipe(\r\n\t\t\tmap(event => window.innerHeight),\r\n\t\t\tstartWith(window.innerHeight),\r\n\t\t\ttap(height => {\r\n\t\t\t\t// First we get the viewport height and we multiple it by 1% to get a value for a vh unit\r\n\t\t\t\tlet vh = height * 0.01;\r\n\t\t\t\t// Then we set the value in the --vh custom property to the root of the document\r\n\t\t\t\tstyle.setProperty('--vh', `${vh}px`);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import { BehaviorSubject } from 'rxjs';\r\nimport { map, shareReplay, switchMap } from 'rxjs/operators';\r\nimport ApiService from '../api/api.service';\r\nimport EventService from '../event/event.service';\r\n\r\nconst notifications$_ = new BehaviorSubject(null);\r\nexport default class NotificationService {\r\n\r\n\tstatic getCurrentNotifications() {\r\n\t\treturn notifications$_.getValue();\r\n\t}\r\n\r\n\tstatic notifications$() {\r\n\t\t//return ApiService.staticGet$(`/user/notification`).pipe(\r\n\t\t//associo la campanella in alto non alle notifiche ma agli eventi a cui un utente si  scritto\r\n\t\treturn ApiService.get$(`/user/subscription`).pipe(\r\n\t\t\tmap((response) => EventService.mapEvents(response.data, response.static)),\r\n\t\t\tswitchMap(items => {\r\n\t\t\t\tnotifications$_.next(items);\r\n\t\t\t\treturn notifications$_;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nNotificationService.sharedNotifications$ = NotificationService.notifications$().pipe(shareReplay(1));\r\n","import { Component } from 'rxcomp';\r\nimport { combineLatest, of } from 'rxjs';\r\nimport { catchError, first, switchMap, takeUntil, tap } from 'rxjs/operators';\r\nimport CssService from '../css/css.service';\r\nimport FavouriteService from '../favourite/favourite.service';\r\nimport NotificationService from '../notification/notification.service';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class HeaderComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.user = null;\r\n\t\tthis.favourites = [];\r\n\t\tUserService.sharedChanged$.pipe(\r\n\t\t\ttap(user => this.user = user),\r\n\t\t\tswitchMap(() => combineLatest([\r\n\t\t\t\tNotificationService.notifications$(),\r\n\t\t\t\tFavouriteService.subscriptions$(),\r\n\t\t\t\tFavouriteService.likes$(),\r\n\t\t\t\tFavouriteService.favourites$(),\r\n\t\t\t])),\r\n\t\t\tcatchError(() => of (null)),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.notifications = data[0];\r\n\t\t\tthis.subscriptions = data[1];\r\n\t\t\tthis.likes = data[2];\r\n\t\t\tthis.favourites = data[3];\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tCssService.height$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(height => {\r\n\t\t\t// console.log('HeaderComponent.height$', height);\r\n\t\t});\r\n\t\t// console.log(JSON.stringify(LocaleService.defaultLocale));\r\n\t}\r\n\r\n\tdoLogout($event) {\r\n\t\tUserService.logout$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe((response) => window.location.href = response.data.retUrl);\r\n\t}\r\n\r\n\ttoggleAside($event) {\r\n\t\tthis.aside_ = !this.aside_;\r\n\t\tthis.aside.next(this.aside_);\r\n\t}\r\n\r\n\tdismissAside($event) {\r\n\t\tif (this.aside_) {\r\n\t\t\tthis.aside_ = false;\r\n\t\t\tthis.aside.next(this.aside_);\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleNotification($event) {\r\n\t\tthis.notification_ = !this.notification_;\r\n\t\tthis.notification.next(this.notification_);\r\n\t}\r\n\r\n\tdismissNotification($event) {\r\n\t\tif (this.notification_) {\r\n\t\t\tthis.notification_ = false;\r\n\t\t\tthis.notification.next(this.notification_);\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped(id) {\r\n\t\t// console.log('HeaderComponent.onDropped', id);\r\n\t\tthis.submenu = id;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n}\r\n\r\nHeaderComponent.meta = {\r\n\tselector: 'header',\r\n\toutputs: ['aside', 'notification']\r\n};\r\n","import { Pipe } from \"rxcomp\";\r\n\r\n/*\r\n['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n['\"', '&', ''', '<', '>', ' ', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '&', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''];\r\n*/\r\n\r\nexport default class HtmlPipe extends Pipe {\r\n\r\n\tstatic transform(value) {\r\n\t\tif (value) {\r\n\t\t\tvalue = value.replace(/&#(\\d+);/g, function(m, n) {\r\n\t\t\t\treturn String.fromCharCode(parseInt(n));\r\n\t\t\t});\r\n\t\t\tconst escapes = ['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n\t\t\tconst unescapes = ['\"', '&', '\\'', '<', '>', ' ', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '&', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''];\r\n\t\t\tconst rx = new RegExp(`(&${escapes.join(';)|(&')};)`, 'g');\r\n\t\t\tvalue = value.replace(rx, function() {\r\n\t\t\t\tfor (let i = 1; i < arguments.length; i++) {\r\n\t\t\t\t\tif (arguments[i]) {\r\n\t\t\t\t\t\t// console.log(arguments[i], unescapes[i - 1]);\r\n\t\t\t\t\t\treturn unescapes[i - 1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// console.log(value);\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nHtmlPipe.meta = {\r\n\tname: 'html',\r\n};\r\n","import { combineLatest } from 'rxjs';\r\nimport { switchMap, takeUntil } from 'rxjs/operators';\r\nimport ChannelService from '../channel/channel.service';\r\nimport EventService from '../event/event.service';\r\nimport PageComponent from '../page/page.component';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class IndexPageComponent extends PageComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.topEvents = this.topChannels = this.upcomingEvents = [];\r\n\t\tthis.load$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.topEvents = data[0];\r\n\t\t\tthis.topChannels = data[1];\r\n\t\t\tthis.upcomingEvents = data[2];\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn UserService.sharedChanged$.pipe(\r\n\t\t\tswitchMap(() => combineLatest([\r\n\t\t\t\tEventService.top$(),\r\n\t\t\t\tChannelService.top$(),\r\n\t\t\t\tEventService.upcoming$(),\r\n\t\t\t]))\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nIndexPageComponent.meta = {\r\n\tselector: '[index-page]',\r\n};\r\n","import { Pipe } from \"rxcomp\";\r\n\r\nexport const LABELS = Object.assign({\r\n\tcancel: 'Cancel',\r\n\terror_email: 'Invalid email',\r\n\terror_match: 'Fields do not match',\r\n\terror_required: 'Field is required',\r\n\tloading: 'loading',\r\n\trequired: 'Required',\r\n\tselect: 'Select',\r\n}, (window.labels || {}));\r\n\r\nexport default class LabelPipe extends Pipe {\r\n\r\n\tstatic transform(key) {\r\n\t\tconst labels = LABELS;\r\n\t\treturn labels[key] || `#${key}#`;\r\n\t}\r\n\r\n}\r\n\r\nLabelPipe.meta = {\r\n\tname: 'label',\r\n};\r\n","import { fromEvent, of } from 'rxjs';\r\nimport { filter, finalize, first, map } from 'rxjs/operators';\r\nimport { getResourceRoot } from '../environment/environment';\r\n\r\nlet UID = 0;\r\n\r\nexport default class ImageService {\r\n\r\n\tstatic worker() {\r\n\t\tif (!this.worker_) {\r\n\t\t\tthis.worker_ = new Worker(`${getResourceRoot()}js/workers/image.service.worker.js`);\r\n\t\t}\r\n\t\treturn this.worker_;\r\n\t}\r\n\r\n\tstatic load$(src) {\r\n\t\t// if (!('Worker' in window) || this.isBlob(src) || this.isCors(src)) {\r\n\t\tif (!('Worker' in window) || this.isBlob(src)) {\r\n\t\t\treturn of(src);\r\n\t\t}\r\n\t\tconst id = ++UID;\r\n\t\tconst worker = this.worker();\r\n\t\tworker.postMessage({ src, id });\r\n\t\treturn fromEvent(worker, 'message').pipe(\r\n\t\t\tfilter(event => event.data.src === src),\r\n\t\t\tmap(event => {\r\n\t\t\t\tconst url = URL.createObjectURL(event.data.blob);\r\n\t\t\t\treturn url;\r\n\t\t\t}),\r\n\t\t\tfirst(),\r\n\t\t\tfinalize(url => {\r\n\t\t\t\tworker.postMessage({ id });\r\n\t\t\t\tif (url) {\r\n\t\t\t\t\tURL.revokeObjectURL(url);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic isCors(src) {\r\n\t\treturn src.indexOf('//') !== -1 && src.indexOf(window.location.host) === -1;\r\n\t}\r\n\r\n\tstatic isBlob(src) {\r\n\t\treturn src.indexOf('blob:') === 0;\r\n\t}\r\n\r\n}\r\n","import { BehaviorSubject, of , Subject } from 'rxjs';\r\nimport { filter, finalize, first, map } from 'rxjs/operators';\r\n\r\nexport default class IntersectionService {\r\n\r\n\tstatic observer() {\r\n\t\tif (!this.observer_) {\r\n\t\t\tthis.readySubject_ = new BehaviorSubject(false);\r\n\t\t\tthis.observerSubject_ = new Subject();\r\n\t\t\tthis.observer_ = new IntersectionObserver(entries => {\r\n\t\t\t\tthis.observerSubject_.next(entries);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this.observer_;\r\n\t}\r\n\r\n\tstatic intersection$(node) {\r\n\t\tif ('IntersectionObserver' in window) {\r\n\t\t\tconst observer = this.observer();\r\n\t\t\tobserver.observe(node);\r\n\t\t\treturn this.observerSubject_.pipe(\r\n\t\t\t\t// tap(entries => console.log(entries.length)),\r\n\t\t\t\tmap(entries => entries.find(entry => entry.target === node)),\r\n\t\t\t\tfilter(entry => entry !== undefined),\r\n\t\t\t\t// tap(entry => console.log('IntersectionService.intersection$', entry)),\r\n\t\t\t\tfinalize(() => observer.unobserve(node)),\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn of({ target: node, isIntersecting: true });\r\n\t\t}\r\n\t}\r\n\r\n\tstatic firstIntersection$(node) {\r\n\t\treturn this.intersection$(node).pipe(\r\n\t\t\tfilter(entry => entry.isIntersecting), // entry.intersectionRatio > 0\r\n\t\t\tfirst(),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","export default class LazyCache {\r\n\tstatic get cache() {\r\n\t\tif (!this.cache_) {\r\n\t\t\tthis.cache_ = {};\r\n\t\t}\r\n\t\treturn this.cache_;\r\n\t}\r\n\r\n\tstatic get(src) {\r\n\t\treturn this.cache[src];\r\n\t}\r\n\r\n\tstatic set(src, blob) {\r\n\t\tthis.cache[src] = blob;\r\n\t\tconst keys = Object.keys(this.cache);\r\n\t\tif (keys.length > 100) {\r\n\t\t\tthis.remove(keys[0]);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic remove(src) {\r\n\t\tdelete this.cache[src];\r\n\t}\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { of , Subject } from 'rxjs';\r\nimport { distinctUntilChanged, switchMap, takeUntil } from 'rxjs/operators';\r\nimport ImageService from '../image/image.service';\r\nimport IntersectionService from '../intersection/intersection.service';\r\nimport LazyCache from './lazy.cache';\r\n\r\nexport default class LazyDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('lazy');\r\n\t\tthis.input$ = new Subject().pipe(\r\n\t\t\tdistinctUntilChanged(),\r\n\t\t\tswitchMap(input => {\r\n\t\t\t\tconst src = LazyCache.get(input);\r\n\t\t\t\tif (src) {\r\n\t\t\t\t\treturn of(src);\r\n\t\t\t\t}\r\n\t\t\t\tnode.classList.remove('lazyed');\r\n\t\t\t\treturn this.lazy$(input);\r\n\t\t\t}),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t);\r\n\t\tthis.input$.subscribe(src => {\r\n\t\t\tLazyCache.set(this.lazy, src);\r\n\t\t\tnode.setAttribute('src', src);\r\n\t\t\tnode.classList.add('lazyed');\r\n\t\t});\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tthis.input$.next(this.lazy);\r\n\t}\r\n\r\n\tlazy$(input) {\r\n\t\tconst { node } = getContext(this);\r\n\t\treturn IntersectionService.firstIntersection$(node).pipe(\r\n\t\t\t// tap(entry => console.log(entry)),\r\n\t\t\tswitchMap(() => ImageService.load$(input)),\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nLazyDirective.meta = {\r\n\tselector: '[lazy],[[lazy]]',\r\n\tinputs: ['lazy']\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport ModalService from './modal.service';\r\n\r\nexport default class ModalOutletComponent extends Component {\r\n\r\n\tget modal() {\r\n\t\treturn this.modal_;\r\n\t}\r\n\r\n\tset modal(modal) {\r\n\t\t// console.log('ModalOutletComponent set modal', modal, this);\r\n\t\tconst { module } = getContext(this);\r\n\t\tif (this.modal_ && this.modal_.node) {\r\n\t\t\tmodule.remove(this.modal_.node, this);\r\n\t\t\tthis.modalNode.removeChild(this.modal_.node);\r\n\t\t}\r\n\t\tif (modal && modal.node) {\r\n\t\t\tthis.modal_ = modal;\r\n\t\t\tthis.modalNode.appendChild(modal.node);\r\n\t\t\tconst instances = module.compile(modal.node);\r\n\t\t}\r\n\t\tthis.modal_ = modal;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.modalNode = node.querySelector('.wse__modal-outlet__modal');\r\n\t\tModalService.modal$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(modal => {\r\n\t\t\tthis.modal = modal;\r\n\t\t});\r\n\t}\r\n\r\n\tonRegister(event) {\r\n\t\t// console.log('ModalComponent.onRegister');\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('ModalComponent.onLogin');\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\treject(event) {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nModalOutletComponent.meta = {\r\n\tselector: '[modal-outlet]',\r\n\ttemplate: /* html */ `\r\n\t<div class=\"wse__modal-outlet__container\" [class]=\"{ active: modal }\">\r\n\t\t<div class=\"wse__modal-outlet__background\" (click)=\"reject($event)\"></div>\r\n\t\t<div class=\"wse__modal-outlet__modal\"></div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport ModalOutletComponent from '../modal/modal-outlet.component';\r\nimport ModalService from './modal.service';\r\n\r\nexport default class ModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tthis.data = parentInstance.modal.data;\r\n\t\t}\r\n\t}\r\n\r\n\tclose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nModalComponent.meta = {\r\n\tselector: '[modal]'\r\n};\r\n","import { switchMap, takeUntil } from 'rxjs/operators';\r\nimport PageComponent from '../page/page.component';\r\nimport UserService from '../user/user.service';\r\nimport NotificationService from './notification.service';\r\n\r\nexport default class NotificationComponent extends PageComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.grid = {\r\n\t\t\tmode: 4,\r\n\t\t\twidth: 320,\r\n\t\t\tgutter: 0,\r\n\t\t};\r\n\t\tthis.notifications = [];\r\n\t\tthis.load$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(notifications => {\r\n\t\t\tthis.notifications = notifications;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn UserService.sharedChanged$.pipe(\r\n\t\t\tswitchMap(() => NotificationService.notifications$()),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nNotificationComponent.meta = {\r\n\tselector: '[notification]',\r\n};\r\n","import { Pipe } from 'rxcomp';\r\n\r\nexport default class PicturePipe extends Pipe {\r\n\tstatic transform(value, options) {\r\n\t\tlet { src, width, height } = value.picture;\r\n\t\tif (options) {\r\n\t\t\twidth = options.width;\r\n\t\t\theight = options.height;\r\n\t\t}\r\n\t\tconst mediaType = value.media ? value.media.type : null;\r\n\t\tlet url = '';\r\n\t\tswitch(mediaType) {\r\n\t\t\tcase 'vimeo':\r\n\t\t\t\turl = `${src}`;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\turl = `${src}${width}x${height}?sig=${value.id}`;\r\n\t\t}\r\n\t\treturn url;\r\n\t}\r\n}\r\n\r\nPicturePipe.meta = {\r\n\tname: 'picture',\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport ModalOutletComponent from '../modal/modal-outlet.component';\r\nimport ModalService from '../modal/modal.service';\r\n\r\nexport default class RegisterOrLoginModal extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node, parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t\t// console.log('RegisterOrLoginModal.onInit', data);\r\n\t\t}\r\n\t\tthis.views = {\r\n\t\t\tSIGN_IN: 1,\r\n\t\t\tSIGN_UP: 2,\r\n\t\t\tFORGOTTEN: 3,\r\n\t\t};\r\n\t\tthis.view = node.hasAttribute('view') ? parseInt(node.getAttribute('view')) : this.views.SIGN_IN;\r\n\t}\r\n\r\n\tonForgot(event) {\r\n\t\t// console.log('RegisterOrLoginModal.onForgot');\r\n\t\tthis.view = this.views.FORGOTTEN;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('RegisterOrLoginModal.onLogin');\r\n\t\tthis.view = this.views.SIGN_IN;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonRegister(event) {\r\n\t\t// console.log('RegisterOrLoginModal.onRegister');\r\n\t\tthis.view = this.views.SIGN_UP;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\t// console.log('RegisterOrLoginModal.onSignIn', user);\r\n\t\t// UserService.setUser(user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\t// console.log('RegisterOrLoginModal.onSignUp', user);\r\n\t\t// UserService.setUser(user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\tonForgottenSent(email) {\r\n\t\t// console.log('RegisterOrLoginModal.onForgottenSent', email);\r\n\t\t// this.view = this.views.SIGN_IN;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tclose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nRegisterOrLoginModal.meta = {\r\n\tselector: '[register-or-login-modal]',\r\n};\r\n","const calculateDelta = (now, date) => Math.round(Math.abs(now - date) / 1000);\r\n\r\nexport default function relativeDateFactory(translations) {\r\n\treturn function relativeDate(date, now = new Date()) {\r\n\t\tif (!(date instanceof Date)) {\r\n\t\t\tdate = new Date(date);\r\n\t\t}\r\n\r\n\t\tlet delta = null;\r\n\r\n\t\tconst minute = 60;\r\n\t\tconst hour = minute * 60;\r\n\t\tconst day = hour * 24;\r\n\t\tconst week = day * 7;\r\n\t\tconst month = day * 30;\r\n\t\tconst year = day * 365;\r\n\r\n\t\tdelta = calculateDelta(now, date);\r\n\r\n\t\tif (delta > day && delta < week) {\r\n\t\t\tdate = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0)\r\n\t\t\tdelta = calculateDelta(now, date);\r\n\t\t}\r\n\r\n\t\tconst translate = (translatePhrase, timeValue) => {\r\n\t\t\tlet key;\r\n\r\n\t\t\tif (translatePhrase === 'justNow') {\r\n\t\t\t\tkey = translatePhrase;\r\n\t\t\t} else if (now >= date) {\r\n\t\t\t\tkey = `${translatePhrase}Ago`;\r\n\t\t\t} else {\r\n\t\t\t\tkey = `${translatePhrase}FromNow`;\r\n\t\t\t}\r\n\r\n\t\t\tconst translation = translations[key];\r\n\r\n\t\t\tif (typeof translation === 'function') {\r\n\t\t\t\treturn translation(timeValue);\r\n\t\t\t}\r\n\r\n\t\t\treturn translation.replace('{{time}}', timeValue);\r\n\t\t};\r\n\r\n\t\tswitch (false) {\r\n\t\t\tcase !(delta < 30):\r\n\t\t\t\treturn translate('justNow');\r\n\r\n\t\t\tcase !(delta < minute):\r\n\t\t\t\treturn translate('seconds', delta);\r\n\r\n\t\t\tcase !(delta < 2 * minute):\r\n\t\t\t\treturn translate('aMinute');\r\n\r\n\t\t\tcase !(delta < hour):\r\n\t\t\t\treturn translate('minutes', Math.floor(delta / minute));\r\n\r\n\t\t\tcase Math.floor(delta / hour) !== 1:\r\n\t\t\t\treturn translate('anHour');\r\n\r\n\t\t\tcase !(delta < day):\r\n\t\t\t\treturn translate('hours', Math.floor(delta / hour));\r\n\r\n\t\t\tcase !(delta < day * 2):\r\n\t\t\t\treturn translate('aDay');\r\n\r\n\t\t\tcase !(delta < week):\r\n\t\t\t\treturn translate('days', Math.floor(delta / day));\r\n\r\n\t\t\tcase Math.floor(delta / week) !== 1:\r\n\t\t\t\treturn translate('aWeek');\r\n\r\n\t\t\tcase !(delta < month):\r\n\t\t\t\treturn translate('weeks', Math.floor(delta / week));\r\n\r\n\t\t\tcase Math.floor(delta / month) !== 1:\r\n\t\t\t\treturn translate('aMonth');\r\n\r\n\t\t\tcase !(delta < year):\r\n\t\t\t\treturn translate('months', Math.floor(delta / month));\r\n\r\n\t\t\tcase Math.floor(delta / year) !== 1:\r\n\t\t\t\treturn translate('aYear');\r\n\r\n\t\t\tdefault:\r\n\t\t\t\treturn translate('overAYear');\r\n\t\t}\r\n\t};\r\n}\r\n","export const translations = {\r\n\tjustNow: \"just now\",\r\n\tsecondsAgo: \"{{time}} seconds ago\",\r\n\taMinuteAgo: \"a minute ago\",\r\n\tminutesAgo: \"{{time}} minutes ago\",\r\n\tanHourAgo: \"an hour ago\",\r\n\thoursAgo: \"{{time}} hours ago\",\r\n\taDayAgo: \"yesterday\",\r\n\tdaysAgo: \"{{time}} days ago\",\r\n\taWeekAgo: \"a week ago\",\r\n\tweeksAgo: \"{{time}} weeks ago\",\r\n\taMonthAgo: \"a month ago\",\r\n\tmonthsAgo: \"{{time}} months ago\",\r\n\taYearAgo: \"a year ago\",\r\n\tyearsAgo: \"{{time}} years ago\",\r\n\toverAYearAgo: \"over a year ago\",\r\n\tsecondsFromNow: \"{{time}} seconds from now\",\r\n\taMinuteFromNow: \"a minute from now\",\r\n\tminutesFromNow: \"{{time}} minutes from now\",\r\n\tanHourFromNow: \"an hour from now\",\r\n\thoursFromNow: \"{{time}} hours from now\",\r\n\taDayFromNow: \"tomorrow\",\r\n\tdaysFromNow: \"{{time}} days from now\",\r\n\taWeekFromNow: \"a week from now\",\r\n\tweeksFromNow: \"{{time}} weeks from now\",\r\n\taMonthFromNow: \"a month from now\",\r\n\tmonthsFromNow: \"{{time}} months from now\",\r\n\taYearFromNow: \"a year from now\",\r\n\tyearsFromNow: \"{{time}} years from now\",\r\n\toverAYearFromNow: \"over a year from now\"\r\n};\r\n","import relativeDateFactory from './factory';\r\nimport { translations } from './translations';\r\n\r\nexport default relativeDateFactory(translations);\r\n","import { Pipe } from \"rxcomp\";\r\nimport relativeDateFactory from './factory';\r\nimport relativeDate from './tiny-relative-date';\r\n\r\nexport const RELATIVE_DATE_KEYS = [\"justNow\", \"secondsAgo\", \"aMinuteAgo\", \"minutesAgo\", \"anHourAgo\", \"hoursAgo\", \"aDayAgo\", \"daysAgo\", \"aWeekAgo\", \"weeksAgo\", \"aMonthAgo\", \"monthsAgo\", \"aYearAgo\", \"yearsAgo\", \"overAYearAgo\", \"secondsFromNow\", \"aMinuteFromNow\", \"minutesFromNow\", \"anHourFromNow\", \"hoursFromNow\", \"aDayFromNow\", \"daysFromNow\", \"aWeekFromNow\", \"weeksFromNow\", \"aMonthFromNow\", \"monthsFromNow\", \"aYearFromNow\", \"yearsFromNow\", \"overAYearFromNow\"];\r\n\r\nexport default class RelativeDatePipe extends Pipe {\r\n\r\n\tstatic transform(value) {\r\n\t\tif (value) {\r\n\t\t\treturn this.relativeDate(value);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic setLocale(locale) {\r\n\t\tif (!locale) return;\r\n\t\tconst values = {};\r\n\t\tconst keys = Object.keys(locale).filter(key => RELATIVE_DATE_KEYS.indexOf(key) !== -1);\r\n\t\tif (keys.length) {\r\n\t\t\tkeys.forEach(key => values[key] = locale[key]);\r\n\t\t\tthis.relativeDate = relativeDateFactory(values);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nRelativeDatePipe.meta = {\r\n\tname: 'relativeDate',\r\n};\r\n\r\nRelativeDatePipe.relativeDate = relativeDate;\r\n\r\nif (window.locale) {\r\n\tRelativeDatePipe.setLocale(window.locale);\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { interval } from 'rxjs';\r\nimport { startWith, takeUntil } from 'rxjs/operators';\r\nimport RelativeDatePipe from './relative-date.pipe';\r\n\r\nexport default class RelativeDateDirective extends Directive {\r\n\r\n\tset text(text) {\r\n\t\tif (this.text_ !== text) {\r\n\t\t\tthis.text_ = text;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tnode.innerText = text;\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.change$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(() => {\r\n\t\t\tthis.text = RelativeDatePipe.transform(this.relativeDate);\r\n\t\t});\r\n\t}\r\n\r\n\tchange$() {\r\n\t\treturn interval(1000).pipe(\r\n\t\t\tstartWith(0),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nRelativeDateDirective.meta = {\r\n\tselector: '[relativeDate]',\r\n\tinputs: ['relativeDate']\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { shareReplay, takeUntil, tap } from 'rxjs/operators';\r\n\r\nexport default class ScrollToDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tthis.initialFocus = false;\r\n\t\tconst { module, node } = getContext(this);\r\n\t\tconst expression = this.expression = node.getAttribute(`(scrollTo)`);\r\n\t\tthis.outputFunction = module.makeFunction(expression, ['$event']);\r\n\t\tthis.scrollTo$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(() => {});\r\n\t}\r\n\r\n\tscrollTo$() {\r\n\t\tconst { module, node, parentInstance } = getContext(this);\r\n\t\treturn fromEvent(node, 'click').pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tconst result = module.resolve(this.outputFunction, parentInstance, event);\r\n\t\t\t\tif (typeof result === 'string') {\r\n\t\t\t\t\tconst target = document.querySelector(result);\r\n\t\t\t\t\tif (target) {\r\n\t\t\t\t\t\tconst from = this.currentTop();\r\n\t\t\t\t\t\tconst to = from + target.getBoundingClientRect().top - 50;\r\n\t\t\t\t\t\tconst o = { pow: 0 };\r\n\t\t\t\t\t\tconst html = document.querySelector('html');\r\n\t\t\t\t\t\tgsap.set(html, {\r\n\t\t\t\t\t\t\t'scroll-behavior': 'auto'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tgsap.to(o, Math.abs((to - from)) / 2000, {\r\n\t\t\t\t\t\t\tpow: 1,\r\n\t\t\t\t\t\t\tease: Quad.easeOut,\r\n\t\t\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\t\t\tonUpdate: () => {\r\n\t\t\t\t\t\t\t\twindow.scrollTo(0, from + (to - from) * o.pow);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\t\t\tgsap.set(html, {\r\n\t\t\t\t\t\t\t\t\t'scroll-behavior': 'smooth'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t}\r\n\r\n\tcurrentTop() {\r\n\t\t// Firefox, Chrome, Opera, Safari\r\n\t\tif (self.pageYOffset) return self.pageYOffset;\r\n\t\t// Internet Explorer 6 - standards mode\r\n\t\tif (document.documentElement && document.documentElement.scrollTop)\r\n\t\t\treturn document.documentElement.scrollTop;\r\n\t\t// Internet Explorer 6, 7 and 8\r\n\t\tif (document.body.scrollTop) return document.body.scrollTop;\r\n\t\treturn 0;\r\n\t}\r\n\r\n}\r\n\r\nScrollToDirective.meta = {\r\n\tselector: `[(scrollTo)]`\r\n};\r\n","export default class DownloadService {\r\n\r\n\tstatic get a() {\r\n\t\tlet a = this.a_;\r\n\t\tif (!a) {\r\n\t\t\ta = document.createElement(\"a\");\r\n\t\t\ta.style = \"display: none\";\r\n\t\t\tdocument.body.appendChild(a);\r\n\t\t\tthis.a_ = a;\r\n\t\t}\r\n\t\treturn a;\r\n\t}\r\n\r\n\tstatic download(blob, fileName = 'download.txt') {\r\n\t\t// var json = JSON.stringify(data),\r\n\t\t// blob = new Blob([json], {type: \"octet/stream\"}),\r\n\t\tconst url = window.URL.createObjectURL(blob);\r\n\t\tconst a = this.a;\r\n\t\ta.href = url;\r\n\t\ta.download = fileName;\r\n\t\ta.click();\r\n\t\twindow.URL.revokeObjectURL(url);\r\n\t}\r\n\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { first, map, takeUntil } from 'rxjs/operators';\r\nimport DownloadService from '../download/download.service';\r\nimport { STATIC } from '../environment/environment';\r\nimport HttpService from '../http/http.service';\r\nimport ModalService, { ModalResolveEvent } from '../modal/modal.service';\r\nimport UserService from '../user/user.service';\r\n\r\nconst src = STATIC ? '/ws-events/register-or-login-modal.html' : '/Viewdoc.cshtml?co_id=23649';\r\n\r\nexport default class SecureDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tfromEvent(node, 'click').pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.tryDownloadHref();\r\n\t\t});\r\n\t}\r\n\r\n\ttryDownloadHref() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst href = node.getAttribute('href');\r\n\t\tif (href) {\r\n\t\t\tHttpService.get$(href, undefined, 'blob').pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t\tmap(response => response.data),\r\n\t\t\t).subscribe(blob => {\r\n\t\t\t\tDownloadService.download(blob, href.split('/').pop());\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('SecureDirective.tryDownloadHref.error', error);\r\n\t\t\t\tthis.onLogin(event);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\tModalService.open$({ src: src, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('SecureDirective.onLogin', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t\tthis.tryDownloadHref();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nSecureDirective.meta = {\r\n\tselector: '[secure]',\r\n};\r\n","import { Component } from 'rxcomp';\r\n\r\nexport default class ShareComponent extends Component {\r\n\r\n\tget facebookUrl() {\r\n\t\treturn `https://www.facebook.com/sharer/sharer.php?u=${this.getUrl()}`;\r\n\t}\r\n\r\n\tget linkedInUrl() {\r\n\t\treturn `https://www.linkedin.com/shareArticle?mini=true&url=${this.getUrl()}&title=${this.getTitle()}`;\r\n\t}\r\n\r\n\tget twitterUrl() {\r\n\t\treturn `https://twitter.com/intent/tweet?text=${this.getTitle()}%20${this.getUrl()}`;\r\n\t}\r\n\r\n\tget whatsappUrl() {\r\n\t\treturn `https://api.whatsapp.com/send?text=${this.getUrl()}`;\r\n\t}\r\n\r\n\tget mailToUrl() {\r\n\t\treturn `mailto:?subject=${this.getTitle()}&body=${this.getUrl()}`;\r\n\t}\r\n\r\n\tonInit() {\r\n\t\t// console.log('ShareComponent.onInit', this.share, this.title);\r\n\t}\r\n\r\n\tgetTitle() {\r\n\t\tlet title = this.title ? this.title : document.title;\r\n\t\treturn this.encodeURI(title);\r\n\t}\r\n\r\n\tgetUrl() {\r\n\t\tlet url = this.url;\r\n\t\tif (url) {\r\n\t\t\tif (url.indexOf(window.location.origin) === -1) {\r\n\t\t\t\turl = window.location.origin + (url.indexOf('/') === 0 ? url : ('/' + url));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\turl = window.location.href;\r\n\t\t}\r\n\t\treturn this.encodeURI(url);\r\n\t}\r\n\r\n\tencodeURI(text) {\r\n\t\treturn encodeURIComponent(text).replace(/[!'()*]/g, function(c) {\r\n\t\t\treturn '%' + c.charCodeAt(0).toString(16);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nShareComponent.meta = {\r\n\tselector: '[share]',\r\n\tinputs: ['share', 'title'],\r\n\ttemplate: `\r\n\t<ul class=\"wse__nav--share\">\r\n\t\t<li>\r\n\t\t\t<a [href]=\"facebookUrl\" target=\"_blank\"><svg class=\"wse__facebook\"><use xlink:href=\"#facebook\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<li>\r\n\t\t\t<a [href]=\"linkedInUrl\" target=\"_blank\"><svg class=\"wse__linkedin\"><use xlink:href=\"#linkedin\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<li>\r\n\t\t\t<a [href]=\"twitterUrl\" target=\"_blank\"><svg class=\"wse__twitter\"><use xlink:href=\"#twitter\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<li>\r\n\t\t\t<a [href]=\"whatsappUrl\" target=\"_blank\"><svg class=\"wse__whatsapp\"><use xlink:href=\"#whatsapp\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<li>\r\n\t\t\t<a [href]=\"mailToUrl\"><svg class=\"wse__email\"><use xlink:href=\"#email\"></use></svg></a>\r\n\t\t</li>\r\n\t</ul>\r\n\t`,\r\n};\r\n","import { Pipe } from \"rxcomp\";\r\nimport { getSlug } from \"../environment/environment\";\r\n\r\nexport default class SlugPipe extends Pipe {\r\n\r\n\tstatic transform(value) {\r\n\t\treturn getSlug(value);\r\n\t}\r\n\r\n}\r\n\r\nSlugPipe.meta = {\r\n\tname: 'slug',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { Subject } from 'rxjs';\r\nimport Swiper from 'swiper';\r\n\r\nexport default class SwiperDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', `swiper-${this.rxcompId}`);\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tspeed: 600,\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: `#swiper-${this.rxcompId} .swiper-pagination`,\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tnavigation: {\r\n\t\t\t\tnextEl: `#swiper-${this.rxcompId} .swiper-button-next`,\r\n\t\t\t\tprevEl: `#swiper-${this.rxcompId} .swiper-button-prev`,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t}\r\n\r\n\tget enabled() {\r\n\t\treturn !window.matchMedia('print').matches;\r\n\t}\r\n\r\n\tonView() {\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.swiperInitOrUpdate_();\r\n\t\t}, 1);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners_();\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tonBeforePrint() {\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tslideToIndex(index) {\r\n\t\t// console.log('SwiperDirective.slideToIndex', index);\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.slideTo(index);\r\n\t\t}\r\n\t}\r\n\r\n\tinit_() {\r\n\t\tthis.events$ = new Subject();\r\n\t\tif (this.enabled) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tgsap.set(node, { opacity: 0 });\r\n\t\t\tthis.index = 0;\r\n\t\t\tconst on = this.options.on || {};\r\n\t\t\tconst self = this;\r\n\t\t\ton.slideChange = function() {\r\n\t\t\t\tconst swiper = this;\r\n\t\t\t\tself.index = swiper.activeIndex;\r\n\t\t\t\tself.events$.next(self.index);\r\n\t\t\t\tself.pushChanges();\r\n\t\t\t};\r\n\t\t\tthis.options.on = on;\r\n\t\t\tthis.addListeners_();\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners_() {\r\n\t\tthis.onBeforePrint = this.onBeforePrint.bind(this);\r\n\t\twindow.addEventListener('beforeprint', this.onBeforePrint);\r\n\t\t/*\r\n\t\tscope.$on('onResize', ($scope) => {\r\n\t\t\tthis.onResize(scope, element, attributes);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\tremoveListeners_() {\r\n\t\twindow.removeEventListener('beforeprint', this.onBeforePrint);\r\n\t}\r\n\r\n\tswiperInitOrUpdate_() {\r\n\t\tif (this.enabled) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tif (this.swiper) {\r\n\t\t\t\tthis.swiper.update();\r\n\t\t\t} else {\r\n\t\t\t\tlet swiper;\r\n\t\t\t\tconst on = this.options.on || (this.options.on = {});\r\n\t\t\t\tconst callback = on.init;\r\n\t\t\t\tif (!on.init || !on.init.swiperDirectiveInit) {\r\n\t\t\t\t\ton.init = function() {\r\n\t\t\t\t\t\tgsap.to(node, 0.4, {\r\n\t\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\t\tease: Power2.easeOut,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\t\t\t\tcallback.apply(this, [swiper, element, scope]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, 1);\r\n\t\t\t\t\t};\r\n\t\t\t\t\ton.init.swiperDirectiveInit = true;\r\n\t\t\t\t}\r\n\t\t\t\tgsap.set(node, { opacity: 1 });\r\n\t\t\t\tswiper = new Swiper(node, this.options);\r\n\t\t\t\tthis.swiper = swiper;\r\n\t\t\t\tthis.swiper._opening = true;\r\n\t\t\t\tnode.classList.add('swiper-init');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tswiperDestroy_() {\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.destroy();\r\n\t\t}\r\n\t}\r\n\r\n\topenMore(event) {\r\n\t\tthis.more.next(event);\r\n\t}\r\n}\r\n\r\nSwiperDirective.meta = {\r\n\tselector: '[swiper]',\r\n\tinputs: ['consumer'],\r\n\toutputs: ['more']\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport SwiperDirective from './swiper.directive';\r\n\r\nexport default class SwiperEventsDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', `swiper-${this.rxcompId}`);\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1,\r\n\t\t\tspaceBetween: 15,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t1024: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 0,\r\n\t\t\t\t},\r\n\t\t\t\t1440: {\r\n\t\t\t\t\tslidesPerView: 2.5,\r\n\t\t\t\t\tspaceBetween: 0,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tcenteredSlides: false,\r\n\t\t\t// loop: true,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tspeed: 600,\r\n\t\t\t/*\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\t*/\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: `#swiper-${this.rxcompId} .swiper-pagination`,\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tnavigation: {\r\n\t\t\t\tnextEl: `#swiper-${this.rxcompId} .swiper-button-next`,\r\n\t\t\t\tprevEl: `#swiper-${this.rxcompId} .swiper-button-prev`,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t\t// console.log('SwiperEventsDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperEventsDirective.meta = {\r\n\tselector: '[swiper-events]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport SwiperDirective from './swiper.directive';\r\n\r\nexport default class SwiperRelatedDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', `swiper-${this.rxcompId}`);\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tcenteredSlides: false,\r\n\t\t\tloop: false,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tspeed: 600,\r\n\t\t\t/*\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\t*/\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: `#swiper-${this.rxcompId} .swiper-pagination`,\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tnavigation: {\r\n\t\t\t\tnextEl: `#swiper-${this.rxcompId} .swiper-button-next`,\r\n\t\t\t\tprevEl: `#swiper-${this.rxcompId} .swiper-button-prev`,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t}\r\n\r\n}\r\n\r\nSwiperRelatedDirective.meta = {\r\n\tselector: '[swiper-related]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport SwiperDirective from './swiper.directive';\r\n\r\nexport default class SwiperSlidesDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', `swiper-${this.rxcompId}`);\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1,\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t1024: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 0,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tloop: false,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tspeed: 600,\r\n\t\t\t/*\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\t*/\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: `#swiper-${this.rxcompId} .swiper-pagination`,\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tnavigation: {\r\n\t\t\t\tnextEl: `#swiper-${this.rxcompId} .swiper-button-next`,\r\n\t\t\t\tprevEl: `#swiper-${this.rxcompId} .swiper-button-prev`,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t}\r\n\r\n}\r\n\r\nSwiperSlidesDirective.meta = {\r\n\tselector: '[swiper-slides]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport SwiperDirective from './swiper.directive';\r\n\r\nexport default class SwiperTopEventsDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', `swiper-${this.rxcompId}`);\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1,\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t768: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 0,\r\n\t\t\t\t},\r\n\t\t\t\t1024: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 0,\r\n\t\t\t\t},\r\n\t\t\t\t1440: {\r\n\t\t\t\t\tslidesPerView: 4,\r\n\t\t\t\t\tspaceBetween: 0,\r\n\t\t\t\t},\r\n\t\t\t\t1920: {\r\n\t\t\t\t\tslidesPerView: 4,\r\n\t\t\t\t\tspaceBetween: 0,\r\n\t\t\t\t},\r\n\t\t\t\t2440: {\r\n\t\t\t\t\tslidesPerView: 5,\r\n\t\t\t\t\tspaceBetween: 0,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tcenteredSlides: false,\r\n\t\t\t// loop: true,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tspeed: 600,\r\n\t\t\t/*\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\t*/\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: `#swiper-${this.rxcompId} .swiper-pagination`,\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tnavigation: {\r\n\t\t\t\tnextEl: `#swiper-${this.rxcompId} .swiper-button-next`,\r\n\t\t\t\tprevEl: `#swiper-${this.rxcompId} .swiper-button-prev`,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t\t// console.log('SwiperTopEventsDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperTopEventsDirective.meta = {\r\n\tselector: '[swiper-top-events]'\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\n\r\nexport default class ThronComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst THRON = window.THRONContentExperience || window.THRONPlayer;\r\n\t\tif (!THRON) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tThronComponent.registerSkin();\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', `thron-${this.rxcompId}`);\r\n\r\n\t\tlet media = this.thron;\r\n\t\tif (media.indexOf('pkey=') === -1) {\r\n\t\t\tconst splitted = media.split('/');\r\n\t\t\tconst clientId = splitted[6];\r\n\t\t\tconst xcontentId = splitted[7];\r\n\t\t\tconst pkey = splitted[8];\r\n\t\t\tmedia = `https://gruppoconcorde-view.thron.com/api/xcontents/resources/delivery/getContentDetail?clientId=${clientId}&xcontentId=${xcontentId}&pkey=${pkey}`;\r\n\t\t\t// console.log(media);\r\n\t\t}\r\n\t\tconst controls = node.hasAttribute('controls') ? true : false,\r\n\t\t\tloop = node.hasAttribute('loop') ? true : false,\r\n\t\t\tautoplay = node.hasAttribute('autoplay') ? true : false,\r\n\t\t\tlive = node.hasAttribute('live') ? true : false;\r\n\t\tconst player = this.player = THRON(node.id, {\r\n\t\t\tmedia: media,\r\n\t\t\tloop: loop,\r\n\t\t\tautoplay: autoplay,\r\n\t\t\tmuted: !controls,\r\n\t\t\tdisplayLinked: 'close',\r\n\t\t\tnoSkin: !controls,\r\n\t\t\t// lockBitrate: 'max',\r\n\t\t\t//loader spinner color\r\n\t\t\tpreloadColor: '#446CB3',\r\n\t\t\t//Audio Wave color\r\n\t\t\twaveColor: '#ffffff',\r\n\t\t\twaveProgressColor: '#446CB3'\r\n\t\t});\r\n\t\t/*\r\n\t\t// Set the bottom bar of the video with share and fullscreen only. The first on the left and the second to the right.\r\n\t\tconst params = {\r\n\t\t\tsessId: 'asessId',\r\n\t\t\tclientId: 'aclientId',\r\n\t\t\txcontentId: 'acontentId'\r\n\t\t};\r\n\t\t*/\r\n\t\tthis.onBeforeInit = this.onBeforeInit.bind(this);\r\n\t\tthis.onReady = this.onReady.bind(this);\r\n\t\tthis.onCanPlay = this.onCanPlay.bind(this);\r\n\t\tthis.onPlaying = this.onPlaying.bind(this);\r\n\t\tthis.onComplete = this.onComplete.bind(this);\r\n\t\tplayer.on('beforeInit', this.onBeforeInit);\r\n\t\tplayer.on('ready', this.onReady);\r\n\t\tplayer.on('canPlay', this.onCanPlay);\r\n\t\tplayer.on('playing', this.onPlaying);\r\n\t\tplayer.on('complete', this.onComplete);\r\n\t}\r\n\r\n\tonBeforeInit(playerInstance) {\r\n\t\t// VIDEO: ['captionText', 'shareButton', 'downloadableButton', 'playButton', 'timeSeek', 'timeInfoText', 'volumeButton', 'hdButton', 'speedButton', 'fullscreenButton', 'subtitleButton'],\r\n\t\tconst removedElements = ['captionText', 'subtitleButton', 'downloadableButton', 'speedButton'];\r\n\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst live = node.hasAttribute('live') ? true : false;\r\n\t\tif (live) {\r\n\t\t\tremovedElements.push('timeSeek', 'timeInfoText');\r\n\t\t}\r\n\t\t// Removes playButton and hdButton from schema bar\r\n\t\tconst schema = window.THRONSchemaHelper.getSchema();\r\n\t\tconst elements = window.THRONSchemaHelper.removeElementsById(schema, 'VIDEO', removedElements);\r\n\t\t// A simple verify: existsElements must false\r\n\t\tconst existsElements = window.THRONSchemaHelper.getElementsById(schema, 'VIDEO', removedElements).coordinates.length > 0;\r\n\t\t// console.log('ThronComponent.onBeforeInit.existsElements', existsElements);\r\n\t\tconst params = { bars: schema };\r\n\t\tplayerInstance.params(params);\r\n\t}\r\n\r\n\tonReady() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst controls = node.hasAttribute('controls') ? true : false;\r\n\t\tif (!controls) {\r\n\t\t\tconst player = this.player;\r\n\t\t\tconst mediaContainer = player.mediaContainer();\r\n\t\t\tconst video = mediaContainer.querySelector('video');\r\n\t\t\tvideo.setAttribute('playsinline', 'true');\r\n\t\t}\r\n\t\tthis.ready.next(this);\r\n\t}\r\n\r\n\tonCanPlay() {\r\n\t\tthis.canPlay.next(this);\r\n\t}\r\n\r\n\tonPlaying() {\r\n\t\tconst player = this.player;\r\n\t\tplayer.off('playing', this.onPlaying);\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst controls = node.hasAttribute('controls') ? true : false;\r\n\t\tif (!controls) {\r\n\t\t\tconst qualities = player.qualityLevels();\r\n\t\t\tif (qualities.length) {\r\n\t\t\t\tconst highestQuality = qualities[qualities.length - 1].index;\r\n\t\t\t\tconst lowestQuality = qualities[0].index;\r\n\t\t\t\tplayer.currentQuality(highestQuality);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonComplete() {\r\n\t\tthis.complete.next(this);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tconst player = this.player;\r\n\t\tplayer.off('ready', this.onReady);\r\n\t\tplayer.off('canPlay', this.onCanPlay);\r\n\t\tplayer.off('playing', this.onPlaying);\r\n\t\tplayer.off('complete', this.onComplete);\r\n\t}\r\n\r\n\tplay() {\r\n\t\tconst player = this.player;\r\n\t\tconst status = player.status();\r\n\t\tif (status && !status.playing) {\r\n\t\t\tplayer.play();\r\n\t\t}\r\n\t}\r\n\r\n\tpause() {\r\n\t\tconst player = this.player;\r\n\t\tconst status = player.status();\r\n\t\tif (status && status.playing) {\r\n\t\t\tplayer.pause();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic registerSkin() {\r\n\t\tif (window.wseThronPlugin) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\twindow.wseThronPlugin = function(playerInstance, dom, otherparams, jquery) {\r\n\t\t\tthis.player = playerInstance;\r\n\t\t\tthis.$ = jquery;\r\n\t\t\t/*\r\n\t\t\tthis.player.on('beforeInit',\r\n\t\t\t\tfunction(playerInstance) {\r\n\t\t\t\t\t// console.log('set action before player init', playerInstance, 'otherparams', otherparams);\r\n\t\t\t\t\tvar params = {\r\n\t\t\t\t\t\tvolume: 0.5,\r\n\t\t\t\t\t\tautoplay: false,\r\n\t\t\t\t\t\tlinkedContent: 'show',\r\n\t\t\t\t\t\t//loader spinner color\r\n\t\t\t\t\t\tpreloadColor: '#f39900',\r\n\t\t\t\t\t\t//Audio Wave color\r\n\t\t\t\t\t\twaveColor: '#ffffff',\r\n\t\t\t\t\t\twaveProgressColor: '#f39900'\r\n\t\t\t\t\t};\r\n\t\t\t\t\t//add params\r\n\t\t\t\t\tplayerInstance.params(params);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t\tthis.player.on('resize', function(playerInstance) {\r\n\t\t\t\t// console.log('resize', playerInstance);\r\n\t\t\t});\r\n\t\t\tthis.player.on('ready', function(playerInstance) {\r\n\t\t\t\t// console.log('ready', playerInstance);\r\n\t\t\t});\r\n\t\t\t*/\r\n\t\t};\r\n\t\tTHRONContentExperience.plugin('wse', wseThronPlugin);\r\n\t}\r\n\r\n}\r\n\r\nThronComponent.meta = {\r\n\tselector: '[thron]',\r\n\toutputs: ['ready', 'canPlay', 'complete'],\r\n\tinputs: ['thron'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport UserService from './user.service';\r\n\r\nexport default class UserForgotComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('UserForgotComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('UserForgotComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('UserForgotComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\tUserService.forgot$(this.form.value).pipe(\r\n\t\t\t\tfirst()\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\t// console.log('UserForgotComponent.onSubmit', response);\r\n\t\t\t\tthis.sent.next(true);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\t// this.form.reset();\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserForgotComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tthis.login.next();\r\n\t}\r\n\r\n\tonRegister() {\r\n\t\tthis.register.next();\r\n\t}\r\n\r\n}\r\n\r\nUserForgotComponent.meta = {\r\n\tselector: '[user-forgot]',\r\n\toutputs: ['sent', 'login', 'register'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport UserService from './user.service';\r\n\r\nexport default class UserSigninComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst data = window.data || {\r\n\t\t\tinterests: []\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('UserSigninComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tpassword: 'password',\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('UserSigninComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('UserSigninComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\t// HttpService.post$('/api/users/Login', this.form.value)\r\n\t\t\tUserService.login$(this.form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\t// console.log('UserSigninComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\t// this.form.reset();\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tthis.signIn.next(typeof response === 'string' ? { status: response } : response);\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserSigninComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonForgot() {\r\n\t\tthis.forgot.next();\r\n\t}\r\n\r\n\tonRegister() {\r\n\t\tthis.register.next();\r\n\t}\r\n\r\n}\r\n\r\nUserSigninComponent.meta = {\r\n\tselector: '[user-signin]',\r\n\toutputs: ['signIn', 'forgot', 'register'],\r\n};\r\n","import { FormValidator } from 'rxcomp-form';\r\n\r\nexport default function RequiredIfValidator(condition) {\r\n\treturn new FormValidator(function (value, params) {\r\n\t\tconst condition = params.condition;\r\n\t\tif (!typeof condition === 'function') {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (Boolean(condition()) === true) {\r\n\t\t\treturn (value == null || value.length === 0) ? { required: true } : null;\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}, { condition });\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, FormValidator, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport RequiredIfValidator from '../forms/required-if.validator';\r\nimport UserService from './user.service';\r\n\r\nexport default class UserSignupComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst data = window.data || {\r\n\t\t\troles: [{\r\n\t\t\t\tid: 0,\r\n\t\t\t\tname: 'area eventi'\r\n\t\t\t}, {\r\n\t\t\t\tid: 5,\r\n\t\t\t\tname: 'architetto'\r\n\t\t\t}, {\r\n\t\t\t\tid: 6,\r\n\t\t\t\tname: 'giornalista'\r\n\t\t\t}, {\r\n\t\t\t\tid: 4,\r\n\t\t\t\tname: 'rivenditore'\r\n\t\t\t}],\r\n\t\t\tcountries: [{\r\n\t\t\t\tid: 114,\r\n\t\t\t\tname: 'Italia',\r\n\t\t\t\tidstato: 114\r\n\t\t\t}, {\r\n\t\t\t\tid: 204,\r\n\t\t\t\tname: 'Stati Uniti d\\'America',\r\n\t\t\t\tidstato: 0\r\n\t\t\t}],\r\n\t\t\tprovinces: [{\r\n\t\t\t\tid: 1,\r\n\t\t\t\tname: 'Pesaro',\r\n\t\t\t\tidstato: 114\r\n\t\t\t}],\r\n\t\t\tnewsletterLanguages: [{\r\n\t\t\t\tid: 1,\r\n\t\t\t\tname: 'Italiano'\r\n\t\t\t}, {\r\n\t\t\t\tid: 2,\r\n\t\t\t\tname: 'Inglese'\r\n\t\t\t}]\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tlastName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcompany: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\trole: null,\r\n\t\t\tcountry: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tprovince: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\taddress: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tzipCode: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcity: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\ttelephone: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tfax: null,\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\t// username: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpassword: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpasswordConfirm: new FormControl(null, [Validators.RequiredValidator(), this.MatchValidator('password')]),\r\n\t\t\tprivacy: new FormControl(null, Validators.RequiredTrueValidator()),\r\n\t\t\tnewsletter: null,\r\n\t\t\tnewsletterLanguage: new FormControl(null, RequiredIfValidator(() => form.controls.newsletter.value)),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tcontrols.role.options = data.roles;\r\n\t\tcontrols.country.options = data.countries;\r\n\t\tcontrols.province.options = [];\r\n\t\tcontrols.newsletterLanguage.options = data.newsletterLanguages;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\tthis.countryId = changes.country;\r\n\t\t\tthis.pushChanges();\r\n\t\t\t// console.log('UserSignupComponent.form.changes$', changes, form.valid);\r\n\t\t});\r\n\t\tform.controls.newsletter.changes$.pipe(takeUntil(this.unsubscribe$)).subscribe(() => form.controls.Lingua.newsletterLanguage.next(null));\r\n\r\n\t\tthis.data = data;\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\tset countryId(countryId) {\r\n\t\tif (this.countryId_ !== countryId) {\r\n\t\t\t// console.log('UserSignupComponent.set countryId', countryId);\r\n\t\t\tthis.countryId_ = countryId;\r\n\t\t\tconst provinces = this.data.provinces.filter(province => {\r\n\t\t\t\treturn String(province.idstato) === String(countryId);\r\n\t\t\t});\r\n\t\t\tthis.controls.province.options = provinces;\r\n\t\t\tthis.controls.province.hidden = provinces.length === 0;\r\n\t\t\tif (!provinces.find(x => x.id === this.controls.province.value)) {\r\n\t\t\t\tthis.controls.province.value = null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\trole: this.controls.role.options[0].id,\r\n\t\t\tcountry: this.controls.country.options[0].id,\r\n\t\t\taddress: 'Strada della Campanara',\r\n\t\t\tzipCode: '15',\r\n\t\t\tcity: 'Pesaro',\r\n\t\t\ttelephone: '00390721411112',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\t// username: 'username',\r\n\t\t\tpassword: 'password',\r\n\t\t\tpasswordConfirm: 'password',\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\tMatchValidator(fieldName) {\r\n\t\treturn new FormValidator((value) => {\r\n\t\t\tconst field = this.form ? this.form.get(fieldName) : null;\r\n\t\t\tif (!value || !field) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn value !== field.value ? { match: { value: value, match: field.value } } : null;\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('UserSignupComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\tUserService.register$(this.form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\t// console.log('UserSignupComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\t/*\r\n\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t'form type': 'Registrazione'\r\n\t\t\t\t});\r\n\t\t\t\t*/\r\n\t\t\t\tthis.form.reset();\r\n\t\t\t\t// this.pushChanges();\r\n\t\t\t\t// this.signUp.next(typeof response === 'string' ? { status: response } : response);\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserSignupComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tthis.form.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tthis.login.next();\r\n\t}\r\n\r\n}\r\n\r\nUserSignupComponent.meta = {\r\n\tselector: '[user-signup]',\r\n\t//outputs: ['signUp', 'login'],\r\n};\r\n","function push_(event) {\r\n\tconst dataLayer = window.dataLayer || [];\r\n\tdataLayer.push(event);\r\n\tconsole.log('GtmService.dataLayer', event);\r\n}\r\n\r\nexport default class GtmService {\r\n\r\n\tstatic push(event) {\r\n\t\treturn push_(event);\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport GtmService from '../gtm/gtm.service';\r\nimport SwiperDirective from '../swiper/swiper.directive';\r\n\r\nexport default class VideoComponent extends Component {\r\n\r\n\tget playing() {\r\n\t\treturn this.playing_;\r\n\t}\r\n\r\n\tset playing(playing) {\r\n\t\tif (this.playing_ !== playing) {\r\n\t\t\tthis.playing_ = playing;\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.item = {};\r\n\t\tconst { node, parentInstance } = getContext(this);\r\n\t\tnode.classList.add('video');\r\n\t\tthis.video = node.querySelector('video');\r\n\t\tthis.progress = node.querySelector('.icon--play-progress path');\r\n\t\tif (parentInstance instanceof SwiperDirective) {\r\n\t\t\tparentInstance.events$.pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t).subscribe(event => this.pause());\r\n\t\t}\r\n\t\tthis.addListeners();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tconst video = this.video;\r\n\t\tif (video) {\r\n\t\t\tthis.onPlay = this.onPlay.bind(this);\r\n\t\t\tthis.onPause = this.onPause.bind(this);\r\n\t\t\tthis.onEnded = this.onEnded.bind(this);\r\n\t\t\tthis.onTimeUpdate = this.onTimeUpdate.bind(this);\r\n\t\t\tvideo.addEventListener('play', this.onPlay);\r\n\t\t\tvideo.addEventListener('pause', this.onPause);\r\n\t\t\tvideo.addEventListener('ended', this.onEnded);\r\n\t\t\tvideo.addEventListener('timeupdate', this.onTimeUpdate);\r\n\t\t}\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tconst video = this.video;\r\n\t\tif (video) {\r\n\t\t\tvideo.removeEventListener('play', this.onPlay);\r\n\t\t\tvideo.removeEventListener('pause', this.onPause);\r\n\t\t\tvideo.removeEventListener('ended', this.onEnded);\r\n\t\t\tvideo.removeEventListener('timeupdate', this.onTimeUpdate);\r\n\t\t}\r\n\t}\r\n\r\n\ttogglePlay() {\r\n\t\t// console.log('VideoComponent.togglePlay')\r\n\t\tconst video = this.video;\r\n\t\tif (video) {\r\n\t\t\tif (video.paused) {\r\n\t\t\t\tthis.play();\r\n\t\t\t} else {\r\n\t\t\t\tthis.pause();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tplay() {\r\n\t\tconst video = this.video;\r\n\t\tvideo.muted = false;\r\n\t\tvideo.play();\r\n\t}\r\n\r\n\tpause() {\r\n\t\tconst video = this.video;\r\n\t\tvideo.muted = true;\r\n\t\tvideo.pause();\r\n\t}\r\n\r\n\tonPlay() {\r\n\t\tthis.playing = true;\r\n\t\tGtmService.push({\r\n\t\t\tevent: 'video play',\r\n\t\t\tvideo_name: this.video.src\r\n\t\t});\r\n\t}\r\n\r\n\tonPause() {\r\n\t\tthis.playing = false;\r\n\t}\r\n\r\n\tonEnded() {\r\n\t\tthis.playing = false;\r\n\t}\r\n\r\n\tonTimeUpdate() {\r\n\t\tthis.progress.style.strokeDashoffset = this.video.currentTime / this.video.duration;\r\n\t}\r\n\r\n}\r\n\r\nVideoComponent.meta = {\r\n\tselector: '[video]',\r\n\tinputs: ['item'],\r\n};\r\n","\r\n/*\r\n<div style=\"padding:56.25% 0 0 0;position:relative;\">\r\n\t<iframe src=\"https://player.vimeo.com/video/63252461?autoplay=1&color=ff9933&title=0&byline=0&portrait=0&background=0&loop=0\" style=\"position:absolute;top:0;left:0;width:100%;height:100%;\" frameborder=\"0\" allow=\"autoplay; fullscreen\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>\r\n</div>\r\n<script src=\"https://player.vimeo.com/api/player.js\"></script>\r\n\r\n// http://vimeo.com/api/v2/video/497693771.json\r\n\r\n// https://i.vimeocdn.com/video/1029929333_1920x1080.webp\r\n*/\r\n\r\nimport { Component, getContext } from 'rxcomp';\r\n\r\nexport default class VimeoComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', `vimeo-${this.rxcompId}`);\r\n\r\n\t\tlet media = this.vimeo;\r\n\r\n\t\tconst controls = node.hasAttribute('controls') ? 1 : 0,\r\n\t\t\tbackground = controls ? 0 : 1,\r\n\t\t\tloop = node.hasAttribute('loop') ? 1 : 0,\r\n\t\t\tautoplay = node.hasAttribute('autoplay') ? 1 : 0,\r\n\t\t\tlive = node.hasAttribute('live') ? 1 : 0,\r\n\t\t\tcolor = node.hasAttribute('color') ? node.getAttribute('color') : 'f67c53';\r\n\r\n\t\tconst src = `https://player.vimeo.com/video/${media}?autoplay=${autoplay}&color=${color}&title=0&byline=0&portrait=0&controls=${controls}&background=${background}&loop=${loop}`;\r\n\r\n\t\tconst html = /* html */`\r\n\t\t\t<iframe\r\n\t\t\t\tsrc=\"${src}\"\r\n\t\t\t\tstyle=\"position:absolute;top:0;left:0;width:100%;height:100%;\"\r\n\t\t\t\tframeborder=\"0\"\r\n\t\t\t\tallow=\"autoplay; fullscreen\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>\r\n\t\t`;\r\n\r\n\t\tnode.innerHTML = html;\r\n\t}\r\n\r\n}\r\n\r\nVimeoComponent.meta = {\r\n\tselector: '[vimeo]',\r\n\toutputs: ['ready', 'canPlay', 'complete'],\r\n\tinputs: ['vimeo'],\r\n};\r\n","import { Context } from 'rxcomp';\r\n\r\nexport default class VirtualItem extends Context {\r\n\tconstructor(key, $key, value, $value, index, count, parentInstance) {\r\n\t\tsuper(parentInstance);\r\n\t\tthis[key] = $key;\r\n\t\tthis[value] = $value;\r\n\t\tthis.index = index;\r\n\t\tthis.count = count;\r\n\t}\r\n\r\n\tget first() {\r\n\t\treturn this.index === 0;\r\n\t}\r\n\r\n\tget last() {\r\n\t\treturn this.index === this.count - 1;\r\n\t}\r\n\r\n\tget even() {\r\n\t\treturn this.index % 2 === 0;\r\n\t}\r\n\r\n\tget odd() {\r\n\t\treturn !this.even;\r\n\t}\r\n}\r\n","import { getContext, Structure } from 'rxcomp';\r\nimport { BehaviorSubject, fromEvent, merge } from 'rxjs';\r\nimport { auditTime, map, startWith, takeUntil, tap } from 'rxjs/operators';\r\nimport VirtualItem from './virtual.item';\r\n\r\nexport const VirtualMode = {\r\n\tResponsive: 1,\r\n\tGrid: 2,\r\n\tCentered: 3,\r\n\tList: 4\r\n};\r\n\r\nexport default class VirtualStructure extends Structure {\r\n\r\n\tonInit() {\r\n\t\tconst { module, node } = getContext(this);\r\n\t\tconst template = node.firstElementChild;\r\n\t\tconst expression = node.getAttribute('*virtual');\r\n\t\tnode.removeAttribute('*virtual');\r\n\t\tnode.removeChild(template);\r\n\t\tconst tokens = (this.tokens = this.getExpressionTokens(expression));\r\n\t\tthis.virtualFunction = module.makeFunction(tokens.iterable);\r\n\t\tthis.container = node;\r\n\t\tthis.template = template;\r\n\t\tthis.mode = this.mode || 1;\r\n\t\tthis.width = this.width || 250;\r\n\t\tthis.gutter = (this.gutter !== undefined) ? this.gutter : 20;\r\n\t\tthis.options = {\r\n\t\t\ttop: 0,\r\n\t\t\twidth: this.width,\r\n\t\t\tgutter: this.gutter,\r\n\t\t\tcontainerWidth: 0,\r\n\t\t\tcontainerHeight: 0,\r\n\t\t\tcols: [0],\r\n\t\t\tstrategy: 1\r\n\t\t};\r\n\t\tthis.cachedRects = {};\r\n\t\tthis.cachedInstances = [];\r\n\t\tthis.cacheNodes = [];\r\n\t\tthis.items$ = new BehaviorSubject([]);\r\n\t\tthis.update$()\r\n\t\t\t.pipe(takeUntil(this.unsubscribe$))\r\n\t\t\t.subscribe(visibleItems => {\r\n\t\t\t\t// console.log(visibleItems.length);\r\n\t\t\t});\r\n\t}\r\n\r\n\tonChanges(changes) {\r\n\t\tconst context = getContext(this);\r\n\t\tconst module = context.module;\r\n\t\t// resolve\r\n\t\tconst items = module.resolve(this.virtualFunction, context.parentInstance, this) || [];\r\n\t\tthis.mode = this.mode || 1;\r\n\t\tthis.width = this.width || 250;\r\n\t\tthis.gutter = (this.gutter !== undefined) ? this.gutter : 20;\r\n\t\tthis.options.width = this.width;\r\n\t\tthis.updateView(true);\r\n\t\tthis.items$.next(items);\r\n\t}\r\n\r\n\tupdate$() {\r\n\t\treturn merge(this.scroll$(), this.resize$(), this.items$).pipe(\r\n\t\t\tmap(datas => {\r\n\t\t\t\tconst options = this.options;\r\n\t\t\t\tconst items = this.items$.getValue();\r\n\t\t\t\tconst total = items.length;\r\n\t\t\t\tthis.container.position = 'relative';\r\n\t\t\t\tlet highestHeight = 0;\r\n\t\t\t\tconst width = this.getWidth();\r\n\t\t\t\tconst gutter = this.getGutter(width);\r\n\t\t\t\tconst visibleItems = items.filter((item, i) => {\r\n\t\t\t\t\tlet col, height, top, left, bottom;\r\n\t\t\t\t\tlet rect = this.cachedRects[i];\r\n\t\t\t\t\tif (rect) {\r\n\t\t\t\t\t\tcol = rect.col;\r\n\t\t\t\t\t\theight = rect.height;\r\n\t\t\t\t\t\tleft = rect.left;\r\n\t\t\t\t\t\t// top = rect.top;\r\n\t\t\t\t\t\t// bottom = rect.bottom;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcol = this.getCol();\r\n\t\t\t\t\t\theight = this.getHeight(width, item);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttop = options.cols[col];\r\n\t\t\t\t\tif (this.intersect(top + options.top, top + height + options.top, 0, options.containerHeight)) {\r\n\t\t\t\t\t\tif (!rect) {\r\n\t\t\t\t\t\t\tleft = this.getLeft(col, width, gutter);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst node = this.cachedNode(i, i, item, total);\r\n\t\t\t\t\t\tnode.style.position = 'absolute';\r\n\t\t\t\t\t\tnode.style.top = top + 'px';\r\n\t\t\t\t\t\tnode.style.left = left + 'px';\r\n\t\t\t\t\t\tnode.style.width = width + 'px';\r\n\t\t\t\t\t\tif (height !== node.offsetHeight) {\r\n\t\t\t\t\t\t\theight = node.offsetHeight;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbottom = top + height + options.gutter;\r\n\t\t\t\t\t\thighestHeight = Math.max(highestHeight, bottom);\r\n\t\t\t\t\t\toptions.cols[col] = bottom;\r\n\t\t\t\t\t\tif (!rect) {\r\n\t\t\t\t\t\t\tthis.cachedRects[i] = { col, width, height, left, top, bottom };\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\trect.height = height;\r\n\t\t\t\t\t\t\trect.bottom = bottom;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.removeNode(i);\r\n\t\t\t\t\t\tbottom = top + height + options.gutter;\r\n\t\t\t\t\t\toptions.cols[col] = bottom;\r\n\t\t\t\t\t\thighestHeight = Math.max(highestHeight, bottom);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tlet removeIndex = items.length;\r\n\t\t\t\twhile (removeIndex < this.cacheNodes.length) {\r\n\t\t\t\t\tthis.removeNode(removeIndex);\r\n\t\t\t\t\tremoveIndex++;\r\n\t\t\t\t}\r\n\t\t\t\tthis.cacheNodes.length = items.length;\r\n\t\t\t\tthis.container.style.height = `${highestHeight}px`;\r\n\t\t\t\treturn visibleItems;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tgetCols() {\r\n\t\tconst options = this.options;\r\n\t\tconst cols = Math.floor((options.containerWidth + options.gutter) / (options.width + options.gutter)) || 1;\r\n\t\treturn new Array(cols).fill(0);\r\n\t}\r\n\r\n\tgetCol() {\r\n\t\tconst options = this.options;\r\n\t\tlet col;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\tcol = options.cols.reduce((p, c, i, a) => {\r\n\t\t\t\t\treturn c < a[p] ? i : p;\r\n\t\t\t\t}, 0);\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\tcol = 0;\r\n\t\t}\r\n\t\treturn col;\r\n\t}\r\n\r\n\tgetWidth() {\r\n\t\tconst options = this.options;\r\n\t\tlet width;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\t\twidth = options.width;\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\twidth = (options.containerWidth - (options.cols.length - 1) * options.gutter) / options.cols.length;\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\twidth = options.containerWidth;\r\n\t\t}\r\n\t\treturn width;\r\n\t}\r\n\r\n\tgetHeight(width, item) {\r\n\t\tconst options = this.options;\r\n\t\tlet height;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\theight = options.width;\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\theight = 80;\r\n\t\t}\r\n\t\treturn height;\r\n\t}\r\n\r\n\tgetGutter(width) {\r\n\t\tconst options = this.options;\r\n\t\tlet gutter;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\t\tgutter = options.gutter;\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\tgutter = (options.containerWidth - options.cols.length * width) / (options.cols.length - 1);\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\tgutter = 0;\r\n\t\t}\r\n\t\treturn gutter;\r\n\t}\r\n\r\n\tgetLeft(index, width, gutter) {\r\n\t\tconst options = this.options;\r\n\t\tlet left;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\tleft = index * (width + gutter);\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\t\tleft = (options.containerWidth - options.cols.length * (width + gutter) + gutter) / 2 + index * (width + gutter);\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\tleft = 0;\r\n\t\t}\r\n\t\treturn left;\r\n\t}\r\n\r\n\tcachedNode(index, i, value, total) {\r\n\t\tif (this.cacheNodes[index]) {\r\n\t\t\treturn this.updateNode(index, i, value);\r\n\t\t} else {\r\n\t\t\treturn this.createNode(index, i, value, total);\r\n\t\t}\r\n\t}\r\n\r\n\tcreateNode(index, i, value, total) {\r\n\t\tconst clonedNode = this.template.cloneNode(true);\r\n\t\tdelete clonedNode.rxcompId;\r\n\t\tthis.container.appendChild(clonedNode);\r\n\t\tthis.cacheNodes[index] = clonedNode;\r\n\t\tconst context = getContext(this);\r\n\t\tconst module = context.module;\r\n\t\tconst tokens = this.tokens;\r\n\t\tconst args = [tokens.key, i, tokens.value, value, i, total, context.parentInstance];\r\n\t\tconst instance = module.makeInstance(clonedNode, VirtualItem, context.selector, context.parentInstance, args);\r\n\t\tconst forItemContext = getContext(instance);\r\n\t\tmodule.compile(clonedNode, forItemContext.instance);\r\n\t\tthis.cachedInstances[index] = instance;\r\n\t\treturn clonedNode;\r\n\t}\r\n\r\n\tupdateNode(index, i, value) {\r\n\t\tconst instance = this.cachedInstances[index];\r\n\t\tconst tokens = this.tokens;\r\n\t\tif (instance[tokens.key] !== i) {\r\n\t\t\tinstance[tokens.key] = i;\r\n\t\t\tinstance[tokens.value] = value;\r\n\t\t\tinstance.pushChanges();\r\n\t\t}\r\n\t\t// console.log(index, i, value);\r\n\t\treturn this.cacheNodes[index];\r\n\t}\r\n\r\n\tremoveNode(index) {\r\n\t\tthis.cachedInstances[index] = undefined;\r\n\t\tconst node = this.cacheNodes[index];\r\n\t\tif (node) {\r\n\t\t\tconst context = getContext(this);\r\n\t\t\tconst module = context.module;\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\tmodule.remove(node);\r\n\t\t}\r\n\t\tthis.cacheNodes[index] = undefined;\r\n\t\treturn node;\r\n\t}\r\n\r\n\tintersect(top1, bottom1, top2, bottom2) {\r\n\t\treturn top2 < bottom1 && bottom2 > top1;\r\n\t}\r\n\r\n\tresize$() {\r\n\t\treturn fromEvent(window, 'resize').pipe(\r\n\t\t\tauditTime(100),\r\n\t\t\tstartWith(null),\r\n\t\t\ttap(() => this.updateView(true))\r\n\t\t);\r\n\t}\r\n\r\n\tscroll$(node) {\r\n\t\treturn fromEvent(window, 'scroll').pipe(tap(() => this.updateView()));\r\n\t}\r\n\r\n\tupdateView(reset) {\r\n\t\tconst rect = this.container.getBoundingClientRect();\r\n\t\tconst options = this.options;\r\n\t\toptions.top = rect.top;\r\n\t\toptions.containerWidth = rect.width;\r\n\t\toptions.containerHeight = window.innerHeight;\r\n\t\toptions.cols = this.getCols();\r\n\t\tif (reset) {\r\n\t\t\tthis.cachedRects = {};\r\n\t\t}\r\n\t}\r\n\r\n\tgetExpressionTokens(expression) {\r\n\t\tif (expression === null) {\r\n\t\t\tthrow new Error('invalid virtual');\r\n\t\t}\r\n\t\tif (expression.trim().indexOf('let ') === -1 || expression.trim().indexOf(' of ') === -1) {\r\n\t\t\tthrow new Error('invalid virtual');\r\n\t\t}\r\n\t\tconst expressions = expression\r\n\t\t\t.split(';')\r\n\t\t\t.map(x => x.trim())\r\n\t\t\t.filter(x => x !== '');\r\n\t\tconst virtualExpressions = expressions[0].split(' of ').map(x => x.trim());\r\n\t\tlet value = virtualExpressions[0].replace(/\\s*let\\s*/, '');\r\n\t\tconst iterable = virtualExpressions[1];\r\n\t\tlet key = 'index';\r\n\t\tconst keyValueMatches = value.match(/\\[(.+)\\s*,\\s*(.+)\\]/);\r\n\t\tif (keyValueMatches) {\r\n\t\t\tkey = keyValueMatches[1];\r\n\t\t\tvalue = keyValueMatches[2];\r\n\t\t}\r\n\t\tif (expressions.length > 1) {\r\n\t\t\tconst indexExpressions = expressions[1].split(/\\s*let\\s*|\\s*=\\s*index/).map(x => x.trim());\r\n\t\t\tif (indexExpressions.length === 3) {\r\n\t\t\t\tkey = indexExpressions[1];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn { key, value, iterable };\r\n\t}\r\n}\r\n\r\nVirtualStructure.meta = {\r\n\tselector: '[*virtual]',\r\n\tinputs: ['mode', 'width', 'gutter']\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { BehaviorSubject, interval, Subject } from 'rxjs';\r\nimport { distinctUntilChanged, filter, map, switchMap, takeUntil, tap } from 'rxjs/operators';\r\nimport SwiperDirective from '../swiper/swiper.directive';\r\n\r\nexport default class YoutubeComponent extends Component {\r\n\r\n\tget playing() {\r\n\t\treturn this.playing_;\r\n\t}\r\n\r\n\tset playing(playing) {\r\n\t\tif (this.playing_ !== playing) {\r\n\t\t\tthis.playing_ = playing;\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\tget cover() {\r\n\t\treturn this.youtubeId ? `//i.ytimg.com/vi/${this.youtubeId}/maxresdefault.jpg` : '';\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.item = {};\r\n\t\tconst { node, parentInstance } = getContext(this);\r\n\t\tnode.classList.add('youtube');\r\n\t\tif (YoutubeComponent.MOBILE) {\r\n\t\t\tnode.classList.add('mobile');\r\n\t\t}\r\n\t\tthis.progress = node.querySelector('.icon--play-progress path');\r\n\t\tthis.onPlayerReady = this.onPlayerReady.bind(this);\r\n\t\tthis.onPlayerStateChange = this.onPlayerStateChange.bind(this);\r\n\t\tthis.onPlayerError = this.onPlayerError.bind(this);\r\n\t\tthis.id$ = new Subject().pipe(distinctUntilChanged());\r\n\t\tif (parentInstance instanceof SwiperDirective) {\r\n\t\t\tparentInstance.events$.pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t).subscribe(event => this.pause());\r\n\t\t}\r\n\t\t// this.addListeners();\r\n\t}\r\n\r\n\tonChanges(changes) {\r\n\t\tconst id = this.youtubeId;\r\n\t\t// console.log('YoutubeComponent.onChanges', id);\r\n\t\tthis.id$.next(id);\r\n\t}\r\n\r\n\tinitPlayer() {\r\n\t\t// console.log('VideoComponent.initPlayer');\r\n\t\tthis.player$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(player => {\r\n\t\t\tconsole.log('YoutubeComponent.player$', player);\r\n\t\t});\r\n\t\tthis.interval$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(() => {});\r\n\t\tthis.id$.next(this.youtubeId);\r\n\t}\r\n\r\n\tplayer$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst video = node.querySelector('.video');\r\n\t\treturn this.id$.pipe(\r\n\t\t\tswitchMap(id => {\r\n\t\t\t\t// console.log('YoutubeComponent.videoId', id);\r\n\t\t\t\treturn YoutubeComponent.once$().pipe(\r\n\t\t\t\t\tmap(youtube => {\r\n\t\t\t\t\t\t// console.log('YoutubeComponent.once$', youtube);\r\n\t\t\t\t\t\tthis.destroyPlayer();\r\n\t\t\t\t\t\tthis.player = new youtube.Player(video, {\r\n\t\t\t\t\t\t\twidth: node.offsetWidth,\r\n\t\t\t\t\t\t\theight: node.offsetHeight,\r\n\t\t\t\t\t\t\tvideoId: id,\r\n\t\t\t\t\t\t\tplayerVars: {\r\n\t\t\t\t\t\t\t\tautoplay: 1,\r\n\t\t\t\t\t\t\t\tcontrols: 1, // YoutubeComponent.MOBILE ? 1 : 0,\r\n\t\t\t\t\t\t\t\tdisablekb: 1,\r\n\t\t\t\t\t\t\t\tenablejsapi: 1,\r\n\t\t\t\t\t\t\t\tfs: 0,\r\n\t\t\t\t\t\t\t\tloop: 1,\r\n\t\t\t\t\t\t\t\tmodestbranding: 1,\r\n\t\t\t\t\t\t\t\tplaysinline: 1,\r\n\t\t\t\t\t\t\t\trel: 0,\r\n\t\t\t\t\t\t\t\tshowinfo: 0,\r\n\t\t\t\t\t\t\t\tiv_load_policy: 3,\r\n\t\t\t\t\t\t\t\tlistType: 'user_uploads',\r\n\t\t\t\t\t\t\t\t// origin: 'https://log6i.csb.app/'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tevents: {\r\n\t\t\t\t\t\t\t\tonReady: this.onPlayerReady,\r\n\t\t\t\t\t\t\t\tonStateChange: this.onPlayerStateChange,\r\n\t\t\t\t\t\t\t\tonPlayerError: this.onPlayerError\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn this.player;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tonPlayerReady(event) {\r\n\t\t// console.log('YoutubeComponent.onPlayerReady', event);\r\n\t\tevent.target.mute();\r\n\t\tevent.target.playVideo();\r\n\t}\r\n\r\n\tonPlayerStateChange(event) {\r\n\t\t// console.log('YoutubeComponent.onPlayerStateChange', event.data);\r\n\t\tif (event.data === 1) {\r\n\t\t\tthis.playing = true;\r\n\t\t} else {\r\n\t\t\tthis.playing = false;\r\n\t\t}\r\n\t}\r\n\r\n\tonPlayerError(event) {\r\n\t\tconsole.log('YoutubeComponent.onPlayerError', event);\r\n\t}\r\n\r\n\tdestroyPlayer() {\r\n\t\tif (this.player) {\r\n\t\t\tthis.player.destroy();\r\n\t\t}\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.destroyPlayer();\r\n\t}\r\n\r\n\tinterval$() {\r\n\t\treturn interval(500).pipe(\r\n\t\t\tfilter(() => this.playing && this.player),\r\n\t\t\ttap(() => {\r\n\t\t\t\tthis.progress.style.strokeDashoffset =\r\n\t\t\t\t\tthis.player.getCurrentTime() / this.player.getDuration();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\ttogglePlay() {\r\n\t\t// console.log('VideoComponent.togglePlay');\r\n\t\tif (this.playing) {\r\n\t\t\tthis.pause();\r\n\t\t} else {\r\n\t\t\tthis.play();\r\n\t\t}\r\n\t}\r\n\r\n\tplay() {\r\n\t\t// console.log('VideoComponent.play');\r\n\t\tif (!this.player) {\r\n\t\t\tthis.initPlayer();\r\n\t\t} else {\r\n\t\t\tthis.player.playVideo();\r\n\t\t}\r\n\t}\r\n\r\n\tpause() {\r\n\t\tif (!this.player) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.player.stopVideo();\r\n\t}\r\n\r\n\tstatic once$() {\r\n\t\tif (this.youtube$) {\r\n\t\t\treturn this.youtube$;\r\n\t\t} else {\r\n\t\t\tthis.youtube$ = new BehaviorSubject(null).pipe(\r\n\t\t\t\tfilter(youtube => youtube !== null)\r\n\t\t\t);\r\n\t\t\twindow.onYouTubeIframeAPIReady = this.onYouTubeIframeAPIReady_.bind(this);\r\n\t\t\tconst script = document.createElement('script');\r\n\t\t\tconst scripts = document.querySelectorAll('script');\r\n\t\t\tconst last = scripts[scripts.length - 1];\r\n\t\t\tlast.parentNode.insertBefore(script, last);\r\n\t\t\tscript.src = '//www.youtube.com/iframe_api';\r\n\t\t\treturn this.youtube$;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic onYouTubeIframeAPIReady_() {\r\n\t\t// console.log('onYouTubeIframeAPIReady');\r\n\t\tthis.youtube$.next(window.YT);\r\n\t}\r\n\r\n\tstatic mobilecheck() {\r\n\t\tlet check = false;\r\n\t\t(function(a) { if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true; })(navigator.userAgent || navigator.vendor || window.opera);\r\n\t\treturn check;\r\n\t}\r\n\r\n\tstatic mobileAndTabletcheck() {\r\n\t\tlet check = false;\r\n\t\t(function(a) { if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true; })(navigator.userAgent || navigator.vendor || window.opera);\r\n\t\treturn check;\r\n\t}\r\n\r\n}\r\n\r\nYoutubeComponent.MOBILE = YoutubeComponent.mobileAndTabletcheck();\r\n\r\nYoutubeComponent.meta = {\r\n\tselector: '[youtube]',\r\n\tinputs: ['youtubeId', 'title']\r\n};\r\n","import { CoreModule, Module } from 'rxcomp';\r\nimport { FormModule } from 'rxcomp-form';\r\nimport AppComponent from './app.component';\r\nimport AsideComponent from './aside/aside.component';\r\nimport ChannelPageComponent from './channel/channel-page.component';\r\nimport ChannelComponent from './channel/channel.component';\r\nimport ClickOutsideDirective from './click-outside/click-outside.directive';\r\nimport CountPipe from './count/count.pipe';\r\nimport DatePipe from './date/date.pipe';\r\nimport DropdownItemDirective from './dropdown/dropdown-item.directive';\r\nimport DropdownDirective from './dropdown/dropdown.directive';\r\nimport EventDateComponent from './event/event-date.component';\r\nimport EventPageComponent from './event/event-page.component';\r\nimport EventComponent from './event/event.component';\r\nimport FavouritePageComponent from './favourite/favourite-page.component';\r\nimport ControlCheckboxComponent from './forms/control-checkbox.component';\r\nimport ControlCustomSelectComponent from './forms/control-custom-select.component';\r\nimport ControlEmailComponent from './forms/control-email.component';\r\nimport ControlFileComponent from './forms/control-file.component';\r\nimport ControlPasswordComponent from './forms/control-password.component';\r\nimport ControlRadioComponent from './forms/control-radio.component';\r\nimport ControlSelectComponent from './forms/control-select.component';\r\nimport ControlTextComponent from './forms/control-text.component';\r\nimport ControlTextareaComponent from './forms/control-textarea.component';\r\nimport ErrorsComponent from './forms/errors.component';\r\nimport HeaderComponent from './header/header.component';\r\nimport HtmlPipe from './html/html.pipe';\r\nimport IndexPageComponent from './index/index-page.component';\r\nimport LabelPipe from './label/label.pipe';\r\nimport LazyDirective from './lazy/lazy.directive';\r\nimport ModalOutletComponent from './modal/modal-outlet.component';\r\nimport ModalComponent from './modal/modal.component';\r\nimport NotificationComponent from './notification/notification.component';\r\nimport PicturePipe from './picture/picture.pipe';\r\nimport RegisterOrLoginModal from './register-or-login/register-or-login.modal';\r\nimport RelativeDateDirective from './relative-date/relative-date.component';\r\nimport RelativeDatePipe from './relative-date/relative-date.pipe';\r\nimport ScrollToDirective from './scroll-to/scroll-to.directive';\r\nimport SecureDirective from './secure/secure.directive';\r\nimport ShareComponent from './share/share.component';\r\nimport SlugPipe from './slug/slug.pipe';\r\nimport SwiperEventsDirective from './swiper/swiper-events.directive';\r\nimport SwiperRelatedDirective from './swiper/swiper-related.directive';\r\nimport SwiperSlidesDirective from './swiper/swiper-slides.directive';\r\nimport SwiperTopEventsDirective from './swiper/swiper-top-events.directive';\r\nimport SwiperDirective from './swiper/swiper.directive';\r\nimport ThronComponent from './thron/thron.component';\r\nimport UserForgotComponent from './user/user-forgot.component';\r\nimport UserSigninComponent from './user/user-signin.component';\r\nimport UserSignupComponent from './user/user-signup.component';\r\nimport VideoComponent from './video/video.component';\r\nimport VimeoComponent from './vimeo/vimeo.component';\r\nimport VirtualStructure from './virtual/virtual.structure';\r\nimport YoutubeComponent from './youtube/youtube.component';\r\n\r\nexport default class AppModule extends Module {}\r\n\r\nAppModule.meta = {\r\n\timports: [\r\n\t\tCoreModule,\r\n\t\tFormModule,\r\n\t],\r\n\tdeclarations: [\r\n\t\tAsideComponent,\r\n\t\tChannelComponent,\r\n\t\tChannelPageComponent,\r\n\t\tClickOutsideDirective,\r\n\t\tControlCheckboxComponent,\r\n\t\tControlCustomSelectComponent,\r\n\t\tControlEmailComponent,\r\n\t\tControlFileComponent,\r\n\t\tControlPasswordComponent,\r\n\t\tControlRadioComponent,\r\n\t\tControlRadioComponent,\r\n\t\tControlSelectComponent,\r\n\t\tControlTextComponent,\r\n\t\tControlTextareaComponent,\r\n\t\tCountPipe,\r\n\t\tDatePipe,\r\n\t\tDropdownDirective,\r\n\t\tDropdownItemDirective,\r\n\t\tErrorsComponent,\r\n\t\tEventComponent,\r\n\t\tEventDateComponent,\r\n\t\tEventPageComponent,\r\n\t\tFavouritePageComponent,\r\n\t\tHeaderComponent,\r\n\t\tHtmlPipe,\r\n\t\tIndexPageComponent,\r\n\t\tLabelPipe,\r\n\t\tLazyDirective,\r\n\t\tModalComponent,\r\n\t\tModalOutletComponent,\r\n\t\tNotificationComponent,\r\n\t\tPicturePipe,\r\n\t\tRegisterOrLoginModal,\r\n\t\tRelativeDateDirective,\r\n\t\tRelativeDatePipe,\r\n\t\tScrollToDirective,\r\n\t\tSecureDirective,\r\n\t\tShareComponent,\r\n\t\tSlugPipe,\r\n\t\tSwiperDirective,\r\n\t\tSwiperEventsDirective,\r\n\t\tSwiperRelatedDirective,\r\n\t\tSwiperSlidesDirective,\r\n\t\tSwiperTopEventsDirective,\r\n\t\tThronComponent,\r\n\t\tUserForgotComponent,\r\n\t\tUserSigninComponent,\r\n\t\tUserSignupComponent,\r\n\t\tVirtualStructure,\r\n\t\tVideoComponent,\r\n\t\tVimeoComponent,\r\n\t\tYoutubeComponent,\r\n\t],\r\n\tbootstrap: AppComponent,\r\n};\r\n","import { Browser } from 'rxcomp';\r\nimport AppModule from './app.module';\r\n\r\nBrowser.bootstrap(AppModule);\r\n"]}