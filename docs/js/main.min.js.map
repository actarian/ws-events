{"version":3,"sources":["src/js/main.js","../../src/js/app.component.js","../../src/js/location/location.service.js","../../src/js/filter/filter-item.js","../../src/js/filter/filter.service.js","../../src/js/page/page.component.js","../../src/js/environment/environment.js","../../src/js/http/http.service.js","../../src/js/event/event.service.js","../../src/js/channel/channel.service.js","../../src/js/channel/channel-page.component.js","../../src/js/channel/channel.component.js","../../src/js/date/date.pipe.js","../../src/js/dropdown/dropdown.directive.js","../../src/js/dropdown/dropdown-item.directive.js","../../src/js/event/event-date.component.js","../../src/js/event/event.component.js","../../src/js/forms/control.component.js","../../src/js/forms/errors.component.js","../../src/js/html/html.pipe.js","../../src/js/index/index-page.component.js","../../src/js/image/image.service.js","../../src/js/intersection/intersection.service.js","../../src/js/lazy/lazy.cache.js","../../src/js/lazy/lazy.directive.js","../../src/js/modal/modal.service.js","../../src/js/modal/modal-outlet.component.js","../../src/js/modal/modal.component.js","../../src/js/local-storage/local-storage.service.js","../../src/js/user/user.service.js","../../src/js/register-or-login/register-or-login.component.js","../../node_modules/tiny-relative-date/src/factory.js","../../node_modules/tiny-relative-date/translations/en.js","../../node_modules/tiny-relative-date/src/index.js","../../node_modules/tiny-relative-date/lib/factory.js","../../src/js/relative-date/relative-date.pipe.js","../../src/js/scroll-to/scroll-to.directive.js","../../src/js/download/download.service.js","../../src/js/secure/secure.directive.js","../../src/js/swiper/swiper.directive.js","../../src/js/swiper/swiper-events.directive.js","../../src/js/swiper/swiper-slides.directive.js","../../src/js/swiper/swiper-top-events.directive.js","../../src/js/gtm/gtm.service.js","../../src/js/video/video.component.js","../../src/js/virtual/virtual.item.js","../../src/js/virtual/virtual.structure.js","../../src/js/youtube/youtube.component.js","../../src/js/app.module.js","../../src/js/main.js"],"names":["global","factory","exports","module","require","define","amd","self","rxcomp","form","rxjs","operators","Swiper","this","rxcompForm","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_inheritsLoose","subClass","superClass","create","constructor","__proto__","hasOwnProperty","call","AppComponent","_Component","apply","arguments","onInit","getContext","node","classList","remove","Component","meta","selector","LocationService","get","URLSearchParams","window","location","search","set","keyOrValue","value","params","replace","history","pushState","title","document","url","href","split","toString","deserialize","encoded","decode","serialize","encode","decoded","json","atob","JSON","parse","stringify","btoa","FilterMode","FilterItem","filter","change$","BehaviorSubject","mode","placeholder","values","options","unshift","label","assign","_proto","item","match","_this","forEach","getSelectedOption","_this2","find","x","has","getLabel","selectedOption","indexOf","undefined","push","next","index","splice","first","toggle","toggleActive","active","FilterService","initialParams","callback","filters","keys","getParamsCount","reduce","p","c","locationParams","any","items$","items","changes","map","merge","pipe","auditTime","tap","filterItems","updateFilterStates","skipFilter","_this3","filteredItems","option","count","disabled","PageComponent","STATIC","port","host","HttpService","http$","method","data","format","response_","from","fetch","getUrl","headers","Accept","Content-Type","body","then","response","ok","Promise","reject","catchError","error","throwError","getError","get$","query","delete$","post$","put$","patch$","object","statusCode","status","statusMessage","statusText","console","log","Event","creationDate","Date","startDate","endDate","info","started","ended","now","diff","hoursDiff","Math","floor","EventService","detail$","eventId","fake","top$","upcoming$","subscribe$","of","unsubscribe$","like$","unlike$","mapEvents","events","id","channel","subscribers","random","likes","setMinutes","getMinutes","setHours","getHours","setDate","getDate","getTime","Channel","ChannelService","channels$","channelId","listing$","fakeListing","channel_","info_","subscribed","liked","image_","width","height","src","category_","name","event_","type","abstract","picture","picture_","category","product_","magazine_","letters","Array","fill","categoryId","fakeListing_","ChannelPageComponent","_PageComponent","channels","listing","grid","gutter","filterService","tags","features","load$","subscribe","startFilter","pushChanges","combineLatest","takeUntil","setTimeout","toggleGrid","ChannelComponent","toggleSubscribe","flag","toggleLike","inputs","DATE_FORMATS_SPLIT","NUMBER_STRING","R_ISO8601_STR","ALL_COLONS","DatePipe","_Pipe","isNumber","isFinite","padNumber","num","digits","trim","negWrap","neg","substr","dateGetter","size","offset","date","dateStrGetter","shortForm","standAlone","formats","toUpperCase","timeZoneGetter","zone","paddedZone","abs","getFirstThursdayOfYear","year","dayOfWeekOnFirst","getDay","getThursdayThisWeek","datetime","getFullYear","getMonth","weekGetter","firstThurs","result","round","ampmGetter","AMPMS","eraGetter","ERAS","longEraGetter","ERANAMES","jsonStringToDate","string","tzHour","tzMin","parseInt","dateSetter","setUTCFullYear","setFullYear","timeSetter","setUTCHours","h","m","s","ms","parseFloat","timezoneToOffset","timezone","fallback","requestedTimezoneOffset","Number","isNaN","addDateMinutes","minutes","convertTimezoneToLocal","reverse","dateTimezoneOffset","getTimezoneOffset","timezoneOffset","transform_","locale","dateStyle","timeStyle","toLocaleDateString","transform","text","parts","DATETIME_FORMATS","test","exec","concat","slice","pop","formatter","DATE_FORMATS","Pipe","yyyy","yy","y","MMMM","MMM","MM","M","LLLL","dd","d","HH","H","hh","mm","ss","sss","EEEE","EEE","a","Z","ww","w","G","GG","GGG","GGGG","DAY","MONTH","SHORTDAY","SHORTMONTH","fullDate","longDate","medium","mediumDate","mediumTime","short","shortDate","shortTime","DROPDOWN_ID","DropdownDirective","_Directive","trigger","getAttribute","querySelector","opened","onClick","bind","onDocumentClick","openDropdown","closeDropdown","addListeners","dropdown$","add","event","contains","addDocumentListeners","dropped","removeDocumentListeners","getValue","addEventListener","removeListeners","removeEventListener","onDestroy","nextId","dropdown","id_","Directive","outputs","DropdownItemDirective","EventDateMode","to10","EventDateComponent","getMode","live","incoming","past","eventDate","countdown","live$","Subject","interval","MINUTE","SECOND","EventComponent","ControlComponent","onChanges","flags","control","ErrorsComponent","_ControlComponent","labels","template","HtmlPipe","n","String","fromCharCode","unescapes","rx","RegExp","join","IndexPageComponent","topEvents","topChannels","upcomingEvents","PATH","UID","ImageService","worker","worker_","Worker","isBlob","postMessage","fromEvent","URL","createObjectURL","blob","finalize","revokeObjectURL","isCors","IntersectionService","observer","observer_","readySubject_","observerSubject_","IntersectionObserver","entries","intersection$","observe","entry","isIntersecting","unobserve","LazyCache","cache","cache_","LazyDirective","input$","distinctUntilChanged","switchMap","input","lazy$","lazy","setAttribute","ModalEvent","ModalResolveEvent","_ModalEvent","ModalRejectEvent","_ModalEvent2","ModalService","open$","modal","getTemplate$","getNode","modal$","events$","div","createElement","innerHTML","firstElementChild","resolve","ModalOutletComponent","modalNode","onRegister","onLogin","modal_","removeChild","appendChild","compile","ModalComponent","parentInstance","close","LocalStorageService","delete","isLocalStorageSupported","localStorage","removeItem","exist","e","setItem","supported","UserService","setUser","user","user$","me$","mapStatic__","register$","payload","update","login$","_this4","logout$","_this5","retrieve$","_this6","action","RegisterOrLoginComponent","preventDefault","view","calculateDelta","translations","relativeDate","justNow","secondsAgo","aMinuteAgo","minutesAgo","anHourAgo","hoursAgo","aDayAgo","daysAgo","aWeekAgo","weeksAgo","aMonthAgo","monthsAgo","aYearAgo","yearsAgo","overAYearAgo","secondsFromNow","aMinuteFromNow","minutesFromNow","anHourFromNow","hoursFromNow","aDayFromNow","daysFromNow","aWeekFromNow","weeksFromNow","aMonthFromNow","monthsFromNow","aYearFromNow","yearsFromNow","overAYearFromNow","delta","day","hour","translate","translatePhrase","timeValue","translation","minute","fn","createCommonjsModule","default","week","month","relativeDateFactory$1","__esModule","RELATIVE_DATE_KEYS","RelativeDatePipe","setLocale","relativeDateFactory","ScrollToDirective","initialFocus","_getContext","expression","outputFunction","makeFunction","scrollTo$","_getContext2","currentTop","to","getBoundingClientRect","top","o","pow","html","gsap","scroll-behavior","ease","Quad","easeOut","overwrite","onUpdate","scrollTo","onComplete","shareReplay","pageYOffset","documentElement","scrollTop","DownloadService","download","fileName","click","a_","style","SecureDirective","tryDownloadHref","SwiperDirective","rxcompId","slidesPerView","spaceBetween","centeredSlides","speed","autoplay","delay","keyboardControl","mousewheelControl","pagination","el","clickable","navigation","nextEl","prevEl","keyboard","enabled","onlyInViewport","init_","onView","swiperInitOrUpdate_","removeListeners_","swiperDestroy_","onBeforePrint","slideToIndex","swiper","slideTo","opacity","on","slideChange","activeIndex","addListeners_","init","swiperDirectiveInit","Power2","element","scope","_opening","destroy","openMore","more","matchMedia","matches","SwiperEventsDirective","_SwiperDirective","loopAdditionalSlides","SwiperSlidesDirective","loop","SwiperTopEventsDirective","breakpoints","768","1024","1440","1920","2440","GtmService","dataLayer","push_","VideoComponent","video","progress","pause","onPlay","onPause","onEnded","onTimeUpdate","togglePlay","paused","play","muted","playing","video_name","strokeDashoffset","currentTime","duration","playing_","VirtualItem","$key","$value","_Context","even","Context","VirtualMode","VirtualStructure","_Structure","removeAttribute","tokens","getExpressionTokens","virtualFunction","iterable","container","containerWidth","containerHeight","cols","strategy","cachedRects","cachedInstances","cacheNodes","update$","visibleItems","updateView","scroll$","resize$","datas","total","position","highestHeight","getWidth","getGutter","col","left","bottom","rect","getCol","getHeight","intersect","getLeft","cachedNode","offsetHeight","max","removeNode","removeIndex","getCols","updateNode","createNode","clonedNode","cloneNode","context","args","instance","makeInstance","forItemContext","parentNode","top1","bottom1","top2","bottom2","debounceTime","startWith","reset","innerHeight","Error","expressions","virtualExpressions","keyValueMatches","indexExpressions","Structure","YoutubeComponent","MOBILE","onPlayerReady","onPlayerStateChange","onPlayerError","id$","youtubeId","initPlayer","player$","player","interval$","once$","youtube","destroyPlayer","Player","offsetWidth","videoId","playerVars","controls","disablekb","enablejsapi","fs","modestbranding","playsinline","rel","showinfo","iv_load_policy","listType","onReady","onStateChange","mute","playVideo","getCurrentTime","getDuration","stopVideo","youtube$","onYouTubeIframeAPIReady","onYouTubeIframeAPIReady_","script","scripts","querySelectorAll","last","insertBefore","YT","mobilecheck","check","navigator","userAgent","vendor","opera","mobileAndTabletcheck","AppModule","_Module","Module","imports","CoreModule","FormModule","declarations","bootstrap","Browser"],"mappings":"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","file":"docs\\js\\main.min.js","sourcesContent":[null,"import { Component, getContext } from 'rxcomp';\r\n\r\nexport default class AppComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('hidden');\r\n\t}\r\n\r\n\t// onView() { const context = getContext(this); }\r\n\r\n\t// onChanges() {}\r\n\r\n\t// onDestroy() {}\r\n}\r\n\r\nAppComponent.meta = {\r\n\tselector: '[app-component]',\r\n};\r\n","export default class LocationService {\r\n\r\n\tstatic get(key) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\t// console.log('LocationService.get', params);\r\n\t\treturn params.get(key);\r\n\t}\r\n\r\n\tstatic set(keyOrValue, value) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams.set(keyOrValue, value);\r\n\t\t} else {\r\n\t\t\tparams.set(keyOrValue, '');\r\n\t\t}\r\n\t\tthis.replace(params);\r\n\t\t// console.log('LocationService.set', params, keyOrValue, value);\r\n\t}\r\n\r\n\tstatic replace(params) {\r\n\t\tif (window.history && window.history.pushState) {\r\n\t\t\tconst title = document.title;\r\n\t\t\tconst url = `${window.location.href.split('?')[0]}?${params.toString()}`;\r\n\t\t\twindow.history.pushState(params.toString(), title, url);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic deserialize(key) {\r\n\t\tconst encoded = this.get('params');\r\n\t\treturn this.decode(key, encoded);\r\n\t}\r\n\r\n\tstatic serialize(keyOrValue, value) {\r\n\t\tconst params = this.deserialize();\r\n\t\tconst encoded = this.encode(keyOrValue, value, params);\r\n\t\tthis.set('params', encoded);\r\n\t}\r\n\r\n\tstatic decode(key, encoded) {\r\n\t\tlet decoded = null;\r\n\t\tif (encoded) {\r\n\t\t\tconst json = window.atob(encoded);\r\n\t\t\tdecoded = JSON.parse(json);\r\n\t\t}\r\n\t\tif (key && decoded) {\r\n\t\t\tdecoded = decoded[key];\r\n\t\t}\r\n\t\treturn decoded || null;\r\n\t}\r\n\r\n\tstatic encode(keyOrValue, value, params) {\r\n\t\tparams = params || {};\r\n\t\tlet encoded = null;\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams[keyOrValue] = value;\r\n\t\t} else {\r\n\t\t\tparams = keyOrValue;\r\n\t\t}\r\n\t\tconst json = JSON.stringify(params);\r\n\t\tencoded = window.btoa(json);\r\n\t\treturn encoded;\r\n\t}\r\n\r\n}\r\n","import { BehaviorSubject } from 'rxjs';\r\n\r\nexport const FilterMode = {\r\n\tSELECT: 'select',\r\n\tAND: 'and',\r\n\tOR: 'or',\r\n};\r\n\r\nexport default class FilterItem {\r\n\r\n\tconstructor(filter) {\r\n\t\tthis.change$ = new BehaviorSubject();\r\n\t\tthis.mode = FilterMode.SELECT;\r\n\t\tthis.placeholder = 'Select';\r\n\t\tthis.values = [];\r\n\t\tthis.options = [];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.SELECT) {\r\n\t\t\t\tfilter.options.unshift({\r\n\t\t\t\t\tlabel: filter.placeholder,\r\n\t\t\t\t\tvalues: [],\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tObject.assign(this, filter);\r\n\t\t}\r\n\t}\r\n\r\n\tfilter(item, value) {\r\n\t\treturn true; // item.options.indexOf(value) !== -1;\r\n\t}\r\n\r\n\tmatch(item) {\r\n\t\tlet match;\r\n\t\tif (this.mode === FilterMode.OR) {\r\n\t\t\tmatch = this.values.length ? false : true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match || this.filter(item, value);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tmatch = true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match && this.filter(item, value);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetSelectedOption() {\r\n\t\treturn this.options.find(x => this.has(x));\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst selectedOption = this.getSelectedOption();\r\n\t\t\treturn selectedOption ? selectedOption.label : this.placeholder;\r\n\t\t} else {\r\n\t\t\treturn this.label;\r\n\t\t}\r\n\t}\r\n\r\n\thas(item) {\r\n\t\treturn this.values.indexOf(item.value) !== -1;\r\n\t}\r\n\r\n\tset(item) {\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tthis.values = [];\r\n\t\t}\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index === -1) {\r\n\t\t\tif (item.value !== undefined) {\r\n\t\t\t\tthis.values.push(item.value);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tthis.placeholder = item.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.set', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\tremove(item) {\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index !== -1) {\r\n\t\t\tthis.values.splice(index, 1);\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.remove', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\ttoggle(item) {\r\n\t\tif (this.has(item)) {\r\n\t\t\tthis.remove(item);\r\n\t\t} else {\r\n\t\t\tthis.set(item);\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleActive() {\r\n\t\tthis.active = !this.active;\r\n\t}\r\n\r\n}\r\n","import { merge } from 'rxjs';\r\nimport { auditTime, map, tap } from 'rxjs/operators';\r\nimport LocationService from '../location/location.service';\r\nimport FilterItem from './filter-item';\r\n\r\nexport default class FilterService {\r\n\r\n\tconstructor(options, initialParams, callback) {\r\n\t\tconst filters = {};\r\n\t\tthis.filters = filters;\r\n\t\tif (options) {\r\n\t\t\tObject.keys(options).forEach(key => {\r\n\t\t\t\tconst filter = new FilterItem(options[key]);\r\n\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\tcallback(key, filter);\r\n\t\t\t\t}\r\n\t\t\t\tfilters[key] = filter;\r\n\t\t\t});\r\n\t\t\tthis.deserialize(this.filters, initialParams);\r\n\t\t}\r\n\t}\r\n\r\n\tgetParamsCount(params) {\r\n\t\tif (params) {\r\n\t\t\tconst paramsCount = Object.keys(params).reduce((p, c, i) => {\r\n\t\t\t\tconst values = params[c];\r\n\t\t\t\treturn p + (values ? values.length : 0);\r\n\t\t\t}, 0);\r\n\t\t\treturn paramsCount;\r\n\t\t} else {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\tdeserialize(filters, initialParams) {\r\n\t\tlet params;\r\n\t\tif (initialParams && this.getParamsCount(initialParams)) {\r\n\t\t\tparams = initialParams;\r\n\t\t}\r\n\t\tconst locationParams = LocationService.deserialize('filters');\r\n\t\tif (locationParams && this.getParamsCount(locationParams)) {\r\n\t\t\tparams = locationParams;\r\n\t\t}\r\n\t\tif (params) {\r\n\t\t\tObject.keys(filters).forEach(key => {\r\n\t\t\t\tfilters[key].values = params[key] || [];\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn filters;\r\n\t}\r\n\r\n\tserialize(filters) {\r\n\t\tlet params = {};\r\n\t\tlet any = false;\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tif (filter.values && filter.values.length > 0) {\r\n\t\t\t\tparams[x] = filter.values;\r\n\t\t\t\tany = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (!any) {\r\n\t\t\tparams = null;\r\n\t\t}\r\n\t\t// console.log('FilterService.serialize', params);\r\n\t\tLocationService.serialize('filters', params);\r\n\t\treturn params;\r\n\t}\r\n\r\n\titems$(items) {\r\n\t\tconst filters = this.filters;\r\n\t\tconst changes = Object.keys(filters).map(key => filters[key].change$);\r\n\t\treturn merge(...changes).pipe(\r\n\t\t\tauditTime(1),\r\n\t\t\t// tap(() => console.log(filters)),\r\n\t\t\ttap(() => this.serialize(filters)),\r\n\t\t\tmap(() => this.filterItems(items)),\r\n\t\t\ttap(() => this.updateFilterStates(filters, items))\r\n\t\t);\r\n\t}\r\n\r\n\tfilterItems(items, skipFilter) {\r\n\t\tconst filters = Object.keys(this.filters).map((x) => this.filters[x]).filter(x => x.values && x.values.length > 0);\r\n\t\titems = items.filter(item => {\r\n\t\t\tlet has = true;\r\n\t\t\tfilters.forEach(filter => {\r\n\t\t\t\tif (filter !== skipFilter) {\r\n\t\t\t\t\thas = has && filter.match(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn has;\r\n\t\t});\r\n\t\treturn items;\r\n\t}\r\n\r\n\tupdateFilterStates(filters, items) {\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tconst filteredItems = this.filterItems(items, filter);\r\n\t\t\tfilter.options.forEach(option => {\r\n\t\t\t\tlet count = 0;\r\n\t\t\t\tif (option.value) {\r\n\t\t\t\t\tlet i = 0;\r\n\t\t\t\t\twhile (i < filteredItems.length) {\r\n\t\t\t\t\t\tconst item = filteredItems[i];\r\n\t\t\t\t\t\tif (filter.filter(item, option.value)) {\r\n\t\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcount = filteredItems.length;\r\n\t\t\t\t}\r\n\t\t\t\toption.count = count;\r\n\t\t\t\toption.disabled = count === 0;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\n\nexport default class PageComponent extends Component {\n\n\tonInit() {\n\n\t}\n\n}\n\nPageComponent.meta = {\n\tselector: '[page]',\n};\n","export const STATIC = window.location.port === '40333' || window.location.host === 'actarian.github.io';\r\nexport const DEVELOPMENT = ['localhost', '127.0.0.1', '0.0.0.0'].indexOf(window.location.host.split(':')[0]) !== -1;\r\nexport const PRODUCTION = !DEVELOPMENT;\r\nexport const ENV = {\r\n\tSTATIC,\r\n\tDEVELOPMENT,\r\n\tPRODUCTION\r\n};\r\n","import { from, throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\nimport { STATIC } from '../environment/environment';\r\n\r\nexport default class HttpService {\r\n\r\n\tstatic http$(method, url, data, format = 'json') {\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tlet response_ = null;\r\n\t\treturn from(fetch(this.getUrl(url, format), {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: methods.indexOf(method) !== -1 ? JSON.stringify(data) : undefined\r\n\t\t}).then((response) => {\r\n\t\t\tresponse_ = response;\r\n\t\t\t// console.log(response);\r\n\t\t\tif (response.ok) {\r\n\t\t\t\treturn response[format]();\r\n\t\t\t} else {\r\n\t\t\t\treturn response.json().then(json => {\r\n\t\t\t\t\treturn Promise.reject(json);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\tconst query = this.query(data);\r\n\t\treturn this.http$('GET', `${url}${query}`, undefined, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn this.http$('DELETE', url);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn this.http$('POST', url, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn this.http$('PUT', url, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn this.http$('PATCH', url, data);\r\n\t}\r\n\r\n\tstatic query(data) {\r\n\t\treturn ''; // todo\r\n\t}\r\n\r\n\tstatic getUrl(url, format = 'json') {\r\n\t\t// console.log(url);\r\n\t\treturn STATIC && format === 'json' && url.indexOf('/') === 0 ? `.${url}.json` : url;\r\n\t}\r\n\r\n\tstatic getError(object, response) {\r\n\t\tlet error = typeof object === 'object' ? object : {};\r\n\t\tif (!error.statusCode) {\r\n\t\t\terror.statusCode = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusMessage) {\r\n\t\t\terror.statusMessage = response ? response.statusText : object;\r\n\t\t}\r\n\t\tconsole.log('HttpService.getError', error, object);\r\n\t\treturn error;\r\n\t}\r\n\r\n}\r\n","import { of } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport HttpService from '../http/http.service';\n\nexport class Event {\n\n\tget live() {\n\t\treturn this.info.started && !this.info.ended;\n\t}\n\n\tget incoming() {\n\t\tconst now = new Date();\n\t\tconst diff = this.startDate - now;\n\t\tconst hoursDiff = Math.floor(diff / 1000 / 60 / 60);\n\t\treturn !this.info.started && this.startDate > now && hoursDiff < 24;\n\t}\n\n\tget future() {\n\t\tconst now = new Date();\n\t\tconst diff = this.startDate - now;\n\t\tconst hoursDiff = Math.floor(diff / 1000 / 60 / 60);\n\t\treturn !this.info.started && this.startDate > now && hoursDiff >= 24;\n\t}\n\n\tget past() {\n\t\treturn this.info.ended;\n\t}\n\n\tconstructor(data) {\n\t\tif (data) {\n\t\t\tObject.assign(this, data);\n\t\t\tif (this.creationDate) {\n\t\t\t\tthis.creationDate = new Date(this.creationDate);\n\t\t\t}\n\t\t\tif (this.startDate) {\n\t\t\t\tthis.startDate = new Date(this.startDate);\n\t\t\t}\n\t\t\tif (this.endDate) {\n\t\t\t\tthis.endDate = new Date(this.endDate);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default class EventService {\n\n\tstatic detail$(eventId) {\n\t\treturn HttpService.get$(`/api/event/${eventId}/detail`).pipe(\n\t\t\tmap(x => EventService.fake(new Event(x)))\n\t\t\t// map(x => new Event(x))\n\t\t);\n\t}\n\n\tstatic top$() {\n\t\treturn HttpService.get$(`/api/event/evidence`).pipe(\n\t\t\tmap(items => items.map(x => EventService.fake(new Event(x))))\n\t\t\t// map(items => items.map(x => new Event(x)))\n\t\t);\n\t}\n\n\tstatic upcoming$() {\n\t\treturn HttpService.get$(`/api/event/upcoming`).pipe(\n\t\t\t// map(items => items.map(x => EventService.fake(new Event(x))))\n\t\t\tmap(items => items.map(x => new Event(x)))\n\t\t);\n\t}\n\n\tstatic subscribe$(eventId) {\n\t\treturn of(null);\n\t}\n\n\tstatic unsubscribe$(eventId) {\n\t\treturn of(null);\n\t}\n\n\tstatic like$(eventId) {\n\t\treturn of(null);\n\t}\n\n\tstatic unlike$(eventId) {\n\t\treturn of(null);\n\t}\n\n\tstatic mapEvents(events) {\n\t\treturn events ? events.map(x => this.fake(new Event(x))) : [];\n\t}\n\n\tstatic fake(item) {\n\t\t// console.log('EventService.fake', item);\n\t\tconst now = new Date();\n\t\tconst index = item.id % 1000;\n\t\titem.url = `${item.url}?eventId=${item.id}`;\n\t\titem.channel.url = `${item.channel.url}?channelId=${item.channel.id}`;\n\t\titem.info.subscribers = 50 + Math.floor(Math.random() * 200);\n\t\titem.info.likes = 50 + Math.floor(Math.random() * 200);\n\t\tswitch (index) {\n\t\t\tcase 1:\n\t\t\t\titem.startDate = new Date(new Date().setMinutes(now.getMinutes() - 10));\n\t\t\t\titem.endDate = null;\n\t\t\t\titem.info.started = true;\n\t\t\t\titem.info.ended = false;\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\titem.startDate = new Date(new Date().setHours(now.getHours() + 2));\n\t\t\t\titem.endDate = null;\n\t\t\t\titem.info.started = false;\n\t\t\t\titem.info.ended = false;\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\titem.startDate = new Date(new Date().setHours(now.getHours() - 7));\n\t\t\t\titem.endDate = new Date(new Date().setHours(now.getHours() - 6));\n\t\t\t\titem.info.started = true;\n\t\t\t\titem.info.ended = true;\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\titem.startDate = new Date(new Date().setDate(now.getDate() + 7));\n\t\t\t\titem.endDate = null;\n\t\t\t\titem.info.started = false;\n\t\t\t\titem.info.ended = false;\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\titem.startDate = new Date(new Date().setDate(now.getDate() + 14));\n\t\t\t\titem.endDate = null;\n\t\t\t\titem.info.started = false;\n\t\t\t\titem.info.ended = false;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\titem.startDate = new Date(new Date().setDate(now.getDate() - 14 - Math.floor(Math.random() * 150)));\n\t\t\t\titem.endDate = new Date(new Date(item.startDate.getTime()).setHours(item.startDate.getHours() + 1));\n\t\t\t\titem.info.started = true;\n\t\t\t\titem.info.ended = true;\n\t\t}\n\t\treturn item;\n\t}\n\n}\n","import { of } from 'rxjs';\nimport { map, tap } from 'rxjs/operators';\nimport EventService, { Event } from '../event/event.service';\nimport HttpService from '../http/http.service';\n\nexport class Channel {\n\tconstructor(data) {\n\t\tif (data) {\n\t\t\tObject.assign(this, data);\n\t\t\tthis.events = EventService.mapEvents(this.events);\n\t\t}\n\t}\n}\n\nexport default class ChannelService {\n\n\tstatic channels$() {\n\t\treturn HttpService.get$(`/api/channel/channels`).pipe(\n\t\t\tmap(items => items.map(x => ChannelService.fake(new Channel(x))))\n\t\t\t// map(items => items.map(x => new Channel(x)))\n\t\t);\n\t}\n\n\tstatic detail$(channelId) {\n\t\treturn HttpService.get$(`/api/channel/${channelId}/detail`).pipe(\n\t\t\tmap(x => ChannelService.fake(new Channel(x)))\n\t\t\t// map(x => new Channel(x))\n\t\t);\n\t}\n\n\tstatic listing$(channelId) {\n\t\t// return HttpService.get$(`/api/channel/${channelId}/listing`);\n\t\treturn ChannelService.fakeListing(channelId).pipe(\n\t\t\ttap((items) => {\n\t\t\t\t// console.log(JSON.stringify(items));\n\t\t\t})\n\t\t);\n\t}\n\n\tstatic top$() {\n\t\treturn HttpService.get$(`/api/channel/evidence`).pipe(\n\t\t\tmap(items => items.map(x => ChannelService.fake(new Channel(x))))\n\t\t\t// map(items => items.map(x => new Channel(x)))\n\t\t);\n\t}\n\n\tstatic subscribe$(channelId) {\n\t\treturn of(null);\n\t}\n\n\tstatic unsubscribe$(channelId) {\n\t\treturn of(null);\n\t}\n\n\tstatic like$(channelId) {\n\t\treturn of(null);\n\t}\n\n\tstatic unlike$(channelId) {\n\t\treturn of(null);\n\t}\n\n\tstatic fake(item) {\n\t\t// console.log('ChannelService.fake', item);\n\t\titem.url = `${item.url}?channelId=${item.id}`;\n\t\titem.info.subscribers = 1500 + Math.floor(Math.random() * 200);\n\t\titem.info.likes = 500 + Math.floor(Math.random() * 200);\n\t\treturn item;\n\t}\n\n\tstatic fakeListing(channelId) {\n\t\treturn HttpService.get$(`/api/channel/${channelId}/detail`).pipe(\n\t\t\tmap(x => {\n\t\t\t\tconst channel_ = ChannelService.fake(new Channel(x));\n\t\t\t\tconst info_ = {\n\t\t\t\t\tstarted: false,\n\t\t\t\t\tended: false,\n\t\t\t\t\tsubscribers: 100,\n\t\t\t\t\tsubscribed: false,\n\t\t\t\t\tlikes: 100,\n\t\t\t\t\tliked: false\n\t\t\t\t};\n\t\t\t\tconst image_ = {\n\t\t\t\t\tid: 100000,\n\t\t\t\t\twidth: 700,\n\t\t\t\t\theight: 700,\n\t\t\t\t\tsrc: 'https://source.unsplash.com/random/',\n\t\t\t\t};\n\t\t\t\tconst category_ = {\n\t\t\t\t\tid: 10000,\n\t\t\t\t\tname: 'Category',\n\t\t\t\t\turl: '/ws-events/category.html',\n\t\t\t\t};\n\t\t\t\tconst event_ = {\n\t\t\t\t\tid: 1000,\n\t\t\t\t\ttype: 'event',\n\t\t\t\t\tname: 'Evento',\n\t\t\t\t\ttitle: 'Evento',\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\n\t\t\t\t\turl: '/ws-events/event.html',\n\t\t\t\t\tcreationDate: '2020-05-20T08:11:17.827Z',\n\t\t\t\t\tstartDate: '2020-05-20T08:11:17.827Z',\n\t\t\t\t\tpicture: image_,\n\t\t\t\t\tinfo: info_,\n\t\t\t\t\tchannel: channel_,\n\t\t\t\t};\n\t\t\t\tconst picture_ = {\n\t\t\t\t\tid: 1000,\n\t\t\t\t\ttype: 'picture',\n\t\t\t\t\tname: 'Picture',\n\t\t\t\t\ttitle: 'Picture',\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\n\t\t\t\t\turl: '/ws-events/document.html',\n\t\t\t\t\tpicture: image_,\n\t\t\t\t\tcategory: category_,\n\t\t\t\t};\n\t\t\t\tconst product_ = {\n\t\t\t\t\tid: 1000,\n\t\t\t\t\ttype: 'product',\n\t\t\t\t\tname: 'Product',\n\t\t\t\t\ttitle: 'Product',\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\n\t\t\t\t\turl: '/ws-events/product.html',\n\t\t\t\t\tpicture: image_,\n\t\t\t\t\tcategory: category_,\n\t\t\t\t};\n\t\t\t\tconst magazine_ = {\n\t\t\t\t\tid: 1000,\n\t\t\t\t\ttype: 'magazine',\n\t\t\t\t\tname: 'Magazine',\n\t\t\t\t\ttitle: 'Magazine',\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\n\t\t\t\t\turl: '/ws-events/product.html',\n\t\t\t\t\tpicture: image_,\n\t\t\t\t\tcategory: category_,\n\t\t\t\t};\n\t\t\t\tconst letters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'L'];\n\t\t\t\treturn new Array(250).fill(true).map((x, i) => {\n\t\t\t\t\tlet type = 'event';\n\t\t\t\t\tif (i > 3) {\n\t\t\t\t\t\tif (i % 5 === 0) {\n\t\t\t\t\t\t\ttype = 'picture';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (i % 7 === 0) {\n\t\t\t\t\t\t\ttype = 'product';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (i % 11 === 0) {\n\t\t\t\t\t\t\ttype = 'magazine';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet item;\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase 'picture':\n\t\t\t\t\t\t\titem = Object.assign({}, picture_);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'product':\n\t\t\t\t\t\t\titem = Object.assign({}, product_);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'magazine':\n\t\t\t\t\t\t\titem = Object.assign({}, magazine_);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'event':\n\t\t\t\t\t\t\titem = Object.assign({}, event_);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\titem.id = (channelId - 100) * 1000 + 1 + i;\n\t\t\t\t\titem.name = item.title = `${item.name} ${letters[(item.id - 1) % 10]}`;\n\t\t\t\t\titem.type = type;\n\t\t\t\t\tif (item.picture) {\n\t\t\t\t\t\titem.picture = Object.assign({}, image_, {\n\t\t\t\t\t\t\tid: (100001 + i),\n\t\t\t\t\t\t\twidth: 700,\n\t\t\t\t\t\t\theight: [700, 900, 1100][i % 3],\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (item.info) {\n\t\t\t\t\t\titem.info = Object.assign({}, info_);\n\t\t\t\t\t}\n\t\t\t\t\tif (item.channel) {\n\t\t\t\t\t\titem.channel = Object.assign({}, x);\n\t\t\t\t\t}\n\t\t\t\t\tif (item.category) {\n\t\t\t\t\t\tconst categoryId = (10001 + (i % 10));\n\t\t\t\t\t\titem.category = Object.assign({}, category_, {\n\t\t\t\t\t\t\tid: categoryId,\n\t\t\t\t\t\t\tname: 'Category ' + letters[categoryId % 10],\n\t\t\t\t\t\t\turl: `${category_.url}?categoryId=${categoryId}`,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase 'event':\n\t\t\t\t\t\t\titem = EventService.fake(new Event(item));\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\treturn item;\n\t\t\t\t});\n\t\t\t})\n\t\t\t// map(x => new Channel(x))\n\t\t);\n\t}\n\n\tstatic fakeListing_(channelId) {\n\t\treturn HttpService.get$(`/api/channel/${channelId}/detail`).pipe(\n\t\t\tmap(x => {\n\t\t\t\tconst channel_ = ChannelService.fake(new Channel(x));\n\t\t\t\tconst event_ = {\n\t\t\t\t\tid: 1000,\n\t\t\t\t\ttype: 'event',\n\t\t\t\t\tname: 'Evento XYZ',\n\t\t\t\t\ttitle: 'Evento XYZ',\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\n\t\t\t\t\tpicture: {\n\t\t\t\t\t\tsrc: 'https://source.unsplash.com/random/',\n\t\t\t\t\t\twidth: 700,\n\t\t\t\t\t\theight: 700,\n\t\t\t\t\t},\n\t\t\t\t\turl: '/ws-events/event.html',\n\t\t\t\t\tcreationDate: '2020-05-20T08:11:17.827Z',\n\t\t\t\t\tstartDate: '2020-05-20T08:11:17.827Z',\n\t\t\t\t\tinfo: {\n\t\t\t\t\t\tstarted: false,\n\t\t\t\t\t\tended: false,\n\t\t\t\t\t\tsubscribers: 100,\n\t\t\t\t\t\tsubscribed: false,\n\t\t\t\t\t\tlikes: 100,\n\t\t\t\t\t\tliked: false\n\t\t\t\t\t},\n\t\t\t\t\tchannel: channel_\n\t\t\t\t};\n\t\t\t\treturn new Array(250).fill(true).map((x, i) => {\n\t\t\t\t\tconst item = Object.assign({}, event_);\n\t\t\t\t\titem.id = (channelId - 100) * 1000 + 1 + i;\n\t\t\t\t\titem.picture = Object.assign({}, event_.picture);\n\t\t\t\t\titem.picture.width = 700;\n\t\t\t\t\titem.picture.height = [700, 900, 1100][i % 3];\n\t\t\t\t\titem.info = Object.assign({}, event_.info);\n\t\t\t\t\titem.channel = Object.assign({}, x);\n\t\t\t\t\treturn EventService.fake(new Event(item));\n\t\t\t\t});\n\t\t\t})\n\t\t\t// map(x => new Channel(x))\n\t\t);\n\t}\n\n}\n","import { combineLatest } from 'rxjs';\nimport { first, takeUntil } from 'rxjs/operators';\nimport FilterService from '../filter/filter.service';\nimport LocationService from '../location/location.service';\nimport PageComponent from '../page/page.component';\nimport ChannelService from './channel.service';\n\nexport default class ChannelPageComponent extends PageComponent {\n\n\tonInit() {\n\t\tthis.channels = this.channel = this.listing = null;\n\t\tthis.grid = {\n\t\t\tmode: 1,\n\t\t\twidth: 350,\n\t\t\tgutter: 2,\n\t\t};\n\t\tthis.filteredItems = [];\n\t\tconst filters = {\n\t\t\ttype: {\n\t\t\t\tlabel: 'Type',\n\t\t\t\tmode: 'select',\n\t\t\t\toptions: [{\n\t\t\t\t\tlabel: 'Event',\n\t\t\t\t\tvalue: 'event',\n\t\t\t\t}, {\n\t\t\t\t\tlabel: 'Picture',\n\t\t\t\t\tvalue: 'picture',\n\t\t\t\t}, {\n\t\t\t\t\tlabel: 'Product',\n\t\t\t\t\tvalue: 'product',\n\t\t\t\t}, {\n\t\t\t\t\tlabel: 'Magazine',\n\t\t\t\t\tvalue: 'magazine',\n\t\t\t\t}]\n\t\t\t},\n\t\t};\n\t\tconst filterService = this.filterService = new FilterService(filters, {}, (key, filter) => {\n\t\t\tswitch (key) {\n\t\t\t\tcase 'type':\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\treturn item.type === value;\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'tag':\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\treturn item.tags.indexOf(value) !== -1;\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\treturn item.features.indexOf(value) !== -1;\n\t\t\t\t\t};\n\t\t\t}\n\t\t});\n\t\tthis.filters = filterService.filters;\n\t\tthis.load$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe(data => {\n\t\t\tthis.channels = data[0];\n\t\t\tthis.channel = data[1];\n\t\t\tthis.listing = data[2];\n\t\t\tthis.startFilter(this.listing);\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tload$() {\n\t\tconst channelId = LocationService.get('channelId');\n\t\treturn combineLatest(\n\t\t\tChannelService.channels$(),\n\t\t\tChannelService.detail$(channelId),\n\t\t\tChannelService.listing$(channelId),\n\t\t);\n\t}\n\n\tstartFilter(items) {\n\t\tthis.filterService.items$(items).pipe(\n\t\t\ttakeUntil(this.unsubscribe$),\n\t\t).subscribe(filteredItems => {\n\t\t\tthis.filteredItems = [];\n\t\t\tthis.pushChanges();\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.filteredItems = filteredItems;\n\t\t\t\tthis.pushChanges();\n\t\t\t}, 1);\n\t\t\tconsole.log('ChannelPageComponent.filteredItems', filteredItems.length);\n\t\t});\n\t}\n\n\ttoggleGrid() {\n\t\tthis.grid.width = this.grid.width === 350 ? 700 : 350;\n\t\tthis.pushChanges();\n\t}\n\n}\n\nChannelPageComponent.meta = {\n\tselector: '[channel-page]',\n};\n","import { Component } from 'rxcomp';\nimport { first } from 'rxjs/operators';\nimport ChannelService from './channel.service';\n\nexport default class ChannelComponent extends Component {\n\n\ttoggleSubscribe() {\n\t\tlet flag = this.channel.info.subscribed;\n\t\tChannelService[flag ? 'unsubscribe$' : 'subscribe$'](this.channel.id).pipe(\n\t\t\tfirst()\n\t\t).subscribe(() => {\n\t\t\tflag = !flag;\n\t\t\tthis.channel.info.subscribed = flag;\n\t\t\tif (flag) {\n\t\t\t\tthis.channel.info.subscribers++;\n\t\t\t} else {\n\t\t\t\tthis.channel.info.subscribers--;\n\t\t\t}\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\ttoggleLike() {\n\t\tlet flag = this.channel.info.liked;\n\t\tChannelService[flag ? 'unlike$' : 'like$'](this.channel.id).pipe(\n\t\t\tfirst()\n\t\t).subscribe(() => {\n\t\t\tflag = !flag;\n\t\t\tthis.channel.info.liked = flag;\n\t\t\tif (flag) {\n\t\t\t\tthis.channel.info.likes++;\n\t\t\t} else {\n\t\t\t\tthis.channel.info.likes--;\n\t\t\t}\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n}\n\nChannelComponent.meta = {\n\tselector: '[channel]',\n\tinputs: ['channel']\n};\n","import { Pipe } from \"rxcomp\";\r\n\r\nconst DATE_FORMATS_SPLIT = /((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\\s\\S]*)/;\r\nconst NUMBER_STRING = /^-?\\d+$/;\r\nconst R_ISO8601_STR = /^(\\d{4})-?(\\d\\d)-?(\\d\\d)(?:T(\\d\\d)(?::?(\\d\\d)(?::?(\\d\\d)(?:\\.(\\d+))?)?)?(Z|([+-])(\\d\\d):?(\\d\\d))?)?$/;\r\nconst ALL_COLONS = /:/g;\r\nconst ZERO_CHAR = '0';\r\n\r\n// dateFilter.$inject = ['$locale'];\r\n\r\nconst DATETIME_FORMATS_EN_US = {\r\n\t\"AMPMS\": [\r\n      \"AM\",\r\n      \"PM\"\r\n    ],\r\n\t\"DAY\": [\r\n      \"Sunday\",\r\n      \"Monday\",\r\n      \"Tuesday\",\r\n      \"Wednesday\",\r\n      \"Thursday\",\r\n      \"Friday\",\r\n      \"Saturday\"\r\n    ],\r\n\t\"MONTH\": [\r\n      \"January\",\r\n      \"February\",\r\n      \"March\",\r\n      \"April\",\r\n      \"May\",\r\n      \"June\",\r\n      \"July\",\r\n      \"August\",\r\n      \"September\",\r\n      \"October\",\r\n      \"November\",\r\n      \"December\"\r\n    ],\r\n\t\"SHORTDAY\": [\r\n      \"Sun\",\r\n      \"Mon\",\r\n      \"Tue\",\r\n      \"Wed\",\r\n      \"Thu\",\r\n      \"Fri\",\r\n      \"Sat\"\r\n    ],\r\n\t\"SHORTMONTH\": [\r\n      \"Jan\",\r\n      \"Feb\",\r\n      \"Mar\",\r\n      \"Apr\",\r\n      \"May\",\r\n      \"Jun\",\r\n      \"Jul\",\r\n      \"Aug\",\r\n      \"Sep\",\r\n      \"Oct\",\r\n      \"Nov\",\r\n      \"Dec\"\r\n    ],\r\n\t\"fullDate\": \"EEEE, MMMM d, y\",\r\n\t\"longDate\": \"MMMM d, y\",\r\n\t\"medium\": \"MMM d, y h:mm:ss a\",\r\n\t\"mediumDate\": \"MMM d, y\",\r\n\t\"mediumTime\": \"h:mm:ss a\",\r\n\t\"short\": \"M/d/yy h:mm a\",\r\n\t\"shortDate\": \"M/d/yy\",\r\n\t\"shortTime\": \"h:mm a\"\r\n};\r\n\r\nconst DATETIME_FORMATS_IT_IT = {\r\n\t\"AMPMS\": [\r\n      \"AM\",\r\n      \"PM\"\r\n    ],\r\n\t\"DAY\": [\r\n      \"domenica\",\r\n      \"luned\\u00ec\",\r\n      \"marted\\u00ec\",\r\n      \"mercoled\\u00ec\",\r\n      \"gioved\\u00ec\",\r\n      \"venerd\\u00ec\",\r\n      \"sabato\"\r\n    ],\r\n\t\"MONTH\": [\r\n      \"gennaio\",\r\n      \"febbraio\",\r\n      \"marzo\",\r\n      \"aprile\",\r\n      \"maggio\",\r\n      \"giugno\",\r\n      \"luglio\",\r\n      \"agosto\",\r\n      \"settembre\",\r\n      \"ottobre\",\r\n      \"novembre\",\r\n      \"dicembre\"\r\n    ],\r\n\t\"SHORTDAY\": [\r\n      \"dom\",\r\n      \"lun\",\r\n      \"mar\",\r\n      \"mer\",\r\n      \"gio\",\r\n      \"ven\",\r\n      \"sab\"\r\n    ],\r\n\t\"SHORTMONTH\": [\r\n      \"gen\",\r\n      \"feb\",\r\n      \"mar\",\r\n      \"apr\",\r\n      \"mag\",\r\n      \"giu\",\r\n      \"lug\",\r\n      \"ago\",\r\n      \"set\",\r\n      \"ott\",\r\n      \"nov\",\r\n      \"dic\"\r\n    ],\r\n\t\"fullDate\": \"EEEE d MMMM y\",\r\n\t\"longDate\": \"dd MMMM y\",\r\n\t\"medium\": \"dd/MMM/y HH:mm:ss\",\r\n\t\"mediumDate\": \"dd/MMM/y\",\r\n\t\"mediumTime\": \"HH:mm:ss\",\r\n\t\"short\": \"dd/MM/yy HH:mm\",\r\n\t\"shortDate\": \"dd/MM/yy\",\r\n\t\"shortTime\": \"HH:mm\"\r\n};\r\n\r\nexport default class DatePipe extends Pipe {\r\n\r\n\tstatic isNumber(value) {\r\n\t\treturn typeof value === 'number' && isFinite(value);\r\n\t}\r\n\r\n\tstatic padNumber(num, digits, trim, negWrap) {\r\n\t\tvar neg = '';\r\n\t\tif (num < 0 || (negWrap && num <= 0)) {\r\n\t\t\tif (negWrap) {\r\n\t\t\t\tnum = -num + 1;\r\n\t\t\t} else {\r\n\t\t\t\tnum = -num;\r\n\t\t\t\tneg = '-';\r\n\t\t\t}\r\n\t\t}\r\n\t\tnum = '' + num;\r\n\t\twhile (num.length < digits) num = ZERO_CHAR + num;\r\n\t\tif (trim) {\r\n\t\t\tnum = num.substr(num.length - digits);\r\n\t\t}\r\n\t\treturn neg + num;\r\n\t}\r\n\r\n\tstatic dateGetter(name, size, offset, trim, negWrap) {\r\n\t\toffset = offset || 0;\r\n\t\treturn function(date) {\r\n\t\t\tvar value = date['get' + name]();\r\n\t\t\tif (offset > 0 || value > -offset) {\r\n\t\t\t\tvalue += offset;\r\n\t\t\t}\r\n\t\t\tif (value === 0 && offset === -12) value = 12;\r\n\t\t\treturn DatePipe.padNumber(value, size, trim, negWrap);\r\n\t\t};\r\n\t}\r\n\r\n\tstatic dateStrGetter(name, shortForm, standAlone) {\r\n\t\treturn function(date, formats) {\r\n\t\t\tvar value = date['get' + name]();\r\n\t\t\tvar propPrefix = (standAlone ? 'STANDALONE' : '') + (shortForm ? 'SHORT' : '');\r\n\t\t\tvar get = (propPrefix + name).toUpperCase();\r\n\t\t\treturn formats[get][value];\r\n\t\t};\r\n\t}\r\n\r\n\tstatic timeZoneGetter(date, formats, offset) {\r\n\t\tvar zone = -1 * offset;\r\n\t\tvar paddedZone = (zone >= 0) ? '+' : '';\r\n\t\tpaddedZone += DatePipe.padNumber(Math[zone > 0 ? 'floor' : 'ceil'](zone / 60), 2) + DatePipe.padNumber(Math.abs(zone % 60), 2);\r\n\t\treturn paddedZone;\r\n\t}\r\n\r\n\tstatic getFirstThursdayOfYear(year) {\r\n\t\t// 0 = index of January\r\n\t\tvar dayOfWeekOnFirst = (new Date(year, 0, 1)).getDay();\r\n\t\t// 4 = index of Thursday (+1 to account for 1st = 5)\r\n\t\t// 11 = index of *next* Thursday (+1 account for 1st = 12)\r\n\t\treturn new Date(year, 0, ((dayOfWeekOnFirst <= 4) ? 5 : 12) - dayOfWeekOnFirst);\r\n\t}\r\n\r\n\tstatic getThursdayThisWeek(datetime) {\r\n\t\treturn new Date(datetime.getFullYear(), datetime.getMonth(), datetime.getDate() + (4 - datetime.getDay())); // 4 = index of Thursday\r\n\t}\r\n\r\n\tstatic weekGetter(size) {\r\n\t\treturn function(date) {\r\n\t\t\tvar firstThurs = DatePipe.getFirstThursdayOfYear(date.getFullYear()),\r\n\t\t\t\tthisThurs = DatePipe.getThursdayThisWeek(date);\r\n\t\t\tvar diff = +thisThurs - +firstThurs,\r\n\t\t\t\tresult = 1 + Math.round(diff / 6.048e8); // 6.048e8 ms per week\r\n\t\t\treturn padNumber(result, size);\r\n\t\t};\r\n\t}\r\n\r\n\tstatic ampmGetter(date, formats) {\r\n\t\treturn date.getHours() < 12 ? formats.AMPMS[0] : formats.AMPMS[1];\r\n\t}\r\n\r\n\tstatic eraGetter(date, formats) {\r\n\t\treturn date.getFullYear() <= 0 ? formats.ERAS[0] : formats.ERAS[1];\r\n\t}\r\n\r\n\tstatic longEraGetter(date, formats) {\r\n\t\treturn date.getFullYear() <= 0 ? formats.ERANAMES[0] : formats.ERANAMES[1];\r\n\t}\r\n\r\n\tstatic jsonStringToDate(string) {\r\n\t\tlet match;\r\n\t\tif ((match = string.match(R_ISO8601_STR))) {\r\n\t\t\tlet tzHour = 0;\r\n\t\t\tlet tzMin = 0;\r\n\t\t\tif (match[9]) {\r\n\t\t\t\ttzHour = parseInt(match[9] + match[10]);\r\n\t\t\t\ttzMin = parseInt(match[9] + match[11]);\r\n\t\t\t}\r\n\t\t\tconst date = new Date(0);\r\n\t\t\tconst dateSetter = match[8] ? date.setUTCFullYear : date.setFullYear;\r\n\t\t\tconst timeSetter = match[8] ? date.setUTCHours : date.setHours;\r\n\t\t\tdateSetter.call(date, parseInt(match[1]), parseInt(match[2]) - 1, parseInt(match[3]));\r\n\t\t\tconst h = parseInt(match[4] || 0) - tzHour;\r\n\t\t\tconst m = parseInt(match[5] || 0) - tzMin;\r\n\t\t\tconst s = parseInt(match[6] || 0);\r\n\t\t\tconst ms = Math.round(parseFloat('0.' + (match[7] || 0)) * 1000);\r\n\t\t\ttimeSetter.call(date, h, m, s, ms);\r\n\t\t\treturn date;\r\n\t\t}\r\n\t\treturn string;\r\n\t}\r\n\r\n\tstatic timezoneToOffset(timezone, fallback) {\r\n\t\t// Support: IE 9-11 only, Edge 13-15+\r\n\t\t// IE/Edge do not \"understand\" colon (`:`) in timezone\r\n\t\ttimezone = timezone.replace(ALL_COLONS, '');\r\n\t\tvar requestedTimezoneOffset = Date.parse('Jan 01, 1970 00:00:00 ' + timezone) / 60000;\r\n\t\treturn Number.isNaN(requestedTimezoneOffset) ? fallback : requestedTimezoneOffset;\r\n\t}\r\n\r\n\tstatic addDateMinutes(date, minutes) {\r\n\t\tdate = new Date(date.getTime());\r\n\t\tdate.setMinutes(date.getMinutes() + minutes);\r\n\t\treturn date;\r\n\t}\r\n\r\n\tstatic convertTimezoneToLocal(date, timezone, reverse) {\r\n\t\treverse = reverse ? -1 : 1;\r\n\t\tvar dateTimezoneOffset = date.getTimezoneOffset();\r\n\t\tvar timezoneOffset = DatePipe.timezoneToOffset(timezone, dateTimezoneOffset);\r\n\t\treturn DatePipe.addDateMinutes(date, reverse * (timezoneOffset - dateTimezoneOffset));\r\n\t}\r\n\r\n\tstatic transform_(value, locale = 'it-IT-u-ca-gregory', options = {\r\n\t\tdateStyle: 'short',\r\n\t\ttimeStyle: 'short',\r\n\t}) {\r\n\t\tconst localeDateString = new Date(value).toLocaleDateString(locale, options);\r\n\t\treturn localeDateString;\r\n\t}\r\n\r\n\tstatic transform(date, format, timezone) {\r\n\t\tlet text = '',\r\n\t\t\tmatch;\r\n\t\tlet parts = [];\r\n\t\tformat = format || 'mediumDate';\r\n\t\tformat = DatePipe.DATETIME_FORMATS[format] || format;\r\n\t\tif (typeof date === 'string') {\r\n\t\t\tdate = NUMBER_STRING.test(date) ? parseInt(date) : DatePipe.jsonStringToDate(date);\r\n\t\t}\r\n\t\tif (DatePipe.isNumber(date)) {\r\n\t\t\tdate = new Date(date);\r\n\t\t}\r\n\t\tif (!(date instanceof Date) || !isFinite(date.getTime())) {\r\n\t\t\treturn date;\r\n\t\t}\r\n\t\twhile (format) {\r\n\t\t\tmatch = DATE_FORMATS_SPLIT.exec(format);\r\n\t\t\tif (match) {\r\n\t\t\t\t// parts = concat(parts, match, 1);\r\n\t\t\t\tparts = parts.concat(match.slice(1));\r\n\t\t\t\tformat = parts.pop();\r\n\t\t\t} else {\r\n\t\t\t\tparts.push(format);\r\n\t\t\t\tformat = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet dateTimezoneOffset = date.getTimezoneOffset();\r\n\t\tif (timezone) {\r\n\t\t\tdateTimezoneOffset = DatePipe.timezoneToOffset(timezone, dateTimezoneOffset);\r\n\t\t\tdate = DatePipe.convertTimezoneToLocal(date, timezone, true);\r\n\t\t}\r\n\t\tparts.forEach(function(value) {\r\n\t\t\tconst formatter = DatePipe.DATE_FORMATS[value];\r\n\t\t\ttext += formatter ? formatter(date, DatePipe.DATETIME_FORMATS, dateTimezoneOffset) : value === '\\'\\'' ? '\\'' : value.replace(/(^'|'$)/g, '').replace(/''/g, '\\'');\r\n\t\t});\r\n\t\treturn text;\r\n\t}\r\n\r\n}\r\n\r\nDatePipe.DATE_FORMATS = {\r\n\tyyyy: DatePipe.dateGetter('FullYear', 4, 0, false, true),\r\n\tyy: DatePipe.dateGetter('FullYear', 2, 0, true, true),\r\n\ty: DatePipe.dateGetter('FullYear', 1, 0, false, true),\r\n\tMMMM: DatePipe.dateStrGetter('Month'),\r\n\tMMM: DatePipe.dateStrGetter('Month', true),\r\n\tMM: DatePipe.dateGetter('Month', 2, 1),\r\n\tM: DatePipe.dateGetter('Month', 1, 1),\r\n\tLLLL: DatePipe.dateStrGetter('Month', false, true),\r\n\tdd: DatePipe.dateGetter('Date', 2),\r\n\td: DatePipe.dateGetter('Date', 1),\r\n\tHH: DatePipe.dateGetter('Hours', 2),\r\n\tH: DatePipe.dateGetter('Hours', 1),\r\n\thh: DatePipe.dateGetter('Hours', 2, -12),\r\n\th: DatePipe.dateGetter('Hours', 1, -12),\r\n\tmm: DatePipe.dateGetter('Minutes', 2),\r\n\tm: DatePipe.dateGetter('Minutes', 1),\r\n\tss: DatePipe.dateGetter('Seconds', 2),\r\n\ts: DatePipe.dateGetter('Seconds', 1),\r\n\t// while ISO 8601 requires fractions to be prefixed with `.` or `,`\r\n\t// we can be just safely rely on using `sss` since we currently don't support single or two digit fractions\r\n\tsss: DatePipe.dateGetter('Milliseconds', 3),\r\n\tEEEE: DatePipe.dateStrGetter('Day'),\r\n\tEEE: DatePipe.dateStrGetter('Day', true),\r\n\ta: DatePipe.ampmGetter,\r\n\tZ: DatePipe.timeZoneGetter,\r\n\tww: DatePipe.weekGetter(2),\r\n\tw: DatePipe.weekGetter(1),\r\n\tG: DatePipe.eraGetter,\r\n\tGG: DatePipe.eraGetter,\r\n\tGGG: DatePipe.eraGetter,\r\n\tGGGG: DatePipe.longEraGetter\r\n};\r\n\r\nDatePipe.DATETIME_FORMATS = DATETIME_FORMATS_IT_IT;\r\n\r\nDatePipe.meta = {\r\n\tname: 'date',\r\n};\r\n\r\n/**\r\n   *   Formats `date` to a string based on the requested `format`.\r\n   *\r\n   *   `format` string can be composed of the following elements:\r\n   *\r\n   *   * `'yyyy'`: 4 digit representation of year (e.g. AD 1 => 0001, AD 2010 => 2010)\r\n   *   * `'yy'`: 2 digit representation of year, padded (00-99). (e.g. AD 2001 => 01, AD 2010 => 10)\r\n   *   * `'y'`: 1 digit representation of year, e.g. (AD 1 => 1, AD 199 => 199)\r\n   *   * `'MMMM'`: Month in year (January-December)\r\n   *   * `'MMM'`: Month in year (Jan-Dec)\r\n   *   * `'MM'`: Month in year, padded (01-12)\r\n   *   * `'M'`: Month in year (1-12)\r\n   *   * `'LLLL'`: Stand-alone month in year (January-December)\r\n   *   * `'dd'`: Day in month, padded (01-31)\r\n   *   * `'d'`: Day in month (1-31)\r\n   *   * `'EEEE'`: Day in Week,(Sunday-Saturday)\r\n   *   * `'EEE'`: Day in Week, (Sun-Sat)\r\n   *   * `'HH'`: Hour in day, padded (00-23)\r\n   *   * `'H'`: Hour in day (0-23)\r\n   *   * `'hh'`: Hour in AM/PM, padded (01-12)\r\n   *   * `'h'`: Hour in AM/PM, (1-12)\r\n   *   * `'mm'`: Minute in hour, padded (00-59)\r\n   *   * `'m'`: Minute in hour (0-59)\r\n   *   * `'ss'`: Second in minute, padded (00-59)\r\n   *   * `'s'`: Second in minute (0-59)\r\n   *   * `'sss'`: Millisecond in second, padded (000-999)\r\n   *   * `'a'`: AM/PM marker\r\n   *   * `'Z'`: 4 digit (+sign) representation of the timezone offset (-1200-+1200)\r\n   *   * `'ww'`: Week of year, padded (00-53). Week 01 is the week with the first Thursday of the year\r\n   *   * `'w'`: Week of year (0-53). Week 1 is the week with the first Thursday of the year\r\n   *   * `'G'`, `'GG'`, `'GGG'`: The abbreviated form of the era string (e.g. 'AD')\r\n   *   * `'GGGG'`: The long form of the era string (e.g. 'Anno Domini')\r\n   *\r\n   *   `format` string can also be one of the following predefined\r\n   *   {@link guide/i18n localizable formats}:\r\n   *\r\n   *   * `'medium'`: equivalent to `'MMM d, y h:mm:ss a'` for en_US locale\r\n   *     (e.g. Sep 3, 2010 12:05:08 PM)\r\n   *   * `'short'`: equivalent to `'M/d/yy h:mm a'` for en_US  locale (e.g. 9/3/10 12:05 PM)\r\n   *   * `'fullDate'`: equivalent to `'EEEE, MMMM d, y'` for en_US  locale\r\n   *     (e.g. Friday, September 3, 2010)\r\n   *   * `'longDate'`: equivalent to `'MMMM d, y'` for en_US  locale (e.g. September 3, 2010)\r\n   *   * `'mediumDate'`: equivalent to `'MMM d, y'` for en_US  locale (e.g. Sep 3, 2010)\r\n   *   * `'shortDate'`: equivalent to `'M/d/yy'` for en_US locale (e.g. 9/3/10)\r\n   *   * `'mediumTime'`: equivalent to `'h:mm:ss a'` for en_US locale (e.g. 12:05:08 PM)\r\n   *   * `'shortTime'`: equivalent to `'h:mm a'` for en_US locale (e.g. 12:05 PM)\r\n   *\r\n   *   `format` string can contain literal values. These need to be escaped by surrounding with single quotes (e.g.\r\n   *   `\"h 'in the morning'\"`). In order to output a single quote, escape it - i.e., two single quotes in a sequence\r\n   *   (e.g. `\"h 'o''clock'\"`).\r\n   *\r\n   *   Any other characters in the `format` string will be output as-is.\r\n   *\r\n   * @param {(Date|number|string)} date Date to format either as Date object, milliseconds (string or\r\n   *    number) or various ISO 8601 datetime string formats (e.g. yyyy-MM-ddTHH:mm:ss.sssZ and its\r\n   *    shorter versions like yyyy-MM-ddTHH:mmZ, yyyy-MM-dd or yyyyMMddTHHmmssZ). If no timezone is\r\n   *    specified in the string input, the time is considered to be in the local timezone.\r\n   * @param {string=} format Formatting rules (see Description). If not specified,\r\n   *    `mediumDate` is used.\r\n   * @param {string=} timezone Timezone to be used for formatting. It understands UTC/GMT and the\r\n   *    continental US time zone abbreviations, but for general use, use a time zone offset, for\r\n   *    example, `'+0430'` (4 hours, 30 minutes east of the Greenwich meridian)\r\n   *    If not specified, the timezone of the browser will be used.\r\n   * @returns {string} Formatted string or the input if input is not recognized as date/millis.\r\n   *\r\n   * @example\r\n\t <example name=\"filter-date\">\r\n\t   <file name=\"index.html\">\r\n\t\t <span ng-non-bindable>{{1288323623006 | date:'medium'}}</span>:\r\n\t\t\t <span>{{1288323623006 | date:'medium'}}</span><br>\r\n\t\t <span ng-non-bindable>{{1288323623006 | date:'yyyy-MM-dd HH:mm:ss Z'}}</span>:\r\n\t\t\t<span>{{1288323623006 | date:'yyyy-MM-dd HH:mm:ss Z'}}</span><br>\r\n\t\t <span ng-non-bindable>{{1288323623006 | date:'MM/dd/yyyy @ h:mma'}}</span>:\r\n\t\t\t<span>{{'1288323623006' | date:'MM/dd/yyyy @ h:mma'}}</span><br>\r\n\t\t <span ng-non-bindable>{{1288323623006 | date:\"MM/dd/yyyy 'at' h:mma\"}}</span>:\r\n\t\t\t<span>{{'1288323623006' | date:\"MM/dd/yyyy 'at' h:mma\"}}</span><br>\r\n\t   </file>\r\n\t   <file name=\"protractor.js\" type=\"protractor\">\r\n\t\t it('should format date', function() {\r\n\t\t   expect(element(by.binding(\"1288323623006 | date:'medium'\")).getText()).\r\n\t\t\t  toMatch(/Oct 2\\d, 2010 \\d{1,2}:\\d{2}:\\d{2} (AM|PM)/);\r\n\t\t   expect(element(by.binding(\"1288323623006 | date:'yyyy-MM-dd HH:mm:ss Z'\")).getText()).\r\n\t\t\t  toMatch(/2010-10-2\\d \\d{2}:\\d{2}:\\d{2} (-|\\+)?\\d{4}/);\r\n\t\t   expect(element(by.binding(\"'1288323623006' | date:'MM/dd/yyyy @ h:mma'\")).getText()).\r\n\t\t\t  toMatch(/10\\/2\\d\\/2010 @ \\d{1,2}:\\d{2}(AM|PM)/);\r\n\t\t   expect(element(by.binding(\"'1288323623006' | date:\\\"MM/dd/yyyy 'at' h:mma\\\"\")).getText()).\r\n\t\t\t  toMatch(/10\\/2\\d\\/2010 at \\d{1,2}:\\d{2}(AM|PM)/);\r\n\t\t });\r\n\t   </file>\r\n\t </example>\r\n   */\r\n","import { Directive, getContext } from \"rxcomp\";\r\nimport { BehaviorSubject } from \"rxjs\";\r\nimport { takeUntil } from \"rxjs/operators\";\r\n\r\nlet DROPDOWN_ID = 1000000;\r\n\r\nexport default class DropdownDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this.dropdown || this.id_ || (this.id_ = DropdownDirective.nextId());\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst trigger = node.getAttribute('dropdown-trigger');\r\n\t\tthis.trigger = trigger ? node.querySelector(trigger) : node;\r\n\t\tthis.opened = null;\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t\tthis.onDocumentClick = this.onDocumentClick.bind(this);\r\n\t\tthis.openDropdown = this.openDropdown.bind(this);\r\n\t\tthis.closeDropdown = this.closeDropdown.bind(this);\r\n\t\tthis.addListeners();\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.openDropdown();\r\n\t\t} else {\r\n\t\t\tconst dropdownItemNode = node.querySelector('[dropdown-item]');\r\n\t\t\t// console.log('dropdownItemNode', dropdownItemNode);\r\n\t\t\tif (!dropdownItemNode) { // if (this.trigger !== node) {\r\n\t\t\t\tthis.closeDropdown();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDocumentClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst clickedInside = node === event.target || node.contains(event.target);\r\n\t\tif (!clickedInside) {\r\n\t\t\tthis.closeDropdown();\r\n\t\t}\r\n\t}\r\n\r\n\topenDropdown() {\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.opened = true;\r\n\t\t\tthis.addDocumentListeners();\r\n\t\t\tDropdownDirective.dropdown$.next(this.id);\r\n\t\t\tthis.dropped.next(this.id);\r\n\t\t}\r\n\t}\r\n\r\n\tcloseDropdown() {\r\n\t\tif (this.opened !== null) {\r\n\t\t\tthis.removeDocumentListeners();\r\n\t\t\tthis.opened = null;\r\n\t\t\tif (DropdownDirective.dropdown$.getValue() === this.id) {\r\n\t\t\t\tDropdownDirective.dropdown$.next(null);\r\n\t\t\t\tthis.dropped.next(null);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tthis.trigger.addEventListener('click', this.onClick);\r\n\t}\r\n\r\n\taddDocumentListeners() {\r\n\t\tdocument.addEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tthis.trigger.removeEventListener('click', this.onClick);\r\n\t}\r\n\r\n\tremoveDocumentListeners() {\r\n\t\tdocument.removeEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t\tthis.removeDocumentListeners();\r\n\t}\r\n\r\n\tstatic nextId() {\r\n\t\treturn DROPDOWN_ID++;\r\n\t}\r\n\r\n}\r\n\r\nDropdownDirective.meta = {\r\n\tselector: '[dropdown]',\r\n\tinputs: ['dropdown', 'dropdown-trigger'],\r\n\toutputs: ['dropped']\r\n};\r\n\r\nDropdownDirective.dropdown$ = new BehaviorSubject(null);\r\n","import { Directive, getContext } from \"rxcomp\";\r\nimport { takeUntil } from \"rxjs/operators\";\r\nimport DropdownDirective from \"./dropdown.directive\";\r\n\r\nexport default class DropdownItemDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this['dropdown-item'];\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('dropdown-item');\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownItemDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nDropdownItemDirective.meta = {\r\n\tselector: '[dropdown-item], [[dropdown-item]]',\r\n\tinputs: ['dropdown-item']\r\n};\r\n","import { Component } from 'rxcomp';\nimport { interval, Subject } from 'rxjs';\nimport { takeUntil, tap } from 'rxjs/operators';\n\nexport const EventDateMode = {\n\tLive: 'live',\n\tCountdown: 'countdown',\n\tWatchRelative: 'watchRelative',\n\tRelative: 'relative',\n\tDate: 'date',\n};\n\nconst SECOND = 1000;\nconst MINUTE = SECOND * 60;\nconst HOUR = MINUTE * 60;\n\nconst to10 = (value) => {\n\treturn (value < 10) ? '0' + value : value;\n};\n\nexport default class EventDateComponent extends Component {\n\n\tstatic hoursDiff(date) {\n\t\tconst now = new Date();\n\t\tconst diff = date - now;\n\t\tconst hoursDiff = Math.abs(Math.floor(diff / 1000 / 60 / 60));\n\t\treturn hoursDiff;\n\t}\n\n\tstatic getMode(item) {\n\t\tif (item.live) {\n\t\t\treturn EventDateMode.Live;\n\t\t} else if (item.incoming) {\n\t\t\treturn EventDateMode.Countdown;\n\t\t}\n\t\tconst hoursDiff = EventDateComponent.hoursDiff(item.startDate);\n\t\tif (item.past && hoursDiff < 24) {\n\t\t\treturn EventDateMode.WatchRelative;\n\t\t} else if (hoursDiff < 24 * 3) {\n\t\t\treturn EventDateMode.Relative;\n\t\t} else {\n\t\t\treturn EventDateMode.Date;\n\t\t}\n\t}\n\n\tonInit() {\n\t\tthis.mode = EventDateComponent.getMode(this.eventDate);\n\t\t/*\n\t\tif (this.mode === EventDateMode.Countdown || this.mode === EventDateMode.WatchRelative) {\n\t\t\tthis.countdown = '';\n\t\t\tthis.live$ = new Subject();\n\t\t\tthis.change$().pipe(\n\t\t\t\ttakeUntil(this.unsubscribe$)\n\t\t\t).subscribe(() => {\n\t\t\t\tif (this.mode === EventDateMode.Countdown || this.mode === EventDateMode.WatchRelative) {\n\t\t\t\t\tthis.pushChanges();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t*/\n\t\tthis.countdown = '';\n\t\tthis.live$ = new Subject();\n\t\tthis.change$().pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe(() => {\n\t\t\tif (this.mode === EventDateMode.Countdown || this.mode === EventDateMode.WatchRelative) {\n\t\t\t\tthis.pushChanges();\n\t\t\t}\n\t\t});\n\t}\n\n\t/*\n\tonChange() {\n\t\tthis.mode = EventDateComponent.getMode(this.eventDate);\n\t}\n\t*/\n\n\tchange$() {\n\t\treturn interval(1000).pipe(\n\t\t\ttakeUntil(this.live$),\n\t\t\ttap(() => {\n\t\t\t\tif (this.mode === EventDateMode.Countdown) {\n\t\t\t\t\tlet diff = this.eventDate.startDate - new Date();\n\t\t\t\t\tconst hh = Math.floor(diff / HOUR);\n\t\t\t\t\tdiff -= hh * HOUR;\n\t\t\t\t\tconst mm = Math.floor(diff / MINUTE);\n\t\t\t\t\tdiff -= mm * MINUTE;\n\t\t\t\t\tconst ss = Math.floor(diff / SECOND);\n\t\t\t\t\tdiff -= ss * SECOND;\n\t\t\t\t\tthis.countdown = `-${to10(hh)}:${to10(mm)}:${to10(ss)}`;\n\t\t\t\t\tif (diff < 0) {\n\t\t\t\t\t\tthis.eventDate.info.started = true;\n\t\t\t\t\t\t// this.live$.next();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n\n}\n\nEventDateComponent.meta = {\n\tselector: '[eventDate]',\n\tinputs: ['eventDate']\n};\n","import { Component } from 'rxcomp';\nimport { first } from 'rxjs/operators';\nimport EventService from './event.service';\n\nexport default class EventComponent extends Component {\n\n\ttoggleSubscribe() {\n\t\tlet flag = this.event.info.subscribed;\n\t\tEventService[flag ? 'unsubscribe$' : 'subscribe$'](this.event.id).pipe(\n\t\t\tfirst()\n\t\t).subscribe(() => {\n\t\t\tflag = !flag;\n\t\t\tthis.event.info.subscribed = flag;\n\t\t\tif (flag) {\n\t\t\t\tthis.event.info.subscribers++;\n\t\t\t} else {\n\t\t\t\tthis.event.info.subscribers--;\n\t\t\t}\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\ttoggleLike() {\n\t\tlet flag = this.event.info.liked;\n\t\tEventService[flag ? 'unlike$' : 'like$'](this.event.id).pipe(\n\t\t\tfirst()\n\t\t).subscribe(() => {\n\t\t\tflag = !flag;\n\t\t\tthis.event.info.liked = flag;\n\t\t\tif (flag) {\n\t\t\t\tthis.event.info.likes++;\n\t\t\t} else {\n\t\t\t\tthis.event.info.likes--;\n\t\t\t}\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n}\n\nEventComponent.meta = {\n\tselector: '[event]',\n\tinputs: ['event']\n};\n","import { Component, getContext } from 'rxcomp';\r\n\r\nexport default class ControlComponent extends Component {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst control = this.control;\r\n\t\tconst flags = control.flags;\r\n\t\tObject.keys(flags).forEach((key) => {\r\n\t\t\tflags[key] ? node.classList.add(key) : node.classList.remove(key);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nControlComponent.meta = {\r\n\tselector: '[control]',\r\n\tinputs: ['control']\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ErrorsComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.labels = window.labels || {};\r\n\t}\r\n\r\n\tgetLabel(key, value) {\r\n\t\tconst label = this.labels[`error_${key}`];\r\n\t\treturn label;\r\n\t}\r\n\r\n}\r\n\r\nErrorsComponent.meta = {\r\n\tselector: 'errors-component',\r\n\tinputs: ['control'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"inner\" [style]=\"{ display: control.invalid && control.touched ? 'block' : 'none' }\">\r\n\t\t<div class=\"error\" *for=\"let [key, value] of control.errors\">\r\n\t\t\t<span [innerHTML]=\"getLabel(key, value)\"></span>\r\n\t\t\t<!-- <span class=\"key\" [innerHTML]=\"key\"></span> <span class=\"value\" [innerHTML]=\"value | json\"></span> -->\r\n\t\t</div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Pipe } from \"rxcomp\";\r\n\r\n/*\r\n['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n['\"', '&', ''', '<', '>', ' ', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '&', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''];\r\n*/\r\n\r\nexport default class HtmlPipe extends Pipe {\r\n\r\n\tstatic transform(value) {\r\n\t\tif (value) {\r\n\t\t\tvalue = value.replace(/&#(\\d+);/g, function(m, n) {\r\n\t\t\t\treturn String.fromCharCode(parseInt(n));\r\n\t\t\t});\r\n\t\t\tconst escapes = ['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n\t\t\tconst unescapes = ['\"', '&', '\\'', '<', '>', ' ', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '&', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''];\r\n\t\t\tconst rx = new RegExp(`(&${escapes.join(';)|(&')};)`, 'g');\r\n\t\t\tvalue = value.replace(rx, function() {\r\n\t\t\t\tfor (let i = 1; i < arguments.length; i++) {\r\n\t\t\t\t\tif (arguments[i]) {\r\n\t\t\t\t\t\t// console.log(arguments[i], unescapes[i - 1]);\r\n\t\t\t\t\t\treturn unescapes[i - 1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// console.log(value);\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nHtmlPipe.meta = {\r\n\tname: 'html',\r\n};\r\n","import { combineLatest } from 'rxjs';\nimport { first } from 'rxjs/operators';\nimport ChannelService from '../channel/channel.service';\nimport EventService from '../event/event.service';\nimport PageComponent from '../page/page.component';\n\nexport default class IndexPageComponent extends PageComponent {\n\n\tonInit() {\n\t\tthis.topEvents = this.topChannels = this.upcomingEvents = [];\n\t\tthis.load$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe(data => {\n\t\t\tthis.topEvents = data[0];\n\t\t\tthis.topChannels = data[1];\n\t\t\tthis.upcomingEvents = data[2];\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tload$() {\n\t\treturn combineLatest(\n\t\t\tEventService.top$(),\n\t\t\tChannelService.top$(),\n\t\t\tEventService.upcoming$(),\n\t\t);\n\t}\n\n}\n\nIndexPageComponent.meta = {\n\tselector: '[index-page]',\n};\n","import { fromEvent, of } from 'rxjs';\r\nimport { filter, finalize, first, map } from 'rxjs/operators';\r\nimport { STATIC } from '../environment/environment';\r\n\r\nconst PATH = STATIC ? './' : '/Client/docs/';\r\n\r\nlet UID = 0;\r\n\r\nexport default class ImageService {\r\n\r\n\tstatic worker() {\r\n\t\tif (!this.worker_) {\r\n\t\t\tthis.worker_ = new Worker(`${PATH}js/workers/image.service.worker.js`);\r\n\t\t}\r\n\t\treturn this.worker_;\r\n\t}\r\n\r\n\tstatic load$(src) {\r\n\t\t// if (!('Worker' in window) || this.isBlob(src) || this.isCors(src)) {\r\n\t\tif (!('Worker' in window) || this.isBlob(src)) {\r\n\t\t\treturn of(src);\r\n\t\t}\r\n\t\tconst id = ++UID;\r\n\t\tconst worker = this.worker();\r\n\t\tworker.postMessage({ src, id });\r\n\t\treturn fromEvent(worker, 'message').pipe(\r\n\t\t\tfilter(event => event.data.src === src),\r\n\t\t\tmap(event => {\r\n\t\t\t\tconst url = URL.createObjectURL(event.data.blob);\r\n\t\t\t\treturn url;\r\n\t\t\t}),\r\n\t\t\tfirst(),\r\n\t\t\tfinalize(url => {\r\n\t\t\t\tworker.postMessage({ id });\r\n\t\t\t\tif (url) {\r\n\t\t\t\t\tURL.revokeObjectURL(url);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic isCors(src) {\r\n\t\treturn src.indexOf('//') !== -1 && src.indexOf(window.location.host) === -1;\r\n\t}\r\n\r\n\tstatic isBlob(src) {\r\n\t\treturn src.indexOf('blob:') === 0;\r\n\t}\r\n\r\n}\r\n","import { BehaviorSubject, of , Subject } from 'rxjs';\r\nimport { filter, finalize, first, map } from 'rxjs/operators';\r\n\r\nexport default class IntersectionService {\r\n\r\n\tstatic observer() {\r\n\t\tif (!this.observer_) {\r\n\t\t\tthis.readySubject_ = new BehaviorSubject(false);\r\n\t\t\tthis.observerSubject_ = new Subject();\r\n\t\t\tthis.observer_ = new IntersectionObserver(entries => {\r\n\t\t\t\tthis.observerSubject_.next(entries);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this.observer_;\r\n\t}\r\n\r\n\tstatic intersection$(node) {\r\n\t\tif ('IntersectionObserver' in window) {\r\n\t\t\tconst observer = this.observer();\r\n\t\t\tobserver.observe(node);\r\n\t\t\treturn this.observerSubject_.pipe(\r\n\t\t\t\t// tap(entries => console.log(entries.length)),\r\n\t\t\t\tmap(entries => entries.find(entry => entry.target === node)),\r\n\t\t\t\t// tap(entry => console.log('IntersectionService.intersection$', entry)),\r\n\t\t\t\tfilter(entry => entry !== undefined && entry.isIntersecting), // entry.intersectionRatio > 0\r\n\t\t\t\tfirst(),\r\n\t\t\t\tfinalize(() => observer.unobserve(node)),\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn of({ target: node });\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\tfunction observer() {\r\n\t\t\tif ('IntersectionObserver' in window) {\r\n\t\t\t\treturn new IntersectionObserver(entries => {\r\n\t\t\t\t\tentries.forEach(function(entry) {\r\n\t\t\t\t\t\tif (entry.isIntersecting) {\r\n\t\t\t\t\t\t\tentry.target.classList.add('appear');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\treturn { observe: function(node) { node.classList.add('appear')}, unobserve: function() {} };\r\n\t\t\t}\r\n\t\t}\r\n\t\tobserver.observe(node);\r\n\t\tobserver.unobserve(node);\r\n\t\t*/\r\n\r\n\t}\r\n\r\n}\r\n","export default class LazyCache {\r\n\tstatic get cache() {\r\n\t\tif (!this.cache_) {\r\n\t\t\tthis.cache_ = {};\r\n\t\t}\r\n\t\treturn this.cache_;\r\n\t}\r\n\r\n\tstatic get(src) {\r\n\t\treturn this.cache[src];\r\n\t}\r\n\r\n\tstatic set(src, blob) {\r\n\t\tthis.cache[src] = blob;\r\n\t\tconst keys = Object.keys(this.cache);\r\n\t\tif (keys.length > 100) {\r\n\t\t\tthis.remove(keys[0]);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic remove(src) {\r\n\t\tdelete this.cache[src];\r\n\t}\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { of , Subject } from 'rxjs';\r\nimport { distinctUntilChanged, first, switchMap, takeUntil } from 'rxjs/operators';\r\nimport ImageService from '../image/image.service';\r\nimport IntersectionService from '../intersection/intersection.service';\r\nimport LazyCache from './lazy.cache';\r\n\r\nexport default class LazyDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('lazy');\r\n\t\tthis.input$ = new Subject().pipe(\r\n\t\t\tdistinctUntilChanged(),\r\n\t\t\tswitchMap(input => {\r\n\t\t\t\tconst src = LazyCache.get(input);\r\n\t\t\t\tif (src) {\r\n\t\t\t\t\treturn of(src);\r\n\t\t\t\t}\r\n\t\t\t\tnode.classList.remove('lazyed');\r\n\t\t\t\treturn this.lazy$(input);\r\n\t\t\t}),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t);\r\n\t\tthis.input$.subscribe(src => {\r\n\t\t\tLazyCache.set(this.lazy, src);\r\n\t\t\tnode.setAttribute('src', src);\r\n\t\t\tnode.classList.add('lazyed');\r\n\t\t});\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tthis.input$.next(this.lazy);\r\n\t}\r\n\r\n\tlazy$(input) {\r\n\t\tconst { node } = getContext(this);\r\n\t\treturn IntersectionService.intersection$(node).pipe(\r\n\t\t\tfirst(),\r\n\t\t\tswitchMap(() => ImageService.load$(input)),\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nLazyDirective.meta = {\r\n\tselector: '[lazy],[[lazy]]',\r\n\tinputs: ['lazy']\r\n};\r\n","import { from, Subject } from 'rxjs';\r\nimport { map, switchMap, tap } from 'rxjs/operators';\r\n\r\nexport class ModalEvent {\r\n\r\n\tconstructor(data) {\r\n\t\tthis.data = data;\r\n\t}\r\n\r\n}\r\n\r\nexport class ModalResolveEvent extends ModalEvent {}\r\nexport class ModalRejectEvent extends ModalEvent {}\r\n\r\nexport default class ModalService {\r\n\r\n\tstatic open$(modal) {\r\n\t\treturn this.getTemplate$(modal.src).pipe(\r\n\t\t\tmap(template => {\r\n\t\t\t\treturn { node: this.getNode(template), data: modal.data, modal: modal };\r\n\t\t\t}),\r\n\t\t\ttap(node => this.modal$.next(node)),\r\n\t\t\tswitchMap(node => this.events$),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic load$(modal) {\r\n\r\n\t}\r\n\r\n\tstatic getTemplate$(url) {\r\n\t\treturn from(fetch(url).then(response => {\r\n\t\t\treturn response.text();\r\n\t\t}));\r\n\t}\r\n\r\n\tstatic getNode(template) {\r\n\t\tconst div = document.createElement(\"div\");\r\n\t\tdiv.innerHTML = template;\r\n\t\tconst node = div.firstElementChild;\r\n\t\treturn node;\r\n\t}\r\n\r\n\tstatic reject(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalRejectEvent(data));\r\n\t}\r\n\r\n\tstatic resolve(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalResolveEvent(data));\r\n\t}\r\n\r\n}\r\n\r\nModalService.modal$ = new Subject();\r\nModalService.events$ = new Subject();\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport ModalService from './modal.service';\r\n\r\nexport default class ModalOutletComponent extends Component {\r\n\r\n\tget modal() {\r\n\t\treturn this.modal_;\r\n\t}\r\n\r\n\tset modal(modal) {\r\n\t\t// console.log('ModalOutletComponent set modal', modal, this);\r\n\t\tconst { module } = getContext(this);\r\n\t\tif (this.modal_ && this.modal_.node) {\r\n\t\t\tmodule.remove(this.modal_.node, this);\r\n\t\t\tthis.modalNode.removeChild(this.modal_.node);\r\n\t\t}\r\n\t\tif (modal && modal.node) {\r\n\t\t\tthis.modal_ = modal;\r\n\t\t\tthis.modalNode.appendChild(modal.node);\r\n\t\t\tconst instances = module.compile(modal.node);\r\n\t\t}\r\n\t\tthis.modal_ = modal;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.modalNode = node.querySelector('.modal-outlet__modal');\r\n\t\tModalService.modal$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(modal => {\r\n\t\t\tthis.modal = modal;\r\n\t\t});\r\n\t}\r\n\r\n\tonRegister(event) {\r\n\t\t// console.log('ModalComponent.onRegister');\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('ModalComponent.onLogin');\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\treject(event) {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nModalOutletComponent.meta = {\r\n\tselector: '[modal-outlet]',\r\n\ttemplate: /* html */ `\r\n\t<div class=\"modal-outlet__container\" [class]=\"{ active: modal }\">\r\n\t\t<div class=\"modal-outlet__background\" (click)=\"reject($event)\"></div>\r\n\t\t<div class=\"modal-outlet__modal\"></div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport ModalOutletComponent from '../modal/modal-outlet.component';\r\nimport ModalService from './modal.service';\r\n\r\nexport default class ModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tthis.data = parentInstance.modal.data;\r\n\t\t}\r\n\t}\r\n\r\n\tclose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nModalComponent.meta = {\r\n\tselector: '[modal]'\r\n};\r\n","export default class LocalStorageService {\r\n\r\n\tstatic delete(name) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\twindow.localStorage.removeItem(name);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic exist(name) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\treturn window.localStorage[name] !== undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic get(name) {\r\n\t\tlet value = null;\r\n\t\tif (this.isLocalStorageSupported() && window.localStorage[name] !== undefined) {\r\n\t\t\ttry {\r\n\t\t\t\tvalue = JSON.parse(window.localStorage[name]);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('LocalStorageService.get.error parsing', name, e);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tstatic set(name, value) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\ttry {\r\n\t\t\t\tconst cache = [];\r\n\t\t\t\tconst json = JSON.stringify(value, function(key, value) {\r\n\t\t\t\t\tif (typeof value === 'object' && value !== null) {\r\n\t\t\t\t\t\tif (cache.indexOf(value) !== -1) {\r\n\t\t\t\t\t\t\t// Circular reference found, discard key\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcache.push(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t});\r\n\t\t\t\twindow.localStorage.setItem(name, json);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('LocalStorageService.set.error serializing', name, value, e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic isLocalStorageSupported() {\r\n\t\tif (this.supported) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tlet supported = false;\r\n\t\ttry {\r\n\t\t\tsupported = 'localStorage' in window && window.localStorage !== null;\r\n\t\t\tif (supported) {\r\n\t\t\t\twindow.localStorage.setItem('test', '1');\r\n\t\t\t\twindow.localStorage.removeItem('test');\r\n\t\t\t} else {\r\n\t\t\t\tsupported = false;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tsupported = false;\r\n\t\t}\r\n\t\tthis.supported = supported;\r\n\t\treturn supported;\r\n\t}\r\n\r\n}\r\n","import { BehaviorSubject } from 'rxjs';\r\nimport { map, switchMap } from 'rxjs/operators';\r\nimport { STATIC } from '../environment/environment';\r\nimport HttpService from '../http/http.service';\r\nimport LocalStorageService from '../local-storage/local-storage.service';\r\n\r\nexport default class UserService {\r\n\r\n\tstatic setUser(user) {\r\n\t\tthis.user$.next(user);\r\n\t}\r\n\r\n\tstatic me$() {\r\n\t\treturn HttpService.get$('/api/users/me').pipe(\r\n\t\t\tmap((user) => this.mapStatic__(user, 'me')),\r\n\t\t\tswitchMap(user => {\r\n\t\t\t\tthis.setUser(user);\r\n\t\t\t\treturn this.user$;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic register$(payload) {\r\n\t\treturn HttpService.post$('/api/users/register', payload).pipe(\r\n\t\t\tmap((user) => this.mapStatic__(user, 'register')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic update(payload) {\r\n\t\treturn HttpService.post$('/api/users/updateprofile', payload).pipe(\r\n\t\t\tmap((user) => this.mapStatic__(user, 'register')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic login$(payload) {\r\n\t\treturn HttpService.post$('/api/users/login', payload).pipe(\r\n\t\t\tmap((user) => this.mapStatic__(user, 'login')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic logout$() {\r\n\t\treturn HttpService.post$('/api/users/logout').pipe(\r\n\t\t\tmap((user) => this.mapStatic__(user, 'logout')),\r\n\t\t);\r\n\t}\r\n\tstatic retrieve$(payload) {\r\n\t\treturn HttpService.post$('/api/users/retrievepassword', payload).pipe(\r\n\t\t\tmap((user) => this.mapStatic__(user, 'retrieve')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic mapStatic__(user, action = 'me') {\r\n\t\tif (!STATIC) {\r\n\t\t\treturn user;\r\n\t\t};\r\n\t\tswitch (action) {\r\n\t\t\tcase 'me':\r\n\t\t\t\tif (!LocalStorageService.exist('user')) {\r\n\t\t\t\t\tuser = null;\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'register':\r\n\t\t\t\tLocalStorageService.set('user', user);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'login':\r\n\t\t\t\tLocalStorageService.set('user', user);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'logout':\r\n\t\t\t\tLocalStorageService.delete('user');\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn user;\r\n\t}\r\n\r\n}\r\n\r\nUserService.user$ = new BehaviorSubject(null);\r\n","import { Component } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { STATIC } from '../environment/environment';\r\nimport ModalService, { ModalResolveEvent } from '../modal/modal.service';\r\nimport UserService from '../user/user.service';\r\n\r\nconst src = STATIC ? '/tiemme-com/club-modal.html' : '/Viewdoc.cshtml?co_id=23649';\r\n\r\nexport default class RegisterOrLoginComponent extends Component {\r\n\r\n\tonRegister(event) {\r\n\t\t// console.log('RegisterOrLoginComponent.onRegister');\r\n\t\tevent.preventDefault();\r\n\t\tModalService.open$({ src: src, data: { view: 2 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('RegisterOrLoginComponent.onRegister', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t}\r\n\t\t});\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('RegisterOrLoginComponent.onLogin');\r\n\t\tevent.preventDefault();\r\n\t\tModalService.open$({ src: src, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('RegisterOrLoginComponent.onLogin', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t}\r\n\t\t});\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n}\r\n\r\nRegisterOrLoginComponent.meta = {\r\n\tselector: '[register-or-login]',\r\n};\r\n","const calculateDelta = (now, date) => Math.round(Math.abs(now - date) / 1000)\n\nexport default function relativeDateFactory (translations) {\n  return function relativeDate (date, now = new Date()) {\n    if (!(date instanceof Date)) {\n      date = new Date(date)\n    }\n\n    let delta = null\n\n    const minute = 60\n    const hour = minute * 60\n    const day = hour * 24\n    const week = day * 7\n    const month = day * 30\n    const year = day * 365\n\n    delta = calculateDelta(now, date)\n\n    if (delta > day && delta < week) {\n      date = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0)\n      delta = calculateDelta(now, date)\n    }\n\n    const translate = (translatePhrase, timeValue) => {\n      let key\n\n      if (translatePhrase === 'justNow') {\n        key = translatePhrase\n      } else if (now >= date) {\n        key = `${translatePhrase}Ago`\n      } else {\n        key = `${translatePhrase}FromNow`\n      }\n\n      const translation = translations[key]\n\n      if (typeof translation === 'function') {\n        return translation(timeValue)\n      }\n\n      return translation.replace('{{time}}', timeValue)\n    }\n\n    switch (false) {\n      case !(delta < 30):\n        return translate('justNow')\n\n      case !(delta < minute):\n        return translate('seconds', delta)\n\n      case !(delta < 2 * minute):\n        return translate('aMinute')\n\n      case !(delta < hour):\n        return translate('minutes', Math.floor(delta / minute))\n\n      case Math.floor(delta / hour) !== 1:\n        return translate('anHour')\n\n      case !(delta < day):\n        return translate('hours', Math.floor(delta / hour))\n\n      case !(delta < day * 2):\n        return translate('aDay')\n\n      case !(delta < week):\n        return translate('days', Math.floor(delta / day))\n\n      case Math.floor(delta / week) !== 1:\n        return translate('aWeek')\n\n      case !(delta < month):\n        return translate('weeks', Math.floor(delta / week))\n\n      case Math.floor(delta / month) !== 1:\n        return translate('aMonth')\n\n      case !(delta < year):\n        return translate('months', Math.floor(delta / month))\n\n      case Math.floor(delta / year) !== 1:\n        return translate('aYear')\n\n      default:\n        return translate('overAYear')\n    }\n  }\n}\n","module.exports = {\n  justNow: \"just now\",\n  secondsAgo: \"{{time}} seconds ago\",\n  aMinuteAgo: \"a minute ago\",\n  minutesAgo: \"{{time}} minutes ago\",\n  anHourAgo: \"an hour ago\",\n  hoursAgo: \"{{time}} hours ago\",\n  aDayAgo: \"yesterday\",\n  daysAgo: \"{{time}} days ago\",\n  aWeekAgo: \"a week ago\",\n  weeksAgo: \"{{time}} weeks ago\",\n  aMonthAgo: \"a month ago\",\n  monthsAgo: \"{{time}} months ago\",\n  aYearAgo: \"a year ago\",\n  yearsAgo: \"{{time}} years ago\",\n  overAYearAgo: \"over a year ago\",\n  secondsFromNow: \"{{time}} seconds from now\",\n  aMinuteFromNow: \"a minute from now\",\n  minutesFromNow: \"{{time}} minutes from now\",\n  anHourFromNow: \"an hour from now\",\n  hoursFromNow: \"{{time}} hours from now\",\n  aDayFromNow: \"tomorrow\",\n  daysFromNow: \"{{time}} days from now\",\n  aWeekFromNow: \"a week from now\",\n  weeksFromNow: \"{{time}} weeks from now\",\n  aMonthFromNow: \"a month from now\",\n  monthsFromNow: \"{{time}} months from now\",\n  aYearFromNow: \"a year from now\",\n  yearsFromNow: \"{{time}} years from now\",\n  overAYearFromNow: \"over a year from now\"\n}\n","import relativeDateFactory from './factory'\nimport enTranslations from '../translations/en'\n\nexport default relativeDateFactory(enTranslations)\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = relativeDateFactory;\nvar calculateDelta = function calculateDelta(now, date) {\n  return Math.round(Math.abs(now - date) / 1000);\n};\n\nfunction relativeDateFactory(translations) {\n  return function relativeDate(date) {\n    var now = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Date();\n\n    if (!(date instanceof Date)) {\n      date = new Date(date);\n    }\n\n    var delta = null;\n\n    var minute = 60;\n    var hour = minute * 60;\n    var day = hour * 24;\n    var week = day * 7;\n    var month = day * 30;\n    var year = day * 365;\n\n    delta = calculateDelta(now, date);\n\n    if (delta > day && delta < week) {\n      date = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0);\n      delta = calculateDelta(now, date);\n    }\n\n    var translate = function translate(translatePhrase, timeValue) {\n      var key = void 0;\n\n      if (translatePhrase === 'justNow') {\n        key = translatePhrase;\n      } else if (now >= date) {\n        key = translatePhrase + 'Ago';\n      } else {\n        key = translatePhrase + 'FromNow';\n      }\n\n      var translation = translations[key];\n\n      if (typeof translation === 'function') {\n        return translation(timeValue);\n      }\n\n      return translation.replace('{{time}}', timeValue);\n    };\n\n    switch (false) {\n      case !(delta < 30):\n        return translate('justNow');\n\n      case !(delta < minute):\n        return translate('seconds', delta);\n\n      case !(delta < 2 * minute):\n        return translate('aMinute');\n\n      case !(delta < hour):\n        return translate('minutes', Math.floor(delta / minute));\n\n      case Math.floor(delta / hour) !== 1:\n        return translate('anHour');\n\n      case !(delta < day):\n        return translate('hours', Math.floor(delta / hour));\n\n      case !(delta < day * 2):\n        return translate('aDay');\n\n      case !(delta < week):\n        return translate('days', Math.floor(delta / day));\n\n      case Math.floor(delta / week) !== 1:\n        return translate('aWeek');\n\n      case !(delta < month):\n        return translate('weeks', Math.floor(delta / week));\n\n      case Math.floor(delta / month) !== 1:\n        return translate('aMonth');\n\n      case !(delta < year):\n        return translate('months', Math.floor(delta / month));\n\n      case Math.floor(delta / year) !== 1:\n        return translate('aYear');\n\n      default:\n        return translate('overAYear');\n    }\n  };\n}\nmodule.exports = exports['default'];","import { Pipe } from \"rxcomp\";\nimport relativeDate from 'tiny-relative-date';\nimport relativeDateFactory from 'tiny-relative-date/lib/factory';\n\nexport const RELATIVE_DATE_KEYS = [\"justNow\", \"secondsAgo\", \"aMinuteAgo\", \"minutesAgo\", \"anHourAgo\", \"hoursAgo\", \"aDayAgo\", \"daysAgo\", \"aWeekAgo\", \"weeksAgo\", \"aMonthAgo\", \"monthsAgo\", \"aYearAgo\", \"yearsAgo\", \"overAYearAgo\", \"secondsFromNow\", \"aMinuteFromNow\", \"minutesFromNow\", \"anHourFromNow\", \"hoursFromNow\", \"aDayFromNow\", \"daysFromNow\", \"aWeekFromNow\", \"weeksFromNow\", \"aMonthFromNow\", \"monthsFromNow\", \"aYearFromNow\", \"yearsFromNow\", \"overAYearFromNow\"];\n\nexport default class RelativeDatePipe extends Pipe {\n\n\tstatic transform(value) {\n\t\tif (value) {\n\t\t\treturn this.relativeDate(value);\n\t\t}\n\t}\n\n\tstatic setLocale(locale) {\n\t\tif (!locale) return;\n\t\tconst values = {};\n\t\tconst keys = Object.keys(locale).filter(key => RELATIVE_DATE_KEYS.indexOf(key) !== -1);\n\t\tif (keys.length) {\n\t\t\tkeys.forEach(key => values[key] = locale[key]);\n\t\t\tthis.relativeDate = relativeDateFactory(values);\n\t\t}\n\t}\n\n}\n\nRelativeDatePipe.meta = {\n\tname: 'relativeDate',\n};\n\nRelativeDatePipe.relativeDate = relativeDate;\n\nif (window.locale) {\n\tRelativeDatePipe.setLocale(window.locale);\n}\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { shareReplay, takeUntil, tap } from 'rxjs/operators';\r\n\r\nexport default class ScrollToDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tthis.initialFocus = false;\r\n\t\tconst { module, node } = getContext(this);\r\n\t\tconst expression = this.expression = node.getAttribute(`(scrollTo)`);\r\n\t\tthis.outputFunction = module.makeFunction(expression, ['$event']);\r\n\t\tthis.scrollTo$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(() => {});\r\n\t}\r\n\r\n\tscrollTo$() {\r\n\t\tconst { module, node, parentInstance } = getContext(this);\r\n\t\treturn fromEvent(node, 'click').pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tconst result = module.resolve(this.outputFunction, parentInstance, event);\r\n\t\t\t\tif (typeof result === 'string') {\r\n\t\t\t\t\tconst target = document.querySelector(result);\r\n\t\t\t\t\tif (target) {\r\n\t\t\t\t\t\tconst from = this.currentTop();\r\n\t\t\t\t\t\tconst to = from + target.getBoundingClientRect().top - 50;\r\n\t\t\t\t\t\tconst o = { pow: 0 };\r\n\t\t\t\t\t\tconst html = document.querySelector('html');\r\n\t\t\t\t\t\tgsap.set(html, {\r\n\t\t\t\t\t\t\t'scroll-behavior': 'auto'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tgsap.to(o, Math.abs((to - from)) / 2000, {\r\n\t\t\t\t\t\t\tpow: 1,\r\n\t\t\t\t\t\t\tease: Quad.easeOut,\r\n\t\t\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\t\t\tonUpdate: () => {\r\n\t\t\t\t\t\t\t\twindow.scrollTo(0, from + (to - from) * o.pow);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\t\t\tgsap.set(html, {\r\n\t\t\t\t\t\t\t\t\t'scroll-behavior': 'smooth'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t}\r\n\r\n\tcurrentTop() {\r\n\t\t// Firefox, Chrome, Opera, Safari\r\n\t\tif (self.pageYOffset) return self.pageYOffset;\r\n\t\t// Internet Explorer 6 - standards mode\r\n\t\tif (document.documentElement && document.documentElement.scrollTop)\r\n\t\t\treturn document.documentElement.scrollTop;\r\n\t\t// Internet Explorer 6, 7 and 8\r\n\t\tif (document.body.scrollTop) return document.body.scrollTop;\r\n\t\treturn 0;\r\n\t}\r\n\r\n}\r\n\r\nScrollToDirective.meta = {\r\n\tselector: `[(scrollTo)]`\r\n};\r\n","export default class DownloadService {\r\n\r\n\tstatic get a() {\r\n\t\tlet a = this.a_;\r\n\t\tif (!a) {\r\n\t\t\ta = document.createElement(\"a\");\r\n\t\t\ta.style = \"display: none\";\r\n\t\t\tdocument.body.appendChild(a);\r\n\t\t\tthis.a_ = a;\r\n\t\t}\r\n\t\treturn a;\r\n\t}\r\n\r\n\tstatic download(blob, fileName = 'download.txt') {\r\n\t\t// var json = JSON.stringify(data),\r\n\t\t// blob = new Blob([json], {type: \"octet/stream\"}),\r\n\t\tconst url = window.URL.createObjectURL(blob);\r\n\t\tconst a = this.a;\r\n\t\ta.href = url;\r\n\t\ta.download = fileName;\r\n\t\ta.click();\r\n\t\twindow.URL.revokeObjectURL(url);\r\n\t}\r\n\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport DownloadService from '../download/download.service';\r\nimport { STATIC } from '../environment/environment';\r\nimport HttpService from '../http/http.service';\r\nimport ModalService, { ModalResolveEvent } from '../modal/modal.service';\r\nimport UserService from '../user/user.service';\r\n\r\nconst src = STATIC ? '/tiemme-com/club-modal.html' : '/Viewdoc.cshtml?co_id=23649';\r\n\r\nexport default class SecureDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.href = node.getAttribute('href');\r\n\t\tfromEvent(node, 'click').pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.tryDownloadHref();\r\n\t\t});\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.href = node.getAttribute('href');\r\n\t}\r\n\r\n\ttryDownloadHref() {\r\n\t\tHttpService.get$(this.href, undefined, 'blob').pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(blob => {\r\n\t\t\tDownloadService.download(blob, this.href.split('/').pop());\r\n\t\t}, error => {\r\n\t\t\tconsole.log(error);\r\n\t\t\tthis.onLogin(event);\r\n\t\t});\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('SecureDirective.onLogin');\r\n\t\t// event.preventDefault();\r\n\t\tModalService.open$({ src: src, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('SecureDirective.onLogin', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t\tthis.tryDownloadHref();\r\n\t\t\t}\r\n\t\t});\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n\t/*\r\n\tonRegister(event) {\r\n\t\t// console.log('SecureDirective.onRegister');\r\n\t\t// event.preventDefault();\r\n\t\tModalService.open$({ src: src, data: { view: 2 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('SecureDirective.onRegister', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t}\r\n\t\t});\r\n\t\t// this.pushChanges();\r\n\t}\r\n\t*/\r\n\r\n}\r\n\r\nSecureDirective.meta = {\r\n\tselector: '[secure]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { Subject } from 'rxjs';\r\nimport Swiper from 'swiper';\r\n\r\nexport default class SwiperDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', `swiper-${this.rxcompId}`);\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tspeed: 600,\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: `#swiper-${this.rxcompId} .swiper-pagination`,\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tnavigation: {\r\n\t\t\t\tnextEl: `#swiper-${this.rxcompId} .swiper-button-next`,\r\n\t\t\t\tprevEl: `#swiper-${this.rxcompId} .swiper-button-prev`,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t}\r\n\r\n\tget enabled() {\r\n\t\treturn !window.matchMedia('print').matches;\r\n\t}\r\n\r\n\tonView() {\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.swiperInitOrUpdate_();\r\n\t\t}, 1);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners_();\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tonBeforePrint() {\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tslideToIndex(index) {\r\n\t\t// console.log('SwiperDirective.slideToIndex', index);\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.slideTo(index);\r\n\t\t}\r\n\t}\r\n\r\n\tinit_() {\r\n\t\tthis.events$ = new Subject();\r\n\t\tif (this.enabled) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tgsap.set(node, { opacity: 0 });\r\n\t\t\tthis.index = 0;\r\n\t\t\tconst on = this.options.on || {};\r\n\t\t\tconst self = this;\r\n\t\t\ton.slideChange = function() {\r\n\t\t\t\tconst swiper = this;\r\n\t\t\t\tself.index = swiper.activeIndex;\r\n\t\t\t\tself.events$.next(self.index);\r\n\t\t\t\tself.pushChanges();\r\n\t\t\t};\r\n\t\t\tthis.options.on = on;\r\n\t\t\tthis.addListeners_();\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners_() {\r\n\t\tthis.onBeforePrint = this.onBeforePrint.bind(this);\r\n\t\twindow.addEventListener('beforeprint', this.onBeforePrint);\r\n\t\t/*\r\n\t\tscope.$on('onResize', ($scope) => {\r\n\t\t\tthis.onResize(scope, element, attributes);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\tremoveListeners_() {\r\n\t\twindow.removeEventListener('beforeprint', this.onBeforePrint);\r\n\t}\r\n\r\n\tswiperInitOrUpdate_() {\r\n\t\tif (this.enabled) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tif (this.swiper) {\r\n\t\t\t\tthis.swiper.update();\r\n\t\t\t} else {\r\n\t\t\t\tlet swiper;\r\n\t\t\t\tconst on = this.options.on || (this.options.on = {});\r\n\t\t\t\tconst callback = on.init;\r\n\t\t\t\tif (!on.init || !on.init.swiperDirectiveInit) {\r\n\t\t\t\t\ton.init = function() {\r\n\t\t\t\t\t\tgsap.to(node, 0.4, {\r\n\t\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\t\tease: Power2.easeOut,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\t\t\t\tcallback.apply(this, [swiper, element, scope]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, 1);\r\n\t\t\t\t\t};\r\n\t\t\t\t\ton.init.swiperDirectiveInit = true;\r\n\t\t\t\t}\r\n\t\t\t\tgsap.set(node, { opacity: 1 });\r\n\t\t\t\tswiper = new Swiper(node, this.options);\r\n\t\t\t\tthis.swiper = swiper;\r\n\t\t\t\tthis.swiper._opening = true;\r\n\t\t\t\tnode.classList.add('swiper-init');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tswiperDestroy_() {\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.destroy();\r\n\t\t}\r\n\t}\r\n\r\n\topenMore(event) {\r\n\t\tthis.more.next(event);\r\n\t}\r\n}\r\n\r\nSwiperDirective.meta = {\r\n\tselector: '[swiper]',\r\n\tinputs: ['consumer'],\r\n\toutputs: ['more']\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport SwiperDirective from './swiper.directive';\r\n\r\nexport default class SwiperEventsDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', `swiper-${this.rxcompId}`);\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 2,\r\n\t\t\tspaceBetween: 25,\r\n\t\t\tcenteredSlides: false,\r\n\t\t\t// loop: true,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tspeed: 600,\r\n\t\t\t/*\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\t*/\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: `#swiper-${this.rxcompId} .swiper-pagination`,\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tnavigation: {\r\n\t\t\t\tnextEl: `#swiper-${this.rxcompId} .swiper-button-next`,\r\n\t\t\t\tprevEl: `#swiper-${this.rxcompId} .swiper-button-prev`,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t\t// console.log('SwiperEventsDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperEventsDirective.meta = {\r\n\tselector: '[swiper-events]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport SwiperDirective from './swiper.directive';\r\n\r\nexport default class SwiperSlidesDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', `swiper-${this.rxcompId}`);\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 3,\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tloop: false,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tspeed: 600,\r\n\t\t\t/*\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\t*/\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: `#swiper-${this.rxcompId} .swiper-pagination`,\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tnavigation: {\r\n\t\t\t\tnextEl: `#swiper-${this.rxcompId} .swiper-button-next`,\r\n\t\t\t\tprevEl: `#swiper-${this.rxcompId} .swiper-button-prev`,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t}\r\n\r\n}\r\n\r\nSwiperSlidesDirective.meta = {\r\n\tselector: '[swiper-slides]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport SwiperDirective from './swiper.directive';\r\n\r\nexport default class SwiperTopEventsDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', `swiper-${this.rxcompId}`);\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1,\r\n\t\t\tspaceBetween: 2,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t768: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 2,\r\n\t\t\t\t},\r\n\t\t\t\t1024: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 2,\r\n\t\t\t\t},\r\n\t\t\t\t1440: {\r\n\t\t\t\t\tslidesPerView: 4,\r\n\t\t\t\t\tspaceBetween: 2,\r\n\t\t\t\t},\r\n\t\t\t\t1920: {\r\n\t\t\t\t\tslidesPerView: 4,\r\n\t\t\t\t\tspaceBetween: 2,\r\n\t\t\t\t},\r\n\t\t\t\t2440: {\r\n\t\t\t\t\tslidesPerView: 5,\r\n\t\t\t\t\tspaceBetween: 2,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tcenteredSlides: false,\r\n\t\t\t// loop: true,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tspeed: 600,\r\n\t\t\t/*\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\t*/\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: `#swiper-${this.rxcompId} .swiper-pagination`,\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tnavigation: {\r\n\t\t\t\tnextEl: `#swiper-${this.rxcompId} .swiper-button-next`,\r\n\t\t\t\tprevEl: `#swiper-${this.rxcompId} .swiper-button-prev`,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t\t// console.log('SwiperTopEventsDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperTopEventsDirective.meta = {\r\n\tselector: '[swiper-top-events]'\r\n};\r\n","function push_(event) {\r\n\tconst dataLayer = window.dataLayer || [];\r\n\tdataLayer.push(event);\r\n\tconsole.log('GtmService.dataLayer', event);\r\n}\r\n\r\nexport default class GtmService {\r\n\r\n\tstatic push(event) {\r\n\t\treturn push_(event);\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport GtmService from '../gtm/gtm.service';\r\nimport SwiperDirective from '../swiper/swiper.directive';\r\n\r\nexport default class VideoComponent extends Component {\r\n\r\n\tget playing() {\r\n\t\treturn this.playing_;\r\n\t}\r\n\r\n\tset playing(playing) {\r\n\t\tif (this.playing_ !== playing) {\r\n\t\t\tthis.playing_ = playing;\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.item = {};\r\n\t\tconst { node, parentInstance } = getContext(this);\r\n\t\tnode.classList.add('video');\r\n\t\tthis.video = node.querySelector('video');\r\n\t\tthis.progress = node.querySelector('.icon--play-progress path');\r\n\t\tif (parentInstance instanceof SwiperDirective) {\r\n\t\t\tparentInstance.events$.pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t).subscribe(event => this.pause());\r\n\t\t}\r\n\t\tthis.addListeners();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tconst video = this.video;\r\n\t\tif (video) {\r\n\t\t\tthis.onPlay = this.onPlay.bind(this);\r\n\t\t\tthis.onPause = this.onPause.bind(this);\r\n\t\t\tthis.onEnded = this.onEnded.bind(this);\r\n\t\t\tthis.onTimeUpdate = this.onTimeUpdate.bind(this);\r\n\t\t\tvideo.addEventListener('play', this.onPlay);\r\n\t\t\tvideo.addEventListener('pause', this.onPause);\r\n\t\t\tvideo.addEventListener('ended', this.onEnded);\r\n\t\t\tvideo.addEventListener('timeupdate', this.onTimeUpdate);\r\n\t\t}\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tconst video = this.video;\r\n\t\tif (video) {\r\n\t\t\tvideo.removeEventListener('play', this.onPlay);\r\n\t\t\tvideo.removeEventListener('pause', this.onPause);\r\n\t\t\tvideo.removeEventListener('ended', this.onEnded);\r\n\t\t\tvideo.removeEventListener('timeupdate', this.onTimeUpdate);\r\n\t\t}\r\n\t}\r\n\r\n\ttogglePlay() {\r\n\t\t// console.log('VideoComponent.togglePlay')\r\n\t\tconst video = this.video;\r\n\t\tif (video) {\r\n\t\t\tif (video.paused) {\r\n\t\t\t\tthis.play();\r\n\t\t\t} else {\r\n\t\t\t\tthis.pause();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tplay() {\r\n\t\tconst video = this.video;\r\n\t\tvideo.muted = false;\r\n\t\tvideo.play();\r\n\t}\r\n\r\n\tpause() {\r\n\t\tconst video = this.video;\r\n\t\tvideo.muted = true;\r\n\t\tvideo.pause();\r\n\t}\r\n\r\n\tonPlay() {\r\n\t\tthis.playing = true;\r\n\t\tGtmService.push({\r\n\t\t\tevent: 'video play',\r\n\t\t\tvideo_name: this.video.src\r\n\t\t});\r\n\t}\r\n\r\n\tonPause() {\r\n\t\tthis.playing = false;\r\n\t}\r\n\r\n\tonEnded() {\r\n\t\tthis.playing = false;\r\n\t}\r\n\r\n\tonTimeUpdate() {\r\n\t\tthis.progress.style.strokeDashoffset = this.video.currentTime / this.video.duration;\r\n\t}\r\n\r\n}\r\n\r\nVideoComponent.meta = {\r\n\tselector: '[video]',\r\n\tinputs: ['item'],\r\n};\r\n","import { Context } from 'rxcomp';\n\nexport default class VirtualItem extends Context {\n\tconstructor(key, $key, value, $value, index, count, parentInstance) {\n\t\tsuper(parentInstance);\n\t\tthis[key] = $key;\n\t\tthis[value] = $value;\n\t\tthis.index = index;\n\t\tthis.count = count;\n\t}\n\n\tget first() {\n\t\treturn this.index === 0;\n\t}\n\n\tget last() {\n\t\treturn this.index === this.count - 1;\n\t}\n\n\tget even() {\n\t\treturn this.index % 2 === 0;\n\t}\n\n\tget odd() {\n\t\treturn !this.even;\n\t}\n}\n","import { getContext, Structure } from 'rxcomp';\nimport { BehaviorSubject, fromEvent, merge } from 'rxjs';\nimport { debounceTime, map, startWith, takeUntil, tap } from 'rxjs/operators';\nimport VirtualItem from './virtual.item';\n\nexport const VirtualMode = {\n\tResponsive: 1,\n\tGrid: 2,\n\tCentered: 3,\n\tList: 4\n};\n\nexport default class VirtualStructure extends Structure {\n\n\tonInit() {\n\t\tconst { module, node } = getContext(this);\n\t\tconst template = node.firstElementChild;\n\t\tconst expression = node.getAttribute('*virtual');\n\t\tnode.removeAttribute('*virtual');\n\t\tnode.removeChild(template);\n\t\tconst tokens = (this.tokens = this.getExpressionTokens(expression));\n\t\tthis.virtualFunction = module.makeFunction(tokens.iterable);\n\t\tthis.container = node;\n\t\tthis.template = template;\n\t\tthis.mode = this.mode || 1;\n\t\tthis.width = this.width || 250;\n\t\tthis.gutter = (this.gutter !== undefined) ? this.gutter : 20;\n\t\tthis.options = {\n\t\t\ttop: 0,\n\t\t\twidth: this.width,\n\t\t\tgutter: this.gutter,\n\t\t\tcontainerWidth: 0,\n\t\t\tcontainerHeight: 0,\n\t\t\tcols: [0],\n\t\t\tstrategy: 1\n\t\t};\n\t\tthis.cachedRects = {};\n\t\tthis.cachedInstances = [];\n\t\tthis.cacheNodes = [];\n\t\tthis.items$ = new BehaviorSubject([]);\n\t\tthis.update$()\n\t\t\t.pipe(takeUntil(this.unsubscribe$))\n\t\t\t.subscribe(visibleItems => {\n\t\t\t\t// console.log(visibleItems.length);\n\t\t\t});\n\t}\n\n\tonChanges(changes) {\n\t\tconst context = getContext(this);\n\t\tconst module = context.module;\n\t\t// resolve\n\t\tconst items = module.resolve(this.virtualFunction, changes, this) || [];\n\t\tthis.mode = this.mode || 1;\n\t\tthis.width = this.width || 250;\n\t\tthis.gutter = (this.gutter !== undefined) ? this.gutter : 20;\n\t\tthis.options.width = this.width;\n\t\tthis.updateView(true);\n\t\tthis.items$.next(items);\n\t}\n\n\tupdate$() {\n\t\treturn merge(this.scroll$(), this.resize$(), this.items$).pipe(\n\t\t\tmap(datas => {\n\t\t\t\tconst options = this.options;\n\t\t\t\tconst items = this.items$.getValue();\n\t\t\t\tconst total = items.length;\n\t\t\t\tthis.container.position = 'relative';\n\t\t\t\tlet highestHeight = 0;\n\t\t\t\tconst width = this.getWidth();\n\t\t\t\tconst gutter = this.getGutter(width);\n\t\t\t\tconst visibleItems = items.filter((item, i) => {\n\t\t\t\t\tlet col, height, top, left, bottom;\n\t\t\t\t\tlet rect = this.cachedRects[i];\n\t\t\t\t\tif (rect) {\n\t\t\t\t\t\tcol = rect.col;\n\t\t\t\t\t\theight = rect.height;\n\t\t\t\t\t\tleft = rect.left;\n\t\t\t\t\t\t// top = rect.top;\n\t\t\t\t\t\t// bottom = rect.bottom;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcol = this.getCol();\n\t\t\t\t\t\theight = this.getHeight(width, item);\n\t\t\t\t\t}\n\t\t\t\t\ttop = options.cols[col];\n\t\t\t\t\tif (this.intersect(top + options.top, top + height + options.top, 0, options.containerHeight)) {\n\t\t\t\t\t\tif (!rect) {\n\t\t\t\t\t\t\tleft = this.getLeft(col, width, gutter);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst node = this.cachedNode(i, i, item, total);\n\t\t\t\t\t\tnode.style.position = 'absolute';\n\t\t\t\t\t\tnode.style.top = top + 'px';\n\t\t\t\t\t\tnode.style.left = left + 'px';\n\t\t\t\t\t\tnode.style.width = width + 'px';\n\t\t\t\t\t\tif (height !== node.offsetHeight) {\n\t\t\t\t\t\t\theight = node.offsetHeight;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbottom = top + height + options.gutter;\n\t\t\t\t\t\thighestHeight = Math.max(highestHeight, bottom);\n\t\t\t\t\t\toptions.cols[col] = bottom;\n\t\t\t\t\t\tif (!rect) {\n\t\t\t\t\t\t\tthis.cachedRects[i] = { col, width, height, left, top, bottom };\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trect.height = height;\n\t\t\t\t\t\t\trect.bottom = bottom;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.removeNode(i);\n\t\t\t\t\t\tbottom = top + height + options.gutter;\n\t\t\t\t\t\toptions.cols[col] = bottom;\n\t\t\t\t\t\thighestHeight = Math.max(highestHeight, bottom);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tlet removeIndex = items.length;\n\t\t\t\twhile (removeIndex < this.cacheNodes.length) {\n\t\t\t\t\tthis.removeNode(removeIndex);\n\t\t\t\t\tremoveIndex++;\n\t\t\t\t}\n\t\t\t\tthis.cacheNodes.length = items.length;\n\t\t\t\tthis.container.style.height = `${highestHeight}px`;\n\t\t\t\treturn visibleItems;\n\t\t\t})\n\t\t);\n\t}\n\n\tgetCols() {\n\t\tconst options = this.options;\n\t\tconst cols = Math.floor((options.containerWidth + options.gutter) / (options.width + options.gutter)) || 1;\n\t\treturn new Array(cols).fill(0);\n\t}\n\n\tgetCol() {\n\t\tconst options = this.options;\n\t\tlet col;\n\t\tswitch (this.mode) {\n\t\t\tcase VirtualMode.Grid:\n\t\t\tcase VirtualMode.Centered:\n\t\t\tcase VirtualMode.Responsive:\n\t\t\t\tcol = options.cols.reduce((p, c, i, a) => {\n\t\t\t\t\treturn c < a[p] ? i : p;\n\t\t\t\t}, 0);\n\t\t\t\tbreak;\n\t\t\tcase VirtualMode.List:\n\t\t\tdefault:\n\t\t\t\tcol = 0;\n\t\t}\n\t\treturn col;\n\t}\n\n\tgetWidth() {\n\t\tconst options = this.options;\n\t\tlet width;\n\t\tswitch (this.mode) {\n\t\t\tcase VirtualMode.Grid:\n\t\t\tcase VirtualMode.Centered:\n\t\t\t\twidth = options.width;\n\t\t\t\tbreak;\n\t\t\tcase VirtualMode.Responsive:\n\t\t\t\twidth = (options.containerWidth - (options.cols.length - 1) * options.gutter) / options.cols.length;\n\t\t\t\tbreak;\n\t\t\tcase VirtualMode.List:\n\t\t\tdefault:\n\t\t\t\twidth = options.containerWidth;\n\t\t}\n\t\treturn width;\n\t}\n\n\tgetHeight(width, item) {\n\t\tconst options = this.options;\n\t\tlet height;\n\t\tswitch (this.mode) {\n\t\t\tcase VirtualMode.Grid:\n\t\t\tcase VirtualMode.Centered:\n\t\t\tcase VirtualMode.Responsive:\n\t\t\t\theight = options.width;\n\t\t\t\tbreak;\n\t\t\tcase VirtualMode.List:\n\t\t\tdefault:\n\t\t\t\theight = 80;\n\t\t}\n\t\treturn height;\n\t}\n\n\tgetGutter(width) {\n\t\tconst options = this.options;\n\t\tlet gutter;\n\t\tswitch (this.mode) {\n\t\t\tcase VirtualMode.Grid:\n\t\t\tcase VirtualMode.Centered:\n\t\t\t\tgutter = options.gutter;\n\t\t\t\tbreak;\n\t\t\tcase VirtualMode.Responsive:\n\t\t\t\tgutter = (options.containerWidth - options.cols.length * width) / (options.cols.length - 1);\n\t\t\t\tbreak;\n\t\t\tcase VirtualMode.List:\n\t\t\tdefault:\n\t\t\t\tgutter = 0;\n\t\t}\n\t\treturn gutter;\n\t}\n\n\tgetLeft(index, width, gutter) {\n\t\tconst options = this.options;\n\t\tlet left;\n\t\tswitch (this.mode) {\n\t\t\tcase VirtualMode.Grid:\n\t\t\tcase VirtualMode.Responsive:\n\t\t\t\tleft = index * (width + gutter);\n\t\t\t\tbreak;\n\t\t\tcase VirtualMode.Centered:\n\t\t\t\tleft = (options.containerWidth - options.cols.length * (width + gutter) + gutter) / 2 + index * (width + gutter);\n\t\t\t\tbreak;\n\t\t\tcase VirtualMode.List:\n\t\t\tdefault:\n\t\t\t\tleft = 0;\n\t\t}\n\t\treturn left;\n\t}\n\n\tcachedNode(index, i, value, total) {\n\t\tif (this.cacheNodes[index]) {\n\t\t\treturn this.updateNode(index, i, value);\n\t\t} else {\n\t\t\treturn this.createNode(index, i, value, total);\n\t\t}\n\t}\n\n\tcreateNode(index, i, value, total) {\n\t\tconst clonedNode = this.template.cloneNode(true);\n\t\tdelete clonedNode.rxcompId;\n\t\tthis.container.appendChild(clonedNode);\n\t\tthis.cacheNodes[index] = clonedNode;\n\t\tconst context = getContext(this);\n\t\tconst module = context.module;\n\t\tconst tokens = this.tokens;\n\t\tconst args = [tokens.key, i, tokens.value, value, i, total, context.parentInstance];\n\t\tconst instance = module.makeInstance(clonedNode, VirtualItem, context.selector, context.parentInstance, args);\n\t\tconst forItemContext = getContext(instance);\n\t\tmodule.compile(clonedNode, forItemContext.instance);\n\t\tthis.cachedInstances[index] = instance;\n\t\treturn clonedNode;\n\t}\n\n\tupdateNode(index, i, value) {\n\t\tconst instance = this.cachedInstances[index];\n\t\tconst tokens = this.tokens;\n\t\tif (instance[tokens.key] !== i) {\n\t\t\tinstance[tokens.key] = i;\n\t\t\tinstance[tokens.value] = value;\n\t\t\tinstance.pushChanges();\n\t\t}\n\t\t// console.log(index, i, value);\n\t\treturn this.cacheNodes[index];\n\t}\n\n\tremoveNode(index) {\n\t\tthis.cachedInstances[index] = undefined;\n\t\tconst node = this.cacheNodes[index];\n\t\tif (node) {\n\t\t\tconst context = getContext(this);\n\t\t\tconst module = context.module;\n\t\t\tnode.parentNode.removeChild(node);\n\t\t\tmodule.remove(node);\n\t\t}\n\t\tthis.cacheNodes[index] = undefined;\n\t\treturn node;\n\t}\n\n\tintersect(top1, bottom1, top2, bottom2) {\n\t\treturn top2 < bottom1 && bottom2 > top1;\n\t}\n\n\tresize$() {\n\t\treturn fromEvent(window, 'resize').pipe(\n\t\t\tdebounceTime(500),\n\t\t\tstartWith(null),\n\t\t\ttap(() => this.updateView(true))\n\t\t);\n\t}\n\n\tscroll$(node) {\n\t\treturn fromEvent(window, 'scroll').pipe(tap(() => this.updateView()));\n\t}\n\n\tupdateView(reset) {\n\t\tconst rect = this.container.getBoundingClientRect();\n\t\tconst options = this.options;\n\t\toptions.top = rect.top;\n\t\toptions.containerWidth = rect.width;\n\t\toptions.containerHeight = window.innerHeight;\n\t\toptions.cols = this.getCols();\n\t\tif (reset) {\n\t\t\tthis.cachedRects = {};\n\t\t}\n\t}\n\n\tgetExpressionTokens(expression) {\n\t\tif (expression === null) {\n\t\t\tthrow new Error('invalid virtual');\n\t\t}\n\t\tif (expression.trim().indexOf('let ') === -1 || expression.trim().indexOf(' of ') === -1) {\n\t\t\tthrow new Error('invalid virtual');\n\t\t}\n\t\tconst expressions = expression\n\t\t\t.split(';')\n\t\t\t.map(x => x.trim())\n\t\t\t.filter(x => x !== '');\n\t\tconst virtualExpressions = expressions[0].split(' of ').map(x => x.trim());\n\t\tlet value = virtualExpressions[0].replace(/\\s*let\\s*/, '');\n\t\tconst iterable = virtualExpressions[1];\n\t\tlet key = 'index';\n\t\tconst keyValueMatches = value.match(/\\[(.+)\\s*,\\s*(.+)\\]/);\n\t\tif (keyValueMatches) {\n\t\t\tkey = keyValueMatches[1];\n\t\t\tvalue = keyValueMatches[2];\n\t\t}\n\t\tif (expressions.length > 1) {\n\t\t\tconst indexExpressions = expressions[1].split(/\\s*let\\s*|\\s*=\\s*index/).map(x => x.trim());\n\t\t\tif (indexExpressions.length === 3) {\n\t\t\t\tkey = indexExpressions[1];\n\t\t\t}\n\t\t}\n\t\treturn { key, value, iterable };\n\t}\n}\n\nVirtualStructure.meta = {\n\tselector: '[*virtual]',\n\tinputs: ['mode', 'width', 'gutter']\n};\n","import { Component, getContext } from 'rxcomp';\r\nimport { BehaviorSubject, interval, Subject } from 'rxjs';\r\nimport { distinctUntilChanged, filter, map, switchMap, takeUntil, tap } from 'rxjs/operators';\r\nimport SwiperDirective from '../swiper/swiper.directive';\r\n\r\nexport default class YoutubeComponent extends Component {\r\n\r\n\tget playing() {\r\n\t\treturn this.playing_;\r\n\t}\r\n\r\n\tset playing(playing) {\r\n\t\tif (this.playing_ !== playing) {\r\n\t\t\tthis.playing_ = playing;\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\tget cover() {\r\n\t\treturn this.youtubeId ? `//i.ytimg.com/vi/${this.youtubeId}/maxresdefault.jpg` : '';\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.item = {};\r\n\t\tconst { node, parentInstance } = getContext(this);\r\n\t\tnode.classList.add('youtube');\r\n\t\tif (YoutubeComponent.MOBILE) {\r\n\t\t\tnode.classList.add('mobile');\r\n\t\t}\r\n\t\tthis.progress = node.querySelector('.icon--play-progress path');\r\n\t\tthis.onPlayerReady = this.onPlayerReady.bind(this);\r\n\t\tthis.onPlayerStateChange = this.onPlayerStateChange.bind(this);\r\n\t\tthis.onPlayerError = this.onPlayerError.bind(this);\r\n\t\tthis.id$ = new Subject().pipe(distinctUntilChanged());\r\n\t\tif (parentInstance instanceof SwiperDirective) {\r\n\t\t\tparentInstance.events$.pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t).subscribe(event => this.pause());\r\n\t\t}\r\n\t\t// this.addListeners();\r\n\t}\r\n\r\n\tonChanges(changes) {\r\n\t\tconst id = this.youtubeId;\r\n\t\t// console.log('YoutubeComponent.onChanges', id);\r\n\t\tthis.id$.next(id);\r\n\t}\r\n\r\n\tinitPlayer() {\r\n\t\t// console.log('VideoComponent.initPlayer');\r\n\t\tthis.player$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(player => {\r\n\t\t\tconsole.log('YoutubeComponent.player$', player);\r\n\t\t});\r\n\t\tthis.interval$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(() => {});\r\n\t\tthis.id$.next(this.youtubeId);\r\n\t}\r\n\r\n\tplayer$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst video = node.querySelector('.video');\r\n\t\treturn this.id$.pipe(\r\n\t\t\tswitchMap(id => {\r\n\t\t\t\t// console.log('YoutubeComponent.videoId', id);\r\n\t\t\t\treturn YoutubeComponent.once$().pipe(\r\n\t\t\t\t\tmap(youtube => {\r\n\t\t\t\t\t\t// console.log('YoutubeComponent.once$', youtube);\r\n\t\t\t\t\t\tthis.destroyPlayer();\r\n\t\t\t\t\t\tthis.player = new youtube.Player(video, {\r\n\t\t\t\t\t\t\twidth: node.offsetWidth,\r\n\t\t\t\t\t\t\theight: node.offsetHeight,\r\n\t\t\t\t\t\t\tvideoId: id,\r\n\t\t\t\t\t\t\tplayerVars: {\r\n\t\t\t\t\t\t\t\tautoplay: 1,\r\n\t\t\t\t\t\t\t\tcontrols: 1, // YoutubeComponent.MOBILE ? 1 : 0,\r\n\t\t\t\t\t\t\t\tdisablekb: 1,\r\n\t\t\t\t\t\t\t\tenablejsapi: 1,\r\n\t\t\t\t\t\t\t\tfs: 0,\r\n\t\t\t\t\t\t\t\tloop: 1,\r\n\t\t\t\t\t\t\t\tmodestbranding: 1,\r\n\t\t\t\t\t\t\t\tplaysinline: 1,\r\n\t\t\t\t\t\t\t\trel: 0,\r\n\t\t\t\t\t\t\t\tshowinfo: 0,\r\n\t\t\t\t\t\t\t\tiv_load_policy: 3,\r\n\t\t\t\t\t\t\t\tlistType: 'user_uploads',\r\n\t\t\t\t\t\t\t\t// origin: 'https://log6i.csb.app/'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tevents: {\r\n\t\t\t\t\t\t\t\tonReady: this.onPlayerReady,\r\n\t\t\t\t\t\t\t\tonStateChange: this.onPlayerStateChange,\r\n\t\t\t\t\t\t\t\tonPlayerError: this.onPlayerError\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn this.player;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tonPlayerReady(event) {\r\n\t\t// console.log('YoutubeComponent.onPlayerReady', event);\r\n\t\tevent.target.mute();\r\n\t\tevent.target.playVideo();\r\n\t}\r\n\r\n\tonPlayerStateChange(event) {\r\n\t\t// console.log('YoutubeComponent.onPlayerStateChange', event.data);\r\n\t\tif (event.data === 1) {\r\n\t\t\tthis.playing = true;\r\n\t\t} else {\r\n\t\t\tthis.playing = false;\r\n\t\t}\r\n\t}\r\n\r\n\tonPlayerError(event) {\r\n\t\tconsole.log('YoutubeComponent.onPlayerError', event);\r\n\t}\r\n\r\n\tdestroyPlayer() {\r\n\t\tif (this.player) {\r\n\t\t\tthis.player.destroy();\r\n\t\t}\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.destroyPlayer();\r\n\t}\r\n\r\n\tinterval$() {\r\n\t\treturn interval(500).pipe(\r\n\t\t\tfilter(() => this.playing && this.player),\r\n\t\t\ttap(() => {\r\n\t\t\t\tthis.progress.style.strokeDashoffset =\r\n\t\t\t\t\tthis.player.getCurrentTime() / this.player.getDuration();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\ttogglePlay() {\r\n\t\t// console.log('VideoComponent.togglePlay');\r\n\t\tif (this.playing) {\r\n\t\t\tthis.pause();\r\n\t\t} else {\r\n\t\t\tthis.play();\r\n\t\t}\r\n\t}\r\n\r\n\tplay() {\r\n\t\t// console.log('VideoComponent.play');\r\n\t\tif (!this.player) {\r\n\t\t\tthis.initPlayer();\r\n\t\t} else {\r\n\t\t\tthis.player.playVideo();\r\n\t\t}\r\n\t}\r\n\r\n\tpause() {\r\n\t\tif (!this.player) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.player.stopVideo();\r\n\t}\r\n\r\n\tstatic once$() {\r\n\t\tif (this.youtube$) {\r\n\t\t\treturn this.youtube$;\r\n\t\t} else {\r\n\t\t\tthis.youtube$ = new BehaviorSubject(null).pipe(\r\n\t\t\t\tfilter(youtube => youtube !== null)\r\n\t\t\t);\r\n\t\t\twindow.onYouTubeIframeAPIReady = this.onYouTubeIframeAPIReady_.bind(this);\r\n\t\t\tconst script = document.createElement('script');\r\n\t\t\tconst scripts = document.querySelectorAll('script');\r\n\t\t\tconst last = scripts[scripts.length - 1];\r\n\t\t\tlast.parentNode.insertBefore(script, last);\r\n\t\t\tscript.src = '//www.youtube.com/iframe_api';\r\n\t\t\treturn this.youtube$;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic onYouTubeIframeAPIReady_() {\r\n\t\t// console.log('onYouTubeIframeAPIReady');\r\n\t\tthis.youtube$.next(window.YT);\r\n\t}\r\n\r\n\tstatic mobilecheck() {\r\n\t\tlet check = false;\r\n\t\t(function(a) { if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true; })(navigator.userAgent || navigator.vendor || window.opera);\r\n\t\treturn check;\r\n\t}\r\n\r\n\tstatic mobileAndTabletcheck() {\r\n\t\tlet check = false;\r\n\t\t(function(a) { if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true; })(navigator.userAgent || navigator.vendor || window.opera);\r\n\t\treturn check;\r\n\t}\r\n\r\n}\r\n\r\nYoutubeComponent.MOBILE = YoutubeComponent.mobileAndTabletcheck();\r\n\r\nYoutubeComponent.meta = {\r\n\tselector: '[youtube]',\r\n\tinputs: ['youtubeId', 'title']\r\n};\r\n","import { CoreModule, Module } from 'rxcomp';\r\nimport { FormModule } from 'rxcomp-form';\r\nimport AppComponent from './app.component';\r\nimport ChannelPageComponent from './channel/channel-page.component';\r\nimport ChannelComponent from './channel/channel.component';\r\nimport DatePipe from './date/date.pipe';\r\nimport DropdownItemDirective from './dropdown/dropdown-item.directive';\r\nimport DropdownDirective from './dropdown/dropdown.directive';\r\nimport EventDateComponent from './event/event-date.component';\r\nimport EventComponent from './event/event.component';\r\nimport ErrorsComponent from './forms/errors.component';\r\nimport HtmlPipe from './html/html.pipe';\r\nimport IndexPageComponent from './index/index-page.component';\r\nimport LazyDirective from './lazy/lazy.directive';\r\nimport ModalOutletComponent from './modal/modal-outlet.component';\r\nimport ModalComponent from './modal/modal.component';\r\nimport RegisterOrLoginComponent from './register-or-login/register-or-login.component';\r\nimport RelativeDatePipe from './relative-date/relative-date.pipe';\r\nimport ScrollToDirective from './scroll-to/scroll-to.directive';\r\nimport SecureDirective from './secure/secure.directive';\r\nimport SwiperEventsDirective from './swiper/swiper-events.directive';\r\nimport SwiperSlidesDirective from './swiper/swiper-slides.directive';\r\nimport SwiperTopEventsDirective from './swiper/swiper-top-events.directive';\r\nimport SwiperDirective from './swiper/swiper.directive';\r\nimport VideoComponent from './video/video.component';\r\nimport VirtualStructure from './virtual/virtual.structure';\r\nimport YoutubeComponent from './youtube/youtube.component';\r\n\r\nexport default class AppModule extends Module {}\r\n\r\nAppModule.meta = {\r\n\timports: [\r\n\t\tCoreModule,\r\n\t\tFormModule,\r\n\t],\r\n\tdeclarations: [\r\n\t\tChannelComponent,\r\n\t\tChannelPageComponent,\r\n\t\tDatePipe,\r\n\t\tDropdownDirective,\r\n\t\tDropdownItemDirective,\r\n\t\tErrorsComponent,\r\n\t\tEventComponent,\r\n\t\tEventDateComponent,\r\n\t\tHtmlPipe,\r\n\t\tIndexPageComponent,\r\n\t\tLazyDirective,\r\n\t\tModalComponent,\r\n\t\tModalOutletComponent,\r\n\t\tRegisterOrLoginComponent,\r\n\t\tRelativeDatePipe,\r\n\t\tScrollToDirective,\r\n\t\tSecureDirective,\r\n\t\tSwiperDirective,\r\n\t\tSwiperEventsDirective,\r\n\t\tSwiperSlidesDirective,\r\n\t\tSwiperTopEventsDirective,\r\n\t\tVirtualStructure,\r\n\t\tVideoComponent,\r\n\t\tYoutubeComponent,\r\n\t],\r\n\tbootstrap: AppComponent,\r\n};\r\n","import { Browser } from 'rxcomp';\r\nimport AppModule from './app.module';\r\n\r\nBrowser.bootstrap(AppModule);\r\n"]}