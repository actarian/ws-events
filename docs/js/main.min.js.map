{"version":3,"sources":["src/js/main.js","../../src/js/app.component.js","../../src/js/location/location.service.js","../../src/js/filter/filter-item.js","../../src/js/filter/filter.service.js","../../src/js/page/page.component.js","../../src/js/environment/environment.js","../../src/js/http/http.service.js","../../src/js/local-storage/local-storage.service.js","../../src/js/user/user.service.js","../../src/js/question/question.service.js","../../src/js/event/event.service.js","../../src/js/channel/channel.service.js","../../src/js/channel/channel-page.component.js","../../src/js/channel/channel.component.js","../../src/js/count/count.pipe.js","../../src/js/date/date.pipe.js","../../src/js/dropdown/dropdown.directive.js","../../src/js/dropdown/dropdown-item.directive.js","../../src/js/event/event-date.component.js","../../src/js/event/event-page.component.js","../../src/js/event/event.component.js","../../src/js/forms/control.component.js","../../src/js/forms/errors.component.js","../../src/js/html/html.pipe.js","../../src/js/index/index-page.component.js","../../src/js/image/image.service.js","../../src/js/intersection/intersection.service.js","../../src/js/lazy/lazy.cache.js","../../src/js/lazy/lazy.directive.js","../../src/js/modal/modal.service.js","../../src/js/modal/modal-outlet.component.js","../../src/js/modal/modal.component.js","../../src/js/register-or-login/register-or-login.component.js","../../node_modules/tiny-relative-date/src/factory.js","../../node_modules/tiny-relative-date/translations/en.js","../../node_modules/tiny-relative-date/src/index.js","../../node_modules/tiny-relative-date/lib/factory.js","../../src/js/relative-date/relative-date.pipe.js","../../src/js/relative-date/relative-date.component.js","../../src/js/scroll-to/scroll-to.directive.js","../../src/js/download/download.service.js","../../src/js/secure/secure.directive.js","../../src/js/swiper/swiper.directive.js","../../src/js/swiper/swiper-events.directive.js","../../src/js/swiper/swiper-slides.directive.js","../../src/js/swiper/swiper-top-events.directive.js","../../src/js/thron/thron.component.js","../../src/js/gtm/gtm.service.js","../../src/js/video/video.component.js","../../src/js/virtual/virtual.item.js","../../src/js/virtual/virtual.structure.js","../../src/js/youtube/youtube.component.js","../../src/js/app.module.js","../../src/js/main.js"],"names":["global","factory","exports","module","require","define","amd","self","rxcomp","form","rxjs","operators","Swiper","this","rxcompForm","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_inheritsLoose","subClass","superClass","create","constructor","__proto__","hasOwnProperty","call","AppComponent","_Component","apply","arguments","onInit","getContext","node","classList","remove","Component","meta","selector","LocationService","get","URLSearchParams","window","location","search","set","keyOrValue","value","params","replace","history","pushState","title","document","url","href","split","toString","deserialize","encoded","decode","serialize","encode","decoded","json","atob","JSON","parse","stringify","btoa","FilterMode","FilterItem","filter","change$","BehaviorSubject","mode","placeholder","values","options","unshift","label","assign","_proto","item","match","_this","forEach","getSelectedOption","_this2","find","x","has","getLabel","selectedOption","indexOf","undefined","push","next","index","splice","first","toggle","toggleActive","active","FilterService","initialParams","callback","filters","keys","getParamsCount","reduce","p","c","locationParams","any","items$","items","changes","map","merge","pipe","auditTime","tap","filterItems","updateFilterStates","skipFilter","_this3","filteredItems","option","count","disabled","PageComponent","STATIC","port","host","HttpService","http$","method","data","format","response_","from","fetch","getUrl","headers","Accept","Content-Type","body","then","response","ok","Promise","reject","catchError","error","throwError","getError","get$","query","delete$","post$","put$","patch$","object","statusCode","status","statusMessage","statusText","console","log","LocalStorageService","delete","name","isLocalStorageSupported","localStorage","removeItem","exist","e","cache","setItem","supported","User","firstName","substr","toUpperCase","lastName","UserService","setUser","user","user$","me$","mapStatic__","switchMap","register$","payload","update","login$","_this4","logout$","_this5","retrieve$","_this6","action","fake","mapUser","mapUsers","users","Question","creationDate","Date","QuestionService","mapQuestion","question","mapQuestions","questions","now","id","setSeconds","getSeconds","setMinutes","getMinutes","setHours","getHours","setDate","getDate","Math","floor","random","Event","startDate","endDate","related","EventService","mapEvents","info","started","ended","diff","hoursDiff","detail$","eventId","parseInt","mapEvent","listing$","fakeListing","top$","upcoming$","subscribe$","of","unsubscribe$","like$","unlike$","save$","unsave$","event","events","channel","channelIndex","subscribers","likes","thron","src","getTime","live","incoming","past","channel_","info_","subscribed","liked","image_","width","height","category_","event_","type","abstract","picture","picture_","category","product_","magazine_","letters","Array","fill","categoryId","Channel","ChannelService","channels$","mapChannels","channelId","mapChannel","channels","fakeListing_","ChannelPageComponent","_PageComponent","listing","grid","gutter","filterService","tags","features","load$","subscribe","startFilter","pushChanges","combineLatest","takeUntil","setTimeout","toggleGrid","ChannelComponent","toggleSubscribe","flag","toggleLike","inputs","CountPipe","_Pipe","isNumber","isFinite","transform","Pipe","DATE_FORMATS_SPLIT","NUMBER_STRING","R_ISO8601_STR","ALL_COLONS","DatePipe","padNumber","num","digits","trim","negWrap","neg","dateGetter","size","offset","date","dateStrGetter","shortForm","standAlone","formats","timeZoneGetter","zone","paddedZone","abs","getFirstThursdayOfYear","year","dayOfWeekOnFirst","getDay","getThursdayThisWeek","datetime","getFullYear","getMonth","weekGetter","firstThurs","result","round","ampmGetter","AMPMS","eraGetter","ERAS","longEraGetter","ERANAMES","jsonStringToDate","string","tzHour","tzMin","dateSetter","setUTCFullYear","setFullYear","timeSetter","setUTCHours","h","m","s","ms","parseFloat","timezoneToOffset","timezone","fallback","requestedTimezoneOffset","Number","isNaN","addDateMinutes","minutes","convertTimezoneToLocal","reverse","dateTimezoneOffset","getTimezoneOffset","timezoneOffset","transform_","locale","dateStyle","timeStyle","toLocaleDateString","text","parts","DATETIME_FORMATS","test","exec","concat","slice","pop","formatter","DATE_FORMATS","yyyy","yy","y","MMMM","MMM","MM","M","LLLL","dd","d","HH","H","hh","mm","ss","sss","EEEE","EEE","a","Z","ww","w","G","GG","GGG","GGGG","DAY","MONTH","SHORTDAY","SHORTMONTH","fullDate","longDate","medium","mediumDate","mediumTime","short","shortDate","shortTime","DROPDOWN_ID","DropdownDirective","_Directive","trigger","getAttribute","querySelector","opened","onClick","bind","onDocumentClick","openDropdown","closeDropdown","addListeners","dropdown$","add","contains","addDocumentListeners","dropped","removeDocumentListeners","getValue","addEventListener","removeListeners","removeEventListener","onDestroy","nextId","dropdown","id_","Directive","outputs","DropdownItemDirective","EventDateMode","to10","EventDateComponent","getMode","mode_","eventDate","countdown","live$","Subject","interval","startWith","MINUTE","SECOND","change","EventPageComponent","onChange","$event","toggleSave","saved","saves","EventComponent","ControlComponent","onChanges","flags","control","ErrorsComponent","_ControlComponent","labels","template","HtmlPipe","n","String","fromCharCode","unescapes","rx","RegExp","join","IndexPageComponent","topEvents","topChannels","upcomingEvents","PATH","UID","ImageService","worker","worker_","Worker","isBlob","postMessage","fromEvent","URL","createObjectURL","blob","finalize","revokeObjectURL","isCors","IntersectionService","observer","observer_","readySubject_","observerSubject_","IntersectionObserver","entries","intersection$","observe","entry","isIntersecting","unobserve","LazyCache","cache_","LazyDirective","input$","distinctUntilChanged","input","lazy$","lazy","setAttribute","ModalEvent","ModalResolveEvent","_ModalEvent","ModalRejectEvent","_ModalEvent2","ModalService","open$","modal","getTemplate$","getNode","modal$","events$","div","createElement","innerHTML","firstElementChild","resolve","ModalOutletComponent","modalNode","onRegister","onLogin","modal_","removeChild","appendChild","compile","ModalComponent","parentInstance","close","RegisterOrLoginComponent","preventDefault","view","calculateDelta","translations","relativeDate","justNow","secondsAgo","aMinuteAgo","minutesAgo","anHourAgo","hoursAgo","aDayAgo","daysAgo","aWeekAgo","weeksAgo","aMonthAgo","monthsAgo","aYearAgo","yearsAgo","overAYearAgo","secondsFromNow","aMinuteFromNow","minutesFromNow","anHourFromNow","hoursFromNow","aDayFromNow","daysFromNow","aWeekFromNow","weeksFromNow","aMonthFromNow","monthsFromNow","aYearFromNow","yearsFromNow","overAYearFromNow","delta","day","hour","translate","translatePhrase","timeValue","translation","minute","fn","createCommonjsModule","default","week","month","relativeDateFactory$1","__esModule","RELATIVE_DATE_KEYS","RelativeDatePipe","setLocale","relativeDateFactory","RelativeDateDirective","text_","innerText","ScrollToDirective","initialFocus","_getContext","expression","outputFunction","makeFunction","scrollTo$","_getContext2","currentTop","to","getBoundingClientRect","top","o","pow","html","gsap","scroll-behavior","ease","Quad","easeOut","overwrite","onUpdate","scrollTo","onComplete","shareReplay","pageYOffset","documentElement","scrollTop","DownloadService","download","fileName","click","a_","style","SecureDirective","tryDownloadHref","SwiperDirective","rxcompId","slidesPerView","spaceBetween","centeredSlides","speed","autoplay","delay","keyboardControl","mousewheelControl","pagination","el","clickable","navigation","nextEl","prevEl","keyboard","enabled","onlyInViewport","init_","onView","swiperInitOrUpdate_","removeListeners_","swiperDestroy_","onBeforePrint","slideToIndex","swiper","slideTo","opacity","on","slideChange","activeIndex","addListeners_","init","swiperDirectiveInit","Power2","element","scope","_opening","destroy","openMore","more","matchMedia","matches","SwiperEventsDirective","_SwiperDirective","loopAdditionalSlides","SwiperSlidesDirective","loop","SwiperTopEventsDirective","breakpoints","768","1024","1440","1920","2440","ThronComponent","THRON","THRONContentExperience","THRONPlayer","media","splitted","controls","hasAttribute","player","muted","displayLinked","noSkin","onBeforeInit","onReady","onCanPlay","onPlaying","playerInstance","schema","THRONSchemaHelper","getSchema","existsElements","removeElementsById","getElementsById","coordinates","bars","mediaContainer","ready","canPlay","off","qualities","qualityLevels","highestQuality","currentQuality","complete","play","playing","pause","GtmService","dataLayer","push_","VideoComponent","video","progress","onPlay","onPause","onEnded","onTimeUpdate","togglePlay","paused","video_name","strokeDashoffset","currentTime","duration","playing_","VirtualItem","$key","$value","_Context","even","Context","VirtualMode","VirtualStructure","_Structure","removeAttribute","tokens","getExpressionTokens","virtualFunction","iterable","container","containerWidth","containerHeight","cols","strategy","cachedRects","cachedInstances","cacheNodes","update$","visibleItems","updateView","scroll$","resize$","datas","total","position","highestHeight","getWidth","getGutter","col","left","bottom","rect","getCol","getHeight","intersect","getLeft","cachedNode","offsetHeight","max","removeNode","removeIndex","getCols","updateNode","createNode","clonedNode","cloneNode","context","args","instance","makeInstance","forItemContext","parentNode","top1","bottom1","top2","bottom2","debounceTime","reset","innerHeight","Error","expressions","virtualExpressions","keyValueMatches","indexExpressions","Structure","YoutubeComponent","MOBILE","onPlayerReady","onPlayerStateChange","onPlayerError","id$","youtubeId","initPlayer","player$","interval$","once$","youtube","destroyPlayer","Player","offsetWidth","videoId","playerVars","disablekb","enablejsapi","fs","modestbranding","playsinline","rel","showinfo","iv_load_policy","listType","onStateChange","mute","playVideo","getCurrentTime","getDuration","stopVideo","youtube$","onYouTubeIframeAPIReady","onYouTubeIframeAPIReady_","script","scripts","querySelectorAll","last","insertBefore","YT","mobilecheck","check","navigator","userAgent","vendor","opera","mobileAndTabletcheck","AppModule","_Module","Module","imports","CoreModule","FormModule","declarations","bootstrap","Browser"],"mappings":"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","file":"docs\\js\\main.min.js","sourcesContent":[null,"import { Component, getContext } from 'rxcomp';\r\n\r\nexport default class AppComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('wse__hidden');\r\n\t}\r\n\r\n\t// onView() { const context = getContext(this); }\r\n\r\n\t// onChanges() {}\r\n\r\n\t// onDestroy() {}\r\n}\r\n\r\nAppComponent.meta = {\r\n\tselector: '[app-component]',\r\n};\r\n","export default class LocationService {\r\n\r\n\tstatic get(key) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\t// console.log('LocationService.get', params);\r\n\t\treturn params.get(key);\r\n\t}\r\n\r\n\tstatic set(keyOrValue, value) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams.set(keyOrValue, value);\r\n\t\t} else {\r\n\t\t\tparams.set(keyOrValue, '');\r\n\t\t}\r\n\t\tthis.replace(params);\r\n\t\t// console.log('LocationService.set', params, keyOrValue, value);\r\n\t}\r\n\r\n\tstatic replace(params) {\r\n\t\tif (window.history && window.history.pushState) {\r\n\t\t\tconst title = document.title;\r\n\t\t\tconst url = `${window.location.href.split('?')[0]}?${params.toString()}`;\r\n\t\t\twindow.history.pushState(params.toString(), title, url);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic deserialize(key) {\r\n\t\tconst encoded = this.get('params');\r\n\t\treturn this.decode(key, encoded);\r\n\t}\r\n\r\n\tstatic serialize(keyOrValue, value) {\r\n\t\tconst params = this.deserialize();\r\n\t\tconst encoded = this.encode(keyOrValue, value, params);\r\n\t\tthis.set('params', encoded);\r\n\t}\r\n\r\n\tstatic decode(key, encoded) {\r\n\t\tlet decoded = null;\r\n\t\tif (encoded) {\r\n\t\t\tconst json = window.atob(encoded);\r\n\t\t\tdecoded = JSON.parse(json);\r\n\t\t}\r\n\t\tif (key && decoded) {\r\n\t\t\tdecoded = decoded[key];\r\n\t\t}\r\n\t\treturn decoded || null;\r\n\t}\r\n\r\n\tstatic encode(keyOrValue, value, params) {\r\n\t\tparams = params || {};\r\n\t\tlet encoded = null;\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams[keyOrValue] = value;\r\n\t\t} else {\r\n\t\t\tparams = keyOrValue;\r\n\t\t}\r\n\t\tconst json = JSON.stringify(params);\r\n\t\tencoded = window.btoa(json);\r\n\t\treturn encoded;\r\n\t}\r\n\r\n}\r\n","import { BehaviorSubject } from 'rxjs';\r\n\r\nexport const FilterMode = {\r\n\tSELECT: 'select',\r\n\tAND: 'and',\r\n\tOR: 'or',\r\n};\r\n\r\nexport default class FilterItem {\r\n\r\n\tconstructor(filter) {\r\n\t\tthis.change$ = new BehaviorSubject();\r\n\t\tthis.mode = FilterMode.SELECT;\r\n\t\tthis.placeholder = 'Select';\r\n\t\tthis.values = [];\r\n\t\tthis.options = [];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.SELECT) {\r\n\t\t\t\tfilter.options.unshift({\r\n\t\t\t\t\tlabel: filter.placeholder,\r\n\t\t\t\t\tvalues: [],\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tObject.assign(this, filter);\r\n\t\t}\r\n\t}\r\n\r\n\tfilter(item, value) {\r\n\t\treturn true; // item.options.indexOf(value) !== -1;\r\n\t}\r\n\r\n\tmatch(item) {\r\n\t\tlet match;\r\n\t\tif (this.mode === FilterMode.OR) {\r\n\t\t\tmatch = this.values.length ? false : true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match || this.filter(item, value);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tmatch = true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match && this.filter(item, value);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetSelectedOption() {\r\n\t\treturn this.options.find(x => this.has(x));\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst selectedOption = this.getSelectedOption();\r\n\t\t\treturn selectedOption ? selectedOption.label : this.placeholder;\r\n\t\t} else {\r\n\t\t\treturn this.label;\r\n\t\t}\r\n\t}\r\n\r\n\thas(item) {\r\n\t\treturn this.values.indexOf(item.value) !== -1;\r\n\t}\r\n\r\n\tset(item) {\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tthis.values = [];\r\n\t\t}\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index === -1) {\r\n\t\t\tif (item.value !== undefined) {\r\n\t\t\t\tthis.values.push(item.value);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tthis.placeholder = item.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.set', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\tremove(item) {\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index !== -1) {\r\n\t\t\tthis.values.splice(index, 1);\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.remove', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\ttoggle(item) {\r\n\t\tif (this.has(item)) {\r\n\t\t\tthis.remove(item);\r\n\t\t} else {\r\n\t\t\tthis.set(item);\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleActive() {\r\n\t\tthis.active = !this.active;\r\n\t}\r\n\r\n}\r\n","import { merge } from 'rxjs';\r\nimport { auditTime, map, tap } from 'rxjs/operators';\r\nimport LocationService from '../location/location.service';\r\nimport FilterItem from './filter-item';\r\n\r\nexport default class FilterService {\r\n\r\n\tconstructor(options, initialParams, callback) {\r\n\t\tconst filters = {};\r\n\t\tthis.filters = filters;\r\n\t\tif (options) {\r\n\t\t\tObject.keys(options).forEach(key => {\r\n\t\t\t\tconst filter = new FilterItem(options[key]);\r\n\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\tcallback(key, filter);\r\n\t\t\t\t}\r\n\t\t\t\tfilters[key] = filter;\r\n\t\t\t});\r\n\t\t\tthis.deserialize(this.filters, initialParams);\r\n\t\t}\r\n\t}\r\n\r\n\tgetParamsCount(params) {\r\n\t\tif (params) {\r\n\t\t\tconst paramsCount = Object.keys(params).reduce((p, c, i) => {\r\n\t\t\t\tconst values = params[c];\r\n\t\t\t\treturn p + (values ? values.length : 0);\r\n\t\t\t}, 0);\r\n\t\t\treturn paramsCount;\r\n\t\t} else {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\tdeserialize(filters, initialParams) {\r\n\t\tlet params;\r\n\t\tif (initialParams && this.getParamsCount(initialParams)) {\r\n\t\t\tparams = initialParams;\r\n\t\t}\r\n\t\tconst locationParams = LocationService.deserialize('filters');\r\n\t\tif (locationParams && this.getParamsCount(locationParams)) {\r\n\t\t\tparams = locationParams;\r\n\t\t}\r\n\t\tif (params) {\r\n\t\t\tObject.keys(filters).forEach(key => {\r\n\t\t\t\tfilters[key].values = params[key] || [];\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn filters;\r\n\t}\r\n\r\n\tserialize(filters) {\r\n\t\tlet params = {};\r\n\t\tlet any = false;\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tif (filter.values && filter.values.length > 0) {\r\n\t\t\t\tparams[x] = filter.values;\r\n\t\t\t\tany = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (!any) {\r\n\t\t\tparams = null;\r\n\t\t}\r\n\t\t// console.log('FilterService.serialize', params);\r\n\t\tLocationService.serialize('filters', params);\r\n\t\treturn params;\r\n\t}\r\n\r\n\titems$(items) {\r\n\t\tconst filters = this.filters;\r\n\t\tconst changes = Object.keys(filters).map(key => filters[key].change$);\r\n\t\treturn merge(...changes).pipe(\r\n\t\t\tauditTime(1),\r\n\t\t\t// tap(() => console.log(filters)),\r\n\t\t\ttap(() => this.serialize(filters)),\r\n\t\t\tmap(() => this.filterItems(items)),\r\n\t\t\ttap(() => this.updateFilterStates(filters, items))\r\n\t\t);\r\n\t}\r\n\r\n\tfilterItems(items, skipFilter) {\r\n\t\tconst filters = Object.keys(this.filters).map((x) => this.filters[x]).filter(x => x.values && x.values.length > 0);\r\n\t\titems = items.filter(item => {\r\n\t\t\tlet has = true;\r\n\t\t\tfilters.forEach(filter => {\r\n\t\t\t\tif (filter !== skipFilter) {\r\n\t\t\t\t\thas = has && filter.match(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn has;\r\n\t\t});\r\n\t\treturn items;\r\n\t}\r\n\r\n\tupdateFilterStates(filters, items) {\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tconst filteredItems = this.filterItems(items, filter);\r\n\t\t\tfilter.options.forEach(option => {\r\n\t\t\t\tlet count = 0;\r\n\t\t\t\tif (option.value) {\r\n\t\t\t\t\tlet i = 0;\r\n\t\t\t\t\twhile (i < filteredItems.length) {\r\n\t\t\t\t\t\tconst item = filteredItems[i];\r\n\t\t\t\t\t\tif (filter.filter(item, option.value)) {\r\n\t\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcount = filteredItems.length;\r\n\t\t\t\t}\r\n\t\t\t\toption.count = count;\r\n\t\t\t\toption.disabled = count === 0;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\n\nexport default class PageComponent extends Component {\n\n\tonInit() {\n\n\t}\n\n}\n\nPageComponent.meta = {\n\tselector: '[page]',\n};\n","export const STATIC = window.location.port === '40333' || window.location.host === 'actarian.github.io';\r\nexport const DEVELOPMENT = ['localhost', '127.0.0.1', '0.0.0.0'].indexOf(window.location.host.split(':')[0]) !== -1;\r\nexport const PRODUCTION = !DEVELOPMENT;\r\nexport const ENV = {\r\n\tSTATIC,\r\n\tDEVELOPMENT,\r\n\tPRODUCTION\r\n};\r\n","import { from, throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\nimport { STATIC } from '../environment/environment';\r\n\r\nexport default class HttpService {\r\n\r\n\tstatic http$(method, url, data, format = 'json') {\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tlet response_ = null;\r\n\t\treturn from(fetch(this.getUrl(url, format), {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: methods.indexOf(method) !== -1 ? JSON.stringify(data) : undefined\r\n\t\t}).then((response) => {\r\n\t\t\tresponse_ = response;\r\n\t\t\t// console.log(response);\r\n\t\t\tif (response.ok) {\r\n\t\t\t\treturn response[format]();\r\n\t\t\t} else {\r\n\t\t\t\treturn response.json().then(json => {\r\n\t\t\t\t\treturn Promise.reject(json);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\tconst query = this.query(data);\r\n\t\treturn this.http$('GET', `${url}${query}`, undefined, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn this.http$('DELETE', url);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn this.http$('POST', url, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn this.http$('PUT', url, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn this.http$('PATCH', url, data);\r\n\t}\r\n\r\n\tstatic query(data) {\r\n\t\treturn ''; // todo\r\n\t}\r\n\r\n\tstatic getUrl(url, format = 'json') {\r\n\t\t// console.log(url);\r\n\t\treturn STATIC && format === 'json' && url.indexOf('/') === 0 ? `.${url}.json` : url;\r\n\t}\r\n\r\n\tstatic getError(object, response) {\r\n\t\tlet error = typeof object === 'object' ? object : {};\r\n\t\tif (!error.statusCode) {\r\n\t\t\terror.statusCode = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusMessage) {\r\n\t\t\terror.statusMessage = response ? response.statusText : object;\r\n\t\t}\r\n\t\tconsole.log('HttpService.getError', error, object);\r\n\t\treturn error;\r\n\t}\r\n\r\n}\r\n","export default class LocalStorageService {\r\n\r\n\tstatic delete(name) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\twindow.localStorage.removeItem(name);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic exist(name) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\treturn window.localStorage[name] !== undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic get(name) {\r\n\t\tlet value = null;\r\n\t\tif (this.isLocalStorageSupported() && window.localStorage[name] !== undefined) {\r\n\t\t\ttry {\r\n\t\t\t\tvalue = JSON.parse(window.localStorage[name]);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('LocalStorageService.get.error parsing', name, e);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tstatic set(name, value) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\ttry {\r\n\t\t\t\tconst cache = [];\r\n\t\t\t\tconst json = JSON.stringify(value, function(key, value) {\r\n\t\t\t\t\tif (typeof value === 'object' && value !== null) {\r\n\t\t\t\t\t\tif (cache.indexOf(value) !== -1) {\r\n\t\t\t\t\t\t\t// Circular reference found, discard key\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcache.push(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t});\r\n\t\t\t\twindow.localStorage.setItem(name, json);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('LocalStorageService.set.error serializing', name, value, e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic isLocalStorageSupported() {\r\n\t\tif (this.supported) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tlet supported = false;\r\n\t\ttry {\r\n\t\t\tsupported = 'localStorage' in window && window.localStorage !== null;\r\n\t\t\tif (supported) {\r\n\t\t\t\twindow.localStorage.setItem('test', '1');\r\n\t\t\t\twindow.localStorage.removeItem('test');\r\n\t\t\t} else {\r\n\t\t\t\tsupported = false;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tsupported = false;\r\n\t\t}\r\n\t\tthis.supported = supported;\r\n\t\treturn supported;\r\n\t}\r\n\r\n}\r\n","import { BehaviorSubject } from 'rxjs';\r\nimport { map, switchMap } from 'rxjs/operators';\r\nimport { STATIC } from '../environment/environment';\r\nimport HttpService from '../http/http.service';\r\nimport LocalStorageService from '../local-storage/local-storage.service';\r\n\r\nexport class User {\r\n\r\n\tget avatar() {\r\n\t\treturn (this.firstName || '?').substr(0, 1).toUpperCase() + (this.lastName || '?').substr(0, 1).toUpperCase();\r\n\t}\r\n\r\n\tget fullName() {\r\n\t\treturn this.firstName + ' ' + this.lastName;\r\n\t}\r\n\r\n\tconstructor(data) {\r\n\t\tif (data) {\r\n\t\t\tObject.assign(this, data);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport default class UserService {\r\n\r\n\tstatic setUser(user) {\r\n\t\tthis.user$.next(user);\r\n\t}\r\n\r\n\tstatic me$() {\r\n\t\treturn HttpService.get$('/api/users/me').pipe(\r\n\t\t\tmap((user) => this.mapStatic__(user, 'me')),\r\n\t\t\tswitchMap(user => {\r\n\t\t\t\tthis.setUser(user);\r\n\t\t\t\treturn this.user$;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic register$(payload) {\r\n\t\treturn HttpService.post$('/api/users/register', payload).pipe(\r\n\t\t\tmap((user) => this.mapStatic__(user, 'register')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic update(payload) {\r\n\t\treturn HttpService.post$('/api/users/updateprofile', payload).pipe(\r\n\t\t\tmap((user) => this.mapStatic__(user, 'register')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic login$(payload) {\r\n\t\treturn HttpService.post$('/api/users/login', payload).pipe(\r\n\t\t\tmap((user) => this.mapStatic__(user, 'login')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic logout$() {\r\n\t\treturn HttpService.post$('/api/users/logout').pipe(\r\n\t\t\tmap((user) => this.mapStatic__(user, 'logout')),\r\n\t\t);\r\n\t}\r\n\tstatic retrieve$(payload) {\r\n\t\treturn HttpService.post$('/api/users/retrievepassword', payload).pipe(\r\n\t\t\tmap((user) => this.mapStatic__(user, 'retrieve')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic mapStatic__(user, action = 'me') {\r\n\t\tif (!STATIC) {\r\n\t\t\treturn user;\r\n\t\t};\r\n\t\tswitch (action) {\r\n\t\t\tcase 'me':\r\n\t\t\t\tif (!LocalStorageService.exist('user')) {\r\n\t\t\t\t\tuser = null;\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'register':\r\n\t\t\t\tLocalStorageService.set('user', user);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'login':\r\n\t\t\t\tLocalStorageService.set('user', user);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'logout':\r\n\t\t\t\tLocalStorageService.delete('user');\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn user;\r\n\t}\r\n\r\n\tstatic fake(user) {\r\n\t\tuser.firstName = user.firstName || 'Jhon';\r\n\t\tuser.lastName = user.lastName || 'Appleseed';\r\n\t\treturn user;\r\n\t}\r\n\r\n\tstatic mapUser(user) {\r\n\t\treturn UserService.fake(new User(user));\r\n\t}\r\n\r\n\tstatic mapUsers(users) {\r\n\t\treturn users ? users.map(x => UserService.mapUser(x)) : [];\r\n\t}\r\n\r\n}\r\n\r\nUserService.user$ = new BehaviorSubject(null);\r\n","import UserService from '../user/user.service';\n\nexport class Question {\n\n\tconstructor(data) {\n\t\tif (data) {\n\t\t\tObject.assign(this, data);\n\t\t\tif (this.creationDate) {\n\t\t\t\tthis.creationDate = new Date(this.creationDate);\n\t\t\t}\n\t\t\tif (this.user) {\n\t\t\t\tthis.user = UserService.mapUser(this.user);\n\t\t\t}\n\t\t\tconsole.log(this.user);\n\t\t}\n\t}\n\n}\n\nexport default class QuestionService {\n\n\tstatic mapQuestion(question) {\n\t\treturn QuestionService.fake(new Question(question));\n\t}\n\n\tstatic mapQuestions(questions) {\n\t\treturn questions ? questions.map(x => QuestionService.mapQuestion(x)) : [];\n\t}\n\n\tstatic fake(item) {\n\t\tconst now = new Date();\n\t\tconst index = item.id % 1000;\n\t\tswitch (index) {\n\t\t\tcase 1:\n\t\t\t\titem.creationDate = new Date(new Date().setSeconds(now.getSeconds() - 30));\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\titem.creationDate = new Date(new Date().setMinutes(now.getMinutes() - 10));\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\titem.creationDate = new Date(new Date().setMinutes(now.getMinutes() - 45));\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\titem.creationDate = new Date(new Date().setHours(now.getHours() - 1));\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\titem.creationDate = new Date(new Date().setDate(now.getDate() - 1 - Math.floor(Math.random() * 20)));\n\t\t}\n\t\treturn item;\n\t}\n\n}\n","import { of } from 'rxjs';\nimport { map, tap } from 'rxjs/operators';\nimport HttpService from '../http/http.service';\nimport QuestionService from '../question/question.service';\n\nexport class Event {\n\n\tget live() {\n\t\treturn this.info.started && !this.info.ended;\n\t}\n\n\tget incoming() {\n\t\tconst now = new Date();\n\t\tconst diff = this.startDate - now;\n\t\tconst hoursDiff = Math.floor(diff / 1000 / 60 / 60);\n\t\treturn !this.info.started && this.startDate > now && hoursDiff < 24;\n\t}\n\n\tget future() {\n\t\tconst now = new Date();\n\t\treturn !this.info.started && this.startDate > now;\n\t}\n\n\tget past() {\n\t\treturn this.info.ended;\n\t}\n\n\tget hasRelated() {\n\t\treturn this.related && this.related.length;\n\t}\n\n\tconstructor(data) {\n\t\tif (data) {\n\t\t\tObject.assign(this, data);\n\t\t\tif (this.creationDate) {\n\t\t\t\tthis.creationDate = new Date(this.creationDate);\n\t\t\t}\n\t\t\tif (this.startDate) {\n\t\t\t\tthis.startDate = new Date(this.startDate);\n\t\t\t}\n\t\t\tif (this.endDate) {\n\t\t\t\tthis.endDate = new Date(this.endDate);\n\t\t\t}\n\t\t\tif (this.related) {\n\t\t\t\tthis.related = EventService.mapEvents(this.related);\n\t\t\t}\n\t\t\tif (this.questions) {\n\t\t\t\tthis.questions = QuestionService.mapQuestions(this.questions);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default class EventService {\n\n\tstatic detail$(eventId) {\n\t\tconst id = 1001; // !!!\n\t\treturn HttpService.get$(`/api/event/${id}/detail`).pipe(\n\t\t\ttap(x => x.id = parseInt(eventId)), // !!!\n\t\t\tmap(x => EventService.mapEvent(x))\n\t\t);\n\t}\n\n\tstatic listing$(eventId) {\n\t\t// return HttpService.get$(`/api/event/${eventId}/listing`);\n\t\treturn EventService.fakeListing(eventId).pipe(\n\t\t\ttap((items) => {\n\t\t\t\t// console.log(JSON.stringify(items));\n\t\t\t})\n\t\t);\n\t}\n\n\tstatic top$() {\n\t\treturn HttpService.get$(`/api/event/evidence`).pipe(\n\t\t\tmap(items => EventService.mapEvents(items))\n\t\t);\n\t}\n\n\tstatic upcoming$() {\n\t\treturn HttpService.get$(`/api/event/upcoming`).pipe(\n\t\t\tmap(items => EventService.mapEvents(items))\n\t\t);\n\t}\n\n\tstatic subscribe$(eventId) {\n\t\treturn of(null);\n\t}\n\n\tstatic unsubscribe$(eventId) {\n\t\treturn of(null);\n\t}\n\n\tstatic like$(eventId) {\n\t\treturn of(null);\n\t}\n\n\tstatic unlike$(eventId) {\n\t\treturn of(null);\n\t}\n\n\tstatic save$(eventId) {\n\t\treturn of(null);\n\t}\n\n\tstatic unsave$(eventId) {\n\t\treturn of(null);\n\t}\n\n\tstatic mapEvent(event) {\n\t\treturn EventService.fake(new Event(event));\n\t}\n\n\tstatic mapEvents(events) {\n\t\treturn events ? events.map(x => EventService.mapEvent(x)) : [];\n\t}\n\n\tstatic fake(item) {\n\t\t// console.log('EventService.fake', item);\n\t\tconst letters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'L', 'M'];\n\t\tconst index = item.id % 1000;\n\t\titem.url = `${item.url}?eventId=${item.id}`;\n\t\tif (item.channel) {\n\t\t\titem.channel.url = `${item.channel.url}?channelId=${item.channel.id}`;\n\t\t\tconst channelIndex = item.channel.id % 100;\n\t\t\titem.name = `Event ${letters[channelIndex - 1]}${index}`;\n\t\t}\n\t\tif (item.info) {\n\t\t\titem.info.subscribers = 50 + Math.floor(Math.random() * 200);\n\t\t\titem.info.likes = 50 + Math.floor(Math.random() * 200);\n\t\t\titem.thron = {\n\t\t\t\tsrc: 'https://gruppoconcorde-view.thron.com/api/xcontents/resources/delivery/getContentDetail?clientId=gruppoconcorde&xcontentId=16ef3c0a-ba0c-4e3a-a10a-32bc7f9a4297&pkey=yz1hpd'\n\t\t\t};\n\t\t\tconst now = new Date();\n\t\t\tswitch (index) {\n\t\t\t\tcase 1:\n\t\t\t\t\titem.startDate = new Date(new Date().setMinutes(now.getMinutes() - 10));\n\t\t\t\t\titem.endDate = null;\n\t\t\t\t\titem.info.started = true;\n\t\t\t\t\titem.info.ended = false;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\titem.startDate = new Date(new Date().setMinutes(now.getMinutes() + 2));\n\t\t\t\t\titem.endDate = null;\n\t\t\t\t\titem.info.started = false;\n\t\t\t\t\titem.info.ended = false;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\titem.startDate = new Date(new Date().setHours(now.getHours() + 2));\n\t\t\t\t\titem.endDate = null;\n\t\t\t\t\titem.info.started = false;\n\t\t\t\t\titem.info.ended = false;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\titem.startDate = new Date(new Date().setHours(now.getHours() - 7));\n\t\t\t\t\titem.endDate = new Date(new Date().setHours(now.getHours() - 6));\n\t\t\t\t\titem.info.started = true;\n\t\t\t\t\titem.info.ended = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 5:\n\t\t\t\t\titem.startDate = new Date(new Date().setDate(now.getDate() + 7));\n\t\t\t\t\titem.endDate = null;\n\t\t\t\t\titem.info.started = false;\n\t\t\t\t\titem.info.ended = false;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 6:\n\t\t\t\t\titem.startDate = new Date(new Date().setDate(now.getDate() + 14));\n\t\t\t\t\titem.endDate = null;\n\t\t\t\t\titem.info.started = false;\n\t\t\t\t\titem.info.ended = false;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\titem.startDate = new Date(new Date().setDate(now.getDate() - 14 - Math.floor(Math.random() * 150)));\n\t\t\t\t\titem.endDate = new Date(new Date(item.startDate.getTime()).setHours(item.startDate.getHours() + 1));\n\t\t\t\t\titem.info.started = true;\n\t\t\t\t\titem.info.ended = true;\n\t\t\t}\n\t\t}\n\t\tif (item.related) {\n\t\t\titem.related = item.related.filter(x => (x.id !== item.id) && (x.live || x.incoming || x.past));\n\t\t}\n\t\treturn item;\n\t}\n\n\tstatic fakeListing(eventId) {\n\t\teventId = 1001;\n\t\treturn HttpService.get$(`/api/event/${eventId}/detail`).pipe(\n\t\t\tmap(x => {\n\t\t\t\tconst channel_ = new Event(x).channel;\n\t\t\t\tconst info_ = {\n\t\t\t\t\tstarted: false,\n\t\t\t\t\tended: false,\n\t\t\t\t\tsubscribers: 100,\n\t\t\t\t\tsubscribed: false,\n\t\t\t\t\tlikes: 100,\n\t\t\t\t\tliked: false\n\t\t\t\t};\n\t\t\t\tconst image_ = {\n\t\t\t\t\tid: 100000,\n\t\t\t\t\twidth: 700,\n\t\t\t\t\theight: 700,\n\t\t\t\t\tsrc: 'https://source.unsplash.com/random/',\n\t\t\t\t};\n\t\t\t\tconst category_ = {\n\t\t\t\t\tid: 10000,\n\t\t\t\t\tname: 'Category',\n\t\t\t\t\turl: '/ws-events/category.html',\n\t\t\t\t};\n\t\t\t\tconst event_ = {\n\t\t\t\t\tid: 1000,\n\t\t\t\t\ttype: 'event',\n\t\t\t\t\tname: 'Evento',\n\t\t\t\t\ttitle: 'Evento',\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\n\t\t\t\t\turl: '/ws-events/event.html',\n\t\t\t\t\tcreationDate: '2020-05-20T08:11:17.827Z',\n\t\t\t\t\tstartDate: '2020-05-20T08:11:17.827Z',\n\t\t\t\t\tpicture: image_,\n\t\t\t\t\tinfo: info_,\n\t\t\t\t\tchannel: channel_,\n\t\t\t\t};\n\t\t\t\tconst picture_ = {\n\t\t\t\t\tid: 1000,\n\t\t\t\t\ttype: 'picture',\n\t\t\t\t\tname: 'Picture',\n\t\t\t\t\ttitle: 'Picture',\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\n\t\t\t\t\turl: '/ws-events/document.html',\n\t\t\t\t\tpicture: image_,\n\t\t\t\t\tcategory: category_,\n\t\t\t\t};\n\t\t\t\tconst product_ = {\n\t\t\t\t\tid: 1000,\n\t\t\t\t\ttype: 'product',\n\t\t\t\t\tname: 'Product',\n\t\t\t\t\ttitle: 'Product',\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\n\t\t\t\t\turl: '/ws-events/product.html',\n\t\t\t\t\tpicture: image_,\n\t\t\t\t\tcategory: category_,\n\t\t\t\t};\n\t\t\t\tconst magazine_ = {\n\t\t\t\t\tid: 1000,\n\t\t\t\t\ttype: 'magazine',\n\t\t\t\t\tname: 'Magazine',\n\t\t\t\t\ttitle: 'Magazine',\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\n\t\t\t\t\turl: '/ws-events/product.html',\n\t\t\t\t\tpicture: image_,\n\t\t\t\t\tcategory: category_,\n\t\t\t\t};\n\t\t\t\tconst letters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'L', 'M'];\n\t\t\t\treturn new Array(30).fill(true).map((x, i) => {\n\t\t\t\t\tlet type = 'event';\n\t\t\t\t\tif (i > 3) {\n\t\t\t\t\t\tif (i % 5 === 0) {\n\t\t\t\t\t\t\ttype = 'picture';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (i % 7 === 0) {\n\t\t\t\t\t\t\ttype = 'product';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (i % 11 === 0) {\n\t\t\t\t\t\t\ttype = 'magazine';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet item;\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase 'picture':\n\t\t\t\t\t\t\titem = Object.assign({}, picture_);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'product':\n\t\t\t\t\t\t\titem = Object.assign({}, product_);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'magazine':\n\t\t\t\t\t\t\titem = Object.assign({}, magazine_);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'event':\n\t\t\t\t\t\t\titem = Object.assign({}, event_);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\titem.id = (channel_.id - 100) * 1000 + 1 + i;\n\t\t\t\t\titem.name = item.title = `${item.name} ${letters[(item.id - 1) % 10]}`;\n\t\t\t\t\titem.type = type;\n\t\t\t\t\tif (item.picture) {\n\t\t\t\t\t\titem.picture = Object.assign({}, image_, {\n\t\t\t\t\t\t\tid: (100001 + i),\n\t\t\t\t\t\t\twidth: 700,\n\t\t\t\t\t\t\theight: [700, 900, 1100][i % 3],\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (item.info) {\n\t\t\t\t\t\titem.info = Object.assign({}, info_);\n\t\t\t\t\t}\n\t\t\t\t\tif (item.channel) {\n\t\t\t\t\t\titem.channel = Object.assign({}, channel_);\n\t\t\t\t\t}\n\t\t\t\t\tif (item.category) {\n\t\t\t\t\t\tconst categoryId = (10001 + (i % 10));\n\t\t\t\t\t\titem.category = Object.assign({}, category_, {\n\t\t\t\t\t\t\tid: categoryId,\n\t\t\t\t\t\t\tname: 'Category ' + letters[categoryId % 10],\n\t\t\t\t\t\t\turl: `${category_.url}?categoryId=${categoryId}`,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase 'event':\n\t\t\t\t\t\t\titem = EventService.fake(new Event(item));\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\treturn item;\n\t\t\t\t});\n\t\t\t})\n\t\t);\n\t}\n\n}\n","import { of } from 'rxjs';\nimport { map, tap } from 'rxjs/operators';\nimport EventService, { Event } from '../event/event.service';\nimport HttpService from '../http/http.service';\n\nexport class Channel {\n\tconstructor(data) {\n\t\tif (data) {\n\t\t\tObject.assign(this, data);\n\t\t\tthis.events = EventService.mapEvents(this.events);\n\t\t}\n\t}\n}\n\nexport default class ChannelService {\n\n\tstatic channels$() {\n\t\treturn HttpService.get$(`/api/channel/channels`).pipe(\n\t\t\tmap(items => ChannelService.mapChannels(items))\n\t\t);\n\t}\n\n\tstatic detail$(channelId) {\n\t\treturn HttpService.get$(`/api/channel/${channelId}/detail`).pipe(\n\t\t\tmap(x => ChannelService.mapChannel(x))\n\t\t);\n\t}\n\n\tstatic listing$(channelId) {\n\t\t// return HttpService.get$(`/api/channel/${channelId}/listing`);\n\t\treturn ChannelService.fakeListing(channelId).pipe(\n\t\t\ttap((items) => {\n\t\t\t\t// console.log(JSON.stringify(items));\n\t\t\t})\n\t\t);\n\t}\n\n\tstatic top$() {\n\t\treturn HttpService.get$(`/api/channel/evidence`).pipe(\n\t\t\tmap(items => ChannelService.mapChannels(items))\n\t\t);\n\t}\n\n\tstatic subscribe$(channelId) {\n\t\treturn of(null);\n\t}\n\n\tstatic unsubscribe$(channelId) {\n\t\treturn of(null);\n\t}\n\n\tstatic like$(channelId) {\n\t\treturn of(null);\n\t}\n\n\tstatic unlike$(channelId) {\n\t\treturn of(null);\n\t}\n\n\tstatic mapChannel(channel) {\n\t\treturn ChannelService.fake(new Channel(channel));\n\t}\n\n\tstatic mapChannels(channels) {\n\t\treturn channels ? channels.map(x => ChannelService.mapChannel(x)) : [];\n\t}\n\n\tstatic fake(item) {\n\t\t// console.log('ChannelService.fake', item);\n\t\titem.url = `${item.url}?channelId=${item.id}`;\n\t\titem.info.subscribers = 1500 + Math.floor(Math.random() * 200);\n\t\titem.info.likes = 500 + Math.floor(Math.random() * 200);\n\t\treturn item;\n\t}\n\n\tstatic fakeListing(channelId) {\n\t\treturn HttpService.get$(`/api/channel/${channelId}/detail`).pipe(\n\t\t\tmap(x => {\n\t\t\t\tconst channel_ = ChannelService.fake(new Channel(x));\n\t\t\t\tconst info_ = {\n\t\t\t\t\tstarted: false,\n\t\t\t\t\tended: false,\n\t\t\t\t\tsubscribers: 100,\n\t\t\t\t\tsubscribed: false,\n\t\t\t\t\tlikes: 100,\n\t\t\t\t\tliked: false\n\t\t\t\t};\n\t\t\t\tconst image_ = {\n\t\t\t\t\tid: 100000,\n\t\t\t\t\twidth: 700,\n\t\t\t\t\theight: 700,\n\t\t\t\t\tsrc: 'https://source.unsplash.com/random/',\n\t\t\t\t};\n\t\t\t\tconst category_ = {\n\t\t\t\t\tid: 10000,\n\t\t\t\t\tname: 'Category',\n\t\t\t\t\turl: '/ws-events/category.html',\n\t\t\t\t};\n\t\t\t\tconst event_ = {\n\t\t\t\t\tid: 1000,\n\t\t\t\t\ttype: 'event',\n\t\t\t\t\tname: 'Evento',\n\t\t\t\t\ttitle: 'Evento',\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\n\t\t\t\t\turl: '/ws-events/event.html',\n\t\t\t\t\tcreationDate: '2020-05-20T08:11:17.827Z',\n\t\t\t\t\tstartDate: '2020-05-20T08:11:17.827Z',\n\t\t\t\t\tpicture: image_,\n\t\t\t\t\tinfo: info_,\n\t\t\t\t\tchannel: channel_,\n\t\t\t\t};\n\t\t\t\tconst picture_ = {\n\t\t\t\t\tid: 1000,\n\t\t\t\t\ttype: 'picture',\n\t\t\t\t\tname: 'Picture',\n\t\t\t\t\ttitle: 'Picture',\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\n\t\t\t\t\turl: '/ws-events/document.html',\n\t\t\t\t\tpicture: image_,\n\t\t\t\t\tcategory: category_,\n\t\t\t\t};\n\t\t\t\tconst product_ = {\n\t\t\t\t\tid: 1000,\n\t\t\t\t\ttype: 'product',\n\t\t\t\t\tname: 'Product',\n\t\t\t\t\ttitle: 'Product',\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\n\t\t\t\t\turl: '/ws-events/product.html',\n\t\t\t\t\tpicture: image_,\n\t\t\t\t\tcategory: category_,\n\t\t\t\t};\n\t\t\t\tconst magazine_ = {\n\t\t\t\t\tid: 1000,\n\t\t\t\t\ttype: 'magazine',\n\t\t\t\t\tname: 'Magazine',\n\t\t\t\t\ttitle: 'Magazine',\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\n\t\t\t\t\turl: '/ws-events/product.html',\n\t\t\t\t\tpicture: image_,\n\t\t\t\t\tcategory: category_,\n\t\t\t\t};\n\t\t\t\tconst letters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'L', 'M'];\n\t\t\t\treturn new Array(250).fill(true).map((x, i) => {\n\t\t\t\t\tlet type = 'event';\n\t\t\t\t\tif (i > 3) {\n\t\t\t\t\t\tif (i % 5 === 0) {\n\t\t\t\t\t\t\ttype = 'picture';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (i % 7 === 0) {\n\t\t\t\t\t\t\ttype = 'product';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (i % 11 === 0) {\n\t\t\t\t\t\t\ttype = 'magazine';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet item;\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase 'picture':\n\t\t\t\t\t\t\titem = Object.assign({}, picture_);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'product':\n\t\t\t\t\t\t\titem = Object.assign({}, product_);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'magazine':\n\t\t\t\t\t\t\titem = Object.assign({}, magazine_);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'event':\n\t\t\t\t\t\t\titem = Object.assign({}, event_);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\titem.id = (channelId - 100) * 1000 + 1 + i;\n\t\t\t\t\titem.name = item.title = `${item.name} ${letters[(item.id - 1) % 10]}`;\n\t\t\t\t\titem.type = type;\n\t\t\t\t\tif (item.picture) {\n\t\t\t\t\t\titem.picture = Object.assign({}, image_, {\n\t\t\t\t\t\t\tid: (100001 + i),\n\t\t\t\t\t\t\twidth: 700,\n\t\t\t\t\t\t\theight: [700, 900, 1100][i % 3],\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (item.info) {\n\t\t\t\t\t\titem.info = Object.assign({}, info_);\n\t\t\t\t\t}\n\t\t\t\t\tif (item.channel) {\n\t\t\t\t\t\titem.channel = Object.assign({}, channel_);\n\t\t\t\t\t}\n\t\t\t\t\tif (item.category) {\n\t\t\t\t\t\tconst categoryId = (10001 + (i % 10));\n\t\t\t\t\t\titem.category = Object.assign({}, category_, {\n\t\t\t\t\t\t\tid: categoryId,\n\t\t\t\t\t\t\tname: 'Category ' + letters[categoryId % 10],\n\t\t\t\t\t\t\turl: `${category_.url}?categoryId=${categoryId}`,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase 'event':\n\t\t\t\t\t\t\titem = EventService.fake(new Event(item));\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\treturn item;\n\t\t\t\t});\n\t\t\t})\n\t\t\t// map(x => new Channel(x))\n\t\t);\n\t}\n\n\tstatic fakeListing_(channelId) {\n\t\treturn HttpService.get$(`/api/channel/${channelId}/detail`).pipe(\n\t\t\tmap(x => {\n\t\t\t\tconst channel_ = ChannelService.fake(new Channel(x));\n\t\t\t\tconst event_ = {\n\t\t\t\t\tid: 1000,\n\t\t\t\t\ttype: 'event',\n\t\t\t\t\tname: 'Evento XYZ',\n\t\t\t\t\ttitle: 'Evento XYZ',\n\t\t\t\t\tabstract: '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eget dolor tincidunt, lobortis dolor eget, condimentum libero.</p>',\n\t\t\t\t\tpicture: {\n\t\t\t\t\t\tsrc: 'https://source.unsplash.com/random/',\n\t\t\t\t\t\twidth: 700,\n\t\t\t\t\t\theight: 700,\n\t\t\t\t\t},\n\t\t\t\t\turl: '/ws-events/event.html',\n\t\t\t\t\tcreationDate: '2020-05-20T08:11:17.827Z',\n\t\t\t\t\tstartDate: '2020-05-20T08:11:17.827Z',\n\t\t\t\t\tinfo: {\n\t\t\t\t\t\tstarted: false,\n\t\t\t\t\t\tended: false,\n\t\t\t\t\t\tsubscribers: 100,\n\t\t\t\t\t\tsubscribed: false,\n\t\t\t\t\t\tlikes: 100,\n\t\t\t\t\t\tliked: false\n\t\t\t\t\t},\n\t\t\t\t\tchannel: channel_\n\t\t\t\t};\n\t\t\t\treturn new Array(250).fill(true).map((x, i) => {\n\t\t\t\t\tconst item = Object.assign({}, event_);\n\t\t\t\t\titem.id = (channelId - 100) * 1000 + 1 + i;\n\t\t\t\t\titem.picture = Object.assign({}, event_.picture);\n\t\t\t\t\titem.picture.width = 700;\n\t\t\t\t\titem.picture.height = [700, 900, 1100][i % 3];\n\t\t\t\t\titem.info = Object.assign({}, event_.info);\n\t\t\t\t\titem.channel = Object.assign({}, x);\n\t\t\t\t\treturn EventService.fake(new Event(item));\n\t\t\t\t});\n\t\t\t})\n\t\t\t// map(x => new Channel(x))\n\t\t);\n\t}\n\n}\n","import { combineLatest } from 'rxjs';\nimport { first, takeUntil } from 'rxjs/operators';\nimport FilterService from '../filter/filter.service';\nimport LocationService from '../location/location.service';\nimport PageComponent from '../page/page.component';\nimport ChannelService from './channel.service';\n\nexport default class ChannelPageComponent extends PageComponent {\n\n\tonInit() {\n\t\tthis.channels = this.channel = this.listing = null;\n\t\tthis.grid = {\n\t\t\tmode: 1,\n\t\t\twidth: 350,\n\t\t\tgutter: 2,\n\t\t};\n\t\tthis.filteredItems = [];\n\t\tconst filters = {\n\t\t\ttype: {\n\t\t\t\tlabel: 'Type',\n\t\t\t\tmode: 'select',\n\t\t\t\toptions: [{\n\t\t\t\t\tlabel: 'Event',\n\t\t\t\t\tvalue: 'event',\n\t\t\t\t}, {\n\t\t\t\t\tlabel: 'Picture',\n\t\t\t\t\tvalue: 'picture',\n\t\t\t\t}, {\n\t\t\t\t\tlabel: 'Product',\n\t\t\t\t\tvalue: 'product',\n\t\t\t\t}, {\n\t\t\t\t\tlabel: 'Magazine',\n\t\t\t\t\tvalue: 'magazine',\n\t\t\t\t}]\n\t\t\t},\n\t\t};\n\t\tconst filterService = this.filterService = new FilterService(filters, {}, (key, filter) => {\n\t\t\tswitch (key) {\n\t\t\t\tcase 'type':\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\treturn item.type === value;\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'tag':\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\treturn item.tags.indexOf(value) !== -1;\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\treturn item.features.indexOf(value) !== -1;\n\t\t\t\t\t};\n\t\t\t}\n\t\t});\n\t\tthis.filters = filterService.filters;\n\t\tthis.load$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe(data => {\n\t\t\tthis.channels = data[0];\n\t\t\tthis.channel = data[1];\n\t\t\tthis.listing = data[2];\n\t\t\tthis.startFilter(this.listing);\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tload$() {\n\t\tconst channelId = LocationService.get('channelId');\n\t\treturn combineLatest(\n\t\t\tChannelService.channels$(),\n\t\t\tChannelService.detail$(channelId),\n\t\t\tChannelService.listing$(channelId),\n\t\t);\n\t}\n\n\tstartFilter(items) {\n\t\tthis.filterService.items$(items).pipe(\n\t\t\ttakeUntil(this.unsubscribe$),\n\t\t).subscribe(filteredItems => {\n\t\t\tthis.filteredItems = [];\n\t\t\tthis.pushChanges();\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.filteredItems = filteredItems;\n\t\t\t\tthis.pushChanges();\n\t\t\t}, 1);\n\t\t\tconsole.log('ChannelPageComponent.filteredItems', filteredItems.length);\n\t\t});\n\t}\n\n\ttoggleGrid() {\n\t\tthis.grid.width = this.grid.width === 350 ? 700 : 350;\n\t\tthis.pushChanges();\n\t}\n\n}\n\nChannelPageComponent.meta = {\n\tselector: '[channel-page]',\n};\n","import { Component } from 'rxcomp';\nimport { first } from 'rxjs/operators';\nimport ChannelService from './channel.service';\n\nexport default class ChannelComponent extends Component {\n\n\ttoggleSubscribe() {\n\t\tlet flag = this.channel.info.subscribed;\n\t\tChannelService[flag ? 'unsubscribe$' : 'subscribe$'](this.channel.id).pipe(\n\t\t\tfirst()\n\t\t).subscribe(() => {\n\t\t\tflag = !flag;\n\t\t\tthis.channel.info.subscribed = flag;\n\t\t\tif (flag) {\n\t\t\t\tthis.channel.info.subscribers++;\n\t\t\t} else {\n\t\t\t\tthis.channel.info.subscribers--;\n\t\t\t}\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\ttoggleLike() {\n\t\tlet flag = this.channel.info.liked;\n\t\tChannelService[flag ? 'unlike$' : 'like$'](this.channel.id).pipe(\n\t\t\tfirst()\n\t\t).subscribe(() => {\n\t\t\tflag = !flag;\n\t\t\tthis.channel.info.liked = flag;\n\t\t\tif (flag) {\n\t\t\t\tthis.channel.info.likes++;\n\t\t\t} else {\n\t\t\t\tthis.channel.info.likes--;\n\t\t\t}\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n}\n\nChannelComponent.meta = {\n\tselector: '[channel]',\n\tinputs: ['channel']\n};\n","import { Pipe } from \"rxcomp\";\n\nexport default class CountPipe extends Pipe {\n\n\tstatic isNumber(value) {\n\t\treturn typeof value === 'number' && isFinite(value);\n\t}\n\n\tstatic transform(value) {\n\t\tif (!CountPipe.isNumber(value)) {\n\t\t\treturn value;\n\t\t}\n\t\tvalue = parseInt(value);\n\t\tlet count = '';\n\t\tif (value > 1000000) {\n\t\t\tvalue = Math.floor(value / 100000) / 10;\n\t\t\tcount = value + 'M';\n\t\t} else if (value > 1000) {\n\t\t\tvalue = Math.floor(value / 100) / 10;\n\t\t\tcount = value + 'k';\n\t\t} else {\n\t\t\treturn value;\n\t\t}\n\t\treturn count;\n\t}\n\n}\n\nCountPipe.meta = {\n\tname: 'count',\n};\n","import { Pipe } from \"rxcomp\";\r\n\r\nconst DATE_FORMATS_SPLIT = /((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\\s\\S]*)/;\r\nconst NUMBER_STRING = /^-?\\d+$/;\r\nconst R_ISO8601_STR = /^(\\d{4})-?(\\d\\d)-?(\\d\\d)(?:T(\\d\\d)(?::?(\\d\\d)(?::?(\\d\\d)(?:\\.(\\d+))?)?)?(Z|([+-])(\\d\\d):?(\\d\\d))?)?$/;\r\nconst ALL_COLONS = /:/g;\r\nconst ZERO_CHAR = '0';\r\n\r\n// dateFilter.$inject = ['$locale'];\r\n\r\nconst DATETIME_FORMATS_EN_US = {\r\n\t\"AMPMS\": [\r\n      \"AM\",\r\n      \"PM\"\r\n    ],\r\n\t\"DAY\": [\r\n      \"Sunday\",\r\n      \"Monday\",\r\n      \"Tuesday\",\r\n      \"Wednesday\",\r\n      \"Thursday\",\r\n      \"Friday\",\r\n      \"Saturday\"\r\n    ],\r\n\t\"MONTH\": [\r\n      \"January\",\r\n      \"February\",\r\n      \"March\",\r\n      \"April\",\r\n      \"May\",\r\n      \"June\",\r\n      \"July\",\r\n      \"August\",\r\n      \"September\",\r\n      \"October\",\r\n      \"November\",\r\n      \"December\"\r\n    ],\r\n\t\"SHORTDAY\": [\r\n      \"Sun\",\r\n      \"Mon\",\r\n      \"Tue\",\r\n      \"Wed\",\r\n      \"Thu\",\r\n      \"Fri\",\r\n      \"Sat\"\r\n    ],\r\n\t\"SHORTMONTH\": [\r\n      \"Jan\",\r\n      \"Feb\",\r\n      \"Mar\",\r\n      \"Apr\",\r\n      \"May\",\r\n      \"Jun\",\r\n      \"Jul\",\r\n      \"Aug\",\r\n      \"Sep\",\r\n      \"Oct\",\r\n      \"Nov\",\r\n      \"Dec\"\r\n    ],\r\n\t\"fullDate\": \"EEEE, MMMM d, y\",\r\n\t\"longDate\": \"MMMM d, y\",\r\n\t\"medium\": \"MMM d, y h:mm:ss a\",\r\n\t\"mediumDate\": \"MMM d, y\",\r\n\t\"mediumTime\": \"h:mm:ss a\",\r\n\t\"short\": \"M/d/yy h:mm a\",\r\n\t\"shortDate\": \"M/d/yy\",\r\n\t\"shortTime\": \"h:mm a\"\r\n};\r\n\r\nconst DATETIME_FORMATS_IT_IT = {\r\n\t\"AMPMS\": [\r\n      \"AM\",\r\n      \"PM\"\r\n    ],\r\n\t\"DAY\": [\r\n      \"domenica\",\r\n      \"luned\\u00ec\",\r\n      \"marted\\u00ec\",\r\n      \"mercoled\\u00ec\",\r\n      \"gioved\\u00ec\",\r\n      \"venerd\\u00ec\",\r\n      \"sabato\"\r\n    ],\r\n\t\"MONTH\": [\r\n      \"gennaio\",\r\n      \"febbraio\",\r\n      \"marzo\",\r\n      \"aprile\",\r\n      \"maggio\",\r\n      \"giugno\",\r\n      \"luglio\",\r\n      \"agosto\",\r\n      \"settembre\",\r\n      \"ottobre\",\r\n      \"novembre\",\r\n      \"dicembre\"\r\n    ],\r\n\t\"SHORTDAY\": [\r\n      \"dom\",\r\n      \"lun\",\r\n      \"mar\",\r\n      \"mer\",\r\n      \"gio\",\r\n      \"ven\",\r\n      \"sab\"\r\n    ],\r\n\t\"SHORTMONTH\": [\r\n      \"gen\",\r\n      \"feb\",\r\n      \"mar\",\r\n      \"apr\",\r\n      \"mag\",\r\n      \"giu\",\r\n      \"lug\",\r\n      \"ago\",\r\n      \"set\",\r\n      \"ott\",\r\n      \"nov\",\r\n      \"dic\"\r\n    ],\r\n\t\"fullDate\": \"EEEE d MMMM y\",\r\n\t\"longDate\": \"dd MMMM y\",\r\n\t\"medium\": \"dd/MMM/y HH:mm:ss\",\r\n\t\"mediumDate\": \"dd/MMM/y\",\r\n\t\"mediumTime\": \"HH:mm:ss\",\r\n\t\"short\": \"dd/MM/yy HH:mm\",\r\n\t\"shortDate\": \"dd/MM/yy\",\r\n\t\"shortTime\": \"HH:mm\"\r\n};\r\n\r\nexport default class DatePipe extends Pipe {\r\n\r\n\tstatic isNumber(value) {\r\n\t\treturn typeof value === 'number' && isFinite(value);\r\n\t}\r\n\r\n\tstatic padNumber(num, digits, trim, negWrap) {\r\n\t\tvar neg = '';\r\n\t\tif (num < 0 || (negWrap && num <= 0)) {\r\n\t\t\tif (negWrap) {\r\n\t\t\t\tnum = -num + 1;\r\n\t\t\t} else {\r\n\t\t\t\tnum = -num;\r\n\t\t\t\tneg = '-';\r\n\t\t\t}\r\n\t\t}\r\n\t\tnum = '' + num;\r\n\t\twhile (num.length < digits) num = ZERO_CHAR + num;\r\n\t\tif (trim) {\r\n\t\t\tnum = num.substr(num.length - digits);\r\n\t\t}\r\n\t\treturn neg + num;\r\n\t}\r\n\r\n\tstatic dateGetter(name, size, offset, trim, negWrap) {\r\n\t\toffset = offset || 0;\r\n\t\treturn function(date) {\r\n\t\t\tvar value = date['get' + name]();\r\n\t\t\tif (offset > 0 || value > -offset) {\r\n\t\t\t\tvalue += offset;\r\n\t\t\t}\r\n\t\t\tif (value === 0 && offset === -12) value = 12;\r\n\t\t\treturn DatePipe.padNumber(value, size, trim, negWrap);\r\n\t\t};\r\n\t}\r\n\r\n\tstatic dateStrGetter(name, shortForm, standAlone) {\r\n\t\treturn function(date, formats) {\r\n\t\t\tvar value = date['get' + name]();\r\n\t\t\tvar propPrefix = (standAlone ? 'STANDALONE' : '') + (shortForm ? 'SHORT' : '');\r\n\t\t\tvar get = (propPrefix + name).toUpperCase();\r\n\t\t\treturn formats[get][value];\r\n\t\t};\r\n\t}\r\n\r\n\tstatic timeZoneGetter(date, formats, offset) {\r\n\t\tvar zone = -1 * offset;\r\n\t\tvar paddedZone = (zone >= 0) ? '+' : '';\r\n\t\tpaddedZone += DatePipe.padNumber(Math[zone > 0 ? 'floor' : 'ceil'](zone / 60), 2) + DatePipe.padNumber(Math.abs(zone % 60), 2);\r\n\t\treturn paddedZone;\r\n\t}\r\n\r\n\tstatic getFirstThursdayOfYear(year) {\r\n\t\t// 0 = index of January\r\n\t\tvar dayOfWeekOnFirst = (new Date(year, 0, 1)).getDay();\r\n\t\t// 4 = index of Thursday (+1 to account for 1st = 5)\r\n\t\t// 11 = index of *next* Thursday (+1 account for 1st = 12)\r\n\t\treturn new Date(year, 0, ((dayOfWeekOnFirst <= 4) ? 5 : 12) - dayOfWeekOnFirst);\r\n\t}\r\n\r\n\tstatic getThursdayThisWeek(datetime) {\r\n\t\treturn new Date(datetime.getFullYear(), datetime.getMonth(), datetime.getDate() + (4 - datetime.getDay())); // 4 = index of Thursday\r\n\t}\r\n\r\n\tstatic weekGetter(size) {\r\n\t\treturn function(date) {\r\n\t\t\tvar firstThurs = DatePipe.getFirstThursdayOfYear(date.getFullYear()),\r\n\t\t\t\tthisThurs = DatePipe.getThursdayThisWeek(date);\r\n\t\t\tvar diff = +thisThurs - +firstThurs,\r\n\t\t\t\tresult = 1 + Math.round(diff / 6.048e8); // 6.048e8 ms per week\r\n\t\t\treturn padNumber(result, size);\r\n\t\t};\r\n\t}\r\n\r\n\tstatic ampmGetter(date, formats) {\r\n\t\treturn date.getHours() < 12 ? formats.AMPMS[0] : formats.AMPMS[1];\r\n\t}\r\n\r\n\tstatic eraGetter(date, formats) {\r\n\t\treturn date.getFullYear() <= 0 ? formats.ERAS[0] : formats.ERAS[1];\r\n\t}\r\n\r\n\tstatic longEraGetter(date, formats) {\r\n\t\treturn date.getFullYear() <= 0 ? formats.ERANAMES[0] : formats.ERANAMES[1];\r\n\t}\r\n\r\n\tstatic jsonStringToDate(string) {\r\n\t\tlet match;\r\n\t\tif ((match = string.match(R_ISO8601_STR))) {\r\n\t\t\tlet tzHour = 0;\r\n\t\t\tlet tzMin = 0;\r\n\t\t\tif (match[9]) {\r\n\t\t\t\ttzHour = parseInt(match[9] + match[10]);\r\n\t\t\t\ttzMin = parseInt(match[9] + match[11]);\r\n\t\t\t}\r\n\t\t\tconst date = new Date(0);\r\n\t\t\tconst dateSetter = match[8] ? date.setUTCFullYear : date.setFullYear;\r\n\t\t\tconst timeSetter = match[8] ? date.setUTCHours : date.setHours;\r\n\t\t\tdateSetter.call(date, parseInt(match[1]), parseInt(match[2]) - 1, parseInt(match[3]));\r\n\t\t\tconst h = parseInt(match[4] || 0) - tzHour;\r\n\t\t\tconst m = parseInt(match[5] || 0) - tzMin;\r\n\t\t\tconst s = parseInt(match[6] || 0);\r\n\t\t\tconst ms = Math.round(parseFloat('0.' + (match[7] || 0)) * 1000);\r\n\t\t\ttimeSetter.call(date, h, m, s, ms);\r\n\t\t\treturn date;\r\n\t\t}\r\n\t\treturn string;\r\n\t}\r\n\r\n\tstatic timezoneToOffset(timezone, fallback) {\r\n\t\t// Support: IE 9-11 only, Edge 13-15+\r\n\t\t// IE/Edge do not \"understand\" colon (`:`) in timezone\r\n\t\ttimezone = timezone.replace(ALL_COLONS, '');\r\n\t\tvar requestedTimezoneOffset = Date.parse('Jan 01, 1970 00:00:00 ' + timezone) / 60000;\r\n\t\treturn Number.isNaN(requestedTimezoneOffset) ? fallback : requestedTimezoneOffset;\r\n\t}\r\n\r\n\tstatic addDateMinutes(date, minutes) {\r\n\t\tdate = new Date(date.getTime());\r\n\t\tdate.setMinutes(date.getMinutes() + minutes);\r\n\t\treturn date;\r\n\t}\r\n\r\n\tstatic convertTimezoneToLocal(date, timezone, reverse) {\r\n\t\treverse = reverse ? -1 : 1;\r\n\t\tvar dateTimezoneOffset = date.getTimezoneOffset();\r\n\t\tvar timezoneOffset = DatePipe.timezoneToOffset(timezone, dateTimezoneOffset);\r\n\t\treturn DatePipe.addDateMinutes(date, reverse * (timezoneOffset - dateTimezoneOffset));\r\n\t}\r\n\r\n\tstatic transform_(value, locale = 'it-IT-u-ca-gregory', options = {\r\n\t\tdateStyle: 'short',\r\n\t\ttimeStyle: 'short',\r\n\t}) {\r\n\t\tconst localeDateString = new Date(value).toLocaleDateString(locale, options);\r\n\t\treturn localeDateString;\r\n\t}\r\n\r\n\tstatic transform(date, format, timezone) {\r\n\t\tlet text = '',\r\n\t\t\tmatch;\r\n\t\tlet parts = [];\r\n\t\tformat = format || 'mediumDate';\r\n\t\tformat = DatePipe.DATETIME_FORMATS[format] || format;\r\n\t\tif (typeof date === 'string') {\r\n\t\t\tdate = NUMBER_STRING.test(date) ? parseInt(date) : DatePipe.jsonStringToDate(date);\r\n\t\t}\r\n\t\tif (DatePipe.isNumber(date)) {\r\n\t\t\tdate = new Date(date);\r\n\t\t}\r\n\t\tif (!(date instanceof Date) || !isFinite(date.getTime())) {\r\n\t\t\treturn date;\r\n\t\t}\r\n\t\twhile (format) {\r\n\t\t\tmatch = DATE_FORMATS_SPLIT.exec(format);\r\n\t\t\tif (match) {\r\n\t\t\t\t// parts = concat(parts, match, 1);\r\n\t\t\t\tparts = parts.concat(match.slice(1));\r\n\t\t\t\tformat = parts.pop();\r\n\t\t\t} else {\r\n\t\t\t\tparts.push(format);\r\n\t\t\t\tformat = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet dateTimezoneOffset = date.getTimezoneOffset();\r\n\t\tif (timezone) {\r\n\t\t\tdateTimezoneOffset = DatePipe.timezoneToOffset(timezone, dateTimezoneOffset);\r\n\t\t\tdate = DatePipe.convertTimezoneToLocal(date, timezone, true);\r\n\t\t}\r\n\t\tparts.forEach(function(value) {\r\n\t\t\tconst formatter = DatePipe.DATE_FORMATS[value];\r\n\t\t\ttext += formatter ? formatter(date, DatePipe.DATETIME_FORMATS, dateTimezoneOffset) : value === '\\'\\'' ? '\\'' : value.replace(/(^'|'$)/g, '').replace(/''/g, '\\'');\r\n\t\t});\r\n\t\treturn text;\r\n\t}\r\n\r\n}\r\n\r\nDatePipe.DATE_FORMATS = {\r\n\tyyyy: DatePipe.dateGetter('FullYear', 4, 0, false, true),\r\n\tyy: DatePipe.dateGetter('FullYear', 2, 0, true, true),\r\n\ty: DatePipe.dateGetter('FullYear', 1, 0, false, true),\r\n\tMMMM: DatePipe.dateStrGetter('Month'),\r\n\tMMM: DatePipe.dateStrGetter('Month', true),\r\n\tMM: DatePipe.dateGetter('Month', 2, 1),\r\n\tM: DatePipe.dateGetter('Month', 1, 1),\r\n\tLLLL: DatePipe.dateStrGetter('Month', false, true),\r\n\tdd: DatePipe.dateGetter('Date', 2),\r\n\td: DatePipe.dateGetter('Date', 1),\r\n\tHH: DatePipe.dateGetter('Hours', 2),\r\n\tH: DatePipe.dateGetter('Hours', 1),\r\n\thh: DatePipe.dateGetter('Hours', 2, -12),\r\n\th: DatePipe.dateGetter('Hours', 1, -12),\r\n\tmm: DatePipe.dateGetter('Minutes', 2),\r\n\tm: DatePipe.dateGetter('Minutes', 1),\r\n\tss: DatePipe.dateGetter('Seconds', 2),\r\n\ts: DatePipe.dateGetter('Seconds', 1),\r\n\t// while ISO 8601 requires fractions to be prefixed with `.` or `,`\r\n\t// we can be just safely rely on using `sss` since we currently don't support single or two digit fractions\r\n\tsss: DatePipe.dateGetter('Milliseconds', 3),\r\n\tEEEE: DatePipe.dateStrGetter('Day'),\r\n\tEEE: DatePipe.dateStrGetter('Day', true),\r\n\ta: DatePipe.ampmGetter,\r\n\tZ: DatePipe.timeZoneGetter,\r\n\tww: DatePipe.weekGetter(2),\r\n\tw: DatePipe.weekGetter(1),\r\n\tG: DatePipe.eraGetter,\r\n\tGG: DatePipe.eraGetter,\r\n\tGGG: DatePipe.eraGetter,\r\n\tGGGG: DatePipe.longEraGetter\r\n};\r\n\r\nDatePipe.DATETIME_FORMATS = DATETIME_FORMATS_IT_IT;\r\n\r\nDatePipe.meta = {\r\n\tname: 'date',\r\n};\r\n\r\n/**\r\n   *   Formats `date` to a string based on the requested `format`.\r\n   *\r\n   *   `format` string can be composed of the following elements:\r\n   *\r\n   *   * `'yyyy'`: 4 digit representation of year (e.g. AD 1 => 0001, AD 2010 => 2010)\r\n   *   * `'yy'`: 2 digit representation of year, padded (00-99). (e.g. AD 2001 => 01, AD 2010 => 10)\r\n   *   * `'y'`: 1 digit representation of year, e.g. (AD 1 => 1, AD 199 => 199)\r\n   *   * `'MMMM'`: Month in year (January-December)\r\n   *   * `'MMM'`: Month in year (Jan-Dec)\r\n   *   * `'MM'`: Month in year, padded (01-12)\r\n   *   * `'M'`: Month in year (1-12)\r\n   *   * `'LLLL'`: Stand-alone month in year (January-December)\r\n   *   * `'dd'`: Day in month, padded (01-31)\r\n   *   * `'d'`: Day in month (1-31)\r\n   *   * `'EEEE'`: Day in Week,(Sunday-Saturday)\r\n   *   * `'EEE'`: Day in Week, (Sun-Sat)\r\n   *   * `'HH'`: Hour in day, padded (00-23)\r\n   *   * `'H'`: Hour in day (0-23)\r\n   *   * `'hh'`: Hour in AM/PM, padded (01-12)\r\n   *   * `'h'`: Hour in AM/PM, (1-12)\r\n   *   * `'mm'`: Minute in hour, padded (00-59)\r\n   *   * `'m'`: Minute in hour (0-59)\r\n   *   * `'ss'`: Second in minute, padded (00-59)\r\n   *   * `'s'`: Second in minute (0-59)\r\n   *   * `'sss'`: Millisecond in second, padded (000-999)\r\n   *   * `'a'`: AM/PM marker\r\n   *   * `'Z'`: 4 digit (+sign) representation of the timezone offset (-1200-+1200)\r\n   *   * `'ww'`: Week of year, padded (00-53). Week 01 is the week with the first Thursday of the year\r\n   *   * `'w'`: Week of year (0-53). Week 1 is the week with the first Thursday of the year\r\n   *   * `'G'`, `'GG'`, `'GGG'`: The abbreviated form of the era string (e.g. 'AD')\r\n   *   * `'GGGG'`: The long form of the era string (e.g. 'Anno Domini')\r\n   *\r\n   *   `format` string can also be one of the following predefined\r\n   *   {@link guide/i18n localizable formats}:\r\n   *\r\n   *   * `'medium'`: equivalent to `'MMM d, y h:mm:ss a'` for en_US locale\r\n   *     (e.g. Sep 3, 2010 12:05:08 PM)\r\n   *   * `'short'`: equivalent to `'M/d/yy h:mm a'` for en_US  locale (e.g. 9/3/10 12:05 PM)\r\n   *   * `'fullDate'`: equivalent to `'EEEE, MMMM d, y'` for en_US  locale\r\n   *     (e.g. Friday, September 3, 2010)\r\n   *   * `'longDate'`: equivalent to `'MMMM d, y'` for en_US  locale (e.g. September 3, 2010)\r\n   *   * `'mediumDate'`: equivalent to `'MMM d, y'` for en_US  locale (e.g. Sep 3, 2010)\r\n   *   * `'shortDate'`: equivalent to `'M/d/yy'` for en_US locale (e.g. 9/3/10)\r\n   *   * `'mediumTime'`: equivalent to `'h:mm:ss a'` for en_US locale (e.g. 12:05:08 PM)\r\n   *   * `'shortTime'`: equivalent to `'h:mm a'` for en_US locale (e.g. 12:05 PM)\r\n   *\r\n   *   `format` string can contain literal values. These need to be escaped by surrounding with single quotes (e.g.\r\n   *   `\"h 'in the morning'\"`). In order to output a single quote, escape it - i.e., two single quotes in a sequence\r\n   *   (e.g. `\"h 'o''clock'\"`).\r\n   *\r\n   *   Any other characters in the `format` string will be output as-is.\r\n   *\r\n   * @param {(Date|number|string)} date Date to format either as Date object, milliseconds (string or\r\n   *    number) or various ISO 8601 datetime string formats (e.g. yyyy-MM-ddTHH:mm:ss.sssZ and its\r\n   *    shorter versions like yyyy-MM-ddTHH:mmZ, yyyy-MM-dd or yyyyMMddTHHmmssZ). If no timezone is\r\n   *    specified in the string input, the time is considered to be in the local timezone.\r\n   * @param {string=} format Formatting rules (see Description). If not specified,\r\n   *    `mediumDate` is used.\r\n   * @param {string=} timezone Timezone to be used for formatting. It understands UTC/GMT and the\r\n   *    continental US time zone abbreviations, but for general use, use a time zone offset, for\r\n   *    example, `'+0430'` (4 hours, 30 minutes east of the Greenwich meridian)\r\n   *    If not specified, the timezone of the browser will be used.\r\n   * @returns {string} Formatted string or the input if input is not recognized as date/millis.\r\n   *\r\n   * @example\r\n\t <example name=\"filter-date\">\r\n\t   <file name=\"index.html\">\r\n\t\t <span ng-non-bindable>{{1288323623006 | date:'medium'}}</span>:\r\n\t\t\t <span>{{1288323623006 | date:'medium'}}</span><br>\r\n\t\t <span ng-non-bindable>{{1288323623006 | date:'yyyy-MM-dd HH:mm:ss Z'}}</span>:\r\n\t\t\t<span>{{1288323623006 | date:'yyyy-MM-dd HH:mm:ss Z'}}</span><br>\r\n\t\t <span ng-non-bindable>{{1288323623006 | date:'MM/dd/yyyy @ h:mma'}}</span>:\r\n\t\t\t<span>{{'1288323623006' | date:'MM/dd/yyyy @ h:mma'}}</span><br>\r\n\t\t <span ng-non-bindable>{{1288323623006 | date:\"MM/dd/yyyy 'at' h:mma\"}}</span>:\r\n\t\t\t<span>{{'1288323623006' | date:\"MM/dd/yyyy 'at' h:mma\"}}</span><br>\r\n\t   </file>\r\n\t   <file name=\"protractor.js\" type=\"protractor\">\r\n\t\t it('should format date', function() {\r\n\t\t   expect(element(by.binding(\"1288323623006 | date:'medium'\")).getText()).\r\n\t\t\t  toMatch(/Oct 2\\d, 2010 \\d{1,2}:\\d{2}:\\d{2} (AM|PM)/);\r\n\t\t   expect(element(by.binding(\"1288323623006 | date:'yyyy-MM-dd HH:mm:ss Z'\")).getText()).\r\n\t\t\t  toMatch(/2010-10-2\\d \\d{2}:\\d{2}:\\d{2} (-|\\+)?\\d{4}/);\r\n\t\t   expect(element(by.binding(\"'1288323623006' | date:'MM/dd/yyyy @ h:mma'\")).getText()).\r\n\t\t\t  toMatch(/10\\/2\\d\\/2010 @ \\d{1,2}:\\d{2}(AM|PM)/);\r\n\t\t   expect(element(by.binding(\"'1288323623006' | date:\\\"MM/dd/yyyy 'at' h:mma\\\"\")).getText()).\r\n\t\t\t  toMatch(/10\\/2\\d\\/2010 at \\d{1,2}:\\d{2}(AM|PM)/);\r\n\t\t });\r\n\t   </file>\r\n\t </example>\r\n   */\r\n","import { Directive, getContext } from \"rxcomp\";\r\nimport { BehaviorSubject } from \"rxjs\";\r\nimport { takeUntil } from \"rxjs/operators\";\r\n\r\nlet DROPDOWN_ID = 1000000;\r\n\r\nexport default class DropdownDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this.dropdown || this.id_ || (this.id_ = DropdownDirective.nextId());\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst trigger = node.getAttribute('dropdown-trigger');\r\n\t\tthis.trigger = trigger ? node.querySelector(trigger) : node;\r\n\t\tthis.opened = null;\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t\tthis.onDocumentClick = this.onDocumentClick.bind(this);\r\n\t\tthis.openDropdown = this.openDropdown.bind(this);\r\n\t\tthis.closeDropdown = this.closeDropdown.bind(this);\r\n\t\tthis.addListeners();\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.openDropdown();\r\n\t\t} else {\r\n\t\t\tconst dropdownItemNode = node.querySelector('[dropdown-item]');\r\n\t\t\t// console.log('dropdownItemNode', dropdownItemNode);\r\n\t\t\tif (!dropdownItemNode) { // if (this.trigger !== node) {\r\n\t\t\t\tthis.closeDropdown();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDocumentClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst clickedInside = node === event.target || node.contains(event.target);\r\n\t\tif (!clickedInside) {\r\n\t\t\tthis.closeDropdown();\r\n\t\t}\r\n\t}\r\n\r\n\topenDropdown() {\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.opened = true;\r\n\t\t\tthis.addDocumentListeners();\r\n\t\t\tDropdownDirective.dropdown$.next(this.id);\r\n\t\t\tthis.dropped.next(this.id);\r\n\t\t}\r\n\t}\r\n\r\n\tcloseDropdown() {\r\n\t\tif (this.opened !== null) {\r\n\t\t\tthis.removeDocumentListeners();\r\n\t\t\tthis.opened = null;\r\n\t\t\tif (DropdownDirective.dropdown$.getValue() === this.id) {\r\n\t\t\t\tDropdownDirective.dropdown$.next(null);\r\n\t\t\t\tthis.dropped.next(null);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tthis.trigger.addEventListener('click', this.onClick);\r\n\t}\r\n\r\n\taddDocumentListeners() {\r\n\t\tdocument.addEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tthis.trigger.removeEventListener('click', this.onClick);\r\n\t}\r\n\r\n\tremoveDocumentListeners() {\r\n\t\tdocument.removeEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t\tthis.removeDocumentListeners();\r\n\t}\r\n\r\n\tstatic nextId() {\r\n\t\treturn DROPDOWN_ID++;\r\n\t}\r\n\r\n}\r\n\r\nDropdownDirective.meta = {\r\n\tselector: '[dropdown]',\r\n\tinputs: ['dropdown', 'dropdown-trigger'],\r\n\toutputs: ['dropped']\r\n};\r\n\r\nDropdownDirective.dropdown$ = new BehaviorSubject(null);\r\n","import { Directive, getContext } from \"rxcomp\";\r\nimport { takeUntil } from \"rxjs/operators\";\r\nimport DropdownDirective from \"./dropdown.directive\";\r\n\r\nexport default class DropdownItemDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this['dropdown-item'];\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('dropdown-item');\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownItemDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nDropdownItemDirective.meta = {\r\n\tselector: '[dropdown-item], [[dropdown-item]]',\r\n\tinputs: ['dropdown-item']\r\n};\r\n","import { Component } from 'rxcomp';\nimport { interval, Subject } from 'rxjs';\nimport { startWith, takeUntil, tap } from 'rxjs/operators';\n\nexport const EventDateMode = {\n\tLive: 'live',\n\tCountdown: 'countdown',\n\tWatchRelative: 'watchRelative',\n\tRelative: 'relative',\n\tDate: 'date',\n};\n\nconst SECOND = 1000;\nconst MINUTE = SECOND * 60;\nconst HOUR = MINUTE * 60;\n\nconst to10 = (value) => {\n\treturn (value < 10) ? '0' + value : value;\n};\n\nexport default class EventDateComponent extends Component {\n\n\tget mode() {\n\t\treturn this.mode_;\n\t}\n\n\tset mode(mode) {\n\t\tif (this.mode_ !== mode) {\n\t\t\tthis.mode_ = mode;\n\t\t\tthis.change.next(this.eventDate);\n\t\t}\n\t}\n\n\tstatic hoursDiff(date) {\n\t\tconst now = new Date();\n\t\tconst diff = date - now;\n\t\tconst hoursDiff = Math.abs(Math.floor(diff / 1000 / 60 / 60));\n\t\treturn hoursDiff;\n\t}\n\n\tstatic getMode(item) {\n\t\tif (!item.past && !item.info.started) {\n\t\t\tconst now = new Date();\n\t\t\tif (now > item.startDate) {\n\t\t\t\titem.info.started = true;\n\t\t\t}\n\t\t}\n\t\tif (item.live) {\n\t\t\treturn EventDateMode.Live;\n\t\t} else if (item.incoming) {\n\t\t\treturn EventDateMode.Countdown;\n\t\t}\n\t\tconst hoursDiff = EventDateComponent.hoursDiff(item.startDate);\n\t\tif (item.past && hoursDiff < 24) {\n\t\t\treturn EventDateMode.WatchRelative;\n\t\t} else if (hoursDiff < 24 * 14) {\n\t\t\treturn EventDateMode.Relative;\n\t\t} else {\n\t\t\treturn EventDateMode.Date;\n\t\t}\n\t}\n\n\tonInit() {\n\t\tthis.mode_ = EventDateComponent.getMode(this.eventDate);\n\t\tthis.countdown = '';\n\t\tthis.live$ = new Subject();\n\t\tthis.change$().pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe(() => {\n\t\t\tthis.mode = EventDateComponent.getMode(this.eventDate);\n\t\t\tif (this.mode === EventDateMode.Countdown || this.mode === EventDateMode.WatchRelative) {\n\t\t\t\tthis.pushChanges();\n\t\t\t}\n\t\t});\n\t}\n\n\t/*\n\tonChange() {\n\t\tthis.mode = EventDateComponent.getMode(this.eventDate);\n\t}\n\t*/\n\n\tchange$() {\n\t\treturn interval(1000).pipe(\n\t\t\ttakeUntil(this.live$),\n\t\t\tstartWith(0),\n\t\t\ttap(() => {\n\t\t\t\tif (this.mode === EventDateMode.Countdown) {\n\t\t\t\t\tlet diff = this.eventDate.startDate - new Date();\n\t\t\t\t\tconst hh = Math.floor(diff / HOUR);\n\t\t\t\t\tdiff -= hh * HOUR;\n\t\t\t\t\tconst mm = Math.floor(diff / MINUTE);\n\t\t\t\t\tdiff -= mm * MINUTE;\n\t\t\t\t\tconst ss = Math.floor(diff / SECOND);\n\t\t\t\t\tdiff -= ss * SECOND;\n\t\t\t\t\tthis.countdown = `-${to10(hh)}:${to10(mm)}:${to10(ss)}`;\n\t\t\t\t\tif (diff < 0) {\n\t\t\t\t\t\tthis.eventDate.info.started = true;\n\t\t\t\t\t\t// this.live$.next();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n\n}\n\nEventDateComponent.meta = {\n\tselector: '[eventDate]',\n\toutputs: ['change'],\n\tinputs: ['eventDate']\n};\n","import { combineLatest } from 'rxjs';\nimport { first, takeUntil } from 'rxjs/operators';\nimport FilterService from '../filter/filter.service';\nimport LocationService from '../location/location.service';\nimport PageComponent from '../page/page.component';\nimport { User } from '../user/user.service';\nimport EventService from './event.service';\n\nexport default class EventPageComponent extends PageComponent {\n\n\tonInit() {\n\t\tthis.user = new User({\n\t\t\tfirstName: 'Sergio',\n\t\t\tlastName: 'Arcuri'\n\t\t});\n\t\tconsole.log(this.user);\n\t\tthis.event = this.listing = null;\n\t\tthis.grid = {\n\t\t\tmode: 1,\n\t\t\twidth: 350,\n\t\t\tgutter: 2,\n\t\t};\n\t\tthis.filteredItems = [];\n\t\tconst filters = {\n\t\t\ttype: {\n\t\t\t\tlabel: 'Type',\n\t\t\t\tmode: 'select',\n\t\t\t\toptions: [{\n\t\t\t\t\tlabel: 'Event',\n\t\t\t\t\tvalue: 'event',\n\t\t\t\t}, {\n\t\t\t\t\tlabel: 'Picture',\n\t\t\t\t\tvalue: 'picture',\n\t\t\t\t}, {\n\t\t\t\t\tlabel: 'Product',\n\t\t\t\t\tvalue: 'product',\n\t\t\t\t}, {\n\t\t\t\t\tlabel: 'Magazine',\n\t\t\t\t\tvalue: 'magazine',\n\t\t\t\t}]\n\t\t\t},\n\t\t};\n\t\tconst filterService = this.filterService = new FilterService(filters, {}, (key, filter) => {\n\t\t\tswitch (key) {\n\t\t\t\tcase 'type':\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\treturn item.type === value;\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'tag':\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\treturn item.tags.indexOf(value) !== -1;\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\treturn item.features.indexOf(value) !== -1;\n\t\t\t\t\t};\n\t\t\t}\n\t\t});\n\t\tthis.filters = filterService.filters;\n\t\tthis.load$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe(data => {\n\t\t\tthis.event = data[0];\n\t\t\tthis.listing = data[1];\n\t\t\tthis.startFilter(this.listing);\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tload$() {\n\t\tconst eventId = LocationService.get('eventId');\n\t\treturn combineLatest(\n\t\t\tEventService.detail$(eventId),\n\t\t\tEventService.listing$(eventId),\n\t\t);\n\t}\n\n\tstartFilter(items) {\n\t\tthis.filterService.items$(items).pipe(\n\t\t\ttakeUntil(this.unsubscribe$),\n\t\t).subscribe(filteredItems => {\n\t\t\tthis.filteredItems = [];\n\t\t\tthis.pushChanges();\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.filteredItems = filteredItems;\n\t\t\t\tthis.pushChanges();\n\t\t\t}, 1);\n\t\t\tconsole.log('EventPageComponent.filteredItems', filteredItems.length);\n\t\t});\n\t}\n\n\tonChange($event) {\n\t\tthis.pushChanges();\n\t}\n\n\ttoggleGrid() {\n\t\tthis.grid.width = this.grid.width === 350 ? 700 : 350;\n\t\tthis.pushChanges();\n\t}\n\n\ttoggleSubscribe() {\n\t\tlet flag = this.event.info.subscribed;\n\t\tEventService[flag ? 'unsubscribe$' : 'subscribe$'](this.event.id).pipe(\n\t\t\tfirst()\n\t\t).subscribe(() => {\n\t\t\tflag = !flag;\n\t\t\tthis.event.info.subscribed = flag;\n\t\t\tif (flag) {\n\t\t\t\tthis.event.info.subscribers++;\n\t\t\t} else {\n\t\t\t\tthis.event.info.subscribers--;\n\t\t\t}\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\ttoggleLike() {\n\t\tlet flag = this.event.info.liked;\n\t\tEventService[flag ? 'unlike$' : 'like$'](this.event.id).pipe(\n\t\t\tfirst()\n\t\t).subscribe(() => {\n\t\t\tflag = !flag;\n\t\t\tthis.event.info.liked = flag;\n\t\t\tif (flag) {\n\t\t\t\tthis.event.info.likes++;\n\t\t\t} else {\n\t\t\t\tthis.event.info.likes--;\n\t\t\t}\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\ttoggleSave() {\n\t\tlet flag = this.event.info.saved;\n\t\tEventService[flag ? 'unsave$' : 'save$'](this.event.id).pipe(\n\t\t\tfirst()\n\t\t).subscribe(() => {\n\t\t\tflag = !flag;\n\t\t\tthis.event.info.saves = flag;\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n}\n\nEventPageComponent.meta = {\n\tselector: '[event-page]',\n};\n","import { Component } from 'rxcomp';\nimport { first } from 'rxjs/operators';\nimport EventService from './event.service';\n\nexport default class EventComponent extends Component {\n\n\tonChange($event) {\n\t\tthis.pushChanges();\n\t}\n\n\ttoggleSubscribe() {\n\t\tlet flag = this.event.info.subscribed;\n\t\tEventService[flag ? 'unsubscribe$' : 'subscribe$'](this.event.id).pipe(\n\t\t\tfirst()\n\t\t).subscribe(() => {\n\t\t\tflag = !flag;\n\t\t\tthis.event.info.subscribed = flag;\n\t\t\tif (flag) {\n\t\t\t\tthis.event.info.subscribers++;\n\t\t\t} else {\n\t\t\t\tthis.event.info.subscribers--;\n\t\t\t}\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\ttoggleLike() {\n\t\tlet flag = this.event.info.liked;\n\t\tEventService[flag ? 'unlike$' : 'like$'](this.event.id).pipe(\n\t\t\tfirst()\n\t\t).subscribe(() => {\n\t\t\tflag = !flag;\n\t\t\tthis.event.info.liked = flag;\n\t\t\tif (flag) {\n\t\t\t\tthis.event.info.likes++;\n\t\t\t} else {\n\t\t\t\tthis.event.info.likes--;\n\t\t\t}\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\ttoggleSave() {\n\t\tlet flag = this.event.info.saved;\n\t\tEventService[flag ? 'unsave$' : 'save$'](this.event.id).pipe(\n\t\t\tfirst()\n\t\t).subscribe(() => {\n\t\t\tflag = !flag;\n\t\t\tthis.event.info.saves = flag;\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n}\n\nEventComponent.meta = {\n\tselector: '[event]',\n\tinputs: ['event']\n};\n","import { Component, getContext } from 'rxcomp';\r\n\r\nexport default class ControlComponent extends Component {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst control = this.control;\r\n\t\tconst flags = control.flags;\r\n\t\tObject.keys(flags).forEach((key) => {\r\n\t\t\tflags[key] ? node.classList.add(key) : node.classList.remove(key);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nControlComponent.meta = {\r\n\tselector: '[control]',\r\n\tinputs: ['control']\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ErrorsComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.labels = window.labels || {};\r\n\t}\r\n\r\n\tgetLabel(key, value) {\r\n\t\tconst label = this.labels[`error_${key}`];\r\n\t\treturn label;\r\n\t}\r\n\r\n}\r\n\r\nErrorsComponent.meta = {\r\n\tselector: 'errors-component',\r\n\tinputs: ['control'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"inner\" [style]=\"{ display: control.invalid && control.touched ? 'block' : 'none' }\">\r\n\t\t<div class=\"error\" *for=\"let [key, value] of control.errors\">\r\n\t\t\t<span [innerHTML]=\"getLabel(key, value)\"></span>\r\n\t\t\t<!-- <span class=\"key\" [innerHTML]=\"key\"></span> <span class=\"value\" [innerHTML]=\"value | json\"></span> -->\r\n\t\t</div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Pipe } from \"rxcomp\";\r\n\r\n/*\r\n['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n['\"', '&', ''', '<', '>', ' ', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '&', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''];\r\n*/\r\n\r\nexport default class HtmlPipe extends Pipe {\r\n\r\n\tstatic transform(value) {\r\n\t\tif (value) {\r\n\t\t\tvalue = value.replace(/&#(\\d+);/g, function(m, n) {\r\n\t\t\t\treturn String.fromCharCode(parseInt(n));\r\n\t\t\t});\r\n\t\t\tconst escapes = ['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n\t\t\tconst unescapes = ['\"', '&', '\\'', '<', '>', ' ', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '&', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''];\r\n\t\t\tconst rx = new RegExp(`(&${escapes.join(';)|(&')};)`, 'g');\r\n\t\t\tvalue = value.replace(rx, function() {\r\n\t\t\t\tfor (let i = 1; i < arguments.length; i++) {\r\n\t\t\t\t\tif (arguments[i]) {\r\n\t\t\t\t\t\t// console.log(arguments[i], unescapes[i - 1]);\r\n\t\t\t\t\t\treturn unescapes[i - 1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// console.log(value);\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nHtmlPipe.meta = {\r\n\tname: 'html',\r\n};\r\n","import { combineLatest } from 'rxjs';\nimport { first } from 'rxjs/operators';\nimport ChannelService from '../channel/channel.service';\nimport EventService from '../event/event.service';\nimport PageComponent from '../page/page.component';\n\nexport default class IndexPageComponent extends PageComponent {\n\n\tonInit() {\n\t\tthis.topEvents = this.topChannels = this.upcomingEvents = [];\n\t\tthis.load$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe(data => {\n\t\t\tthis.topEvents = data[0];\n\t\t\tthis.topChannels = data[1];\n\t\t\tthis.upcomingEvents = data[2];\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tload$() {\n\t\treturn combineLatest(\n\t\t\tEventService.top$(),\n\t\t\tChannelService.top$(),\n\t\t\tEventService.upcoming$(),\n\t\t);\n\t}\n\n}\n\nIndexPageComponent.meta = {\n\tselector: '[index-page]',\n};\n","import { fromEvent, of } from 'rxjs';\r\nimport { filter, finalize, first, map } from 'rxjs/operators';\r\nimport { STATIC } from '../environment/environment';\r\n\r\nconst PATH = STATIC ? './' : '/Client/docs/';\r\n\r\nlet UID = 0;\r\n\r\nexport default class ImageService {\r\n\r\n\tstatic worker() {\r\n\t\tif (!this.worker_) {\r\n\t\t\tthis.worker_ = new Worker(`${PATH}js/workers/image.service.worker.js`);\r\n\t\t}\r\n\t\treturn this.worker_;\r\n\t}\r\n\r\n\tstatic load$(src) {\r\n\t\t// if (!('Worker' in window) || this.isBlob(src) || this.isCors(src)) {\r\n\t\tif (!('Worker' in window) || this.isBlob(src)) {\r\n\t\t\treturn of(src);\r\n\t\t}\r\n\t\tconst id = ++UID;\r\n\t\tconst worker = this.worker();\r\n\t\tworker.postMessage({ src, id });\r\n\t\treturn fromEvent(worker, 'message').pipe(\r\n\t\t\tfilter(event => event.data.src === src),\r\n\t\t\tmap(event => {\r\n\t\t\t\tconst url = URL.createObjectURL(event.data.blob);\r\n\t\t\t\treturn url;\r\n\t\t\t}),\r\n\t\t\tfirst(),\r\n\t\t\tfinalize(url => {\r\n\t\t\t\tworker.postMessage({ id });\r\n\t\t\t\tif (url) {\r\n\t\t\t\t\tURL.revokeObjectURL(url);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic isCors(src) {\r\n\t\treturn src.indexOf('//') !== -1 && src.indexOf(window.location.host) === -1;\r\n\t}\r\n\r\n\tstatic isBlob(src) {\r\n\t\treturn src.indexOf('blob:') === 0;\r\n\t}\r\n\r\n}\r\n","import { BehaviorSubject, of , Subject } from 'rxjs';\r\nimport { filter, finalize, first, map } from 'rxjs/operators';\r\n\r\nexport default class IntersectionService {\r\n\r\n\tstatic observer() {\r\n\t\tif (!this.observer_) {\r\n\t\t\tthis.readySubject_ = new BehaviorSubject(false);\r\n\t\t\tthis.observerSubject_ = new Subject();\r\n\t\t\tthis.observer_ = new IntersectionObserver(entries => {\r\n\t\t\t\tthis.observerSubject_.next(entries);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this.observer_;\r\n\t}\r\n\r\n\tstatic intersection$(node) {\r\n\t\tif ('IntersectionObserver' in window) {\r\n\t\t\tconst observer = this.observer();\r\n\t\t\tobserver.observe(node);\r\n\t\t\treturn this.observerSubject_.pipe(\r\n\t\t\t\t// tap(entries => console.log(entries.length)),\r\n\t\t\t\tmap(entries => entries.find(entry => entry.target === node)),\r\n\t\t\t\t// tap(entry => console.log('IntersectionService.intersection$', entry)),\r\n\t\t\t\tfilter(entry => entry !== undefined && entry.isIntersecting), // entry.intersectionRatio > 0\r\n\t\t\t\tfirst(),\r\n\t\t\t\tfinalize(() => observer.unobserve(node)),\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn of({ target: node });\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\tfunction observer() {\r\n\t\t\tif ('IntersectionObserver' in window) {\r\n\t\t\t\treturn new IntersectionObserver(entries => {\r\n\t\t\t\t\tentries.forEach(function(entry) {\r\n\t\t\t\t\t\tif (entry.isIntersecting) {\r\n\t\t\t\t\t\t\tentry.target.classList.add('appear');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\treturn { observe: function(node) { node.classList.add('appear')}, unobserve: function() {} };\r\n\t\t\t}\r\n\t\t}\r\n\t\tobserver.observe(node);\r\n\t\tobserver.unobserve(node);\r\n\t\t*/\r\n\r\n\t}\r\n\r\n}\r\n","export default class LazyCache {\r\n\tstatic get cache() {\r\n\t\tif (!this.cache_) {\r\n\t\t\tthis.cache_ = {};\r\n\t\t}\r\n\t\treturn this.cache_;\r\n\t}\r\n\r\n\tstatic get(src) {\r\n\t\treturn this.cache[src];\r\n\t}\r\n\r\n\tstatic set(src, blob) {\r\n\t\tthis.cache[src] = blob;\r\n\t\tconst keys = Object.keys(this.cache);\r\n\t\tif (keys.length > 100) {\r\n\t\t\tthis.remove(keys[0]);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic remove(src) {\r\n\t\tdelete this.cache[src];\r\n\t}\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { of , Subject } from 'rxjs';\r\nimport { distinctUntilChanged, first, switchMap, takeUntil } from 'rxjs/operators';\r\nimport ImageService from '../image/image.service';\r\nimport IntersectionService from '../intersection/intersection.service';\r\nimport LazyCache from './lazy.cache';\r\n\r\nexport default class LazyDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('lazy');\r\n\t\tthis.input$ = new Subject().pipe(\r\n\t\t\tdistinctUntilChanged(),\r\n\t\t\tswitchMap(input => {\r\n\t\t\t\tconst src = LazyCache.get(input);\r\n\t\t\t\tif (src) {\r\n\t\t\t\t\treturn of(src);\r\n\t\t\t\t}\r\n\t\t\t\tnode.classList.remove('lazyed');\r\n\t\t\t\treturn this.lazy$(input);\r\n\t\t\t}),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t);\r\n\t\tthis.input$.subscribe(src => {\r\n\t\t\tLazyCache.set(this.lazy, src);\r\n\t\t\tnode.setAttribute('src', src);\r\n\t\t\tnode.classList.add('lazyed');\r\n\t\t});\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tthis.input$.next(this.lazy);\r\n\t}\r\n\r\n\tlazy$(input) {\r\n\t\tconst { node } = getContext(this);\r\n\t\treturn IntersectionService.intersection$(node).pipe(\r\n\t\t\tfirst(),\r\n\t\t\tswitchMap(() => ImageService.load$(input)),\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nLazyDirective.meta = {\r\n\tselector: '[lazy],[[lazy]]',\r\n\tinputs: ['lazy']\r\n};\r\n","import { from, Subject } from 'rxjs';\r\nimport { map, switchMap, tap } from 'rxjs/operators';\r\n\r\nexport class ModalEvent {\r\n\r\n\tconstructor(data) {\r\n\t\tthis.data = data;\r\n\t}\r\n\r\n}\r\n\r\nexport class ModalResolveEvent extends ModalEvent {}\r\nexport class ModalRejectEvent extends ModalEvent {}\r\n\r\nexport default class ModalService {\r\n\r\n\tstatic open$(modal) {\r\n\t\treturn this.getTemplate$(modal.src).pipe(\r\n\t\t\tmap(template => {\r\n\t\t\t\treturn { node: this.getNode(template), data: modal.data, modal: modal };\r\n\t\t\t}),\r\n\t\t\ttap(node => this.modal$.next(node)),\r\n\t\t\tswitchMap(node => this.events$),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic load$(modal) {\r\n\r\n\t}\r\n\r\n\tstatic getTemplate$(url) {\r\n\t\treturn from(fetch(url).then(response => {\r\n\t\t\treturn response.text();\r\n\t\t}));\r\n\t}\r\n\r\n\tstatic getNode(template) {\r\n\t\tconst div = document.createElement(\"div\");\r\n\t\tdiv.innerHTML = template;\r\n\t\tconst node = div.firstElementChild;\r\n\t\treturn node;\r\n\t}\r\n\r\n\tstatic reject(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalRejectEvent(data));\r\n\t}\r\n\r\n\tstatic resolve(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalResolveEvent(data));\r\n\t}\r\n\r\n}\r\n\r\nModalService.modal$ = new Subject();\r\nModalService.events$ = new Subject();\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport ModalService from './modal.service';\r\n\r\nexport default class ModalOutletComponent extends Component {\r\n\r\n\tget modal() {\r\n\t\treturn this.modal_;\r\n\t}\r\n\r\n\tset modal(modal) {\r\n\t\t// console.log('ModalOutletComponent set modal', modal, this);\r\n\t\tconst { module } = getContext(this);\r\n\t\tif (this.modal_ && this.modal_.node) {\r\n\t\t\tmodule.remove(this.modal_.node, this);\r\n\t\t\tthis.modalNode.removeChild(this.modal_.node);\r\n\t\t}\r\n\t\tif (modal && modal.node) {\r\n\t\t\tthis.modal_ = modal;\r\n\t\t\tthis.modalNode.appendChild(modal.node);\r\n\t\t\tconst instances = module.compile(modal.node);\r\n\t\t}\r\n\t\tthis.modal_ = modal;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.modalNode = node.querySelector('.modal-outlet__modal');\r\n\t\tModalService.modal$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(modal => {\r\n\t\t\tthis.modal = modal;\r\n\t\t});\r\n\t}\r\n\r\n\tonRegister(event) {\r\n\t\t// console.log('ModalComponent.onRegister');\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('ModalComponent.onLogin');\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\treject(event) {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nModalOutletComponent.meta = {\r\n\tselector: '[modal-outlet]',\r\n\ttemplate: /* html */ `\r\n\t<div class=\"modal-outlet__container\" [class]=\"{ active: modal }\">\r\n\t\t<div class=\"modal-outlet__background\" (click)=\"reject($event)\"></div>\r\n\t\t<div class=\"modal-outlet__modal\"></div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport ModalOutletComponent from '../modal/modal-outlet.component';\r\nimport ModalService from './modal.service';\r\n\r\nexport default class ModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tthis.data = parentInstance.modal.data;\r\n\t\t}\r\n\t}\r\n\r\n\tclose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nModalComponent.meta = {\r\n\tselector: '[modal]'\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { STATIC } from '../environment/environment';\r\nimport ModalService, { ModalResolveEvent } from '../modal/modal.service';\r\nimport UserService from '../user/user.service';\r\n\r\nconst src = STATIC ? '/tiemme-com/club-modal.html' : '/Viewdoc.cshtml?co_id=23649';\r\n\r\nexport default class RegisterOrLoginComponent extends Component {\r\n\r\n\tonRegister(event) {\r\n\t\t// console.log('RegisterOrLoginComponent.onRegister');\r\n\t\tevent.preventDefault();\r\n\t\tModalService.open$({ src: src, data: { view: 2 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('RegisterOrLoginComponent.onRegister', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t}\r\n\t\t});\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('RegisterOrLoginComponent.onLogin');\r\n\t\tevent.preventDefault();\r\n\t\tModalService.open$({ src: src, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('RegisterOrLoginComponent.onLogin', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t}\r\n\t\t});\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n}\r\n\r\nRegisterOrLoginComponent.meta = {\r\n\tselector: '[register-or-login]',\r\n};\r\n","const calculateDelta = (now, date) => Math.round(Math.abs(now - date) / 1000)\n\nexport default function relativeDateFactory (translations) {\n  return function relativeDate (date, now = new Date()) {\n    if (!(date instanceof Date)) {\n      date = new Date(date)\n    }\n\n    let delta = null\n\n    const minute = 60\n    const hour = minute * 60\n    const day = hour * 24\n    const week = day * 7\n    const month = day * 30\n    const year = day * 365\n\n    delta = calculateDelta(now, date)\n\n    if (delta > day && delta < week) {\n      date = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0)\n      delta = calculateDelta(now, date)\n    }\n\n    const translate = (translatePhrase, timeValue) => {\n      let key\n\n      if (translatePhrase === 'justNow') {\n        key = translatePhrase\n      } else if (now >= date) {\n        key = `${translatePhrase}Ago`\n      } else {\n        key = `${translatePhrase}FromNow`\n      }\n\n      const translation = translations[key]\n\n      if (typeof translation === 'function') {\n        return translation(timeValue)\n      }\n\n      return translation.replace('{{time}}', timeValue)\n    }\n\n    switch (false) {\n      case !(delta < 30):\n        return translate('justNow')\n\n      case !(delta < minute):\n        return translate('seconds', delta)\n\n      case !(delta < 2 * minute):\n        return translate('aMinute')\n\n      case !(delta < hour):\n        return translate('minutes', Math.floor(delta / minute))\n\n      case Math.floor(delta / hour) !== 1:\n        return translate('anHour')\n\n      case !(delta < day):\n        return translate('hours', Math.floor(delta / hour))\n\n      case !(delta < day * 2):\n        return translate('aDay')\n\n      case !(delta < week):\n        return translate('days', Math.floor(delta / day))\n\n      case Math.floor(delta / week) !== 1:\n        return translate('aWeek')\n\n      case !(delta < month):\n        return translate('weeks', Math.floor(delta / week))\n\n      case Math.floor(delta / month) !== 1:\n        return translate('aMonth')\n\n      case !(delta < year):\n        return translate('months', Math.floor(delta / month))\n\n      case Math.floor(delta / year) !== 1:\n        return translate('aYear')\n\n      default:\n        return translate('overAYear')\n    }\n  }\n}\n","module.exports = {\n  justNow: \"just now\",\n  secondsAgo: \"{{time}} seconds ago\",\n  aMinuteAgo: \"a minute ago\",\n  minutesAgo: \"{{time}} minutes ago\",\n  anHourAgo: \"an hour ago\",\n  hoursAgo: \"{{time}} hours ago\",\n  aDayAgo: \"yesterday\",\n  daysAgo: \"{{time}} days ago\",\n  aWeekAgo: \"a week ago\",\n  weeksAgo: \"{{time}} weeks ago\",\n  aMonthAgo: \"a month ago\",\n  monthsAgo: \"{{time}} months ago\",\n  aYearAgo: \"a year ago\",\n  yearsAgo: \"{{time}} years ago\",\n  overAYearAgo: \"over a year ago\",\n  secondsFromNow: \"{{time}} seconds from now\",\n  aMinuteFromNow: \"a minute from now\",\n  minutesFromNow: \"{{time}} minutes from now\",\n  anHourFromNow: \"an hour from now\",\n  hoursFromNow: \"{{time}} hours from now\",\n  aDayFromNow: \"tomorrow\",\n  daysFromNow: \"{{time}} days from now\",\n  aWeekFromNow: \"a week from now\",\n  weeksFromNow: \"{{time}} weeks from now\",\n  aMonthFromNow: \"a month from now\",\n  monthsFromNow: \"{{time}} months from now\",\n  aYearFromNow: \"a year from now\",\n  yearsFromNow: \"{{time}} years from now\",\n  overAYearFromNow: \"over a year from now\"\n}\n","import relativeDateFactory from './factory'\nimport enTranslations from '../translations/en'\n\nexport default relativeDateFactory(enTranslations)\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = relativeDateFactory;\nvar calculateDelta = function calculateDelta(now, date) {\n  return Math.round(Math.abs(now - date) / 1000);\n};\n\nfunction relativeDateFactory(translations) {\n  return function relativeDate(date) {\n    var now = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Date();\n\n    if (!(date instanceof Date)) {\n      date = new Date(date);\n    }\n\n    var delta = null;\n\n    var minute = 60;\n    var hour = minute * 60;\n    var day = hour * 24;\n    var week = day * 7;\n    var month = day * 30;\n    var year = day * 365;\n\n    delta = calculateDelta(now, date);\n\n    if (delta > day && delta < week) {\n      date = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0);\n      delta = calculateDelta(now, date);\n    }\n\n    var translate = function translate(translatePhrase, timeValue) {\n      var key = void 0;\n\n      if (translatePhrase === 'justNow') {\n        key = translatePhrase;\n      } else if (now >= date) {\n        key = translatePhrase + 'Ago';\n      } else {\n        key = translatePhrase + 'FromNow';\n      }\n\n      var translation = translations[key];\n\n      if (typeof translation === 'function') {\n        return translation(timeValue);\n      }\n\n      return translation.replace('{{time}}', timeValue);\n    };\n\n    switch (false) {\n      case !(delta < 30):\n        return translate('justNow');\n\n      case !(delta < minute):\n        return translate('seconds', delta);\n\n      case !(delta < 2 * minute):\n        return translate('aMinute');\n\n      case !(delta < hour):\n        return translate('minutes', Math.floor(delta / minute));\n\n      case Math.floor(delta / hour) !== 1:\n        return translate('anHour');\n\n      case !(delta < day):\n        return translate('hours', Math.floor(delta / hour));\n\n      case !(delta < day * 2):\n        return translate('aDay');\n\n      case !(delta < week):\n        return translate('days', Math.floor(delta / day));\n\n      case Math.floor(delta / week) !== 1:\n        return translate('aWeek');\n\n      case !(delta < month):\n        return translate('weeks', Math.floor(delta / week));\n\n      case Math.floor(delta / month) !== 1:\n        return translate('aMonth');\n\n      case !(delta < year):\n        return translate('months', Math.floor(delta / month));\n\n      case Math.floor(delta / year) !== 1:\n        return translate('aYear');\n\n      default:\n        return translate('overAYear');\n    }\n  };\n}\nmodule.exports = exports['default'];","import { Pipe } from \"rxcomp\";\nimport relativeDate from 'tiny-relative-date';\nimport relativeDateFactory from 'tiny-relative-date/lib/factory';\n\nexport const RELATIVE_DATE_KEYS = [\"justNow\", \"secondsAgo\", \"aMinuteAgo\", \"minutesAgo\", \"anHourAgo\", \"hoursAgo\", \"aDayAgo\", \"daysAgo\", \"aWeekAgo\", \"weeksAgo\", \"aMonthAgo\", \"monthsAgo\", \"aYearAgo\", \"yearsAgo\", \"overAYearAgo\", \"secondsFromNow\", \"aMinuteFromNow\", \"minutesFromNow\", \"anHourFromNow\", \"hoursFromNow\", \"aDayFromNow\", \"daysFromNow\", \"aWeekFromNow\", \"weeksFromNow\", \"aMonthFromNow\", \"monthsFromNow\", \"aYearFromNow\", \"yearsFromNow\", \"overAYearFromNow\"];\n\nexport default class RelativeDatePipe extends Pipe {\n\n\tstatic transform(value) {\n\t\tif (value) {\n\t\t\treturn this.relativeDate(value);\n\t\t}\n\t}\n\n\tstatic setLocale(locale) {\n\t\tif (!locale) return;\n\t\tconst values = {};\n\t\tconst keys = Object.keys(locale).filter(key => RELATIVE_DATE_KEYS.indexOf(key) !== -1);\n\t\tif (keys.length) {\n\t\t\tkeys.forEach(key => values[key] = locale[key]);\n\t\t\tthis.relativeDate = relativeDateFactory(values);\n\t\t}\n\t}\n\n}\n\nRelativeDatePipe.meta = {\n\tname: 'relativeDate',\n};\n\nRelativeDatePipe.relativeDate = relativeDate;\n\nif (window.locale) {\n\tRelativeDatePipe.setLocale(window.locale);\n}\n","import { Directive, getContext } from 'rxcomp';\nimport { interval } from 'rxjs';\nimport { startWith, takeUntil } from 'rxjs/operators';\nimport RelativeDatePipe from './relative-date.pipe';\n\nexport default class RelativeDateDirective extends Directive {\n\n\tset text(text) {\n\t\tif (this.text_ !== text) {\n\t\t\tthis.text_ = text;\n\t\t\tconst { node } = getContext(this);\n\t\t\tnode.innerText = text;\n\t\t}\n\t}\n\n\tonInit() {\n\t\tthis.change$().pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe(() => {\n\t\t\tthis.text = RelativeDatePipe.transform(this.relativeDate);\n\t\t});\n\t}\n\n\tchange$() {\n\t\treturn interval(1000).pipe(\n\t\t\tstartWith(0),\n\t\t);\n\t}\n\n}\n\nRelativeDateDirective.meta = {\n\tselector: '[relativeDate]',\n\tinputs: ['relativeDate']\n};\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { shareReplay, takeUntil, tap } from 'rxjs/operators';\r\n\r\nexport default class ScrollToDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tthis.initialFocus = false;\r\n\t\tconst { module, node } = getContext(this);\r\n\t\tconst expression = this.expression = node.getAttribute(`(scrollTo)`);\r\n\t\tthis.outputFunction = module.makeFunction(expression, ['$event']);\r\n\t\tthis.scrollTo$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(() => {});\r\n\t}\r\n\r\n\tscrollTo$() {\r\n\t\tconst { module, node, parentInstance } = getContext(this);\r\n\t\treturn fromEvent(node, 'click').pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tconst result = module.resolve(this.outputFunction, parentInstance, event);\r\n\t\t\t\tif (typeof result === 'string') {\r\n\t\t\t\t\tconst target = document.querySelector(result);\r\n\t\t\t\t\tif (target) {\r\n\t\t\t\t\t\tconst from = this.currentTop();\r\n\t\t\t\t\t\tconst to = from + target.getBoundingClientRect().top - 50;\r\n\t\t\t\t\t\tconst o = { pow: 0 };\r\n\t\t\t\t\t\tconst html = document.querySelector('html');\r\n\t\t\t\t\t\tgsap.set(html, {\r\n\t\t\t\t\t\t\t'scroll-behavior': 'auto'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tgsap.to(o, Math.abs((to - from)) / 2000, {\r\n\t\t\t\t\t\t\tpow: 1,\r\n\t\t\t\t\t\t\tease: Quad.easeOut,\r\n\t\t\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\t\t\tonUpdate: () => {\r\n\t\t\t\t\t\t\t\twindow.scrollTo(0, from + (to - from) * o.pow);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\t\t\tgsap.set(html, {\r\n\t\t\t\t\t\t\t\t\t'scroll-behavior': 'smooth'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t}\r\n\r\n\tcurrentTop() {\r\n\t\t// Firefox, Chrome, Opera, Safari\r\n\t\tif (self.pageYOffset) return self.pageYOffset;\r\n\t\t// Internet Explorer 6 - standards mode\r\n\t\tif (document.documentElement && document.documentElement.scrollTop)\r\n\t\t\treturn document.documentElement.scrollTop;\r\n\t\t// Internet Explorer 6, 7 and 8\r\n\t\tif (document.body.scrollTop) return document.body.scrollTop;\r\n\t\treturn 0;\r\n\t}\r\n\r\n}\r\n\r\nScrollToDirective.meta = {\r\n\tselector: `[(scrollTo)]`\r\n};\r\n","export default class DownloadService {\r\n\r\n\tstatic get a() {\r\n\t\tlet a = this.a_;\r\n\t\tif (!a) {\r\n\t\t\ta = document.createElement(\"a\");\r\n\t\t\ta.style = \"display: none\";\r\n\t\t\tdocument.body.appendChild(a);\r\n\t\t\tthis.a_ = a;\r\n\t\t}\r\n\t\treturn a;\r\n\t}\r\n\r\n\tstatic download(blob, fileName = 'download.txt') {\r\n\t\t// var json = JSON.stringify(data),\r\n\t\t// blob = new Blob([json], {type: \"octet/stream\"}),\r\n\t\tconst url = window.URL.createObjectURL(blob);\r\n\t\tconst a = this.a;\r\n\t\ta.href = url;\r\n\t\ta.download = fileName;\r\n\t\ta.click();\r\n\t\twindow.URL.revokeObjectURL(url);\r\n\t}\r\n\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport DownloadService from '../download/download.service';\r\nimport { STATIC } from '../environment/environment';\r\nimport HttpService from '../http/http.service';\r\nimport ModalService, { ModalResolveEvent } from '../modal/modal.service';\r\nimport UserService from '../user/user.service';\r\n\r\nconst src = STATIC ? '/tiemme-com/club-modal.html' : '/Viewdoc.cshtml?co_id=23649';\r\n\r\nexport default class SecureDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.href = node.getAttribute('href');\r\n\t\tfromEvent(node, 'click').pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.tryDownloadHref();\r\n\t\t});\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.href = node.getAttribute('href');\r\n\t}\r\n\r\n\ttryDownloadHref() {\r\n\t\tHttpService.get$(this.href, undefined, 'blob').pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(blob => {\r\n\t\t\tDownloadService.download(blob, this.href.split('/').pop());\r\n\t\t}, error => {\r\n\t\t\tconsole.log(error);\r\n\t\t\tthis.onLogin(event);\r\n\t\t});\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('SecureDirective.onLogin');\r\n\t\t// event.preventDefault();\r\n\t\tModalService.open$({ src: src, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('SecureDirective.onLogin', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t\tthis.tryDownloadHref();\r\n\t\t\t}\r\n\t\t});\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n\t/*\r\n\tonRegister(event) {\r\n\t\t// console.log('SecureDirective.onRegister');\r\n\t\t// event.preventDefault();\r\n\t\tModalService.open$({ src: src, data: { view: 2 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('SecureDirective.onRegister', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t}\r\n\t\t});\r\n\t\t// this.pushChanges();\r\n\t}\r\n\t*/\r\n\r\n}\r\n\r\nSecureDirective.meta = {\r\n\tselector: '[secure]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { Subject } from 'rxjs';\r\nimport Swiper from 'swiper';\r\n\r\nexport default class SwiperDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', `swiper-${this.rxcompId}`);\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tspeed: 600,\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: `#swiper-${this.rxcompId} .swiper-pagination`,\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tnavigation: {\r\n\t\t\t\tnextEl: `#swiper-${this.rxcompId} .swiper-button-next`,\r\n\t\t\t\tprevEl: `#swiper-${this.rxcompId} .swiper-button-prev`,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t}\r\n\r\n\tget enabled() {\r\n\t\treturn !window.matchMedia('print').matches;\r\n\t}\r\n\r\n\tonView() {\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.swiperInitOrUpdate_();\r\n\t\t}, 1);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners_();\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tonBeforePrint() {\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tslideToIndex(index) {\r\n\t\t// console.log('SwiperDirective.slideToIndex', index);\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.slideTo(index);\r\n\t\t}\r\n\t}\r\n\r\n\tinit_() {\r\n\t\tthis.events$ = new Subject();\r\n\t\tif (this.enabled) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tgsap.set(node, { opacity: 0 });\r\n\t\t\tthis.index = 0;\r\n\t\t\tconst on = this.options.on || {};\r\n\t\t\tconst self = this;\r\n\t\t\ton.slideChange = function() {\r\n\t\t\t\tconst swiper = this;\r\n\t\t\t\tself.index = swiper.activeIndex;\r\n\t\t\t\tself.events$.next(self.index);\r\n\t\t\t\tself.pushChanges();\r\n\t\t\t};\r\n\t\t\tthis.options.on = on;\r\n\t\t\tthis.addListeners_();\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners_() {\r\n\t\tthis.onBeforePrint = this.onBeforePrint.bind(this);\r\n\t\twindow.addEventListener('beforeprint', this.onBeforePrint);\r\n\t\t/*\r\n\t\tscope.$on('onResize', ($scope) => {\r\n\t\t\tthis.onResize(scope, element, attributes);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\tremoveListeners_() {\r\n\t\twindow.removeEventListener('beforeprint', this.onBeforePrint);\r\n\t}\r\n\r\n\tswiperInitOrUpdate_() {\r\n\t\tif (this.enabled) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tif (this.swiper) {\r\n\t\t\t\tthis.swiper.update();\r\n\t\t\t} else {\r\n\t\t\t\tlet swiper;\r\n\t\t\t\tconst on = this.options.on || (this.options.on = {});\r\n\t\t\t\tconst callback = on.init;\r\n\t\t\t\tif (!on.init || !on.init.swiperDirectiveInit) {\r\n\t\t\t\t\ton.init = function() {\r\n\t\t\t\t\t\tgsap.to(node, 0.4, {\r\n\t\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\t\tease: Power2.easeOut,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\t\t\t\tcallback.apply(this, [swiper, element, scope]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, 1);\r\n\t\t\t\t\t};\r\n\t\t\t\t\ton.init.swiperDirectiveInit = true;\r\n\t\t\t\t}\r\n\t\t\t\tgsap.set(node, { opacity: 1 });\r\n\t\t\t\tswiper = new Swiper(node, this.options);\r\n\t\t\t\tthis.swiper = swiper;\r\n\t\t\t\tthis.swiper._opening = true;\r\n\t\t\t\tnode.classList.add('swiper-init');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tswiperDestroy_() {\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.destroy();\r\n\t\t}\r\n\t}\r\n\r\n\topenMore(event) {\r\n\t\tthis.more.next(event);\r\n\t}\r\n}\r\n\r\nSwiperDirective.meta = {\r\n\tselector: '[swiper]',\r\n\tinputs: ['consumer'],\r\n\toutputs: ['more']\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport SwiperDirective from './swiper.directive';\r\n\r\nexport default class SwiperEventsDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', `swiper-${this.rxcompId}`);\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 2,\r\n\t\t\tspaceBetween: 25,\r\n\t\t\tcenteredSlides: false,\r\n\t\t\t// loop: true,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tspeed: 600,\r\n\t\t\t/*\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\t*/\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: `#swiper-${this.rxcompId} .swiper-pagination`,\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tnavigation: {\r\n\t\t\t\tnextEl: `#swiper-${this.rxcompId} .swiper-button-next`,\r\n\t\t\t\tprevEl: `#swiper-${this.rxcompId} .swiper-button-prev`,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t\t// console.log('SwiperEventsDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperEventsDirective.meta = {\r\n\tselector: '[swiper-events]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport SwiperDirective from './swiper.directive';\r\n\r\nexport default class SwiperSlidesDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', `swiper-${this.rxcompId}`);\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 3,\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tloop: false,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tspeed: 600,\r\n\t\t\t/*\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\t*/\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: `#swiper-${this.rxcompId} .swiper-pagination`,\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tnavigation: {\r\n\t\t\t\tnextEl: `#swiper-${this.rxcompId} .swiper-button-next`,\r\n\t\t\t\tprevEl: `#swiper-${this.rxcompId} .swiper-button-prev`,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t}\r\n\r\n}\r\n\r\nSwiperSlidesDirective.meta = {\r\n\tselector: '[swiper-slides]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport SwiperDirective from './swiper.directive';\r\n\r\nexport default class SwiperTopEventsDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', `swiper-${this.rxcompId}`);\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1,\r\n\t\t\tspaceBetween: 2,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t768: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 2,\r\n\t\t\t\t},\r\n\t\t\t\t1024: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 2,\r\n\t\t\t\t},\r\n\t\t\t\t1440: {\r\n\t\t\t\t\tslidesPerView: 4,\r\n\t\t\t\t\tspaceBetween: 2,\r\n\t\t\t\t},\r\n\t\t\t\t1920: {\r\n\t\t\t\t\tslidesPerView: 4,\r\n\t\t\t\t\tspaceBetween: 2,\r\n\t\t\t\t},\r\n\t\t\t\t2440: {\r\n\t\t\t\t\tslidesPerView: 5,\r\n\t\t\t\t\tspaceBetween: 2,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tcenteredSlides: false,\r\n\t\t\t// loop: true,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tspeed: 600,\r\n\t\t\t/*\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\t*/\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: `#swiper-${this.rxcompId} .swiper-pagination`,\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tnavigation: {\r\n\t\t\t\tnextEl: `#swiper-${this.rxcompId} .swiper-button-next`,\r\n\t\t\t\tprevEl: `#swiper-${this.rxcompId} .swiper-button-prev`,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t\t// console.log('SwiperTopEventsDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperTopEventsDirective.meta = {\r\n\tselector: '[swiper-top-events]'\r\n};\r\n","import { Component, getContext } from 'rxcomp';\n\nexport default class ThronComponent extends Component {\n\n\tonInit() {\n\t\tconst THRON = window.THRONContentExperience || window.THRONPlayer;\n\t\tif (!THRON) {\n\t\t\treturn;\n\t\t}\n\t\tconst { node, rxcompId } = getContext(this);\n\n\t\tnode.setAttribute('id', `thron-${rxcompId}`);\n\n\t\tlet media = this.thron;\n\t\tif (media.indexOf('pkey=') === -1) {\n\t\t\tconst splitted = media.split('/');\n\t\t\tconst clientId = splitted[6];\n\t\t\tconst xcontentId = splitted[7];\n\t\t\tconst pkey = splitted[8];\n\t\t\tmedia = `https://gruppoconcorde-view.thron.com/api/xcontents/resources/delivery/getContentDetail?clientId=${clientId}&xcontentId=${xcontentId}&pkey=${pkey}`;\n\t\t\t// console.log(media);\n\t\t}\n\t\tconst controls = node.hasAttribute('controls') ? true : false,\n\t\t\tloop = node.hasAttribute('loop') ? true : false,\n\t\t\tautoplay = node.hasAttribute('autoplay') ? true : false;\n\t\tconst player = this.player = THRON(node.id, {\n\t\t\tmedia: media,\n\t\t\tloop: loop,\n\t\t\tautoplay: autoplay,\n\t\t\tmuted: !controls,\n\t\t\tdisplayLinked: 'close',\n\t\t\tnoSkin: !controls,\n\t\t\t// lockBitrate: 'max',\n\t\t});\n\t\t/*\n\t\t// Set the bottom bar of the video with share and fullscreen only. The first on the left and the second to the right.\n\t\tconst params = {\n\t\t\tsessId: \"asessId\",\n\t\t\tclientId: \"aclientId\",\n\t\t\txcontentId: \"acontentId\"\n\t\t};\n\t\t*/\n\t\tthis.onBeforeInit = this.onBeforeInit.bind(this);\n\t\tthis.onReady = this.onReady.bind(this);\n\t\tthis.onCanPlay = this.onCanPlay.bind(this);\n\t\tthis.onPlaying = this.onPlaying.bind(this);\n\t\tthis.onComplete = this.onComplete.bind(this);\n\t\tplayer.on(\"beforeInit\", this.onBeforeInit);\n\t\tplayer.on('ready', this.onReady);\n\t\tplayer.on('canPlay', this.onCanPlay);\n\t\tplayer.on('playing', this.onPlaying);\n\t\tplayer.on('complete', this.onComplete);\n\t}\n\n\tonBeforeInit(playerInstance) {\n\t\t// Removes playButton and hdButton from schema bar\n\t\tconst schema = window.THRONSchemaHelper.getSchema();\n\t\tconst elements = window.THRONSchemaHelper.removeElementsById(schema, \"VIDEO\", [\"captionText\", \"subtitleButton\", \"downloadableButton\"]);\n\t\t// A simple verify: existsElements must false\n\t\tconst existsElements = window.THRONSchemaHelper.getElementsById(schema, \"VIDEO\", [\"captionText\", \"subtitleButton\", \"downloadableButton\"]).coordinates.length > 0;\n\t\tconsole.log('ThronComponent.onBeforeInit.existsElements', existsElements);\n\t\tconst params = { bars: schema };\n\t\tplayerInstance.params(params);\n\t}\n\n\tonReady() {\n\t\tconst { node } = getContext(this);\n\t\tconst controls = node.hasAttribute('controls') ? true : false;\n\t\tif (!controls) {\n\t\t\tconst player = this.player;\n\t\t\tconst mediaContainer = player.mediaContainer();\n\t\t\tconst video = mediaContainer.querySelector('video');\n\t\t\tvideo.setAttribute('playsinline', 'true');\n\t\t}\n\t\tthis.ready.next(this);\n\t}\n\n\tonCanPlay() {\n\t\tthis.canPlay.next(this);\n\t}\n\n\tonPlaying() {\n\t\tconst player = this.player;\n\t\tplayer.off('playing', this.onPlaying);\n\t\tconst { node } = getContext(this);\n\t\tconst controls = node.hasAttribute('controls') ? true : false;\n\t\tif (!controls) {\n\t\t\tconst qualities = player.qualityLevels();\n\t\t\tif (qualities.length) {\n\t\t\t\tconst highestQuality = qualities[qualities.length - 1].index;\n\t\t\t\tconst lowestQuality = qualities[0].index;\n\t\t\t\tplayer.currentQuality(highestQuality);\n\t\t\t}\n\t\t}\n\t}\n\n\tonComplete() {\n\t\tthis.complete.next(this);\n\t}\n\n\tonDestroy() {\n\t\tconst player = this.player;\n\t\tplayer.off('ready', this.onReady);\n\t\tplayer.off('canPlay', this.onCanPlay);\n\t\tplayer.off('playing', this.onPlaying);\n\t\tplayer.off('complete', this.onComplete);\n\t}\n\n\tplay() {\n\t\tconst player = this.player;\n\t\tconst status = player.status();\n\t\tif (status && !status.playing) {\n\t\t\tplayer.play();\n\t\t}\n\t}\n\n\tpause() {\n\t\tconst player = this.player;\n\t\tconst status = player.status();\n\t\tif (status && status.playing) {\n\t\t\tplayer.pause();\n\t\t}\n\t}\n}\n\nThronComponent.meta = {\n\tselector: '[thron]',\n\toutputs: ['ready', 'canPlay', 'complete'],\n\tinputs: ['thron'],\n};\n","function push_(event) {\r\n\tconst dataLayer = window.dataLayer || [];\r\n\tdataLayer.push(event);\r\n\tconsole.log('GtmService.dataLayer', event);\r\n}\r\n\r\nexport default class GtmService {\r\n\r\n\tstatic push(event) {\r\n\t\treturn push_(event);\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport GtmService from '../gtm/gtm.service';\r\nimport SwiperDirective from '../swiper/swiper.directive';\r\n\r\nexport default class VideoComponent extends Component {\r\n\r\n\tget playing() {\r\n\t\treturn this.playing_;\r\n\t}\r\n\r\n\tset playing(playing) {\r\n\t\tif (this.playing_ !== playing) {\r\n\t\t\tthis.playing_ = playing;\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.item = {};\r\n\t\tconst { node, parentInstance } = getContext(this);\r\n\t\tnode.classList.add('video');\r\n\t\tthis.video = node.querySelector('video');\r\n\t\tthis.progress = node.querySelector('.icon--play-progress path');\r\n\t\tif (parentInstance instanceof SwiperDirective) {\r\n\t\t\tparentInstance.events$.pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t).subscribe(event => this.pause());\r\n\t\t}\r\n\t\tthis.addListeners();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tconst video = this.video;\r\n\t\tif (video) {\r\n\t\t\tthis.onPlay = this.onPlay.bind(this);\r\n\t\t\tthis.onPause = this.onPause.bind(this);\r\n\t\t\tthis.onEnded = this.onEnded.bind(this);\r\n\t\t\tthis.onTimeUpdate = this.onTimeUpdate.bind(this);\r\n\t\t\tvideo.addEventListener('play', this.onPlay);\r\n\t\t\tvideo.addEventListener('pause', this.onPause);\r\n\t\t\tvideo.addEventListener('ended', this.onEnded);\r\n\t\t\tvideo.addEventListener('timeupdate', this.onTimeUpdate);\r\n\t\t}\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tconst video = this.video;\r\n\t\tif (video) {\r\n\t\t\tvideo.removeEventListener('play', this.onPlay);\r\n\t\t\tvideo.removeEventListener('pause', this.onPause);\r\n\t\t\tvideo.removeEventListener('ended', this.onEnded);\r\n\t\t\tvideo.removeEventListener('timeupdate', this.onTimeUpdate);\r\n\t\t}\r\n\t}\r\n\r\n\ttogglePlay() {\r\n\t\t// console.log('VideoComponent.togglePlay')\r\n\t\tconst video = this.video;\r\n\t\tif (video) {\r\n\t\t\tif (video.paused) {\r\n\t\t\t\tthis.play();\r\n\t\t\t} else {\r\n\t\t\t\tthis.pause();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tplay() {\r\n\t\tconst video = this.video;\r\n\t\tvideo.muted = false;\r\n\t\tvideo.play();\r\n\t}\r\n\r\n\tpause() {\r\n\t\tconst video = this.video;\r\n\t\tvideo.muted = true;\r\n\t\tvideo.pause();\r\n\t}\r\n\r\n\tonPlay() {\r\n\t\tthis.playing = true;\r\n\t\tGtmService.push({\r\n\t\t\tevent: 'video play',\r\n\t\t\tvideo_name: this.video.src\r\n\t\t});\r\n\t}\r\n\r\n\tonPause() {\r\n\t\tthis.playing = false;\r\n\t}\r\n\r\n\tonEnded() {\r\n\t\tthis.playing = false;\r\n\t}\r\n\r\n\tonTimeUpdate() {\r\n\t\tthis.progress.style.strokeDashoffset = this.video.currentTime / this.video.duration;\r\n\t}\r\n\r\n}\r\n\r\nVideoComponent.meta = {\r\n\tselector: '[video]',\r\n\tinputs: ['item'],\r\n};\r\n","import { Context } from 'rxcomp';\n\nexport default class VirtualItem extends Context {\n\tconstructor(key, $key, value, $value, index, count, parentInstance) {\n\t\tsuper(parentInstance);\n\t\tthis[key] = $key;\n\t\tthis[value] = $value;\n\t\tthis.index = index;\n\t\tthis.count = count;\n\t}\n\n\tget first() {\n\t\treturn this.index === 0;\n\t}\n\n\tget last() {\n\t\treturn this.index === this.count - 1;\n\t}\n\n\tget even() {\n\t\treturn this.index % 2 === 0;\n\t}\n\n\tget odd() {\n\t\treturn !this.even;\n\t}\n}\n","import { getContext, Structure } from 'rxcomp';\nimport { BehaviorSubject, fromEvent, merge } from 'rxjs';\nimport { debounceTime, map, startWith, takeUntil, tap } from 'rxjs/operators';\nimport VirtualItem from './virtual.item';\n\nexport const VirtualMode = {\n\tResponsive: 1,\n\tGrid: 2,\n\tCentered: 3,\n\tList: 4\n};\n\nexport default class VirtualStructure extends Structure {\n\n\tonInit() {\n\t\tconst { module, node } = getContext(this);\n\t\tconst template = node.firstElementChild;\n\t\tconst expression = node.getAttribute('*virtual');\n\t\tnode.removeAttribute('*virtual');\n\t\tnode.removeChild(template);\n\t\tconst tokens = (this.tokens = this.getExpressionTokens(expression));\n\t\tthis.virtualFunction = module.makeFunction(tokens.iterable);\n\t\tthis.container = node;\n\t\tthis.template = template;\n\t\tthis.mode = this.mode || 1;\n\t\tthis.width = this.width || 250;\n\t\tthis.gutter = (this.gutter !== undefined) ? this.gutter : 20;\n\t\tthis.options = {\n\t\t\ttop: 0,\n\t\t\twidth: this.width,\n\t\t\tgutter: this.gutter,\n\t\t\tcontainerWidth: 0,\n\t\t\tcontainerHeight: 0,\n\t\t\tcols: [0],\n\t\t\tstrategy: 1\n\t\t};\n\t\tthis.cachedRects = {};\n\t\tthis.cachedInstances = [];\n\t\tthis.cacheNodes = [];\n\t\tthis.items$ = new BehaviorSubject([]);\n\t\tthis.update$()\n\t\t\t.pipe(takeUntil(this.unsubscribe$))\n\t\t\t.subscribe(visibleItems => {\n\t\t\t\t// console.log(visibleItems.length);\n\t\t\t});\n\t}\n\n\tonChanges(changes) {\n\t\tconst context = getContext(this);\n\t\tconst module = context.module;\n\t\t// resolve\n\t\tconst items = module.resolve(this.virtualFunction, changes, this) || [];\n\t\tthis.mode = this.mode || 1;\n\t\tthis.width = this.width || 250;\n\t\tthis.gutter = (this.gutter !== undefined) ? this.gutter : 20;\n\t\tthis.options.width = this.width;\n\t\tthis.updateView(true);\n\t\tthis.items$.next(items);\n\t}\n\n\tupdate$() {\n\t\treturn merge(this.scroll$(), this.resize$(), this.items$).pipe(\n\t\t\tmap(datas => {\n\t\t\t\tconst options = this.options;\n\t\t\t\tconst items = this.items$.getValue();\n\t\t\t\tconst total = items.length;\n\t\t\t\tthis.container.position = 'relative';\n\t\t\t\tlet highestHeight = 0;\n\t\t\t\tconst width = this.getWidth();\n\t\t\t\tconst gutter = this.getGutter(width);\n\t\t\t\tconst visibleItems = items.filter((item, i) => {\n\t\t\t\t\tlet col, height, top, left, bottom;\n\t\t\t\t\tlet rect = this.cachedRects[i];\n\t\t\t\t\tif (rect) {\n\t\t\t\t\t\tcol = rect.col;\n\t\t\t\t\t\theight = rect.height;\n\t\t\t\t\t\tleft = rect.left;\n\t\t\t\t\t\t// top = rect.top;\n\t\t\t\t\t\t// bottom = rect.bottom;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcol = this.getCol();\n\t\t\t\t\t\theight = this.getHeight(width, item);\n\t\t\t\t\t}\n\t\t\t\t\ttop = options.cols[col];\n\t\t\t\t\tif (this.intersect(top + options.top, top + height + options.top, 0, options.containerHeight)) {\n\t\t\t\t\t\tif (!rect) {\n\t\t\t\t\t\t\tleft = this.getLeft(col, width, gutter);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst node = this.cachedNode(i, i, item, total);\n\t\t\t\t\t\tnode.style.position = 'absolute';\n\t\t\t\t\t\tnode.style.top = top + 'px';\n\t\t\t\t\t\tnode.style.left = left + 'px';\n\t\t\t\t\t\tnode.style.width = width + 'px';\n\t\t\t\t\t\tif (height !== node.offsetHeight) {\n\t\t\t\t\t\t\theight = node.offsetHeight;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbottom = top + height + options.gutter;\n\t\t\t\t\t\thighestHeight = Math.max(highestHeight, bottom);\n\t\t\t\t\t\toptions.cols[col] = bottom;\n\t\t\t\t\t\tif (!rect) {\n\t\t\t\t\t\t\tthis.cachedRects[i] = { col, width, height, left, top, bottom };\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trect.height = height;\n\t\t\t\t\t\t\trect.bottom = bottom;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.removeNode(i);\n\t\t\t\t\t\tbottom = top + height + options.gutter;\n\t\t\t\t\t\toptions.cols[col] = bottom;\n\t\t\t\t\t\thighestHeight = Math.max(highestHeight, bottom);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tlet removeIndex = items.length;\n\t\t\t\twhile (removeIndex < this.cacheNodes.length) {\n\t\t\t\t\tthis.removeNode(removeIndex);\n\t\t\t\t\tremoveIndex++;\n\t\t\t\t}\n\t\t\t\tthis.cacheNodes.length = items.length;\n\t\t\t\tthis.container.style.height = `${highestHeight}px`;\n\t\t\t\treturn visibleItems;\n\t\t\t})\n\t\t);\n\t}\n\n\tgetCols() {\n\t\tconst options = this.options;\n\t\tconst cols = Math.floor((options.containerWidth + options.gutter) / (options.width + options.gutter)) || 1;\n\t\treturn new Array(cols).fill(0);\n\t}\n\n\tgetCol() {\n\t\tconst options = this.options;\n\t\tlet col;\n\t\tswitch (this.mode) {\n\t\t\tcase VirtualMode.Grid:\n\t\t\tcase VirtualMode.Centered:\n\t\t\tcase VirtualMode.Responsive:\n\t\t\t\tcol = options.cols.reduce((p, c, i, a) => {\n\t\t\t\t\treturn c < a[p] ? i : p;\n\t\t\t\t}, 0);\n\t\t\t\tbreak;\n\t\t\tcase VirtualMode.List:\n\t\t\tdefault:\n\t\t\t\tcol = 0;\n\t\t}\n\t\treturn col;\n\t}\n\n\tgetWidth() {\n\t\tconst options = this.options;\n\t\tlet width;\n\t\tswitch (this.mode) {\n\t\t\tcase VirtualMode.Grid:\n\t\t\tcase VirtualMode.Centered:\n\t\t\t\twidth = options.width;\n\t\t\t\tbreak;\n\t\t\tcase VirtualMode.Responsive:\n\t\t\t\twidth = (options.containerWidth - (options.cols.length - 1) * options.gutter) / options.cols.length;\n\t\t\t\tbreak;\n\t\t\tcase VirtualMode.List:\n\t\t\tdefault:\n\t\t\t\twidth = options.containerWidth;\n\t\t}\n\t\treturn width;\n\t}\n\n\tgetHeight(width, item) {\n\t\tconst options = this.options;\n\t\tlet height;\n\t\tswitch (this.mode) {\n\t\t\tcase VirtualMode.Grid:\n\t\t\tcase VirtualMode.Centered:\n\t\t\tcase VirtualMode.Responsive:\n\t\t\t\theight = options.width;\n\t\t\t\tbreak;\n\t\t\tcase VirtualMode.List:\n\t\t\tdefault:\n\t\t\t\theight = 80;\n\t\t}\n\t\treturn height;\n\t}\n\n\tgetGutter(width) {\n\t\tconst options = this.options;\n\t\tlet gutter;\n\t\tswitch (this.mode) {\n\t\t\tcase VirtualMode.Grid:\n\t\t\tcase VirtualMode.Centered:\n\t\t\t\tgutter = options.gutter;\n\t\t\t\tbreak;\n\t\t\tcase VirtualMode.Responsive:\n\t\t\t\tgutter = (options.containerWidth - options.cols.length * width) / (options.cols.length - 1);\n\t\t\t\tbreak;\n\t\t\tcase VirtualMode.List:\n\t\t\tdefault:\n\t\t\t\tgutter = 0;\n\t\t}\n\t\treturn gutter;\n\t}\n\n\tgetLeft(index, width, gutter) {\n\t\tconst options = this.options;\n\t\tlet left;\n\t\tswitch (this.mode) {\n\t\t\tcase VirtualMode.Grid:\n\t\t\tcase VirtualMode.Responsive:\n\t\t\t\tleft = index * (width + gutter);\n\t\t\t\tbreak;\n\t\t\tcase VirtualMode.Centered:\n\t\t\t\tleft = (options.containerWidth - options.cols.length * (width + gutter) + gutter) / 2 + index * (width + gutter);\n\t\t\t\tbreak;\n\t\t\tcase VirtualMode.List:\n\t\t\tdefault:\n\t\t\t\tleft = 0;\n\t\t}\n\t\treturn left;\n\t}\n\n\tcachedNode(index, i, value, total) {\n\t\tif (this.cacheNodes[index]) {\n\t\t\treturn this.updateNode(index, i, value);\n\t\t} else {\n\t\t\treturn this.createNode(index, i, value, total);\n\t\t}\n\t}\n\n\tcreateNode(index, i, value, total) {\n\t\tconst clonedNode = this.template.cloneNode(true);\n\t\tdelete clonedNode.rxcompId;\n\t\tthis.container.appendChild(clonedNode);\n\t\tthis.cacheNodes[index] = clonedNode;\n\t\tconst context = getContext(this);\n\t\tconst module = context.module;\n\t\tconst tokens = this.tokens;\n\t\tconst args = [tokens.key, i, tokens.value, value, i, total, context.parentInstance];\n\t\tconst instance = module.makeInstance(clonedNode, VirtualItem, context.selector, context.parentInstance, args);\n\t\tconst forItemContext = getContext(instance);\n\t\tmodule.compile(clonedNode, forItemContext.instance);\n\t\tthis.cachedInstances[index] = instance;\n\t\treturn clonedNode;\n\t}\n\n\tupdateNode(index, i, value) {\n\t\tconst instance = this.cachedInstances[index];\n\t\tconst tokens = this.tokens;\n\t\tif (instance[tokens.key] !== i) {\n\t\t\tinstance[tokens.key] = i;\n\t\t\tinstance[tokens.value] = value;\n\t\t\tinstance.pushChanges();\n\t\t}\n\t\t// console.log(index, i, value);\n\t\treturn this.cacheNodes[index];\n\t}\n\n\tremoveNode(index) {\n\t\tthis.cachedInstances[index] = undefined;\n\t\tconst node = this.cacheNodes[index];\n\t\tif (node) {\n\t\t\tconst context = getContext(this);\n\t\t\tconst module = context.module;\n\t\t\tnode.parentNode.removeChild(node);\n\t\t\tmodule.remove(node);\n\t\t}\n\t\tthis.cacheNodes[index] = undefined;\n\t\treturn node;\n\t}\n\n\tintersect(top1, bottom1, top2, bottom2) {\n\t\treturn top2 < bottom1 && bottom2 > top1;\n\t}\n\n\tresize$() {\n\t\treturn fromEvent(window, 'resize').pipe(\n\t\t\tdebounceTime(500),\n\t\t\tstartWith(null),\n\t\t\ttap(() => this.updateView(true))\n\t\t);\n\t}\n\n\tscroll$(node) {\n\t\treturn fromEvent(window, 'scroll').pipe(tap(() => this.updateView()));\n\t}\n\n\tupdateView(reset) {\n\t\tconst rect = this.container.getBoundingClientRect();\n\t\tconst options = this.options;\n\t\toptions.top = rect.top;\n\t\toptions.containerWidth = rect.width;\n\t\toptions.containerHeight = window.innerHeight;\n\t\toptions.cols = this.getCols();\n\t\tif (reset) {\n\t\t\tthis.cachedRects = {};\n\t\t}\n\t}\n\n\tgetExpressionTokens(expression) {\n\t\tif (expression === null) {\n\t\t\tthrow new Error('invalid virtual');\n\t\t}\n\t\tif (expression.trim().indexOf('let ') === -1 || expression.trim().indexOf(' of ') === -1) {\n\t\t\tthrow new Error('invalid virtual');\n\t\t}\n\t\tconst expressions = expression\n\t\t\t.split(';')\n\t\t\t.map(x => x.trim())\n\t\t\t.filter(x => x !== '');\n\t\tconst virtualExpressions = expressions[0].split(' of ').map(x => x.trim());\n\t\tlet value = virtualExpressions[0].replace(/\\s*let\\s*/, '');\n\t\tconst iterable = virtualExpressions[1];\n\t\tlet key = 'index';\n\t\tconst keyValueMatches = value.match(/\\[(.+)\\s*,\\s*(.+)\\]/);\n\t\tif (keyValueMatches) {\n\t\t\tkey = keyValueMatches[1];\n\t\t\tvalue = keyValueMatches[2];\n\t\t}\n\t\tif (expressions.length > 1) {\n\t\t\tconst indexExpressions = expressions[1].split(/\\s*let\\s*|\\s*=\\s*index/).map(x => x.trim());\n\t\t\tif (indexExpressions.length === 3) {\n\t\t\t\tkey = indexExpressions[1];\n\t\t\t}\n\t\t}\n\t\treturn { key, value, iterable };\n\t}\n}\n\nVirtualStructure.meta = {\n\tselector: '[*virtual]',\n\tinputs: ['mode', 'width', 'gutter']\n};\n","import { Component, getContext } from 'rxcomp';\r\nimport { BehaviorSubject, interval, Subject } from 'rxjs';\r\nimport { distinctUntilChanged, filter, map, switchMap, takeUntil, tap } from 'rxjs/operators';\r\nimport SwiperDirective from '../swiper/swiper.directive';\r\n\r\nexport default class YoutubeComponent extends Component {\r\n\r\n\tget playing() {\r\n\t\treturn this.playing_;\r\n\t}\r\n\r\n\tset playing(playing) {\r\n\t\tif (this.playing_ !== playing) {\r\n\t\t\tthis.playing_ = playing;\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\tget cover() {\r\n\t\treturn this.youtubeId ? `//i.ytimg.com/vi/${this.youtubeId}/maxresdefault.jpg` : '';\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.item = {};\r\n\t\tconst { node, parentInstance } = getContext(this);\r\n\t\tnode.classList.add('youtube');\r\n\t\tif (YoutubeComponent.MOBILE) {\r\n\t\t\tnode.classList.add('mobile');\r\n\t\t}\r\n\t\tthis.progress = node.querySelector('.icon--play-progress path');\r\n\t\tthis.onPlayerReady = this.onPlayerReady.bind(this);\r\n\t\tthis.onPlayerStateChange = this.onPlayerStateChange.bind(this);\r\n\t\tthis.onPlayerError = this.onPlayerError.bind(this);\r\n\t\tthis.id$ = new Subject().pipe(distinctUntilChanged());\r\n\t\tif (parentInstance instanceof SwiperDirective) {\r\n\t\t\tparentInstance.events$.pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t).subscribe(event => this.pause());\r\n\t\t}\r\n\t\t// this.addListeners();\r\n\t}\r\n\r\n\tonChanges(changes) {\r\n\t\tconst id = this.youtubeId;\r\n\t\t// console.log('YoutubeComponent.onChanges', id);\r\n\t\tthis.id$.next(id);\r\n\t}\r\n\r\n\tinitPlayer() {\r\n\t\t// console.log('VideoComponent.initPlayer');\r\n\t\tthis.player$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(player => {\r\n\t\t\tconsole.log('YoutubeComponent.player$', player);\r\n\t\t});\r\n\t\tthis.interval$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(() => {});\r\n\t\tthis.id$.next(this.youtubeId);\r\n\t}\r\n\r\n\tplayer$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst video = node.querySelector('.video');\r\n\t\treturn this.id$.pipe(\r\n\t\t\tswitchMap(id => {\r\n\t\t\t\t// console.log('YoutubeComponent.videoId', id);\r\n\t\t\t\treturn YoutubeComponent.once$().pipe(\r\n\t\t\t\t\tmap(youtube => {\r\n\t\t\t\t\t\t// console.log('YoutubeComponent.once$', youtube);\r\n\t\t\t\t\t\tthis.destroyPlayer();\r\n\t\t\t\t\t\tthis.player = new youtube.Player(video, {\r\n\t\t\t\t\t\t\twidth: node.offsetWidth,\r\n\t\t\t\t\t\t\theight: node.offsetHeight,\r\n\t\t\t\t\t\t\tvideoId: id,\r\n\t\t\t\t\t\t\tplayerVars: {\r\n\t\t\t\t\t\t\t\tautoplay: 1,\r\n\t\t\t\t\t\t\t\tcontrols: 1, // YoutubeComponent.MOBILE ? 1 : 0,\r\n\t\t\t\t\t\t\t\tdisablekb: 1,\r\n\t\t\t\t\t\t\t\tenablejsapi: 1,\r\n\t\t\t\t\t\t\t\tfs: 0,\r\n\t\t\t\t\t\t\t\tloop: 1,\r\n\t\t\t\t\t\t\t\tmodestbranding: 1,\r\n\t\t\t\t\t\t\t\tplaysinline: 1,\r\n\t\t\t\t\t\t\t\trel: 0,\r\n\t\t\t\t\t\t\t\tshowinfo: 0,\r\n\t\t\t\t\t\t\t\tiv_load_policy: 3,\r\n\t\t\t\t\t\t\t\tlistType: 'user_uploads',\r\n\t\t\t\t\t\t\t\t// origin: 'https://log6i.csb.app/'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tevents: {\r\n\t\t\t\t\t\t\t\tonReady: this.onPlayerReady,\r\n\t\t\t\t\t\t\t\tonStateChange: this.onPlayerStateChange,\r\n\t\t\t\t\t\t\t\tonPlayerError: this.onPlayerError\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn this.player;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tonPlayerReady(event) {\r\n\t\t// console.log('YoutubeComponent.onPlayerReady', event);\r\n\t\tevent.target.mute();\r\n\t\tevent.target.playVideo();\r\n\t}\r\n\r\n\tonPlayerStateChange(event) {\r\n\t\t// console.log('YoutubeComponent.onPlayerStateChange', event.data);\r\n\t\tif (event.data === 1) {\r\n\t\t\tthis.playing = true;\r\n\t\t} else {\r\n\t\t\tthis.playing = false;\r\n\t\t}\r\n\t}\r\n\r\n\tonPlayerError(event) {\r\n\t\tconsole.log('YoutubeComponent.onPlayerError', event);\r\n\t}\r\n\r\n\tdestroyPlayer() {\r\n\t\tif (this.player) {\r\n\t\t\tthis.player.destroy();\r\n\t\t}\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.destroyPlayer();\r\n\t}\r\n\r\n\tinterval$() {\r\n\t\treturn interval(500).pipe(\r\n\t\t\tfilter(() => this.playing && this.player),\r\n\t\t\ttap(() => {\r\n\t\t\t\tthis.progress.style.strokeDashoffset =\r\n\t\t\t\t\tthis.player.getCurrentTime() / this.player.getDuration();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\ttogglePlay() {\r\n\t\t// console.log('VideoComponent.togglePlay');\r\n\t\tif (this.playing) {\r\n\t\t\tthis.pause();\r\n\t\t} else {\r\n\t\t\tthis.play();\r\n\t\t}\r\n\t}\r\n\r\n\tplay() {\r\n\t\t// console.log('VideoComponent.play');\r\n\t\tif (!this.player) {\r\n\t\t\tthis.initPlayer();\r\n\t\t} else {\r\n\t\t\tthis.player.playVideo();\r\n\t\t}\r\n\t}\r\n\r\n\tpause() {\r\n\t\tif (!this.player) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.player.stopVideo();\r\n\t}\r\n\r\n\tstatic once$() {\r\n\t\tif (this.youtube$) {\r\n\t\t\treturn this.youtube$;\r\n\t\t} else {\r\n\t\t\tthis.youtube$ = new BehaviorSubject(null).pipe(\r\n\t\t\t\tfilter(youtube => youtube !== null)\r\n\t\t\t);\r\n\t\t\twindow.onYouTubeIframeAPIReady = this.onYouTubeIframeAPIReady_.bind(this);\r\n\t\t\tconst script = document.createElement('script');\r\n\t\t\tconst scripts = document.querySelectorAll('script');\r\n\t\t\tconst last = scripts[scripts.length - 1];\r\n\t\t\tlast.parentNode.insertBefore(script, last);\r\n\t\t\tscript.src = '//www.youtube.com/iframe_api';\r\n\t\t\treturn this.youtube$;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic onYouTubeIframeAPIReady_() {\r\n\t\t// console.log('onYouTubeIframeAPIReady');\r\n\t\tthis.youtube$.next(window.YT);\r\n\t}\r\n\r\n\tstatic mobilecheck() {\r\n\t\tlet check = false;\r\n\t\t(function(a) { if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true; })(navigator.userAgent || navigator.vendor || window.opera);\r\n\t\treturn check;\r\n\t}\r\n\r\n\tstatic mobileAndTabletcheck() {\r\n\t\tlet check = false;\r\n\t\t(function(a) { if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true; })(navigator.userAgent || navigator.vendor || window.opera);\r\n\t\treturn check;\r\n\t}\r\n\r\n}\r\n\r\nYoutubeComponent.MOBILE = YoutubeComponent.mobileAndTabletcheck();\r\n\r\nYoutubeComponent.meta = {\r\n\tselector: '[youtube]',\r\n\tinputs: ['youtubeId', 'title']\r\n};\r\n","import { CoreModule, Module } from 'rxcomp';\r\nimport { FormModule } from 'rxcomp-form';\r\nimport AppComponent from './app.component';\r\nimport ChannelPageComponent from './channel/channel-page.component';\r\nimport ChannelComponent from './channel/channel.component';\r\nimport CountPipe from './count/count.pipe';\r\nimport DatePipe from './date/date.pipe';\r\nimport DropdownItemDirective from './dropdown/dropdown-item.directive';\r\nimport DropdownDirective from './dropdown/dropdown.directive';\r\nimport EventDateComponent from './event/event-date.component';\r\nimport EventPageComponent from './event/event-page.component';\r\nimport EventComponent from './event/event.component';\r\nimport ErrorsComponent from './forms/errors.component';\r\nimport HtmlPipe from './html/html.pipe';\r\nimport IndexPageComponent from './index/index-page.component';\r\nimport LazyDirective from './lazy/lazy.directive';\r\nimport ModalOutletComponent from './modal/modal-outlet.component';\r\nimport ModalComponent from './modal/modal.component';\r\nimport RegisterOrLoginComponent from './register-or-login/register-or-login.component';\r\nimport RelativeDateDirective from './relative-date/relative-date.component';\r\nimport RelativeDatePipe from './relative-date/relative-date.pipe';\r\nimport ScrollToDirective from './scroll-to/scroll-to.directive';\r\nimport SecureDirective from './secure/secure.directive';\r\nimport SwiperEventsDirective from './swiper/swiper-events.directive';\r\nimport SwiperSlidesDirective from './swiper/swiper-slides.directive';\r\nimport SwiperTopEventsDirective from './swiper/swiper-top-events.directive';\r\nimport SwiperDirective from './swiper/swiper.directive';\r\nimport ThronComponent from './thron/thron.component';\r\nimport VideoComponent from './video/video.component';\r\nimport VirtualStructure from './virtual/virtual.structure';\r\nimport YoutubeComponent from './youtube/youtube.component';\r\n\r\nexport default class AppModule extends Module {}\r\n\r\nAppModule.meta = {\r\n\timports: [\r\n\t\tCoreModule,\r\n\t\tFormModule,\r\n\t],\r\n\tdeclarations: [\r\n\t\tChannelComponent,\r\n\t\tChannelPageComponent,\r\n\t\tCountPipe,\r\n\t\tDatePipe,\r\n\t\tDropdownDirective,\r\n\t\tDropdownItemDirective,\r\n\t\tErrorsComponent,\r\n\t\tEventComponent,\r\n\t\tEventDateComponent,\r\n\t\tEventPageComponent,\r\n\t\tHtmlPipe,\r\n\t\tIndexPageComponent,\r\n\t\tLazyDirective,\r\n\t\tModalComponent,\r\n\t\tModalOutletComponent,\r\n\t\tRegisterOrLoginComponent,\r\n\t\tRelativeDateDirective,\r\n\t\tRelativeDatePipe,\r\n\t\tScrollToDirective,\r\n\t\tSecureDirective,\r\n\t\tSwiperDirective,\r\n\t\tSwiperEventsDirective,\r\n\t\tSwiperSlidesDirective,\r\n\t\tSwiperTopEventsDirective,\r\n\t\tThronComponent,\r\n\t\tVirtualStructure,\r\n\t\tVideoComponent,\r\n\t\tYoutubeComponent,\r\n\t],\r\n\tbootstrap: AppComponent,\r\n};\r\n","import { Browser } from 'rxcomp';\r\nimport AppModule from './app.module';\r\n\r\nBrowser.bootstrap(AppModule);\r\n"]}